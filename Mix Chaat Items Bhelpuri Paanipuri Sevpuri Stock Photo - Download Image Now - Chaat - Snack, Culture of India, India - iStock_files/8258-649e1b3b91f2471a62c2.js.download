/*! For license information please see 8258-649e1b3b91f2471a62c2.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[8258],{80977:function(t,e,n){"use strict";var r=n(84481),i=(0,r.createContext)([]);e.Z=i},31120:function(t,e,n){"use strict";n.d(e,{$8:function(){return f},WR:function(){return a},dB:function(){return l},eU:function(){return o},wh:function(){return i}});var r=n(65727),i="RfSubscription",o="PremiumAccessAgreement",a=function(t){return"AffiliateFree"===t},u=function(t){switch(t){case"OneMonth":return"monthly";case"ThreeMonth":return"quarterly";case"SixMonth":return"semi_annually";default:return"annual"}},c=function(t){var e=!!t&&t.match(/\d+/);return e?e[0].replace(/^0+/,""):void 0},s=function(t){if(t)return t.match(/prem/i)?t.match(/plus/i)?"signatureplus":"signature":"essentials"},l=function(t){switch(t){case"RfImage":case"RfLicense":case"RmImage":case"RmLicense":case"RrClip":case"RfClip":return"asset";case"ImagePack":return"image_pack";case i:return"subscription";case"CreditPack":return"credits";case"ServiceFee":return"service_fee";case"XProduct":case"Audio":case"Multimedia":case"RrImage":case"XClipRf":return"x_product";case o:return"pa_agreement";default:return}},f=function(t){var e;if(void 0===t&&(t=null),t&&0!==t.length)return null==(e=t)?void 0:e.filter((function(t){return!/_upsell/.test(t.product_type)})).map((function(t){return function(t){var e,n,i,o,a,f,d,h,p,v,m=(0,r.o$)(t),g=m.finalPrice,y=m.discount,b=l(t.product_type),$=["Promotion","None"].includes(t.discount_type)?void 0:t.discount_type;return Object.assign({item_id:null!=(e=t.sku)?e:t.asset_id,item_name:null!=(n=t.description)?n:void 0,currency:"USD",discount:(0,r.FW)(y,t.currency_code),price:(0,r.FW)(g,t.currency_code),item_brand:null!=(i=window.currentSite)&&i.isiStock?"istock":"getty",quantity:1,coupon:$,item_category:b},"asset"===b&&{item_category2:null==(o=t.asset_type)?void 0:o.toLowerCase(),item_variant:null==(a=t.license_type)?void 0:a.toLowerCase(),item_list_name:null==(f=t.asset_type)?void 0:f.toLowerCase()},"image_pack"===b&&{item_category2:(v=t.sku,v.includes("PREMPCKHI")?"high":v.includes("PREMPCKMD")?"medium":"small"),item_variant:c(t.sku),item_list_name:(p=t.sku,p.includes("PREMPCKHI")?"high_image_packs":p.includes("PREMPCKMD")?"medium_image_packs":"small_image_packs_")},"subscription"===b&&{item_category2:u(t.duration),item_category3:(h=t.purchase_type,"upgrade"===(null==h?void 0:h.toLowerCase())?"upgrade":"renew"===(null==h?void 0:h.toLowerCase())||"expireandrenew"===(null==h?void 0:h.toLowerCase())?"renewal":void 0),item_variant:null==(d=t.download_limit)?void 0:d.toString(),item_list_name:"subscriptions",item_list_id:s(t.sku),coupon:t.alternate_price_name&&!$?t.alternate_price_name:$},"pa_agreement"===b&&{item_list_name:"pa_agreement"},"credits"===b&&{item_variant:c(t.sku),item_list_name:"credits"},{location_id:t.location_id?t.location_id:void 0})}(t)}))}},65727:function(t,e,n){"use strict";n.d(e,{FW:function(){return Xt},T4:function(){return Gt},ji:function(){return qt},o$:function(){return Zt}});var r,i,o=9e15,a=1e9,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",s="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",l={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-o,maxE:o,crypto:!1},f=!0,d="[DecimalError] ",h=d+"Invalid argument: ",p=d+"Precision limit exceeded",v=d+"crypto unavailable",m="[object Decimal]",g=Math.floor,y=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,w=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,k=1e7,S=7,C=c.length-1,_=s.length-1,M={toStringTag:m};function E(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=S-r.length)&&(o+=j(n)),o+=r;a=t[e],(n=S-(r=a+"").length)&&(o+=j(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function T(t,e,n){if(t!==~~t||t<e||t>n)throw Error(h+t)}function I(t,e,n,r){var i,o,a,u;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=S,i=0):(i=Math.ceil((e+1)/S),e%=S),o=y(10,S-e),u=t[i]%o|0,null==r?e<3?(0==e?u=u/100|0:1==e&&(u=u/10|0),a=n<4&&99999==u||n>3&&49999==u||5e4==u||0==u):a=(n<4&&u+1==o||n>3&&u+1==o/2)&&(t[i+1]/o/100|0)==y(10,e-2)-1||(u==o/2||0==u)&&0==(t[i+1]/o/100|0):e<4?(0==e?u=u/1e3|0:1==e?u=u/100|0:2==e&&(u=u/10|0),a=(r||n<4)&&9999==u||!r&&n>3&&4999==u):a=((r||n<4)&&u+1==o||!r&&n>3&&u+1==o/2)&&(t[i+1]/o/1e3|0)==y(10,e-3)-1,a}function P(t,e,n){for(var r,i,o=[0],a=0,c=t.length;a<c;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=u.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}M.absoluteValue=M.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),A(t)},M.ceil=function(){return A(new this.constructor(this),this.e+1,2)},M.clampedTo=M.clamp=function(t,e){var n=this,r=n.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(h+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new r(n)},M.comparedTo=M.cmp=function(t){var e,n,r,i,o=this,a=o.d,u=(t=new o.constructor(t)).d,c=o.s,s=t.s;if(!a||!u)return c&&s?c!==s?c:a===u?0:!a^c<0?1:-1:NaN;if(!a[0]||!u[0])return a[0]?c:u[0]?-s:0;if(c!==s)return c;if(o.e!==t.e)return o.e>t.e^c<0?1:-1;for(e=0,n=(r=a.length)<(i=u.length)?r:i;e<n;++e)if(a[e]!==u[e])return a[e]>u[e]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1},M.cosine=M.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?i=(1/X(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");t.precision+=n,e=G(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,Y(r,n)),r.precision=t,r.rounding=e,A(2==i||3==i?n.neg():n,t,e,!0)):new r(1):new r(NaN)},M.cubeRoot=M.cbrt=function(){var t,e,n,r,i,o,a,u,c,s,l=this,d=l.constructor;if(!l.isFinite()||l.isZero())return new d(l);for(f=!1,(o=l.s*y(l.s*l,1/3))&&Math.abs(o)!=1/0?r=new d(o.toString()):(n=E(l.d),(o=((t=l.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=y(n,1/3),t=g((t+1)/3)-(t%3==(t<0?-1:2)),(r=new d(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=l.s),a=(t=d.precision)+3;;)if(s=(c=(u=r).times(u).times(u)).plus(l),r=R(s.plus(l).times(u),s.plus(c),a+2,1),E(u.d).slice(0,a)===(n=E(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(A(r,t+1,1),e=!r.times(r).times(r).eq(l));break}if(!i&&(A(u,t+1,0),u.times(u).times(u).eq(l))){r=u;break}a+=4,i=1}return f=!0,A(r,t,d.rounding,e)},M.decimalPlaces=M.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-g(this.e/S))*S,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},M.dividedBy=M.div=function(t){return R(this,new this.constructor(t))},M.dividedToIntegerBy=M.divToInt=function(t){var e=this.constructor;return A(R(this,new e(t),0,1,1),e.precision,e.rounding)},M.equals=M.eq=function(t){return 0===this.cmp(t)},M.floor=function(){return A(new this.constructor(this),this.e+1,3)},M.greaterThan=M.gt=function(t){return this.cmp(t)>0},M.greaterThanOrEqualTo=M.gte=function(t){var e=this.cmp(t);return 1==e||0===e},M.hyperbolicCosine=M.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,u=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return u;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?e=(1/X(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=G(a,1,o.times(e),new a(1),!0);for(var c,s=t,l=new a(8);s--;)c=o.times(o),o=u.minus(c.times(l.minus(c.times(l))));return A(o,a.precision=n,a.rounding=r,!0)},M.hyperbolicSine=M.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=G(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=G(o,2,i=i.times(1/X(5,t)),i,!0);for(var a,u=new o(5),c=new o(16),s=new o(20);t--;)a=i.times(i),i=i.times(u.plus(a.times(c.times(a).plus(s))))}return o.precision=e,o.rounding=n,A(i,e,n,!0)},M.hyperbolicTangent=M.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,R(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},M.inverseCosine=M.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?D(n,i,o):new n(0):new n(NaN):e.isZero()?D(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=D(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},M.inverseHyperbolicCosine=M.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},M.inverseHyperbolicSine=M.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,r.precision=t,r.rounding=e,n.ln())},M.inverseHyperbolicTangent=M.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?A(new o(i),t,e,!0):(o.precision=n=r-i.e,i=R(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},M.inverseSine=M.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=D(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},M.inverseTangent=M.atan=function(){var t,e,n,r,i,o,a,u,c,s=this,l=s.constructor,d=l.precision,h=l.rounding;if(s.isFinite()){if(s.isZero())return new l(s);if(s.abs().eq(1)&&d+4<=_)return(a=D(l,d+4,h).times(.25)).s=s.s,a}else{if(!s.s)return new l(NaN);if(d+4<=_)return(a=D(l,d+4,h).times(.5)).s=s.s,a}for(l.precision=u=d+10,l.rounding=1,t=n=Math.min(28,u/S+2|0);t;--t)s=s.div(s.times(s).plus(1).sqrt().plus(1));for(f=!1,e=Math.ceil(u/S),r=1,c=s.times(s),a=new l(s),i=s;-1!==t;)if(i=i.times(c),o=a.minus(i.div(r+=2)),i=i.times(c),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),f=!0,A(a,l.precision=d,l.rounding=h,!0)},M.isFinite=function(){return!!this.d},M.isInteger=M.isInt=function(){return!!this.d&&g(this.e/S)>this.d.length-2},M.isNaN=function(){return!this.s},M.isNegative=M.isNeg=function(){return this.s<0},M.isPositive=M.isPos=function(){return this.s>0},M.isZero=function(){return!!this.d&&0===this.d[0]},M.lessThan=M.lt=function(t){return this.cmp(t)<0},M.lessThanOrEqualTo=M.lte=function(t){return this.cmp(t)<1},M.logarithm=M.log=function(t){var e,n,r,i,o,a,u,c,s=this,l=s.constructor,d=l.precision,h=l.rounding;if(null==t)t=new l(10),e=!0;else{if(n=(t=new l(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=s.d,s.s<0||!n||!n[0]||s.eq(1))return new l(n&&!n[0]?-1/0:1!=s.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(f=!1,a=W(s,u=d+5),r=e?z(l,u+10):W(t,u),I((c=R(a,r,u,1)).d,i=d,h))do{if(a=W(s,u+=10),r=e?z(l,u+10):W(t,u),c=R(a,r,u,1),!o){+E(c.d).slice(i+1,i+15)+1==1e14&&(c=A(c,d+1,0));break}}while(I(c.d,i+=10,h));return f=!0,A(c,d,h)},M.minus=M.sub=function(t){var e,n,r,i,o,a,u,c,s,l,d,h,p=this,v=p.constructor;if(t=new v(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new v(t.d||p.s!==t.s?p:NaN):t=new v(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(s=p.d,h=t.d,u=v.precision,c=v.rounding,!s[0]||!h[0]){if(h[0])t.s=-t.s;else{if(!s[0])return new v(3===c?-0:0);t=new v(p)}return f?A(t,u,c):t}if(n=g(t.e/S),l=g(p.e/S),s=s.slice(),o=l-n){for((d=o<0)?(e=s,o=-o,a=h.length):(e=h,n=l,a=s.length),o>(r=Math.max(Math.ceil(u/S),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((d=(r=s.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(s[r]!=h[r]){d=s[r]<h[r];break}o=0}for(d&&(e=s,s=h,h=e,t.s=-t.s),a=s.length,r=h.length-a;r>0;--r)s[a++]=0;for(r=h.length;r>o;){if(s[--r]<h[r]){for(i=r;i&&0===s[--i];)s[i]=k-1;--s[i],s[r]+=k}s[r]-=h[r]}for(;0===s[--a];)s.pop();for(;0===s[0];s.shift())--n;return s[0]?(t.d=s,t.e=O(s,n),f?A(t,u,c):t):new v(3===c?-0:0)},M.modulo=M.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?A(new r(n),r.precision,r.rounding):(f=!1,9==r.modulo?(e=R(n,t.abs(),0,3,1)).s*=t.s:e=R(n,t,0,r.modulo,1),e=e.times(t),f=!0,n.minus(e))},M.naturalExponential=M.exp=function(){return H(this)},M.naturalLogarithm=M.ln=function(){return W(this)},M.negated=M.neg=function(){var t=new this.constructor(this);return t.s=-t.s,A(t)},M.plus=M.add=function(t){var e,n,r,i,o,a,u,c,s,l,d=this,h=d.constructor;if(t=new h(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new h(t.d||d.s===t.s?d:NaN)):t=new h(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(s=d.d,l=t.d,u=h.precision,c=h.rounding,!s[0]||!l[0])return l[0]||(t=new h(d)),f?A(t,u,c):t;if(o=g(d.e/S),r=g(t.e/S),s=s.slice(),i=o-r){for(i<0?(n=s,i=-i,a=l.length):(n=l,r=o,a=s.length),i>(a=(o=Math.ceil(u/S))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=s.length)-(i=l.length)<0&&(i=a,n=l,l=s,s=n),e=0;i;)e=(s[--i]=s[i]+l[i]+e)/k|0,s[i]%=k;for(e&&(s.unshift(e),++r),a=s.length;0==s[--a];)s.pop();return t.d=s,t.e=O(s,r),f?A(t,u,c):t},M.precision=M.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(h+t);return n.d?(e=F(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},M.round=function(){var t=this,e=t.constructor;return A(new e(t),t.e+1,e.rounding)},M.sine=M.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:G(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=e.times(1/X(5,n)),e=G(t,2,e,e);for(var i,o=new t(5),a=new t(16),u=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(u))));return e}(r,Y(r,n)),r.precision=t,r.rounding=e,A(i>2?n.neg():n,t,e,!0)):new r(NaN)},M.squareRoot=M.sqrt=function(){var t,e,n,r,i,o,a=this,u=a.d,c=a.e,s=a.s,l=a.constructor;if(1!==s||!u||!u[0])return new l(!s||s<0&&(!u||u[0])?NaN:u?a:1/0);for(f=!1,0==(s=Math.sqrt(+a))||s==1/0?(((e=E(u)).length+c)%2==0&&(e+="0"),s=Math.sqrt(e),c=g((c+1)/2)-(c<0||c%2),r=new l(e=s==1/0?"5e"+c:(e=s.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new l(s.toString()),n=(c=l.precision)+3;;)if(r=(o=r).plus(R(a,o,n+2,1)).times(.5),E(o.d).slice(0,n)===(e=E(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(A(r,c+1,1),t=!r.times(r).eq(a));break}if(!i&&(A(o,c+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return f=!0,A(r,c,l.rounding,t)},M.tangent=M.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=R(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,A(2==i||4==i?n.neg():n,t,e,!0)):new r(NaN)},M.times=M.mul=function(t){var e,n,r,i,o,a,u,c,s,l=this,d=l.constructor,h=l.d,p=(t=new d(t)).d;if(t.s*=l.s,!(h&&h[0]&&p&&p[0]))return new d(!t.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*t.s:t.s/0);for(n=g(l.e/S)+g(t.e/S),(c=h.length)<(s=p.length)&&(o=h,h=p,p=o,a=c,c=s,s=a),o=[],r=a=c+s;r--;)o.push(0);for(r=s;--r>=0;){for(e=0,i=c+r;i>r;)u=o[i]+p[r]*h[i-r-1]+e,o[i--]=u%k|0,e=u/k|0;o[i]=(o[i]+e)%k|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=O(o,n),f?A(t,d.precision,d.rounding):t},M.toBinary=function(t,e){return K(this,2,t,e)},M.toDecimalPlaces=M.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(T(t,0,a),void 0===e?e=r.rounding:T(e,0,8),A(n,t+n.e+1,e))},M.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=L(r,!0):(T(t,0,a),void 0===e?e=i.rounding:T(e,0,8),n=L(r=A(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},M.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=L(i):(T(t,0,a),void 0===e?e=o.rounding:T(e,0,8),n=L(r=A(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},M.toFraction=function(t){var e,n,r,i,o,a,u,c,s,l,d,p,v=this,m=v.d,g=v.constructor;if(!m)return new g(v);if(s=n=new g(1),r=c=new g(0),a=(o=(e=new g(r)).e=F(m)-v.e-1)%S,e.d[0]=y(10,a<0?S+a:a),null==t)t=o>0?e:s;else{if(!(u=new g(t)).isInt()||u.lt(s))throw Error(h+u);t=u.gt(e)?o>0?e:s:u}for(f=!1,u=new g(E(m)),l=g.precision,g.precision=o=m.length*S*2;d=R(u,e,0,1,1),1!=(i=n.plus(d.times(r))).cmp(t);)n=r,r=i,i=s,s=c.plus(d.times(i)),c=i,i=e,e=u.minus(d.times(i)),u=i;return i=R(t.minus(n),r,0,1,1),c=c.plus(i.times(s)),n=n.plus(i.times(r)),c.s=s.s=v.s,p=R(s,r,o,1).minus(v).abs().cmp(R(c,n,o,1).minus(v).abs())<1?[s,r]:[c,n],g.precision=l,f=!0,p},M.toHexadecimal=M.toHex=function(t,e){return K(this,16,t,e)},M.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:T(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(f=!1,n=R(n,t,0,e,1).times(t),f=!0,A(n)):(t.s=n.s,n=t),n},M.toNumber=function(){return+this},M.toOctal=function(t,e){return K(this,8,t,e)},M.toPower=M.pow=function(t){var e,n,r,i,o,a,u=this,c=u.constructor,s=+(t=new c(t));if(!(u.d&&t.d&&u.d[0]&&t.d[0]))return new c(y(+u,s));if((u=new c(u)).eq(1))return u;if(r=c.precision,o=c.rounding,t.eq(1))return A(u,r,o);if((e=g(t.e/S))>=t.d.length-1&&(n=s<0?-s:s)<=9007199254740991)return i=B(c,u,n,r),t.s<0?new c(1).div(i):A(i,r,o);if((a=u.s)<0){if(e<t.d.length-1)return new c(NaN);if(0==(1&t.d[e])&&(a=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=a,u}return(e=0!=(n=y(+u,s))&&isFinite(n)?new c(n+"").e:g(s*(Math.log("0."+E(u.d))/Math.LN10+u.e+1)))>c.maxE+1||e<c.minE-1?new c(e>0?a/0:0):(f=!1,c.rounding=u.s=1,n=Math.min(12,(e+"").length),(i=H(t.times(W(u,r+n)),r)).d&&I((i=A(i,r+5,1)).d,r,o)&&(e=r+10,+E((i=A(H(t.times(W(u,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=A(i,r+1,0))),i.s=a,f=!0,c.rounding=o,A(i,r,o))},M.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=L(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(T(t,1,a),void 0===e?e=i.rounding:T(e,0,8),n=L(r=A(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},M.toSignificantDigits=M.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(T(t,1,a),void 0===e?e=n.rounding:T(e,0,8)),A(new n(this),t,e)},M.toString=function(){var t=this,e=t.constructor,n=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},M.truncated=M.trunc=function(){return A(new this.constructor(this),this.e+1,1)},M.valueOf=M.toJSON=function(){var t=this,e=t.constructor,n=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var R=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(i,o,a,u,c,s){var l,f,d,h,p,v,m,y,b,$,x,w,C,_,M,E,T,I,P,R,L=i.constructor,O=i.s==o.s?1:-1,z=i.d,D=o.d;if(!(z&&z[0]&&D&&D[0]))return new L(i.s&&o.s&&(z?!D||z[0]!=D[0]:D)?z&&0==z[0]||!D?0*O:O/0:NaN);for(s?(p=1,f=i.e-o.e):(s=k,p=S,f=g(i.e/p)-g(o.e/p)),P=D.length,T=z.length,$=(b=new L(O)).d=[],d=0;D[d]==(z[d]||0);d++);if(D[d]>(z[d]||0)&&f--,null==a?(_=a=L.precision,u=L.rounding):_=c?a+(i.e-o.e)+1:a,_<0)$.push(1),v=!0;else{if(_=_/p+2|0,d=0,1==P){for(h=0,D=D[0],_++;(d<T||h)&&_--;d++)M=h*s+(z[d]||0),$[d]=M/D|0,h=M%D|0;v=h||d<T}else{for((h=s/(D[0]+1)|0)>1&&(D=t(D,h,s),z=t(z,h,s),P=D.length,T=z.length),E=P,w=(x=z.slice(0,P)).length;w<P;)x[w++]=0;(R=D.slice()).unshift(0),I=D[0],D[1]>=s/2&&++I;do{h=0,(l=e(D,x,P,w))<0?(C=x[0],P!=w&&(C=C*s+(x[1]||0)),(h=C/I|0)>1?(h>=s&&(h=s-1),1==(l=e(m=t(D,h,s),x,y=m.length,w=x.length))&&(h--,n(m,P<y?R:D,y,s))):(0==h&&(l=h=1),m=D.slice()),(y=m.length)<w&&m.unshift(0),n(x,m,w,s),-1==l&&(l=e(D,x,P,w=x.length))<1&&(h++,n(x,P<w?R:D,w,s)),w=x.length):0===l&&(h++,x=[0]),$[d++]=h,l&&x[0]?x[w++]=z[E]||0:(x=[z[E]],w=1)}while((E++<T||void 0!==x[0])&&_--);v=void 0!==x[0]}$[0]||$.shift()}if(1==p)b.e=f,r=v;else{for(d=1,h=$[0];h>=10;h/=10)d++;b.e=d+f*p-1,A(b,c?a+b.e+1:a,u,v)}return b}}();function A(t,e,n,r){var i,o,a,u,c,s,l,d,h,p=t.constructor;t:if(null!=e){if(!(d=t.d))return t;for(i=1,u=d[0];u>=10;u/=10)i++;if((o=e-i)<0)o+=S,a=e,c=(l=d[h=0])/y(10,i-a-1)%10|0;else if((h=Math.ceil((o+1)/S))>=(u=d.length)){if(!r)break t;for(;u++<=h;)d.push(0);l=c=0,i=1,a=(o%=S)-S+1}else{for(l=u=d[h],i=1;u>=10;u/=10)i++;c=(a=(o%=S)-S+i)<0?0:l/y(10,i-a-1)%10|0}if(r=r||e<0||void 0!==d[h+1]||(a<0?l:l%y(10,i-a-1)),s=n<4?(c||r)&&(0==n||n==(t.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(o>0?a>0?l/y(10,i-a):0:d[h-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,s?(e-=t.e+1,d[0]=y(10,(S-e%S)%S),t.e=-e||0):d[0]=t.e=0,t;if(0==o?(d.length=h,u=1,h--):(d.length=h+1,u=y(10,S-o),d[h]=a>0?(l/y(10,i-a)%y(10,a)|0)*u:0),s)for(;;){if(0==h){for(o=1,a=d[0];a>=10;a/=10)o++;for(a=d[0]+=u,u=1;a>=10;a/=10)u++;o!=u&&(t.e++,d[0]==k&&(d[0]=1));break}if(d[h]+=u,d[h]!=k)break;d[h--]=0,u=1}for(o=d.length;0===d[--o];)d.pop()}return f&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function L(t,e,n){if(!t.isFinite())return U(t);var r,i=t.e,o=E(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+j(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+j(-i-1)+o,n&&(r=n-a)>0&&(o+=j(r))):i>=a?(o+=j(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+j(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=j(r))),o}function O(t,e){var n=t[0];for(e*=S;n>=10;n/=10)e++;return e}function z(t,e,n){if(e>C)throw f=!0,n&&(t.precision=n),Error(p);return A(new t(c),e,1,!0)}function D(t,e,n){if(e>_)throw Error(p);return A(new t(s),e,n,!0)}function F(t){var e=t.length-1,n=e*S+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function j(t){for(var e="";t--;)e+="0";return e}function B(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/S+4);for(f=!1;;){if(n%2&&J((o=o.times(e)).d,a)&&(i=!0),0===(n=g(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}J((e=e.times(e)).d,a)}return f=!0,o}function N(t){return 1&t.d[t.d.length-1]}function V(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function H(t,e){var n,r,i,o,a,u,c,s=0,l=0,d=0,h=t.constructor,p=h.rounding,v=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(f=!1,c=v):c=e,u=new h(.03125);t.e>-2;)t=t.times(u),d+=5;for(c+=r=Math.log(y(2,d))/Math.LN10*2+5|0,n=o=a=new h(1),h.precision=c;;){if(o=A(o.times(t),c,1),n=n.times(++l),E((u=a.plus(R(o,n,c,1))).d).slice(0,c)===E(a.d).slice(0,c)){for(i=d;i--;)a=A(a.times(a),c,1);if(null!=e)return h.precision=v,a;if(!(s<3&&I(a.d,c-r,p,s)))return A(a,h.precision=v,p,f=!0);h.precision=c+=10,n=o=u=new h(1),l=0,s++}a=u}}function W(t,e){var n,r,i,o,a,u,c,s,l,d,h,p=1,v=t,m=v.d,g=v.constructor,y=g.rounding,b=g.precision;if(v.s<0||!m||!m[0]||!v.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=v.s?NaN:m?0:v);if(null==e?(f=!1,l=b):l=e,g.precision=l+=10,r=(n=E(m)).charAt(0),!(Math.abs(o=v.e)<15e14))return s=z(g,l+2,b).times(o+""),v=W(new g(r+"."+n.slice(1)),l-10).plus(s),g.precision=b,null==e?A(v,b,y,f=!0):v;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=E((v=v.times(t)).d)).charAt(0),p++;for(o=v.e,r>1?(v=new g("0."+n),o++):v=new g(r+"."+n.slice(1)),d=v,c=a=v=R(v.minus(1),v.plus(1),l,1),h=A(v.times(v),l,1),i=3;;){if(a=A(a.times(h),l,1),E((s=c.plus(R(a,new g(i),l,1))).d).slice(0,l)===E(c.d).slice(0,l)){if(c=c.times(2),0!==o&&(c=c.plus(z(g,l+2,b).times(o+""))),c=R(c,new g(p),l,1),null!=e)return g.precision=b,c;if(!I(c.d,l-10,y,u))return A(c,g.precision=b,y,f=!0);g.precision=l+=10,s=a=v=R(d.minus(1),d.plus(1),l,1),h=A(v.times(v),l,1),i=u=1}c=s,i+=2}}function U(t){return String(t.s*t.s/0)}function Z(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%S,n<0&&(r+=S),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=S;r<i;)t.d.push(+e.slice(r,r+=S));e=e.slice(r),r=S-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),f&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function q(t,e){var n,r,i,o,a,u,c,s,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),w.test(e))return Z(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if($.test(e))n=16,e=e.toLowerCase();else if(b.test(e))n=2;else{if(!x.test(e))throw Error(h+e);n=8}for((o=e.search(/p/i))>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,r=t.constructor,a&&(o=(u=(e=e.replace(".","")).length)-o,i=B(r,new r(n),o,2*o)),o=l=(s=P(e,n,k)).length-1;0===s[o];--o)s.pop();return o<0?new r(0*t.s):(t.e=O(s,l),t.d=s,f=!1,a&&(t=R(t,i,4*u)),c&&(t=t.times(Math.abs(c)<54?y(2,c):jt.pow(2,c))),f=!0,t)}function G(t,e,n,r,i){var o,a,u,c,s=t.precision,l=Math.ceil(s/S);for(f=!1,c=n.times(n),u=new t(r);;){if(a=R(u.times(c),new t(e++*e++),s,1),u=i?r.plus(a):r.minus(a),r=R(a.times(c),new t(e++*e++),s,1),void 0!==(a=u.plus(r)).d[l]){for(o=l;a.d[o]===u.d[o]&&o--;);if(-1==o)break}o=u,u=r,r=a,a=o}return f=!0,a.d.length=l+1,a}function X(t,e){for(var n=t;--e;)n*=t;return n}function Y(t,e){var n,r=e.s<0,o=D(t,t.precision,1),a=o.times(.5);if((e=e.abs()).lte(a))return i=r?4:1,e;if((n=e.divToInt(o)).isZero())i=r?3:2;else{if((e=e.minus(n.times(o))).lte(a))return i=N(n)?r?2:3:r?4:1,e;i=N(n)?r?1:4:r?3:2}return e.minus(o).abs()}function K(t,e,n,i){var o,c,s,l,f,d,h,p,v,m=t.constructor,g=void 0!==n;if(g?(T(n,1,a),void 0===i?i=m.rounding:T(i,0,8)):(n=m.precision,i=m.rounding),t.isFinite()){for(g?(o=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):o=e,(s=(h=L(t)).indexOf("."))>=0&&(h=h.replace(".",""),(v=new m(1)).e=h.length-s,v.d=P(L(v),10,o),v.e=v.d.length),c=f=(p=P(h,10,o)).length;0==p[--f];)p.pop();if(p[0]){if(s<0?c--:((t=new m(t)).d=p,t.e=c,p=(t=R(t,v,n,i,0,o)).d,c=t.e,d=r),s=p[n],l=o/2,d=d||void 0!==p[n+1],d=i<4?(void 0!==s||d)&&(0===i||i===(t.s<0?3:2)):s>l||s===l&&(4===i||d||6===i&&1&p[n-1]||i===(t.s<0?8:7)),p.length=n,d)for(;++p[--n]>o-1;)p[n]=0,n||(++c,p.unshift(1));for(f=p.length;!p[f-1];--f);for(s=0,h="";s<f;s++)h+=u.charAt(p[s]);if(g){if(f>1)if(16==e||8==e){for(s=16==e?4:3,--f;f%s;f++)h+="0";for(f=(p=P(h,o,e)).length;!p[f-1];--f);for(s=1,h="1.";s<f;s++)h+=u.charAt(p[s])}else h=h.charAt(0)+"."+h.slice(1);h=h+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)h="0"+h;h="0."+h}else if(++c>f)for(c-=f;c--;)h+="0";else c<f&&(h=h.slice(0,c)+"."+h.slice(c))}else h=g?"0p+0":"0";h=(16==e?"0x":2==e?"0b":8==e?"0o":"")+h}else h=U(t);return t.s<0?"-"+h:h}function J(t,e){if(t.length>e)return t.length=e,!0}function Q(t){return new this(t).abs()}function tt(t){return new this(t).acos()}function et(t){return new this(t).acosh()}function nt(t,e){return new this(t).plus(e)}function rt(t){return new this(t).asin()}function it(t){return new this(t).asinh()}function ot(t){return new this(t).atan()}function at(t){return new this(t).atanh()}function ut(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?D(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=D(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(R(t,e,o,1)),e=D(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(R(t,e,o,1)):(n=D(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function ct(t){return new this(t).cbrt()}function st(t){return A(t=new this(t),t.e+1,2)}function lt(t,e,n){return new this(t).clamp(e,n)}function ft(t){if(!t||"object"!=typeof t)throw Error(d+"Object expected");var e,n,r,i=!0===t.defaults,u=["precision",1,a,"rounding",0,8,"toExpNeg",-o,0,"toExpPos",0,o,"maxE",0,o,"minE",-o,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(n=u[e],i&&(this[n]=l[n]),void 0!==(r=t[n])){if(!(g(r)===r&&r>=u[e+1]&&r<=u[e+2]))throw Error(h+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=l[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(h+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[n]=!0}else this[n]=!1}return this}function dt(t){return new this(t).cos()}function ht(t){return new this(t).cosh()}function pt(t,e){return new this(t).div(e)}function vt(t){return new this(t).exp()}function mt(t){return A(t=new this(t),t.e+1,3)}function gt(){var t,e,n=new this(0);for(f=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return f=!0,new this(1/0);n=e}return f=!0,n.sqrt()}function yt(t){return t instanceof jt||t&&t.toStringTag===m||!1}function bt(t){return new this(t).ln()}function $t(t,e){return new this(t).log(e)}function xt(t){return new this(t).log(2)}function wt(t){return new this(t).log(10)}function kt(){return V(this,arguments,"lt")}function St(){return V(this,arguments,"gt")}function Ct(t,e){return new this(t).mod(e)}function _t(t,e){return new this(t).mul(e)}function Mt(t,e){return new this(t).pow(e)}function Et(t){var e,n,r,i,o=0,u=new this(1),c=[];if(void 0===t?t=this.precision:T(t,1,a),r=Math.ceil(t/S),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:c[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(v);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(c.push(i%1e7),o+=4);o=r/4}else for(;o<r;)c[o++]=1e7*Math.random()|0;for(r=c[--o],t%=S,r&&t&&(i=y(10,S-t),c[o]=(r/i|0)*i);0===c[o];o--)c.pop();if(o<0)n=0,c=[0];else{for(n=-1;0===c[0];n-=S)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<S&&(n-=S-r)}return u.e=n,u.d=c,u}function Tt(t){return A(t=new this(t),t.e+1,this.rounding)}function It(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Pt(t){return new this(t).sin()}function Rt(t){return new this(t).sinh()}function At(t){return new this(t).sqrt()}function Lt(t,e){return new this(t).sub(e)}function Ot(){var t=0,e=arguments,n=new this(e[t]);for(f=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return f=!0,A(n,this.precision,this.rounding)}function zt(t){return new this(t).tan()}function Dt(t){return new this(t).tanh()}function Ft(t){return A(t=new this(t),t.e+1,1)}M[Symbol.for("nodejs.util.inspect.custom")]=M.toString,M[Symbol.toStringTag]="Decimal";var jt=M.constructor=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,yt(t))return i.s=t.s,void(f?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"===(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(f?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):Z(i,t.toString())}if("string"!==r)throw Error(h+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),w.test(t)?Z(i,t):q(i,t)}if(o.prototype=M,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=ft,o.clone=t,o.isDecimal=yt,o.abs=Q,o.acos=tt,o.acosh=et,o.add=nt,o.asin=rt,o.asinh=it,o.atan=ot,o.atanh=at,o.atan2=ut,o.cbrt=ct,o.ceil=st,o.clamp=lt,o.cos=dt,o.cosh=ht,o.div=pt,o.exp=vt,o.floor=mt,o.hypot=gt,o.ln=bt,o.log=$t,o.log10=wt,o.log2=xt,o.max=kt,o.min=St,o.mod=Ct,o.mul=_t,o.pow=Mt,o.random=Et,o.round=Tt,o.sign=It,o.sin=Pt,o.sinh=Rt,o.sqrt=At,o.sub=Lt,o.sum=Ot,o.tan=zt,o.tanh=Dt,o.trunc=Ft,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(l);c=new jt(c),s=new jt(s);var Bt=n(17129),Nt={success:!0,timestamp:1677785699,base:"USD",date:"2023-03-02",rates:{AED:3.671655,ANG:1.79057775,ARS:230.2285479,AUD:1.50522782,BRL:4.97631993,CAD:1.35193389,CHF:.89766347,CLP:798.887948,CNY:6.98135838,COP:4542.563823,CRC:541.5533918,CZK:21.69204926,DKK:6.84929255,ECS:25e3,EEK:14.40350201,EUR:.91869716,GBP:.80114803,GRD:313.6782539,HKD:7.83804836,HUF:342.2782037,IDR:14808.23338,ILS:3.66650941,INR:82.27358105,ISK:138.2850442,JPY:137.0510721,KRW:1329.327626,MXN:17.75801508,MYR:4.5091654,NOK:10.80014144,NZD:1.6085789,PEN:3.68983253,PHP:55.7384085,PLN:4.17257155,PYG:7213.445863,RUB:79.19117304,SEK:10.454982,SGD:1.33964384,SIT:220.6010496,THB:34.19484978,TRY:19.70991344,TWD:30.74524002,USD:1,UYU:38.85065768,VEF:1e8,VND:23413.72044,ZAR:18.98290001}},Vt=function(t,e){return function(t,e){var n=e.from,r=void 0===n?null:n,i=e.to,o=void 0===i?null:i;if(null===t)return 0;try{return jt.div(t,Nt.rates[r]).times(Nt.rates[o]).toNumber()}catch(t){return void(0,Bt.FO)(t)}}(t,{from:e,to:"USD"})},Ht=n(31120),Wt=function(t){switch(t){case"Monthly":return 12;case"Quarterly":return 4;case"EverySixMonths":case"SemiAnnually":return 2;default:return 1}},Ut=function(t){try{return new jt(t)}catch(t){return(0,Bt.FO)(t),new jt(NaN)}},Zt=function(t){if(t.product_type===Ht.wh)return function(t){var e,n;if("Upgrade"===t.purchase_type&&t.hasOwnProperty("prorated_adjustment")){var r,i,o,a,u,c=t,s=!!c.periods_remaining,l=null!=(r=c.periods_remaining)?r:1,f=Ut(null==(i=c.prorated_adjustment)?void 0:i.amount),d=Ut(null==(o=c.original_list_price)?void 0:o.amount).add(f);n=Ut(s?null==(a=c.new_remaining_amount)?void 0:a.amount:null==(u=c.final_price)?void 0:u.amount).div(l),e=d.div(l)}else if("Installment"===t.purchase_type){var h;e=n=Ut(null==(h=t.final_price)?void 0:h.amount)}else if((0,Ht.WR)(t.purchase_type)){var p,v;e=Ut((null==(p=t.original_list_price)?void 0:p.amount)||(null==(v=t.original_price)?void 0:v.amount)).div(11),n=Ut(0)}else{var m,g,y,b=t.billing_schedule,$=Wt(b||t.selected_billing_frequency);n=b||1===$?Ut(null==(m=t.final_price)?void 0:m.amount):Ut(null==(g=t.final_price)?void 0:g.amount).div($),e=Ut(null==(y=t.original_list_price)?void 0:y.amount).div($)}var x=e.minus(n);return{originalPrice:e.toNumber(),finalPrice:n.toNumber(),discount:x.toNumber()}}(t);if(t.product_type===Ht.eU)return function(t){var e;if(t.billing_options){var n,r=Wt(t.selected_billing_frequency||t.billing_frequency);e=Ut(null==(n=t.final_price)?void 0:n.amount).div(r)}else{var i;e=Ut(null==(i=t.final_price)?void 0:i.amount)}return{originalPrice:e.toNumber(),finalPrice:e.toNumber(),discount:0}}(t);var e=t.original_price,n=t.final_price,r=Ut(null==n?void 0:n.amount),i=e&&(null==e?void 0:e.amount)>r.toNumber(),o=i?Ut(null==e?void 0:e.amount):r,a=i?o.minus(r):Ut(0);return{originalPrice:o.toNumber(),finalPrice:r.toNumber(),discount:a.toNumber()}},qt=function(t){if(void 0===t&&(t=null),!t)return 0;var e=t.filter((function(t){return!/_upsell/.test(t.product_type)})).map((function(t){return Zt(t)})).reduce((function(t,e){var n=e.finalPrice;return t.plus(n)}),Ut(0));return e.toNumber()},Gt=function(t){if(null!=t&&!isNaN(t))return Math.round(100*t)/100},Xt=function(t,e){if(null!=t&&!isNaN(t))return t=Vt(t,e),Gt(t)}},38098:function(t,e,n){"use strict";var r=n(85893),i=n(84481),o=n(80977);e.Z=function(t,e){return function(n){var a=(0,i.useContext)(o.Z),u=(0,i.useMemo)((function(){return[].concat(a,[e])}),[a,e]);return t.displayName="TrackingLocation("+e+")",(0,r.jsx)(o.Z.Provider,{value:u,children:(0,r.jsx)(t,Object.assign({},n))})}}},18930:function(t,e,n){"use strict";var r=n(84481),i=n(80977);e.Z=function(){var t=(0,r.useContext)(i.Z);return(0,r.useMemo)((function(){return 0===t.length?void 0:t.join("-")}),[t])}},97871:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){var e;return{event:"asset_interaction",event_name:"select_asset",asset_interaction:"select_asset",ui_element_location:null!=(e=t.ui_element_location)?e:"thumbnail",asset_id:t.asset_id,asset_type:t.asset_type,asset_family:t.asset_family,istock_collection:t.istock_collection,has_nudity:t.has_nudity}}))},21499:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){var e,n;return{event:"cta_interaction",event_name:null!=(e=t.cta_interaction)?e:"cta_clicked",cta_interaction:null!=(n=t.cta_interaction)?n:"cta_clicked",cta_text:t.cta_text,cta_url:t.cta_url,ui_element_location:t.ui_element_location}}))},75328:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){var e=t.asset_details,n=t.download_selection,r=void 0===n?null:n,i=t.ui_element_location,o=void 0===i?null:i;return{event:"download_interaction",event_name:"initiate_download",download_interaction:"initiate_download",download_selection:r,asset_id:e.asset_id,asset_type:e.asset_type,asset_family:e.asset_family,asset_category:e.asset_category,asset_size:e.asset_size,ui_element_location:o}}))},51155:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){return{event:"error_message_interaction",event_name:"error_message_shown",error_message_interaction:"error_message_shown",error_message_selection:t.error_message_selection,error_message_name:t.error_message_name,ui_element_location:t.ui_element_location}}))},31465:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){var e=t.event_name,n=t.member_interaction;return{event:"member_management_interaction",event_name:e,member_interaction:null!=n?n:e,member_selection:t.member_selection,ui_element_location:t.ui_element_location}}))},3871:function(t,e,n){"use strict";var r=n(17129);e.Z=(0,r.Qg)((function(t){var e=t.event_name,n=t.notification_description,r=t.ui_element_location,i=t.item_id;return{event:e,event_name:e,notification_interaction:"view_promotion",notification_description:n,notification_type:"promotion",ui_element_location:r,item_id:i,ecommerce:{creative_name:t.creative_name,promotion_name:n,items:[{item_id:i,item_name:t.item_name,coupon:t.coupon,location_id:r,item_category:t.item_category}]}}}))},97355:function(t,e,n){"use strict";n.d(e,{M:function(){return r}});var r=(0,n(17129).Qg)((function(t){var e=t.event_name;return{event:"search_interaction",event_name:e,search_interaction:e,search_selection:t.search_selection,ui_element_location:t.ui_element_location,search_grid_slot_number:t.search_grid_slot_number}}))},23369:function(t,e,n){"use strict";var r=n(31120),i=n(17129);e.Z=(0,i.Qg)((function(t){var e=t.products,n=t.ui_element_location,i=(0,r.$8)(e);return{event:"select_item",event_name:"select_item",item_id:i.map((function(t){return t.item_id})).join(","),ui_element_location:n,ecommerce:{items:i}}}))},63988:function(t,e,n){"use strict";var r=n(31120),i=n(17129);e.Z=(0,i.Qg)((function(t){var e=t.products,n=t.ui_element_location,i=(0,r.$8)(e);return{event:"view_item",event_name:"view_item",item_id:i.map((function(t){return t.item_id})).join(","),ui_element_location:n,ecommerce:{items:i}}}))},33176:function(t,e,n){"use strict";n.d(e,{xG:function(){return i}});var r={AED:{currencyDisplay:"narrowSymbol"},ARS:{currencyDisplay:"narrowSymbol",locale:"es-AR",customFormat:{currency:"AR$"}},AUD:{currencyDisplay:"narrowSymbol"},BRL:{currencyDisplay:"narrowSymbol"},CAD:{currencyDisplay:"narrowSymbol"},CHF:{currencyDisplay:"narrowSymbol",customFormat:{currency:"Fr."},locale:"de-CH"},CLP:{currencyDisplay:"narrowSymbol",customFormat:{currency:"CH$"},locale:"es-CL"},COP:{currencyDisplay:"narrowSymbol",customFormat:{currency:"COL$"},locale:"es-CO"},DKK:{currencyDisplay:"narrowSymbol",customFormat:{currency:"kr. ",symbolPlacement:"left"},locale:"da"},EUR:{},"EUR-FRA":{currencyDisplay:"narrowSymbol",customFormat:{group:" "}},"EUR-IRL":{currencyDisplay:"narrowSymbol",customFormat:{currency:" â‚¬",symbolPlacement:"right"},locale:"en-IE"},GBP:{currencyDisplay:"narrowSymbol"},HKD:{currencyDisplay:"symbol"},INR:{currencyDisplay:"narrowSymbol",locale:"hi-IN"},JPY:{currencyDisplay:"narrowSymbol"},KRW:{currencyDisplay:"narrowSymbol"},MXN:{currencyDisplay:"narrowSymbol",customFormat:{currency:"MX$",symbolPlacement:"left"},locale:"es-MX"},MYR:{currencyDisplay:"narrowSymbol"},NOK:{currencyDisplay:"narrowSymbol"},NZD:{currencyDisplay:"narrowSymbol"},PEN:{customFormat:{group:"."},currencyDisplay:"narrowSymbol",locale:"es-PE"},PHP:{currencyDisplay:"narrowSymbol"},SEK:{currencyDisplay:"narrowSymbol",customFormat:{currency:"kr ",decimal:".",group:",",symbolPlacement:"left"},locale:"sv-SE"},SGD:{currencyDisplay:"narrowSymbol"},THB:{currencyDisplay:"narrowSymbol"},TRY:{currencyDisplay:"narrowSymbol"},USD:{currencyDisplay:"narrowSymbol",locale:"en-us"}},i=function(t,e,n,i){void 0===i&&(i={});var o,a=function(t,e,n){var i=t;"EUR"===t&&"en-gb"===e&&(i="EUR-IRL"),"EUR"===t&&"fr"===e&&(i="EUR-FRA");var o=r[i];return[Object.assign({style:"currency",currency:o?t:"USD",currencyDisplay:null==o?void 0:o.currencyDisplay},n),o||r.USD]}(n,e,i),u=a[0],c=a[1],s=(null==c?void 0:c.locale)||e,l=t;!1===i.includeCents&&(l=Math.ceil(t));try{o=new Intl.NumberFormat(s,Object.assign({},u))}catch(t){if(!((t instanceof RangeError||t instanceof TypeError)&&"narrowSymbol"===u.currencyDisplay))throw t;o=new Intl.NumberFormat(s,Object.assign({},u,{currencyDisplay:"symbol"}))}return null!=c&&c.customFormat?function(t,e,n,r){var i=t.formatToParts(e);n.symbolPlacement&&function(t,e){var n=t.findIndex((function(t){return"currency"===t.type})),r=t[n];t.splice(n,1),"left"===e?t.unshift(r):t.push(r)}(i,n.symbolPlacement);var o=i.map((function(t){var e=r.currencyDisplay&&"currency"===t.type;return n[t.type]&&!e&&(t.value=n[t.type]),t.value})).join("").trim();return o}(o,l,c.customFormat,i):o.format(l)}},23967:function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.r(e);var o=function(){function t(){}var e=t.prototype;return e._parseQuery=function(t){for(var e,n={},i="image",o=r(t.toLowerCase().split("&"));!(e=o()).done;){var a=e.value,u=Array.from(a.split("=")),c=u[0],s=u[1];"assettype"===c&&(i=s),this._addItem(n,c,decodeURIComponent(s))}return n.assettype||this._addItem(n,"assettype",i),[n,i]},e._addItem=function(t,e,n){return t[e]||(t[e]={}),t[e][n]=n,!0},e._buildQuery=function(t){var e=this._parseQuery(t),n=e[0],r=e[1],i=["language","contracturl","assettype"],o=[];for(var a in n){var u=n[a];if(!i.contains(a))for(var c in u){var s=u[c];""!==s&&o.push(a+"="+encodeURIComponent(s))}}return[o.join("&"),r]},e.parseQuery=function(t){return this._parseQuery(t)},e.normalizeUrl=function(t){var e=t.split("?"),n=e[0];if(e.length>1){var r=e[1],i=this._buildQuery(r),o=i[0];i[1];return[n+"?"+o,r]}return[n,""]},e.normalizeUrlFromQuery=function(t){var e=this._buildQuery(t),n=e[0],r=e[1];return["/search/2/"+r+"?"+n,r]},t}();e.default=o},90847:function(t,e){"use strict";function n(){n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),u=new _(r||[]);return i(a,"_invoke",{value:w(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==e&&r.call(y,a)&&(m=y);var b=v.prototype=h.prototype=Object.create(m);function $(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(i,o,a,u){var c=f(t[i],t,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function w(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=k(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function k(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=v,i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},$(x.prototype),s(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},$(b),s(b,c,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=M,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function r(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,c,"next",t)}function c(t){r(a,i,o,u,c,"throw",t)}u(void 0)}))}}var o=new Promise((function(t){"undefined"!=typeof window&&document.addEventListener("CNSClients:ready",(function(e){return t(e.detail.clients)}),{once:!0})})),a=function(){var t=i(n().mark((function t(){var e,r,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Promise((function(t,n){e=setTimeout((function(){return n(new Error("CNS Clients timeout"))}),500)})),t.next=3,Promise.race([o,r]);case 3:return i=t.sent,clearTimeout(e),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=i(n().mark((function t(e){var r,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:if(r=t.sent,i=r.get(e)){t.next=6;break}throw new Error(e+" not found");case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.Z=u},5146:function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return o}});var o=function(){function t(){}return t.decodeQueryParams=function(t){var e=new URLSearchParams(t);return Object.fromEntries(e.entries())},t.encodeQueryParams=function(t){for(var e,n=[],i=r(Object.keys(t).sort());!(e=i()).done;){var o=e.value;n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]))}return n.join("&")},t.appendQueryParamsToString=function(t,e){var n=t.split("?"),r=n[0],i=n[1],o=i||"",a=this.encodeQueryParams(e);return i&&a&&(o=o.concat("&")),(o=o.concat(a))?r.concat("?").concat(o):r},t}()},59135:function(t,e,n){"use strict";n.d(e,{F5:function(){return $S},jZ:function(){return xt},xI:function(){return Ct},qR:function(){return Et},OW:function(){return It},Rc:function(){return At},e6:function(){return Ot},S2:function(){return ur},ML:function(){return bt},vs:function(){return DC},rK:function(){return tC},x1:function(){return TC},bA:function(){return me},zt:function(){return pt},y6:function(){return ir},rY:function(){return Be},a5:function(){return or},$o:function(){return et},wW:function(){return rt},fV:function(){return U},Zo:function(){return K},L$:function(){return H},b5:function(){return dt}});var r=n(84481),i=n.n(r);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=function(t,e){if(0===t.size)return{removed:0,restored:0};for(var n,r=0,i=0,a=o(t);!(n=a()).done;){var u=n.value;e.has(u)?i+=1:r+=1}return{removed:r,restored:i}};function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l,f=function(t,e){for(var n,r=new Set(t),i=c(e);!(n=i()).done;){var o=n.value;r.has(o)?r.delete(o):r.add(o)}return r},d=function(){},h=function(){},p=(0,r.createContext)({objects:[],hoveredListItem:null,objectListHovered:!1,maskingCoordinates:new Set,modificationCount:null,removedObjects:new Set,selectedObjects:new Set,addObjectMask:d,removeObjectMask:d,addHoveredListItem:d,removeHoveredListItem:h,modifyObjects:h,toggleObjectListHovered:h,toggleObjectSelected:d,clearMaskingAndHoverData:h,resetAllObjects:h,hasRemovedObjectsChange:function(){return!1},setModificationCount:function(){},setRemovedObjects:function(){}}),v=function(t){var e=t.objects,n=t.initialRemovedObjects,o=t.children,a=(0,r.useState)({removed:0,restored:0}),c=a[0],s=a[1],l=(0,r.useState)(!1),d=l[0],h=l[1],v=(0,r.useState)(null),m=v[0],g=v[1],y=(0,r.useState)(new Set(n)),b=y[0],$=y[1],x=(0,r.useState)(new Set),w=x[0],k=x[1],S=(0,r.useState)(new Set),C=S[0],_=S[1],M=(0,r.useCallback)((function(t){C.has(t.coordinates)||(C.add(t.coordinates),_(new Set(C)))}),[C]),E=(0,r.useCallback)((function(t){w.has(t)||C.has(t.coordinates)&&(C.delete(t.coordinates),_(new Set(C)))}),[w,C]),T=(0,r.useCallback)((function(t){g(t)}),[]),I=(0,r.useCallback)((function(){g(null)}),[]),P=(0,r.useCallback)((function(){h(!d)}),[d]),R=(0,r.useCallback)((function(t){w.has(t)?w.delete(t):w.add(t),k(new Set(w))}),[w]),A=(0,r.useCallback)((function(){k(new Set),_(new Set),h(!1),g(null)}),[]),L=(0,r.useCallback)((function(){s(u(w,b)),$(f(w,b)),A()}),[w,b,f,A]),O=(0,r.useCallback)((function(){A(),$(new Set)}),[]),z=(0,r.useCallback)((function(){return f(b,n).size>0}),[b,n]),D=(0,r.useMemo)((function(){return{objects:e,hoveredListItem:m,objectListHovered:d,maskingCoordinates:C,modificationCount:c,removedObjects:b,selectedObjects:w,addObjectMask:M,removeObjectMask:E,addHoveredListItem:T,removeHoveredListItem:I,modifyObjects:L,toggleObjectListHovered:P,toggleObjectSelected:R,clearMaskingAndHoverData:A,resetAllObjects:O,hasRemovedObjectsChange:z,setModificationCount:s,setRemovedObjects:$}}),[e,m,d,C,c,b,w,M,E,T,I,L,P,R,A,O,z,s,$]);return i().createElement(p.Provider,{value:D},o)};!function(t){t.RemoveBackground="RemoveBackground",t.RemoveObjects="RemoveObjects"}(l||(l={}));var m,g,y=(0,r.createContext)({activeModificationType:l.RemoveBackground,setActiveModificationType:function(t){}}),b=function(t){var e=t.initialModificationType,n=t.children,o=(0,r.useState)(e),a=o[0],u=o[1],c=(0,r.useMemo)((function(){return{activeModificationType:a,setActiveModificationType:u}}),[a]);return i().createElement(y.Provider,{value:c},n)},$=(0,r.createContext)({activeModifications:[],setActiveModifications:function(){},showModal:!1,openModal:function(){},closeModal:function(){},modalIsClosing:!1,showDropdown:!1,setShowDropdown:function(){},initialModificationType:l.RemoveBackground,initialBackgroundRemoved:(0,r.createRef)(),initialRemovedObjects:(0,r.createRef)(),showOpenAnimation:(0,r.createRef)(),openModalSessionId:(0,r.createRef)(),resetToOriginal:!1,setResetToOriginal:function(){},resetInitialModifications:function(){}}),x=function(t){var e=t.openWithModificationType,n=t.children,o=(0,r.useState)([]),a=o[0],u=o[1],c=(0,r.useState)(!!e),s=c[0],l=c[1],f=(0,r.useState)(!1),d=f[0],h=f[1],p=(0,r.useState)(!1),v=p[0],m=p[1],g=(0,r.useState)(e),y=g[0],b=g[1],x=(0,r.useState)(!1),w=x[0],k=x[1],S=(0,r.useRef)(!1),C=(0,r.useRef)(new Set),_=(0,r.useRef)(!e),M=(0,r.useRef)(Date.now().toString());(0,r.useEffect)((function(){document.body.classList.remove("modifications-modal")}),[]);var E=(0,r.useCallback)((function(t){b(t),M.current=Date.now().toString(),l(!0)}),[]),T=(0,r.useCallback)((function(t,e){void 0!==t&&(S.current=t),void 0!==e&&(C.current=e),_.current=!0,h(!0),setTimeout((function(){l(!1),h(!1)}),500)}),[]),I=(0,r.useCallback)((function(){S.current=!1,C.current=new Set}),[]),P=(0,r.useMemo)((function(){return{activeModifications:a,setActiveModifications:u,showModal:s,openModal:E,closeModal:T,modalIsClosing:d,showDropdown:v,setShowDropdown:m,initialModificationType:y,initialBackgroundRemoved:S,initialRemovedObjects:C,showOpenAnimation:_,openModalSessionId:M,resetToOriginal:w,setResetToOriginal:k,resetInitialModifications:I}}),[a,u,s,E,T,d,v,m,y,S,C,_,M,w,k,I]);return i().createElement($.Provider,{value:P},n)},w=function(){},k=(0,r.createContext)({backgroundRemoved:!1,setBackgroundRemoved:w,hasBackgroundChange:function(){return!1}}),S=function(t){var e=t.initialBackgroundRemoved,n=t.children,o=(0,r.useState)(e),a=o[0],u=o[1],c=(0,r.useCallback)((function(){return a!==e}),[a,e]),s=(0,r.useMemo)((function(){return{backgroundRemoved:a,setBackgroundRemoved:u,hasBackgroundChange:c}}),[a,u,c]);return i().createElement(k.Provider,{value:s},n)},C=function(){},_=(0,r.createContext)({showBackgroundError:!1,setShowBackgroundError:C,showObjectError:!1,setShowObjectError:C,showNotification:!1,setShowNotification:C,clearNotification:!1,setClearNotification:C}),M=function(t){var e=t.children,n=(0,r.useState)(!1),o=n[0],a=n[1],u=(0,r.useState)(!1),c=u[0],s=u[1],l=(0,r.useState)(!1),f=l[0],d=l[1],h=(0,r.useState)(!1),p=h[0],v=h[1],m=(0,r.useMemo)((function(){return{clearNotification:p,setClearNotification:v,showBackgroundError:o,setShowBackgroundError:a,showObjectError:c,setShowObjectError:s,showNotification:f,setShowNotification:d}}),[p,v,o,a,c,s,f,d]);return i().createElement(_.Provider,{value:m},e)},E=function(){},T=(0,r.createContext)({showFeedbackModal:!1,toggleFeedbackModal:E,showFeedbackBanner:!0,toggleFeedbackBanner:E}),I=function(t){var e=t.children,n=(0,r.useState)(!1),o=n[0],a=n[1],u=(0,r.useState)(!0),c=u[0],s=u[1],l=(0,r.useCallback)((function(){a(!o)}),[o]),f=(0,r.useCallback)((function(){s(!c)}),[c]),d=(0,r.useMemo)((function(){return{showFeedbackModal:o,toggleFeedbackModal:l,showFeedbackBanner:c,toggleFeedbackBanner:f}}),[o,l,c,f]);return i().createElement(T.Provider,{value:d},e)},P=n(52965),R=n.n(P),A="/components/asset-mod/api",L=function(t){var e=t.assetId;return R().get(A+"/modifications/"+e)},O=function(t){var e=t.assetId,n=t.visualId;return R().patch(A+"/modifications/reset/"+e+"/"+n)},z=function(t){var e=t.assetId,n=t.visualId,r=t.largeMainImageURL,i=t.openModalSessionId;return R().patch(A+"/modifications/record-restoration/"+e+"/"+n,{largeMainImageURL:r,openModalSessionId:""+i})},D=function(t){var e=t.assetId,n=t.visualId,r=t.openModalSessionId;return R().patch(A+"/modifications/discard-changes/"+e+"/"+n,{openModalSessionId:""+r})},F=n(82056),j=function(t,e){void 0===e&&(e={}),(0,F.r$)(t,e)},B=function(t,e){void 0===e&&(e={}),j(t,e)},N=n(6905),V=function(t){var e=t?"Restore":"Remove";!function(t){var e=t?"restored":"removed";window&&window.tracking_data&&(window.tracking_data.page_mode=window.tracking_data.page_mode?window.tracking_data.page_mode+"|adp_background_"+e:"adp_background_"+e)}(t),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"image_ADP_"+e+"_Background_Button_Click",adp_selection:"ADP_"+e+"_Background",ui_element_location:"image_adp_tools_panel_top"}})},H=function(){var t=(0,r.useContext)(ht);return{previewImage:t.previewImage,setPreviewImage:t.setPreviewImage,loading:t.loading}},W=n(24735),U=function(t){var e=(0,W.aF)().modificationsPermitted;return t.isImage&&!t.isIllustration&&!t.isVector&&e},Z=function(){return(0,r.useContext)(p)},q=function(){return(0,r.useContext)(y)},G=function(){return(0,r.useContext)($)},X=function(){return(0,r.useContext)(k)},Y=function(){return(0,r.useContext)(_)},K=function(){return(0,r.useContext)(T)},J=function(){var t=X().hasBackgroundChange,e=Z().hasRemovedObjectsChange;return t()||e()},Q=n(38130),tt=function(){var t=q().activeModificationType,e=X().backgroundRemoved,n=Z().modificationCount,r=void 0===n?{removed:0,restored:0}:n,i=(0,Q.T)(),o=r.removed,a=r.restored;return t===l.RemoveBackground?i(e?"background_removed":"background_restored"):1===o&&0===a?i("one_object_removed",{count:o}):o>1&&0===a?i("n_objects_removed",{count:o}):0===o&&1===a?i("one_object_restored",{count:a}):0===o&&a>1?i("n_objects_restored",{count:a}):1===o&&1===a?i("one_object_removed_one_object_restored",{removedCount:o,restoredCount:a}):o>=1&&a>=1?i("n_objects_removed_n_objects_restored",{removedCount:o,restoredCount:a}):null},et=function(){var t=(0,W._P)("BriaBackgroundModification"),e=(0,W._P)("BriaObjectModification"),n=t.isActive(),r=e.isActive();return{briaBackgroundModificationExperienceIsActive:n,briaObjectModificationExperienceIsActive:r,briaModificationExperiencesAreActive:n||r||!1}},nt=function(){return(0,r.useContext)(ht)},rt=function(t){var e=(0,W.aF)().cropPermitted,n=(0,W._P)("CropModificationAdp"),r=t.isImage&&!t.isIllustration&&!t.isVector;return n.isActive()&&r&&e},it=["happy","calm","surprised","angry","fear","contempt","disgusted","sad"];!function(t){t.Person="person",t.Background="background",t.Object="object"}(m||(m={})),function(t){t.High="high"}(g||(g={}));var ot=function(t){var e,n,r,i=t.type===m.Background,o=(null==(e=t.actions)||null==(n=e.remove)?void 0:n.includes(!0))&&!0===(null==(r=t.oracle)?void 0:r.remove);return i&&o||null},at=function(t){var e=t.permitted,n=t.actionsObjectArray;return e&&n.map((function(t){return ot(t)?{id:t.id,type:m.Background,labels:t.labels,modifications:["remove"]}:{}})).filter((function(t){return!!t.id}))||[]},ut=function(t){var e=t.permitted,n=t.actionsObjectArray;return e&&n.map((function(t){var e=function(t){var e,n,r=t.type!==m.Person,i=void 0===(null==(e=t.actions)?void 0:e.expression)||void 0===(null==(n=t.oracle)?void 0:n.expression);if(r||i)return null;var o=t.actions.expression,a=o?o.filter((function(e){return it.includes(e)&&t.oracle.expression[e]===g.High})):[];return a.length>0?a:null}(t);return e?{id:t.id,type:m.Person,labels:t.labels,modifications:e}:{}})).filter((function(t){return!!t.id}))||[]},ct=function(t){var e=t.permitted,n=t.width,r=t.height,i=t.actionsObjectArray;if(!e)return[];var o=i.map((function(t){var e,i,o,a,u=function(t){var e,n,r,i,o=null==t||null==(e=t.labels)?void 0:e.includes(m.Object),a=(null==(n=t.actions)||null==(r=n.remove)?void 0:r.includes(!0))&&(null==(i=t.oracle)?void 0:i.remove),u=t.type;return o&&a?u:null}(t);return u?{id:t.id,type:m.Object,labels:t.labels,modifications:u,coordinates:{x:(null==(e=t.rect)?void 0:e.x)/n*100,y:(null==(i=t.rect)?void 0:i.y)/r*100,h:(null==(o=t.rect)?void 0:o.h)/r*100,w:(null==(a=t.rect)?void 0:a.w)/n*100}}:{}})).filter((function(t){return!!t.id}))||[];return o.sort((function(t,e){return t.modifications.localeCompare(e.modifications)})),o},st=function(t){var e,n=t.assetInfo,r=t.permissions;if(!((null==(e=n.scene)?void 0:e.length)>0))return null;var i=r.backgroundModificationsPermitted,o=r.expressionModificationsPermitted,a=r.objectModificationsPermitted,u={background:at({permitted:i,actionsObjectArray:n.scene}),expressions:ut({permitted:o,actionsObjectArray:n.scene}),objects:ct({permitted:a,width:n.org_width,height:n.org_height,actionsObjectArray:n.scene})},c=function(t){var e=null;return t.background.length>0&&(e=m.Background),t.expressions.length>0&&(e=m.Person),t.objects.length>0&&(e=m.Object),e}(u);return c?{availableModifications:u,assetCanBeModified:!0,modificationType:c}:{availableModifications:null,assetCanBeModified:!1,modificationType:null}};function lt(){lt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function ft(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}var dt=function(t){var e=t.asset,n=(0,r.useContext)(ht),i=U(e),o=et().briaObjectModificationExperienceIsActive,a=n.visualId,u=n.setVisualId,c=n.loading,s=n.setLoading,l=n.modifiedImage,f=n.showEditor,d=n.setShowEditor,h=n.showErrorMessage,p=n.setShowErrorMessage,v=n.assetCanBeModified,m=n.setAssetCanBeModified,g=n.modificationType,y=n.setModificationType,b=n.availableModifications,$=n.setAvailableModifications,x=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ft(o,r,i,a,u,"next",t)}function u(t){ft(o,r,i,a,u,"throw",t)}a(void 0)}))}}(lt().mark((function t(){var n,r,i,a;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L({assetId:e.assetId});case 3:null!=(i=t.sent)&&null!=(n=i.data)&&n.visualId&&null!=i&&null!=(r=i.data)&&r.assetInfo&&(u(i.data.visualId),a=st({assetInfo:i.data.assetInfo,permissions:{backgroundModificationsPermitted:!0,expressionModificationsPermitted:!1,objectModificationsPermitted:o}}),m(a.assetCanBeModified),y(a.modificationType),$(a.availableModifications)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),B(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){i&&x()}),[i]),{handleDismissal:function(){p(!h)},handleRemoveBackground:function(){V(f),d(!f),s(!0)},handleModifyAsset:function(){(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"image_ADP_Modify_with_Ai_Button_Click",adp_selection:"ADP_Modify_with_Ai",ui_element_location:"ADP_Image_tools_panel_top"}},null)},visualId:a,loading:c,modifiedImage:l,showEditor:f,showErrorMessage:h,assetCanBeModified:v,modificationType:g,availableModifications:b}},ht=i().createContext({}),pt=function(t){var e=t.openModificationsModalWithModificationType,n=t.children,o=(0,r.useState)(null),a=o[0],u=o[1],c=(0,r.useState)(!1),s=c[0],l=c[1],f=(0,r.useState)(null),d=f[0],h=f[1],p=(0,r.useState)(!1),v=p[0],m=p[1],g=(0,r.useState)(!1),y=g[0],b=g[1],$=(0,r.useState)(!1),w=$[0],k=$[1],S=(0,r.useState)(null),C=S[0],_=S[1],M=(0,r.useState)(null),E=M[0],T=M[1],P=(0,r.useState)(null),R=P[0],A=P[1],L=(0,r.useState)(null),O=L[0],z=L[1],D=(0,r.useMemo)((function(){return{visualId:a,setVisualId:u,loading:s,setLoading:l,modifiedImage:d,setModifiedImage:h,showEditor:v,setShowEditor:m,showErrorMessage:y,setShowErrorMessage:b,assetCanBeModified:w,setAssetCanBeModified:k,modificationType:C,setModificationType:_,availableModifications:E,setAvailableModifications:T,previewImage:R,setPreviewImage:A,editorSrc:O,setEditorSrc:z}}),[a,u,s,l,d,h,v,m,y,b,w,k,C,_,E,T,R,A,O,z]);return i().createElement(ht.Provider,{value:D},i().createElement(I,null,i().createElement(x,{openWithModificationType:e},n)))},vt="iXJVRHzPyx2QOCDOb8rp",mt="JqIPrzUQ_LORCuzDbDZo",gt="BmacAOWMvpqcouDBl_8C",yt=function(t){var e=t.visualId,n=t.aspectRatio,o=t.assetId,a=(0,r.useContext)(ht),u=H().setPreviewImage,c=(0,r.useRef)(),s=et().briaModificationExperiencesAreActive,l=a.loading,f=a.setShowEditor,d=a.setLoading,h=a.setShowErrorMessage,p=a.editorSrc,v=s?p:"/components/asset-mod/api/modifications/remove_bg/"+e+"/watermarked/image.png?assetId="+o;return i().createElement("div",{className:vt,"data-testid":"editor-image",style:{aspectRatio:n}},l&&i().createElement("div",{className:mt},i().createElement(LC,null)),i().createElement("img",{src:v,ref:c,onLoad:function(){u(c.current),d(!1)},onError:function(){return d(!1),f(!1),void h(!0)}}),s&&i().createElement("div",{className:gt,"data-testid":"reset-badge-wrapper"},i().createElement(ZC,{visualId:e,assetId:o})))},bt=(0,r.memo)(yt),$t="JGRqDf2O2ZDV68rTCQqy",xt=function(t){var e=t.Icon,n=t.text,o=t.handleClick;return(0,r.useEffect)((function(){(0,N.j)({name:"buttonShown",payload:{banner_name:"ADP_remove_background_button",ui_element_location:"image_adp_tools_panel_top"}})}),[]),i().createElement("button",{className:$t,"data-testid":"background-removal-button",onClick:function(){return o()},type:"button"},e&&i().createElement(e,null),n)},wt=function(){return i().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M7.02004 10.3938L4.6665 8.04025L5.37354 7.33325L7.02004 8.97972L10.6665 5.33325L11.3735 6.04029L7.02004 10.3938Z",fill:"#02A388"}))},kt="WWnAS1lnsjzvv4YlzNJV",St="pRzWkpwzgf1W1JZVjh4I",Ct=function(t){var e=t.downloadCompletionText,n=t.firstListItemText,r=t.secondListItemText,o=t.checkDownloadsText,a=t.redownloadText;return i().createElement("section",{className:kt,"data-testid":"background-removal-confirmation"},i().createElement("p",null,e),i().createElement("ul",null,i().createElement("li",null,i().createElement(wt,null),n),i().createElement("li",null,i().createElement(wt,null),r)),i().createElement("p",{className:St},o),i().createElement("span",{id:"download-again"},a))},_t="ksrNsF_aTuAyen04bBvS",Mt="uVzc4tRd4oK4kghMEJbf",Et=function(t){var e=t.title,n=t.firstListItemText,r=t.secondListItemText,o=t.allowMultipleFileText;return i().createElement("div",{className:_t,"data-testid":"background-removal-details"},i().createElement("p",null,e),i().createElement("ul",null,i().createElement("li",null,i().createElement(wt,null),n),i().createElement("li",null,i().createElement(wt,null),r)),i().createElement("p",{className:Mt},o))},Tt="z2czGROp1pDEf3tJ9YhN",It=function(t){var e=t.text,n=t.Icon,o=t.handleDismissal;return(0,r.useEffect)((function(){(0,N.j)({name:"bannerShown",payload:{banner_name:"ADP_remove_background_error_banner",ui_element_location:"image_adp_tools_panel_top"}})}),[]),i().createElement("div",{className:Tt,"data-testid":"background-removal-error"},i().createElement("p",null,e),i().createElement("button",{type:"button",onClick:o},n&&i().createElement(n,null),i().createElement("span",null,"Close")))};function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}var Rt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).state={hasError:!1},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Pt(e,n),r.getDerivedStateFromError=function(){return{hasError:!0}};var i=r.prototype;return i.componentDidCatch=function(t,e){B(t,e)},i.render=function(){var t=this.state.hasError,e=this.props.children;return t?null:e},r}(r.Component),At=Rt,Lt="Cze3zkzonVZx6ZeAK3Qj",Ot=function(t){var e=t.title;return i().createElement("div",{className:Lt,"data-testid":"background-removal-header"},i().createElement("h2",null,e))},zt=function(t){var e=t.mainPath,n=t.expandedPath,r=t.animateId,o=t.animationDelay;return i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:e,fill:"white",stroke:"transparent"},i().createElement("animate",{attributeName:"d",values:e+";"+n+";"+e,dur:"1s",id:r,begin:o+"s;"+r+".end+1s"}))},Dt=function(){return i().createElement(zt,{mainPath:"M29.1891 54.5041C29.1891 53.775 28.5975 53.1865 27.8729 53.1865C27.1482 53.1865 26.5566 53.7787 26.5566 54.5041V56.2621C26.5566 56.9912 27.1482 57.5796 27.8729 57.5796C28.5975 57.5796 29.1891 56.9875 29.1891 56.2621V54.5041ZM30.0691 59.7742C30.0691 59.0488 30.657 58.4567 31.3853 58.4567H33.1415C33.8662 58.4567 34.4577 59.0488 34.4577 59.7742C34.4577 60.4996 33.8699 61.0918 33.1415 61.0918H31.3853C30.6607 61.0918 30.0691 60.4996 30.0691 59.7742ZM26.5566 63.2903C26.5566 62.5649 27.1445 61.9728 27.8729 61.9728C28.5975 61.9728 29.1891 62.5612 29.1891 63.2903V65.0483C29.1891 65.7737 28.5975 66.3659 27.8729 66.3659C27.1482 66.3659 26.5566 65.7774 26.5566 65.0483V63.2903ZM25.6767 59.7781C25.6767 60.5035 25.0889 61.0957 24.3605 61.0957H22.6043C21.8796 61.0957 21.2881 60.5035 21.2881 59.7781C21.2881 59.0527 21.876 58.4606 22.6043 58.4606H24.3605C25.0852 58.4606 25.6767 59.0527 25.6767 59.7781Z",expandedPath:"M29.9788 51.3405C29.9788 50.174 29.0323 49.2324 27.8728 49.2324C26.7134 49.2324 25.7669 50.1799 25.7669 51.3405V54.1533C25.7669 55.3198 26.7134 56.2614 27.8728 56.2614C29.0323 56.2614 29.9788 55.3139 29.9788 54.1533V51.3405ZM31.3868 59.7727C31.3868 58.6121 32.3274 57.6646 33.4928 57.6646H36.3027C37.4621 57.6646 38.4086 58.6121 38.4086 59.7727C38.4086 60.9333 37.4681 61.8808 36.3027 61.8808H33.4928C32.3333 61.8808 31.3868 60.9333 31.3868 59.7727ZM25.7669 65.3985C25.7669 64.2379 26.7074 63.2904 27.8728 63.2904C29.0323 63.2904 29.9788 64.2319 29.9788 65.3985V68.2112C29.9788 69.3719 29.0323 70.3193 27.8728 70.3193C26.7134 70.3193 25.7669 69.3778 25.7669 68.2112V65.3985ZM24.359 59.779C24.359 60.9396 23.4184 61.8871 22.253 61.8871H19.4431C18.2837 61.8871 17.3372 60.9396 17.3372 59.779C17.3372 58.6183 18.2777 57.6709 19.4431 57.6709H22.253C23.4125 57.6709 24.359 58.6183 24.359 59.779Z",animateId:"leftSparkle",animationDelay:0})},Ft=function(){return i().createElement(zt,{mainPath:"M58.2832 13.2836C58.2832 18.8573 62.8123 23.3911 68.3804 23.3911C69.1051 23.3911 69.6966 23.9832 69.6966 24.7086C69.6966 25.434 69.1088 26.0262 68.3804 26.0262C62.8123 26.0262 58.2832 30.5599 58.2832 36.1336C58.2832 36.859 57.6916 37.4512 56.967 37.4512C56.2423 37.4512 55.6507 36.8627 55.6507 36.1336C55.6507 30.5599 51.1216 26.0262 45.5535 26.0262C44.8289 26.0262 44.2373 25.434 44.2373 24.7086C44.2373 23.9832 44.8252 23.3911 45.5535 23.3911C51.1216 23.3911 55.6507 18.8573 55.6507 13.2836C55.6507 12.5582 56.2423 11.9661 56.967 11.9661C57.6916 11.9661 58.2832 12.5545 58.2832 13.2836Z",expandedPath:"M58.9413 7.57106C58.9413 15.9316 65.735 22.7322 74.0871 22.7322C75.1741 22.7322 76.0615 23.6205 76.0615 24.7086C76.0615 25.7967 75.1797 26.6849 74.0871 26.6849C65.735 26.6849 58.9413 33.4855 58.9413 41.8461C58.9413 42.9342 58.0539 43.8224 56.9669 43.8224C55.88 43.8224 54.9926 42.9397 54.9926 41.8461C54.9926 33.4855 48.1989 26.6849 39.8468 26.6849C38.7598 26.6849 37.8724 25.7967 37.8724 24.7086C37.8724 23.6205 38.7542 22.7322 39.8468 22.7322C48.1989 22.7322 54.9926 15.9316 54.9926 7.57106C54.9926 6.48297 55.88 5.59473 56.9669 5.59473C58.0539 5.59473 58.9413 6.47742 58.9413 7.57106Z",animateId:"topSparkle",animationDelay:.5})},jt=function(){return i().createElement(zt,{mainPath:"M101.513 43.515C101.513 46.5596 103.987 49.033 107.026 49.033C107.561 49.033 107.998 49.4702 107.998 50.0059C107.998 50.5416 107.564 50.9789 107.026 50.9789C103.987 50.9789 101.513 53.455 101.513 56.4969C101.513 57.0326 101.076 57.4699 100.541 57.4699C100.006 57.4699 99.5692 57.0353 99.5692 56.4969C99.5692 53.4523 97.0956 50.9789 94.0568 50.9789C93.5217 50.9789 93.0848 50.5416 93.0848 50.0059C93.0848 49.4702 93.519 49.033 94.0568 49.033C97.0956 49.033 99.5692 46.5568 99.5692 43.515C99.5692 42.9793 100.006 42.542 100.541 42.542C101.076 42.542 101.513 42.9765 101.513 43.515Z",expandedPath:"M101.999 40.2695C101.999 44.8364 105.71 48.5465 110.268 48.5465C111.071 48.5465 111.726 49.2024 111.726 50.0059C111.726 50.8095 111.075 51.4654 110.268 51.4654C105.71 51.4654 101.999 55.1796 101.999 59.7424C101.999 60.5459 101.344 61.2018 100.541 61.2018C99.7385 61.2018 99.0833 60.55 99.0833 59.7424C99.0833 55.1755 95.3728 51.4654 90.8147 51.4654C90.012 51.4654 89.3567 50.8095 89.3567 50.0059C89.3567 49.2024 90.0079 48.5465 90.8147 48.5465C95.3728 48.5465 99.0833 44.8323 99.0833 40.2695C99.0833 39.466 99.7385 38.8101 100.541 38.8101C101.344 38.8101 101.999 39.4619 101.999 40.2695Z",animateId:"rightSparkle",animationDelay:1})},Bt=function(){return i().createElement(zt,{mainPath:"M88.566 75.7922C88.566 79.9151 91.9157 83.2645 96.0308 83.2645C96.7554 83.2645 97.347 83.8567 97.347 84.5821C97.347 85.3075 96.7591 85.8996 96.0308 85.8996C91.9157 85.8996 88.566 89.2527 88.566 93.3719C88.566 94.0973 87.9745 94.6895 87.2498 94.6895C86.5251 94.6895 85.9336 94.101 85.9336 93.3719C85.9336 89.249 82.5839 85.8996 78.4688 85.8996C77.7441 85.8996 77.1526 85.3075 77.1526 84.5821C77.1526 83.8567 77.7405 83.2645 78.4688 83.2645C82.5839 83.2645 85.9336 79.9114 85.9336 75.7922C85.9336 75.0668 86.5251 74.4746 87.2498 74.4746C87.9745 74.4746 88.566 75.0631 88.566 75.7922Z",expandedPath:"M89.2242 71.3972C89.2242 77.5816 94.2488 82.6057 100.421 82.6057C101.508 82.6057 102.396 83.4939 102.396 84.582C102.396 85.6701 101.514 86.5584 100.421 86.5584C94.2488 86.5584 89.2242 91.588 89.2242 97.7668C89.2242 98.8549 88.3368 99.7432 87.2498 99.7432C86.1628 99.7432 85.2755 98.8605 85.2755 97.7668C85.2755 91.5825 80.2509 86.5584 74.0783 86.5584C72.9913 86.5584 72.104 85.6701 72.104 84.582C72.104 83.4939 72.9858 82.6057 74.0783 82.6057C80.2509 82.6057 85.2755 77.576 85.2755 71.3972C85.2755 70.3091 86.1628 69.4209 87.2498 69.4209C88.3368 69.4209 89.2242 70.3036 89.2242 71.3972Z",animateId:"bottomSparkle",animationDelay:1.5})},Nt="fNVYCz_ydinRzgAZJILR",Vt=function(){return i().createElement("svg",{viewBox:"0 0 124 124",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Nt},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M68.6362 44.8315C69.7809 43.6776 71.6335 43.6776 72.7782 44.8315L78.6689 50.7698C79.8181 51.9281 79.8181 53.8096 78.6689 54.968L68.5132 65.2056L58.4288 55.1212L68.6362 44.8315ZM26.2831 87.526L54.6806 58.8995L64.7651 68.9839L36.3159 97.6624C35.1712 98.8163 33.3186 98.8163 32.1739 97.6624L26.2831 91.7242C25.134 90.5658 25.134 88.6844 26.2831 87.526Z",fill:"white"}),i().createElement(Dt,null),i().createElement(Ft,null),i().createElement(jt,null),i().createElement(Bt,null))},Ht=function(t){var e=t.className;return i().createElement("svg",{className:e,viewBox:"0 0 22 19",xmlns:"http://www.w3.org/2000/svg","data-testid":"scissors"},i().createElement("path",{d:"M6.82464 18.2126C8.57514 17.2071 9.2387 15.0892 8.48035 13.2856H8.48667C8.00007 12.2236 8.93536 11.5449 10.1361 11.9659C13.2958 13.8072 17.3719 16.1764 17.3783 16.1702C18.7749 16.698 20.3863 16.1702 21.1573 14.8441L12.449 9.84807L21.1573 4.84571C20.3863 3.51342 18.7685 2.98553 17.3783 3.5197C17.3783 3.51342 13.2958 5.88263 10.1361 7.72395C8.93536 8.145 8.00007 7.46629 8.48667 6.39795H8.47403C9.23238 4.60062 8.56251 2.4765 6.81832 1.471C4.92878 0.3838 2.50208 1.03109 1.4088 2.9164C0.315519 4.80172 0.960111 7.20863 2.86229 8.30211C3.44369 8.63519 4.07564 8.78601 4.70127 8.81115C6.35067 8.84257 6.50234 9.84179 6.50234 9.84179C6.50234 9.84179 6.35067 10.8599 4.66968 10.8724C4.05036 10.8976 3.43105 11.0484 2.86229 11.3815C0.966431 12.4687 0.315519 14.8819 1.4088 16.7672C2.50208 18.6525 4.92878 19.2998 6.82464 18.2126ZM3.8355 6.6179C2.87493 6.06488 2.54631 4.84571 3.09611 3.89048C3.65223 2.93526 4.88454 2.60847 5.84511 3.15521C6.80568 3.70823 7.13429 4.93369 6.57817 5.88891C6.02205 6.84414 4.79607 7.17093 3.8355 6.6179ZM8.30972 9.84179C8.30972 9.38303 8.68258 9.01225 9.1439 9.01225C9.60523 9.01225 9.97808 9.38303 9.97808 9.84179C9.97808 10.3005 9.60523 10.6713 9.1439 10.6713C8.68258 10.6713 8.30972 10.3005 8.30972 9.84179ZM3.10243 15.7994C2.54631 14.8441 2.88125 13.625 3.84182 13.0657C4.8087 12.5126 6.03469 12.8394 6.59081 13.8009C7.14693 14.7562 6.81832 15.9816 5.85775 16.5346C4.89718 17.0814 3.66487 16.7546 3.10875 15.7994H3.10243Z"}))},Wt=function(t){var e=t.className;return i().createElement("svg",{className:e,viewBox:"0 0 20 18",xmlns:"http://www.w3.org/2000/svg","data-testid":"eraser"},i().createElement("path",{d:"M20.0002 6.68341C19.9942 6.26876 19.821 5.88002 19.5105 5.58919L14.0133 0.44057C13.7087 0.155495 13.3116 0 12.8876 0C12.4636 0 12.0366 0.167013 11.729 0.472244L0.457013 11.6679C0.15543 11.9674 -0.00581182 12.359 0.000160116 12.7765C0.00613205 13.1912 0.179318 13.5799 0.489859 13.8707L4.68215 17.7956C4.82249 17.928 5.0136 18.0029 5.20768 18.0029H16.1094C16.5275 18.0029 16.8649 17.6775 16.8649 17.2744C16.8649 16.8712 16.5275 16.5458 16.1094 16.5458H10.7317L19.5463 7.79203C19.8449 7.49256 20.0091 7.10094 20.0031 6.68629L20.0002 6.68341ZM5.52718 16.543H5.51524L1.5439 12.8226C1.523 12.8053 1.51405 12.7823 1.51405 12.7535C1.51405 12.7362 1.52002 12.7074 1.5439 12.6844L5.70037 8.55799L11.3438 13.8419L8.62662 16.543H5.53315H5.52718Z"}))},Ut=function(){return i().createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M0.5 2.0502L2.1 0.450195L6 4.3502L9.9 0.450195L11.5 2.0502L6 7.5502L0.5 2.0502Z",fill:"#0C0D0D"}))},Zt=function(t){var e=t.fillColor,n=void 0===e?"white":e;return i().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M15.9904 14.8238L14.8334 16L7.99997 9.15705L1.16658 15.9904L0.00952148 14.8334L6.84292 8.01912L0.00952487 1.17617L1.16657 0L8.01909 6.84294L14.8429 0.00956077L15.9808 1.16661L9.17614 8L15.9904 14.8238Z",fill:n}))},qt=n(94184),Gt=n.n(qt),Xt="kxji19C5sswW5Cb67jEj",Yt="h9xIbAyZdx89nk4RWtP4",Kt="sr1v8LBa1oxLHLbCB7t4",Jt=function(t){var e=t.flip;return i().createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Gt()(Xt,e&&Kt),"data-testid":"landscape"},i().createElement("path",{d:"M16.8 0.495117H2.21C0.99 0.495117 0 1.48512 0 2.71512V17.2951C0 18.5151 0.99 19.5151 2.21 19.5151H16.79C18.01 19.5151 19.01 18.5251 19.01 17.2951V2.71512C19.01 1.49512 18.02 0.495117 16.79 0.495117H16.8ZM16.79 2.49512C16.91 2.49512 17.01 2.59512 17.01 2.71512V10.6051L14.27 7.86512C13.55 7.14512 12.37 7.14512 11.65 7.86512L6.86 12.6551L5.28 11.0851C4.57 10.3751 3.43 10.3551 2.7 11.0551L1.99 11.7351V2.71512C1.99 2.59512 2.09 2.49512 2.2 2.49512H16.79ZM2.21 17.5051C2.09 17.5051 2 17.4051 2 17.2851V14.4751L3.99 12.5851L5.57 14.1651C6.29 14.8851 7.46 14.8851 8.19 14.1651L12.98 9.37512L17.02 13.4151V17.2851C17.02 17.4051 16.92 17.5051 16.8 17.5051H2.21Z",fill:"#231F20"}),i().createElement("path",{d:"M6.88998 8.68523C7.94998 8.68523 8.79998 7.82523 8.79998 6.77523C8.79998 5.72523 7.93998 4.86523 6.88998 4.86523C5.83998 4.86523 4.97998 5.72523 4.97998 6.77523C4.97998 7.82523 5.83998 8.68523 6.88998 8.68523Z",fill:"#231F20"}),i().createElement("path",{d:"M4 12L1.5 14.5V18H17.5V13.5L13 9L7 14L4 12Z",fill:"#231F20",className:Yt}))},Qt=function(){return i().createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M10 20C4.5 20 0 15.5 0 10C0 4.5 4.5 0 10 0C15.5 0 20 4.5 20 10C20 15.5 15.5 20 10 20Z",fill:"#FFD900"}),i().createElement("path",{d:"M10 12.4001C10.8 12.4001 11.5 13.1001 11.5 13.9001C11.5 14.7001 10.8 15.4001 10 15.4001C9.2 15.4001 8.5 14.7001 8.5 13.9001C8.5 13.1001 9.2 12.4001 10 12.4001ZM10.6 11.2001H9.4L8.7 7.0001V4.8001C8.7 4.7001 8.8 4.6001 8.9 4.6001H11C11.1 4.6001 11.2 4.7001 11.2 4.8001V7.0001L10.6 11.2001Z",fill:"#080808"}))},te=function(t){var e=t.className;return i().createElement("svg",{className:e,"data-testid":"reset-icon",width:"21",height:"17",viewBox:"0 0 21 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M12.4722 13.9874C9.47725 15.0903 6.15992 13.5249 5.07563 10.4949H5.09908L7.801 9.49281L4.78258 7.66651L2.40888 6.23156L2.15099 6.07739L0 12.3627L2.60815 11.4021C4.19648 15.8078 9.01423 18.0847 13.3748 16.4778C14.928 15.9026 16.2116 14.9124 17.1493 13.6791L14.5822 12.6295C14.002 13.2166 13.2928 13.685 12.4722 13.9874Z",fill:"#0C0D0D"}),i().createElement("path",{d:"M7.62508 0.515374C6.07191 1.08461 4.78835 2.07484 3.85059 3.30819L6.41771 4.36958C6.99795 3.78255 7.70713 3.31412 8.52767 3.01171C11.5226 1.90882 14.8341 3.47422 15.9243 6.50421H15.9008L13.1989 7.5063L16.2173 9.3326L18.591 10.7676L18.8489 10.9217L20.9999 4.63048L18.3918 5.59106C16.8034 1.18541 11.9857 -1.09153 7.62508 0.515374Z",fill:"#0C0D0D"}))},ee=function(t){var e=t.fill;return i().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:e,xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8909 8.52982C14.1712 8.24722 14.6249 8.24722 14.9052 8.52982L16.3479 9.98408C16.6293 10.2678 16.6293 10.7285 16.3479 11.0122L13.8607 13.5194L11.3911 11.0497L13.8909 8.52982ZM3.51868 18.9856L10.4732 11.975L12.9428 14.4447L5.97568 21.468C5.69535 21.7506 5.24165 21.7506 4.96132 21.468L3.51868 20.0137C3.23726 19.73 3.23726 19.2693 3.51868 18.9856Z"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8117 14.1586C16.8117 15.1683 17.6321 15.9886 18.6398 15.9886C18.8173 15.9886 18.9622 16.1336 18.9622 16.3112C18.9622 16.4889 18.8182 16.6339 18.6398 16.6339C17.6321 16.6339 16.8117 17.4551 16.8117 18.4639C16.8117 18.6415 16.6669 18.7865 16.4894 18.7865C16.3119 18.7865 16.167 18.6424 16.167 18.4639C16.167 17.4542 15.3467 16.6339 14.3389 16.6339C14.1615 16.6339 14.0166 16.4889 14.0166 16.3112C14.0166 16.1336 14.1606 15.9886 14.3389 15.9886C15.3467 15.9886 16.167 15.1674 16.167 14.1586C16.167 13.981 16.3119 13.8359 16.4894 13.8359C16.6669 13.8359 16.8117 13.98 16.8117 14.1586Z"}),i().createElement("path",{d:"M18.6398 15.7852C17.7445 15.7852 17.0151 15.0561 17.0151 14.1586H16.6083C16.6083 15.2805 17.5196 16.192 18.6398 16.192V15.7852ZM19.1656 16.3112C19.1656 16.0214 18.9298 15.7852 18.6398 15.7852V16.192C18.7048 16.192 18.7588 16.2457 18.7588 16.3112H19.1656ZM18.6398 16.8373C18.9311 16.8373 19.1656 16.6006 19.1656 16.3112H18.7588C18.7588 16.3771 18.7053 16.4305 18.6398 16.4305V16.8373ZM17.0151 18.4639C17.0151 17.5672 17.7446 16.8373 18.6398 16.8373V16.4305C17.5195 16.4305 16.6083 17.3429 16.6083 18.4639H17.0151ZM16.4894 18.9899C16.7794 18.9899 17.0151 18.7536 17.0151 18.4639H16.6083C16.6083 18.5294 16.5543 18.5831 16.4894 18.5831V18.9899ZM15.9637 18.4639C15.9637 18.7549 16.1998 18.9899 16.4894 18.9899V18.5831C16.4241 18.5831 16.3704 18.5299 16.3704 18.4639H15.9637ZM14.3389 16.8373C15.2343 16.8373 15.9637 17.5664 15.9637 18.4639H16.3704C16.3704 17.342 15.4592 16.4305 14.3389 16.4305V16.8373ZM13.8132 16.3112C13.8132 16.601 14.0489 16.8373 14.3389 16.8373V16.4305C14.274 16.4305 14.22 16.3767 14.22 16.3112H13.8132ZM14.3389 15.7852C14.0477 15.7852 13.8132 16.0218 13.8132 16.3112H14.22C14.22 16.2453 14.2735 16.192 14.3389 16.192V15.7852ZM15.9637 14.1586C15.9637 15.0553 15.2342 15.7852 14.3389 15.7852V16.192C15.4592 16.192 16.3704 15.2795 16.3704 14.1586H15.9637ZM16.4894 13.6325C16.1994 13.6325 15.9637 13.8688 15.9637 14.1586H16.3704C16.3704 14.0931 16.4244 14.0393 16.4894 14.0393V13.6325ZM17.0151 14.1586C17.0151 13.8675 16.779 13.6325 16.4894 13.6325V14.0393C16.5547 14.0393 16.6083 14.0926 16.6083 14.1586H17.0151Z"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.9825 8.21484C19.9825 8.96046 20.5883 9.56619 21.3325 9.56619C21.4636 9.56619 21.5706 9.67328 21.5706 9.80446C21.5706 9.93565 21.4643 10.0427 21.3325 10.0427C20.5883 10.0427 19.9825 10.6491 19.9825 11.3941C19.9825 11.5253 19.8756 11.6324 19.7445 11.6324C19.6135 11.6324 19.5065 11.5259 19.5065 11.3941C19.5065 10.6485 18.9007 10.0427 18.1565 10.0427C18.0254 10.0427 17.9185 9.93565 17.9185 9.80446C17.9185 9.67328 18.0248 9.56619 18.1565 9.56619C18.9007 9.56619 19.5065 8.95979 19.5065 8.21484C19.5065 8.08365 19.6135 7.97656 19.7445 7.97656C19.8756 7.97656 19.9825 8.08298 19.9825 8.21484Z"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.18885 10.893C6.18885 10.7144 6.04397 10.5703 5.8665 10.5703C5.68904 10.5703 5.54416 10.7153 5.54416 10.893V11.3235C5.54416 11.5021 5.68904 11.6462 5.8665 11.6462C6.04397 11.6462 6.18885 11.5012 6.18885 11.3235V10.893ZM6.4043 12.182C6.4043 12.0044 6.54826 11.8594 6.72664 11.8594H7.15673C7.3342 11.8594 7.47907 12.0044 7.47907 12.182C7.47907 12.3597 7.3351 12.5047 7.15673 12.5047H6.72664C6.54917 12.5047 6.4043 12.3597 6.4043 12.182ZM5.54395 13.0492C5.54395 12.8716 5.68791 12.7266 5.86629 12.7266C6.04375 12.7266 6.18863 12.8707 6.18863 13.0492V13.4798C6.18863 13.6574 6.04375 13.8024 5.86629 13.8024C5.68882 13.8024 5.54395 13.6583 5.54395 13.4798V13.0492ZM5.32868 12.182C5.32868 12.3597 5.18471 12.5047 5.00634 12.5047H4.57625C4.39878 12.5047 4.25391 12.3597 4.25391 12.182C4.25391 12.0044 4.39787 11.8594 4.57625 11.8594H5.00634C5.1838 11.8594 5.32868 12.0044 5.32868 12.182Z"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3553 2.76798C11.3553 4.13297 12.4645 5.24327 13.8281 5.24327C14.0056 5.24327 14.1505 5.38829 14.1505 5.56594C14.1505 5.74359 14.0065 5.88861 13.8281 5.88861C12.4645 5.88861 11.3553 6.99891 11.3553 8.3639C11.3553 8.54155 11.2105 8.68657 11.033 8.68657C10.8555 8.68657 10.7107 8.54246 10.7107 8.3639C10.7107 6.99891 9.60148 5.88861 8.23787 5.88861C8.0604 5.88861 7.91553 5.74359 7.91553 5.56594C7.91553 5.38829 8.05949 5.24327 8.23787 5.24327C9.60148 5.24327 10.7107 4.13297 10.7107 2.76798C10.7107 2.59033 10.8555 2.44531 11.033 2.44531C11.2105 2.44531 11.3553 2.58943 11.3553 2.76798Z"}))},ne="UTuy5aULGpe2KUMawJvI",re="hCMUGtIzSUtcRx_4wiMv",ie="S1pDg6AjnGlw_hvtn0m0",oe=function(t){var e=function(t){return"RemoveObjects"===t?"Remove_Objects":"Remove_Background"}(t);(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Image_"+e+"_Button_Click",adp_selection:"ADP_"+e,ui_element_location:"image_adp_tools_panel_top"}})},ae=function(t){var e=t.value,n=t.disabled,r=t.Icon,o=t.label,a=t.notAvailableText,u=G(),c=u.openModal,s=u.setShowDropdown,l=(0,Q.T)();return i().createElement("button",{className:ne,onClick:function(){c(e),s(!1),oe(e)},disabled:n,type:"button"},i().createElement(r,{className:ie}),l(o),n&&i().createElement(PC,{className:re},l(a)))},ue=function(t){var e=t.disabled;return i().createElement(ae,{value:l.RemoveBackground,disabled:e,Icon:Ht,label:"remove_background",notAvailableText:"background_removal_not_available"})},ce=function(t){var e=t.disabled;return i().createElement(ae,{value:l.RemoveObjects,disabled:e,Icon:Wt,label:"remove_objects",notAvailableText:"object_removal_not_available"})},se="faTRqk0rydEHLcbaBNeg",le=function(t){var e=t.canRemoveBackground,n=t.canRemoveObjects;return i().createElement("div",{className:se,"data-testid":"dropdown"},i().createElement(ue,{disabled:!e}),i().createElement(ce,{disabled:!n}))},fe="vMHXHIlnzMXttg9nIv6_",de="kMgd6tB4yjyknv9JnA14",he="nkuIi2SiJaVBWzRnn2yT",pe="suZeOJIJleov1GBMWtJq",ve="oYAkF0nX4TP7AVSQJIYZ",me=function(t){var e=t.handleClick,n=t.asset,o=G(),a=o.openModal,u=o.showDropdown,c=o.setShowDropdown,s=(0,r.useContext)(ht).availableModifications,f=(0,Q.T)(),d=n.largeMainImageURL,h=(null==s?void 0:s.background.length)>0,p=(null==s?void 0:s.objects.length)>0;(0,r.useEffect)((function(){(0,N.j)({name:"buttonShown",payload:{banner_name:"ADP_Modify_with_Ai_Button",ui_element_location:"image_adp_tools_panel_top"}},null)}),[]);return i().createElement(i().Fragment,null,i().createElement("link",{rel:"prefetch",href:d,as:"image","data-testid":"prefetch-image"}),i().createElement("div",{className:fe},i().createElement("div",{className:de},i().createElement("button",{className:he,"data-testid":"modify-asset-button",onClick:function(){e();var t=function(t){return t?l.RemoveBackground:l.RemoveObjects}(h);a(t)},type:"button"},i().createElement(ee,{fill:"#0D0D0D"}),i().createElement("span",{className:ve},f("modify_with_ai"))),i().createElement("button",{"data-testid":"down-arrow",className:pe,onClick:function(){c(!u),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Image_carrot_Click",adp_selection:"ADP_ai_modal_carrot",ui_element_location:"image_adp_tools_panel_top"}},null)},type:"button"},i().createElement(Ut,null))),u&&i().createElement(le,{canRemoveBackground:h,canRemoveObjects:p})))},ge=(0,r.createContext)({viewingOriginal:!1,setViewingOriginal:function(){}}),ye=function(t){var e=t.children,n=(0,r.useState)(!1),o=n[0],a=n[1],u=(0,r.useMemo)((function(){return{viewingOriginal:o,setViewingOriginal:a}}),[o]);return i().createElement(ge.Provider,{value:u},e)},be="pBrJdq_zb_48_57slw1u",$e="nxgv3YCKe2hRsnJOKMud",xe=["just_a_moment_ai_working","did_you_know_1_download","tip_continue_modifying_after_licensed"],we=function(){var t=(0,Q.T)(),e=(0,r.useState)(0),n=e[0],o=e[1],a=xe[n];return i().createElement("div",{className:be,"data-testid":"loading-animation"},i().createElement(Vt,null),i().createElement("span",{"data-testid":"animation-text",className:$e,onAnimationIteration:function(){o((n+1)%xe.length)}},t(a)))},ke=function(){return(0,r.useContext)(ge)},Se=function(){return i().createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"checkmark"},i().createElement("circle",{cx:"10",cy:"10",r:"10",fill:"#02A388"}),i().createElement("path",{d:"M5 10.5L6.37512 9.3332L9.12488 11.6668L14.6249 7L16 8.1668L9.12488 14L5 10.5Z",fill:"white"}))},Ce="pIpmubW87UC45ftjz2sI",_e="SZiBth1YXjImkgbW2dQA",Me="RbUBz_RlNXzCe6HQKp7i",Ee="uHEi4U_uRIu61ceEnRGC",Te=function(){(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_Objects_Area_Selected",ui_element_location:"image_adp_modal"}},null)},Ie=function(t){var e=t.object,n=t.zIndex,o=(0,r.useState)(!1),a=o[0],u=o[1],c=e.coordinates,s=e.id,l=Z(),f=l.hoveredListItem,d=l.selectedObjects,h=l.addHoveredListItem,p=l.addObjectMask,v=l.removeHoveredListItem,m=l.removeObjectMask,g=l.toggleObjectSelected,y=d&&d.has(e),b=f&&f.id===s;return i().createElement("div",{"data-testid":"bounding-box",role:"button",tabIndex:0,className:Gt()("globalBoundingBox",Ce,y&&"globalSelected",y&&Me,b&&Ee),onClick:function(){b&&v(),u(!0),g(e),y||Te()},onMouseEnter:function(){y||h(e),u(!1),p(e)},onMouseLeave:function(){a||(v(),m(e))},style:{width:c.w+"%",height:c.h+"%",top:c.y+"%",left:c.x+"%",zIndex:""+n}},y&&i().createElement("div",{className:_e},i().createElement(Se,null)))},Pe=function(){var t=Z().objects,e=0!==t.length,n=(0,r.useMemo)((function(){return e?Math.max.apply(Math,t.map((function(t){return t.coordinates.w*t.coordinates.h}))):0}),[t]),o=function(t){var e=t.coordinates.w*t.coordinates.h;return Math.round(n/e)};return e?i().createElement("div",{"data-testid":"bounding-boxes"},t.map((function(t){return i().createElement(Ie,{key:t.id,object:t,zIndex:o(t)})}))):null},Re="gJCFluOTL8Ad6a9YIbBa",Ae=function(t){var e=t.imageRef,n=Z().maskingCoordinates,r=Array.from(n);return i().createElement("div",{className:Re,"data-testid":"image-mask"},i().createElement("svg",null,i().createElement("mask",{id:"svgmask","data-testid":"svg-mask"},i().createElement("rect",{fill:"#666E6E",height:e.current.height,width:e.current.width}),r.map((function(t){return i().createElement("rect",{key:"hover-coordinate-"+t.x+"-"+t.y+"-"+t.w+"-"+t.h,"data-testid":"object-mask",fill:"#000000",width:t.w+"%",height:t.h+"%",x:t.x+"%",y:t.y+"%",rx:"8"})}))),i().createElement("rect",{mask:"url(#svgmask)",height:e.current.height,width:e.current.width})))},Le="lWP4MqOVAakIbvXS7Kng",Oe="WflgVrSmgeFrtJFTF4My",ze=function(){var t=(0,Q.T)(),e=ke().viewingOriginal,n=(0,r.useState)(!1),o=n[0],a=n[1],u=(0,r.useRef)(!0);return(0,r.useEffect)((function(){if(!u.current){a(!0);var t=setTimeout((function(){a(!1)}),3e3);return function(){return clearTimeout(t)}}u.current=!1}),[e]),i().createElement("span",{className:Gt()(Le,o&&Oe),"data-testid":"image-type-badge"},t(e?"original":"modified"))};function De(){De=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Fe(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}var je=function(t){var e=t.visualId,n=t.assetId,i=t.largeMainImageURL,o=t.backgroundRemoved,a=t.removedObjects,u=t.showBackgroundError,c=t.showObjectError,s=t.previousImageSrcRef,l=t.requestId,f=t.openModalSessionId,d=G().resetToOriginal,h=a.size>0,p=!o&&!h,v=(0,r.useRef)(!1),m=v.current&&!o,g=(0,r.useRef)(!1),y=g.current&&!h,b=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Fe(o,r,i,a,u,"next",t)}function u(t){Fe(o,r,i,a,u,"throw",t)}a(void 0)}))}}(De().mark((function t(){return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,z({assetId:n,visualId:e,largeMainImageURL:i,openModalSessionId:f});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),j(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}();if((0,r.useEffect)((function(){(m||y)&&p&&b(),v.current=o,g.current=h}),[o,h]),p)return i;if(u||c)return s.current;var $=new URLSearchParams({assetId:n,largeMainImageURL:i,backgroundRemoved:""+o,objectIdsRemoved:Array.from(a,(function(t){return t.id})).toString(),requestId:l,openModalSessionId:f});return"/components/asset-mod/api/modifications/modify_image/"+e+"/watermarked/image.png?"+$},Be=function(t){var e=document.createElement("canvas");return e.width=t.naturalWidth,e.height=t.naturalHeight,e.getContext("2d").drawImage(t,0,0),e.toDataURL()},Ne=function(t){var e=t.src,n=t.previousImageSrcRef,i=t.largeMainImageURL,o=(0,r.useState)(!1),a=o[0],u=o[1],c=(0,r.useState)(!0),s=c[0],l=c[1],f=(0,r.useRef)(),d=G().setResetToOriginal,h=Ve(),p=h.previousBackgroundRemovedRef,v=h.previousRemovedObjectsRef,m=h.setPreviousBackgroundRemoved,g=h.setPreviousRemovedObjects,y=Y(),b=y.setShowBackgroundError,$=y.setClearNotification,x=y.setShowNotification,w=y.setShowObjectError,k=Z(),S=k.clearMaskingAndHoverData,C=k.removedObjects,_=k.setRemovedObjects,M=X(),E=M.setBackgroundRemoved,T=M.backgroundRemoved;(0,r.useEffect)((function(){var t;(null==(t=f.current)?void 0:t.src)!==e&&($(!1),u(!0),d(!1),x(!1))}),[e]);var I=(0,r.useCallback)((function(){u(!1),s?l(!1):x(!0),f.current&&f.current.src!==i?n.current=Be(f.current):n.current=i,m(T),g(C)}),[f,i,s,T,C]),P=(0,r.useCallback)((function(){b(!0),E(p.current),x(!1)}),[]),R=(0,r.useCallback)((function(){w(!0),S(),x(!1),_(v.current)}),[]);return{loading:a,imgRef:f,isFirstLoad:s,onLoad:I,onBackgroundError:P,onObjectError:R}},Ve=function(){var t=(0,r.useRef)(),e=(0,r.useRef)(new Set);return{previousBackgroundRemovedRef:t,previousRemovedObjectsRef:e,setPreviousBackgroundRemoved:function(e){t.current=e},setPreviousRemovedObjects:function(t){e.current=t}}},He="ddHaXPqHqjfmvl3aSzAV",We="j0bfztiydZspyTNO21tI",Ue="AOgEZlbIuR6PIu8c3oOo",Ze="V5GDZBcUR3CWqj05D65P",qe="LeOWaoERLzu3kaNBMKgf",Ge=function(t){var e=t.text,n=t.trackingBannerName,o=t.handleDismissal;return(0,r.useEffect)((function(){!function(t){(0,N.j)({name:"bannerShown",payload:{banner_name:t,ui_element_location:"adp_modal_image_top"}})}(n)}),[]),i().createElement("div",{className:qe,"data-testid":"asset-modification-error"},i().createElement("p",null,e),i().createElement("button",{type:"button",onClick:o,"data-testid":"asset-modification-error-dismissal"},i().createElement(Zt,{fillColor:"black"}),i().createElement("span",null,"Close")))},Xe=function(t){var e=t.asset,n=t.visualId,o=t.modificationApplied,a=(0,Q.T)(),u=e.largeMainImageURL,c=e.ratio,s=e.assetId,f=(0,r.useRef)(),d=q().activeModificationType,h=Y(),p=h.showBackgroundError,v=h.setShowBackgroundError,m=h.showObjectError,g=h.setShowObjectError,y=X().backgroundRemoved,b=Z(),$=b.maskingCoordinates,x=b.objectListHovered,w=b.selectedObjects,k=b.removedObjects,S=ke(),C=S.viewingOriginal,_=S.setViewingOriginal,M=G().openModalSessionId,E=(0,r.useMemo)((function(){return Date.now().toString()}),[y,k,p,m]),T=je({visualId:n,assetId:s,largeMainImageURL:u,backgroundRemoved:y,removedObjects:k,showBackgroundError:p,showObjectError:m,previousImageSrcRef:f,requestId:E,openModalSessionId:M.current}),I=Ne({src:T,previousImageSrcRef:f,largeMainImageURL:u}),P=I.loading,R=I.imgRef,A=I.onLoad,L=I.onObjectError,O=I.onBackgroundError,z=0!==w.size,D=!C&&!P&&(z||x||$&&0!==$.size),F=!C&&!P&&d===l.RemoveObjects,j=(0,r.useMemo)((function(){return p&&d===l.RemoveBackground?i().createElement(Ge,{text:a("background_removal_an_error_occurred"),trackingBannerName:"ADP_modal_remove_background_error_banner",handleDismissal:function(){return v(!1)}}):m&&d===l.RemoveObjects?i().createElement(Ge,{text:a("object_removal_an_error_occurred"),trackingBannerName:"ADP_modal_remove_object_error_banner",handleDismissal:function(){return g(!1)}}):null}),[p,d,m]);return i().createElement("button",{className:He,style:{aspectRatio:c},type:"button",tabIndex:0,"data-testid":"image-wrapper",onClick:function(){C&&_(!1)}},(!T||C)&&i().createElement("img",{"data-testid":"original-image",src:u,alt:"Original",className:Gt()(Ze)}),T&&i().createElement("img",{id:"modified-image",src:T,alt:"Modified",className:Gt()(We,P&&Ue),onLoad:A,onError:function(){d===l.RemoveObjects?L():O()},ref:R}),P&&i().createElement(we,null),D&&i().createElement(Ae,{imageRef:R}),F&&i().createElement(Pe,null),o&&i().createElement(ze,null),j)},Ye=new Map([[l.RemoveBackground,"Remove_Background"],[l.RemoveObjects,"Remove_Object"]]),Ke="NBfpZ_W2L4vtL1t1xXRA",Je="WZ0moDxyCUWXHH2F5XrC",Qe="xm34Vk3lkxl41mJgHKEd",tn="p6F4kM55KEwWhk7Fc1Rh",en=function(t){var e=t.disabled,n=t.value,o=t.Icon,a=t.label,u=t.notAvailableText,c=(0,Q.T)(),s=q(),l=s.activeModificationType,f=s.setActiveModificationType,d=Y().setClearNotification,h=Z().clearMaskingAndHoverData,p=n===l;(0,r.useEffect)((function(){var t,r;e||(t=n,r=Ye.get(t),(0,N.j)({name:"buttonShown",payload:{banner_name:"ADP_Modal_Tab_"+r+"_Shown",ui_element_location:"image_adp_modal"}}))}),[]);return i().createElement("button",{className:Gt()(Ke,p&&Je),onClick:function(){var t,e;d(!0),f(n),h(),t=n,e=Ye.get(t),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Tab_"+e+"_Click",adp_selection:"ADP_Modal_Tab_"+e,ui_element_location:"image_adp_modal"}})},disabled:e,type:"button"},i().createElement(o,{className:Qe}),c(a),e&&i().createElement(PC,{className:tn},c(u)))},nn=function(t){var e=t.disabled;return i().createElement(en,{disabled:e,value:l.RemoveBackground,Icon:Ht,label:"remove_background",notAvailableText:"background_removal_not_available"})},rn=function(t){var e=t.disabled;return i().createElement(en,{disabled:e,value:l.RemoveObjects,Icon:Wt,label:"remove_objects",notAvailableText:"object_removal_not_available"})},on="mnLsOFMIROCiXuUWNhve",an=function(t){var e=t.canRemoveBackground,n=t.canRemoveObjects;return i().createElement("div",{className:on,"data-testid":"modification-selector"},i().createElement(nn,{disabled:!e}),i().createElement(rn,{disabled:!n}))},un=n(3382),cn=n(55972),sn=function(){return i().createElement("svg",{width:"54",height:"22",viewBox:"0 0 54 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("rect",{width:"54",height:"22",rx:"11",fill:"url(#paint0_linear_6601_271173)"}),i().createElement("path",{d:"M19.467 13.708C19.467 14.992 18.591 16 16.815 16H13.203V8.008H16.551C18.195 8.008 19.131 8.716 19.131 9.928C19.131 10.72 18.711 11.32 18.087 11.656C18.999 12.028 19.467 12.784 19.467 13.708ZM18.003 10.084C18.003 9.352 17.499 9.028 16.515 9.028H14.331V11.308H16.575C17.487 11.308 18.003 10.828 18.003 10.084ZM18.291 13.648C18.291 12.856 17.823 12.28 16.827 12.28H14.331V14.992H16.779C17.751 14.992 18.291 14.488 18.291 13.648ZM26.9206 16H21.1366V8.008H26.8006V9.04H22.2646V11.296H26.2126V12.268H22.2646V14.968H26.9206V16ZM34.374 9.04H31.65V16H30.522V9.04H27.81V8.008H34.374V9.04ZM41.757 16H40.497L39.645 13.78H36.045L35.181 16H34.005L37.257 8.008H38.493L41.757 16ZM39.273 12.796L37.869 9.1L36.429 12.796H39.273Z",fill:"white"}),i().createElement("defs",null,i().createElement("linearGradient",{id:"paint0_linear_6601_271173",x1:"-4.5",y1:"25.5",x2:"54",y2:"7",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#9F1E9C"}),i().createElement("stop",{offset:"0.541667",stopColor:"#F0122A"}),i().createElement("stop",{offset:"1",stopColor:"#F75733"}))))},ln="ld9ulmUz7MrfXjOnhXbQ",fn="PBX3eM2VqjLbfDmZfRdw",dn="ebUnYwRd0S5Y_OtVeU69",hn="cGSQOE66baF5i70nPObA",pn="Vs2AlxcdicyLw7r3AbFH",vn="Ao9iduNxOX6LKuD7NOUr",mn="tjE9Vjl_qmcy1pr0LB4g",gn=function(){var t=(0,Q.T)(),e=K().toggleFeedbackModal,n=(0,r.useState)(!1),o=n[0],a=n[1],u="quality_ai_tooltip";(0,r.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem(u));null!=t&&t.dismissed&&a(!0)}),[o]);var c=t("ai_beta_quality_warning",{links:[{href:"#",id:"ai-beta-feedback-link"}]}),s=function(){var t=document.getElementById("ai-beta-feedback-link");t&&t.addEventListener("click",(function(){return e()}))},l=i().createElement("div",{"data-testid":"beta-badge-tooltip-content",className:pn},i().createElement("span",{className:vn},i().createElement(cn.Z,null,c))),f=i().createElement("div",{"data-testid":"beta-hoverable-tooltip",className:fn},i().createElement(un.Tg,{className:hn,placement:"bottom",trigger:i().createElement(sn,null),trackViewed:s},l)),d=i().createElement("div",{"data-testid":"beta-dismissible-tooltip"},i().createElement(sn,null),i().createElement("div",{className:ln},i().createElement(un.lq,{className:dn,localStorageKey:u,name:"BackgroundRemovalTooltip",placement:"bottom",trackDismissed:function(){a(!0)},trackViewed:s},l))),h=o?f:d;return i().createElement("div",{"data-testid":"beta-ai-badge",className:mn},h)},yn="MNXD6afHuOQUo1rBEpHI",bn="xLE1VJdb2unBokzpoTmB",$n="_d4w2BYKw21LEsr7vo1z",xn=function(){var t=X(),e=t.backgroundRemoved,n=t.setBackgroundRemoved,r=ke(),o=r.viewingOriginal,a=r.setViewingOriginal;return i().createElement("button",{className:Gt()(yn,e&&bn),onClick:function(){var t;o&&a(!1),n(!e),t=!e?"remove":"restore",(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_image_remove_backgroud_toggle_click",adp_selection:"ADP_image_toggle_"+t+"_background",ui_element_location:"image_adp_modal"}})},"data-testid":"remove-background-toggle",type:"button"},i().createElement("span",{className:$n}))},wn="RaMXBMf9JV7IPn2gC2Ap",kn="kPegHnf_Fw5UwRzLMDph",Sn=function(){var t=(0,Q.T)();return i().createElement(i().Fragment,null,i().createElement("div",{className:wn},i().createElement("div",null,t("make_background_transparent")," "),i().createElement(gn,null)),i().createElement("div",{className:kn},i().createElement(xn,null),i().createElement("span",null,t("remove_background"))))},Cn="gTxrtooLWO28J7IHuMDX",_n="uAjEYld_Dr_R_V4GAytE",Mn="T17jxbcV2b59SBGavRz_",En="dWJ8zuFXryPNYciK_lFw",Tn="ZOi8SjKkdkcQHdO3X8mO",In=function(t){var e={name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_Objects_Removed_"+t,ui_element_location:"image_adp_modal"}};(0,N.j)(e,null)},Pn=function(t){var e,n=t.object,r=t.position,o=Z(),a=o.addObjectMask,u=o.addHoveredListItem,c=o.removeObjectMask,s=o.removeHoveredListItem,l=o.toggleObjectSelected,f=o.hoveredListItem,d=o.selectedObjects,h=o.removedObjects,p=ke(),v=p.viewingOriginal,m=p.setViewingOriginal,g=(e=n.modifications).charAt(0).toLocaleUpperCase()+e.slice(1)+(r?" "+r:""),y=d&&d.has(n),b=h&&h.has(n),$=f&&f.id===n.id;return i().createElement("li",{className:Gt()(Cn,$&&!v&&Mn,y&&Tn,b&&En,v&&_n),onClick:function(){v?m(!1):(y?u(n):s(),l(n),y||In(d.size))},onMouseEnter:function(){y||u(n),a(n)},onMouseLeave:function(){c(n),s()}},y&&i().createElement(Se,null),g)},Rn="RkhiiK9w7G2rWLy6rufy",An="KE69i9KrW9DQErO3XvsN",Ln=function(){var t=Z(),e=t.objects,n=t.toggleObjectListHovered;return i().createElement("div",{className:Rn},i().createElement("ol",{className:An,"data-testid":"object-list",onMouseEnter:n,onMouseLeave:n},function(t,e){var n=new Map;return t.map((function(r,i){var o,a,u=null!=(o=n.get(r.modifications))?o:0;n.set(r.modifications,++u);var c=u>1||r.modifications===(null==(a=t[i+1])?void 0:a.modifications);return e(r,u,c)}))}(e,(function(t,e,n){return i().createElement(Pn,{object:t,position:n?e:null,key:t.id})}))))},On="ZHOPhRt0XgIlkjuR5Isc",zn=function(){var t=(0,Q.T)();return i().createElement(i().Fragment,null,i().createElement("div",{className:On},i().createElement("div",null," ",t("select_objects_remove_or_restore")," "),i().createElement(gn,null)),i().createElement(Ln,null))},Dn=function(){return q().activeModificationType===l.RemoveBackground?i().createElement(Sn,null):i().createElement(zn,null)},Fn=n(78125),jn="eolUWVpUUH1BmAKlQDUw";function Bn(){Bn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Nn(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}var Vn,Hn,Wn,Un=function(t){var e=t.assetId,n=t.visualId,r=G().setResetToOriginal,o=Y().setClearNotification,a=X().setBackgroundRemoved,u=Z(),c=u.resetAllObjects,s=u.setModificationCount,l=(0,Q.T)();return i().createElement(Fn.zx,{onClick:function(){var t=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Nn(o,r,i,a,u,"next",t)}function u(t){Nn(o,r,i,a,u,"throw",t)}a(void 0)}))}}(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O({assetId:e,visualId:n});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),j(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();a(!1),s({removed:0,restored:0}),c(),r(!0),o(!0),t()},variant:Fn.hZ.HOLLOW,className:jn,"data-testid":"reset-button"},i().createElement(te,null),l("reset"))},Zn="QLro8_54qBMqIZbsxNaS",qn=function(){var t=(0,Q.T)(),e=ke(),n=e.viewingOriginal,r=e.setViewingOriginal;return i().createElement(Fn.zx,{onClick:function(){return r(!n)},variant:Fn.hZ.HOLLOW,className:Zn,"data-testid":"toggle-original-button"},i().createElement(Jt,{flip:n}),t(n?"view_modified":"view_original"))},Gn="XqBe914xGwh68b7KvzwD",Xn=function(t){var e=t.assetId,n=t.visualId;return i().createElement("div",{className:Gn,"data-testid":"session-controls"},i().createElement(Un,{assetId:e,visualId:n}),i().createElement(qn,null))},Yn=n.p+"static/bria-logo-sm-804e231525be54a0dee8.png",Kn="ANitCj0rDKJiCDOs6r7v",Jn="qMzZ_rUBGzGVQ4rWirEI",Qn=function(){var t=(0,Q.T)();return i().createElement("div",{className:Kn},t("powered_by"),i().createElement("img",{className:Jn,src:Yn,alt:"Bria"}))},tr="iPGRlGjVrWWAz6hM9nb5",er="tUYWpI60jcJGXfbMZFs7",nr=function(t){var e=t.asset,n=t.visualId,r=t.availableModifications,o=X().backgroundRemoved,a=Z().removedObjects,u=o||a.size>0,c=r.background.length>0,s=r.objects.length>0;return i().createElement(ye,null,i().createElement("div",{className:tr,"data-testid":"modifications-editor"},i().createElement(an,{canRemoveBackground:c,canRemoveObjects:s}),i().createElement("div",{className:er},i().createElement(Xe,{asset:e,visualId:n,modificationApplied:u}),i().createElement(Dn,null),u&&i().createElement(Xn,{assetId:e.assetId,visualId:n}))))},rr=(0,r.createContext)({showImageEditor:!1,setShowImageEditor:function(){}}),ir=function(t){var e=t.children,n=(0,r.useState)(!1),o=n[0],a=n[1],u=(0,r.useMemo)((function(){return{showImageEditor:o,setShowImageEditor:a}}),[o]);return i().createElement(rr.Provider,{value:u},e)},or=function(){return(0,r.useContext)(rr)},ar="bCMmK8vDfXQFcZ5gsX0K",ur=function(t){var e=t.Icon,n=t.text,r=t.handleClick;return i().createElement("button",{className:ar,"data-testid":"crop-image-button",onClick:function(){return r()},type:"button"},e&&i().createElement(e,null),n)},cr=["textContent","innerHTML"],sr=["width"],lr=["frameStyle"];function fr(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),r)}var i,o}function hr(t,e,n){return e&&dr(t.prototype,e),n&&dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,$r(t,e)}function yr(t){var e="function"==typeof Map?new Map:void 0;return yr=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return br(t,arguments,xr(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$r(n,t)},yr(t)}function br(t,e,n){return br=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&$r(i,n.prototype),i},br.apply(null,arguments)}function $r(t,e){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$r(t,e)}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}function wr(){wr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function kr(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function Sr(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kr(o,r,i,a,u,"next",t)}function u(t){kr(o,r,i,a,u,"throw",t)}a(void 0)}))}}var Cr,_r=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}],Mr=function(t){if(65496===t.getUint16(0)){for(var e,n=t.byteLength,r=2,i=void 0;r<n&&255===t.getUint8(r);){e=t.getUint16(r);var o=_r.find((function(n){return n.value===e&&(!n.subvalue||n.subvalue===t.getUint16(r+2+2))}));if(o){var a=o.name;i||(i={}),i[a]||(i[a]={offset:r,size:t.getUint16(r+2)})}if(65498===e)break;r+=2+t.getUint16(r+2)}return i}},Er=function(t,e,n){if(t){var r=new DataView(t),i=Mr(r);if(i&&i.exif){var o=function(t,e){if(65505===t.getUint16(e)){var n=t.getUint16(e+2);if(e+=4,1165519206===t.getUint32(e)){e+=6;var r=t.getUint16(e);if(18761===r||19789===r){var i=18761===r;if(e+=2,42===t.getUint16(e,i)){e+=t.getUint32(e+2,i);var o=function(r){for(var o=[],a=e,u=Math.min(t.byteLength,e+n-16);a<u;a+=12){var c=a;t.getUint16(c,i)===r&&o.push(c)}return o};return{read:function(e){var n=o(e);if(n.length)return t.getUint16(n[0]+8,i)},write:function(e,n){var r=o(e);return!!r.length&&(r.forEach((function(e){return t.setUint16(e+8,n,i)})),!0)}}}}}}}(r,i.exif.offset);if(o)return void 0===n?o.read(e):o.write(e,n)}}},Tr="__pqina_webapi__",Ir=function(t){return window[Tr]?window[Tr][t]:window[t]},Pr=function(){},Rr="readAsArrayBuffer",Ar=function(t,e,n){return void 0===e&&(e=Pr),void 0===n&&(n={}),new Promise((function(r,i){var o=n.dataFormat,a=void 0===o?Rr:o,u=new(Ir("FileReader"));u.onload=function(){return r(u.result)},u.onerror=function(){return i(u.error)},u.onprogress=e,u[a](t)}))},Lr=function(){var t=Sr(wr().mark((function t(e,n,r){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[0,e.size]),t.next=3,Ar(e.slice.apply(e,n),r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Or=function(){var t=Sr(wr().mark((function t(e,n){var r;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lr(e,[0,262144],n);case 2:return r=t.sent,t.abrupt("return",Er(r,274)||1);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),zr=null,Dr=function(){return null===zr&&(zr="undefined"!=typeof window&&void 0!==window.document),zr},Fr=null,jr=function(){return new Promise((function(t){if(null===Fr){var e=Dr()?new Image:{};return e.onload=function(){Fr=1===e.naturalWidth,e=void 0,t(Fr)},void(e.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=")}return t(Fr)}))},Br=function(t){return t.getContext("2d").getImageData(0,0,t.width,t.height)},Nr=function(t,e,n){void 0===n&&(n=[]);var r=document.createElement(t),i=Object.getOwnPropertyDescriptors(r.__proto__);for(var o in e)"style"===o?r.style.cssText=e[o]:i[o]&&i[o].set||/textContent|innerHTML/.test(o)||"function"==typeof e[o]?r[o]=e[o]:r.setAttribute(o,e[o]);return n.forEach((function(t){return r.appendChild(t)})),r},Vr={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},Hr=function(t,e,n){return void 0===n&&(n=-1),-1===n&&(n=1),Vr[n](t,e)},Wr=function(t){t.width=1,t.height=1;var e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Ur=function(t){return"data"in t},Zr=function(t){return Dr()?RegExp(t).test(window.navigator.userAgent):void 0},qr=null,Gr=function(){return null===qr&&(qr=Zr(/Android/)),qr},Xr=function(t,e){var n=Nr("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},Yr=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),t.next=3,jr();case 3:if(r=t.sent,i=r||n<5?[e.width,e.height]:[e.height,e.width],o=Nr("canvas",{width:i[0],height:i[1]}),a=o.getContext("2d",{willReadFrequently:!0}),Ur(e)&&!r&&n>1&&(u=Nr("canvas",{width:e.width,height:e.height}),u.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),e=u),!r&&n>1&&a.transform.apply(a,Hr(e.width,e.height,n)),!Ur(e)){t.next=15;break}if(a.putImageData(e,0,0),!Gr()){t.next=13;break}return t.abrupt("return",Xr(o));case 13:t.next=16;break;case 15:a.drawImage(e,0,0);case 16:return e instanceof HTMLCanvasElement&&Wr(e),t.abrupt("return",o);case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Kr=function(){var t=Sr(wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=1),1!==n){t.next=3;break}return t.abrupt("return",e);case 3:return t.next=5,jr();case 5:if(t.sent){t.next=11;break}return t.t0=Br,t.next=9,Yr(e,n);case 9:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Jr=function(t){return"object"==typeof t},Qr=function(t){return t instanceof HTMLElement?t:Jr(t)?ti(t):t},ti=function(t){var e;return Array.isArray(t)?(e=[],t.forEach((function(t,n){e[n]=Qr(t)}))):(e={},Object.keys(t).forEach((function(n){var r=t[n];e[n]=Qr(r)}))),e},ei=function(t){return"string"==typeof t},ni=function(t){return"function"==typeof t},ri=function(t,e){return new Promise((function(n,r){var i=function(){return n(function(t,e){var n=e.width,r=e.height,i=e.canvasMemoryLimit,o=e.contextOptions,a=n||t.naturalWidth,u=r||t.naturalHeight;a||u||(a=300,u=150);var c=a*u;if(i&&c>i){var s=Math.sqrt(i)/Math.sqrt(c);a=Math.floor(a*s),u=Math.floor(u*s)}var l=Nr("canvas");return l.width=a,l.height=u,l.getContext("2d",o).drawImage(t,0,0,a,u),l}(t,e))};t.complete&&t.width?i():(t.onload=i,t.onerror=function(){return r(new Error("Failed to load image"))})}))},ii=function(){var t=Sr(wr().mark((function t(e,n){var r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Nr("img",{src:URL.createObjectURL(e)}),t.next=3,ri(r,n);case 3:return i=t.sent,URL.revokeObjectURL(r.src),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),oi=function(){return"createImageBitmap"in window},ai=function(t){return/svg/.test(t.type)},ui=function(){return Math.random().toString(36).substr(2,9)},ci=new Map,si=function(t,e,n){return new Promise((function(r,i){var o=t.toString(),a=ci.get(o);if(!a){var u=function(t){return"function () {self.onmessage = function (message) {("+t.toString()+").apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}"}(t),c=URL.createObjectURL(function(t){return new Blob(["(","function"==typeof t?t.toString():t,")()"],{type:"application/javascript"})}(u)),s=new Map,l=new Worker(c);a={url:c,worker:l,messages:s,terminationTimeout:void 0,terminate:function(){clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),ci.delete(o)}},l.onmessage=function(t){var e=t.data,n=e.id,r=e.content,i=e.error;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout((function(){s.size>0||a.terminate()}),500),s.has(n)){var o=s.get(n);s.delete(n),null!=i?o.reject(i):o.resolve(r)}},ci.set(o,a)}var f=ui();a.messages.set(f,{resolve:r,reject:i}),a.worker.postMessage({id:f,content:e},n)}))},li=function(){var t=Sr(wr().mark((function t(e,n){var r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=function(){var t=Sr(wr().mark((function t(){var r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ii(e,{canvasMemoryLimit:n,contextOptions:{willReadFrequently:!0}});case 2:return r=t.sent,i=Br(r),Wr(r),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),!Gr()){t.next=5;break}return t.next=4,r();case 4:return t.abrupt("return",t.sent);case 5:if(!oi()||ai(e)||!("OffscreenCanvas"in window)){t.next=14;break}return t.prev=6,t.next=9,si((function(t,e,n){createImageBitmap(t).then((function(t){var r=t.width,i=t.height,o=r*i;if(e&&o>e){var a=Math.sqrt(e)/Math.sqrt(o);r=Math.floor(r*a),i=Math.floor(i*a)}var u=new OffscreenCanvas(r,i),c=u.getContext("2d",{willReadFrequently:!0});c.drawImage(t,0,0,r,i);var s=c.getImageData(0,0,u.width,u.height);n(null,s)})).catch((function(t){n(t)}))}),[e,n]);case 9:i=t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(6);case 14:if(i&&i.width){t.next=18;break}return t.next=17,r();case 17:return t.abrupt("return",t.sent);case 18:return t.abrupt("return",i);case 19:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,n){return t.apply(this,arguments)}}(),fi=function(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),new Promise((function(r,i){try{t.toBlob((function(t){r(t)}),e,n)}catch(t){i(t)}}))},di=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yr(e);case 2:return i=t.sent,t.next=5,fi(i,n,r);case 5:return o=t.sent,Wr(i),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),hi=function(t,e,n){return void 0===n&&(n=[0,t.size]),e?new Blob([e,t.slice.apply(t,n)],{type:t.type}):t},pi={matroska:"mkv"},vi=function(t){var e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){var n=t.split("/x-")[1];return pi[void 0===n?"":n]}return e},mi=function(t){return t.substr(0,t.lastIndexOf("."))||t},gi=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/,yi=function(t){return t&&(e=(n=t,n.split(".").pop()).toLowerCase(),gi.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"");var e,n},bi=function(t,e,n){var r=(new Date).getTime(),i=t.type.length&&!/null|text/.test(t.type),o=i?t.type:n,a=function(t,e){var n=yi(t);if(n===e)return t;var r=vi(e)||n;return mi(t)+"."+r}(e,o);try{return new(Ir("File"))([t],a,{lastModified:r,type:i?t.type:o})}catch(e){var u=i?t.slice():t.slice(0,t.size,o);return u.lastModified=r,u.name=a,u}},$i=function(t,e){return t/e},xi=function(t){return t},wi=Math.PI,ki=Math.PI/2,Si=ki/2,Ci=function(t){var e=Math.abs(t)%Math.PI;return e>Si&&e<Math.PI-Si},_i={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},Mi=_i.Top,Ei=_i.Right,Ti=_i.Bottom,Ii=_i.Left,Pi=_i.TopLeft,Ri=_i.TopRight,Ai=_i.BottomRight,Li=_i.BottomLeft,Oi=(Vn={},Vn[Mi]=[.5,0],Vn[Ei]=[1,.5],Vn[Ti]=[.5,1],Vn[Ii]=[0,.5],Vn[Pi]=[0,0],Vn[Ri]=[1,0],Vn[Ai]=[1,1],Vn[Li]=[0,1],Vn),zi=function(t,e){return void 0===e&&(e=12),parseFloat(t.toFixed(e))},Di=function(t,e,n){return n+(t-n)*e},Fi=function(t){return{x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}},ji=function(){return Bi(0,0)},Bi=function(t,e){return{x:t,y:e}},Ni=function(t){return Bi(t.pageX,t.pageY)},Vi=function(t){return Bi(t.x,t.y)},Hi=function(t){return t.x=-t.x,t.y=-t.y,t},Wi=function(t,e,n){void 0===n&&(n=ji());var r=Math.cos(e),i=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+r*o-i*a,t.y=n.y+i*o+r*a,t},Ui=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Zi=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?ji():(t.x/=e,t.y/=e,t)},qi=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},Gi=function(t,e){return t.x===e.x&&t.y===e.y},Xi=function(t,e){return t.x=e(t.x),t.y=e(t.y),t},Yi=function(t,e){return t.x+=e.x,t.y+=e.y,t},Ki=function(t,e){return t.x-=e.x,t.y-=e.y,t},Ji=function(t,e){return t.x/=e,t.y/=e,t},Qi=function(t,e){return t.x*=e,t.y*=e,t},to=function(t,e){return t.x*e.x+t.y*e.y},eo=function(t,e){return t.x*e.y-t.y*e.x},no=function(t,e){void 0===e&&(e=ji());var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},ro=function(t,e){return void 0===e&&(e=ji()),Math.sqrt(no(t,e))},io=function(t,e,n){return t.x=Di(t.x,e,n.x),t.y=Di(t.y,e,n.y),t},oo=function(t){var e=0,n=0;return t.forEach((function(t){e+=t.x,n+=t.y})),Bi(e/t.length,n/t.length)},ao=function(t,e,n,r,i){return t.forEach((function(t){t.x=e?r-(t.x-r):t.x,t.y=n?i-(t.y-i):t.y})),t},uo=function(t,e,n,r){var i=Math.sin(e),o=Math.cos(e);return t.forEach((function(t){t.x-=n,t.y-=r;var e=t.x*o-t.y*i,a=t.x*i+t.y*o;t.x=n+e,t.y=r+a})),t},co=function(t,e){return{width:t,height:e}},so=function(t){return co(t.width,t.height)},lo=function(t){return co(t.width,t.height)},fo=function(t){return co(t.width,t.height)},ho=function(t){return co(t[0],t[1])},po=function(t){return/img/i.test(t.nodeName)?co((e=t).naturalWidth,e.naturalHeight):lo(t);var e},vo=function(t,e){return co(t,e)},mo=function(t,e,n){return void 0===n&&(n=xi),n(t.width)===n(e.width)&&n(t.height)===n(e.height)},go=function(t,e){return t.width*=e,t.height*=e,t},yo=function(t){return Bi(.5*t.width,.5*t.height)},bo=function(t,e){var n=Math.abs(e),r=Math.cos(n),i=Math.sin(n),o=r*t.width+i*t.height,a=i*t.width+r*t.height;return t.width=o,t.height=a,t},$o=function(t,e){return t.width>=e.width&&t.height>=e.height},xo=function(t,e){return t.width=e(t.width),t.height=e(t.height),t},wo=function(t,e){return{start:t,end:e}},ko=function(t){return wo(Vi(t.start),Vi(t.end))},So=function(t,e){if(0===e)return t;var n=Bi(t.start.x-t.end.x,t.start.y-t.end.y),r=Zi(n),i=Qi(r,e);return t.start.x+=i.x,t.start.y+=i.y,t.end.x-=i.x,t.end.y-=i.y,t},Co=[Bi(-1,-1),Bi(-1,1),Bi(1,1),Bi(1,-1)],_o=function(t,e,n,r){return{x:t,y:e,width:n,height:r}},Mo=function(t){return _o(t.x,t.y,t.width,t.height)},Eo=function(){return _o(0,0,0,0)},To=function(t){return _o(0,0,t.width,t.height)},Io=function(t){return _o(t.x||0,t.y||0,t.width||0,t.height||0)},Po=function(t){var e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)})),_o(e,r,n-e,i-r)},Ro=function(t){return Lo(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry)},Ao=function(t,e){return _o(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height)},Lo=function(t,e,n,r){return _o(t,e,n,r)},Oo=function(t){return Bi(t.x+.5*t.width,t.y+.5*t.height)},zo=function(t,e){return t.x+=e.x,t.y+=e.y,t},Do=function(t,e,n){return n=n||Oo(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t},Fo=function(t,e,n,r){var i=(r.x-t.x)/t.width,o=(r.y-t.y)/t.height,a=Math.max(e.width,t.width),u=Math.max(e.height,t.height);return a=Math.min(n.width,a),u=Math.min(n.height,u),t.x=r.x-i*a,t.y=r.y-o*u,t.width=a,t.height=u,t},jo=function(t,e){var n=Oi[e],r=n[0],i=n[1],o=r*t.width,a=i*t.height;return Bi(t.x+o,t.y+a)},Bo=function(t,e){return t.x*=e,t.y*=e,t.width*=e,t.height*=e,t},No=function(t,e,n){return void 0===n&&(n=xi),n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height)},Vo=function(t){return $i(t.width,t.height)},Ho=function(t,e,n,r,i){return t.x=e,t.y=n,t.width=r,t.height=i,t},Wo=function(t,e){return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t},Uo=function(t,e,n){return n||(n=Oo(t)),Ko(t).map((function(t){return Wi(t,e,n)}))},Zo=function(t,e){return _o(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height)},qo=function(t,e){return!(e.x<t.x)&&(!(e.y<t.y)&&(!(e.x>t.x+t.width)&&!(e.y>t.y+t.height)))},Go=function(t,e,n){if(void 0===n&&(n=ji()),0===t.width||0===t.height)return Eo();var r=Vo(t);e||(e=r);var i=t.width,o=t.height;return e>r?i=o*e:o=i/e,_o(n.x+.5*(t.width-i),n.y+.5*(t.height-o),i,o)},Xo=function(t,e,n){if(void 0===e&&(e=Vo(t)),void 0===n&&(n=ji()),0===t.width||0===t.height)return Eo();var r=t.width,i=r/e;return i>t.height&&(r=(i=t.height)*e),_o(n.x+.5*(t.width-r),n.y+.5*(t.height-i),r,i)},Yo=function(t){return[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)]},Ko=function(t){return[Bi(t.x,t.y),Bi(t.x+t.width,t.y),Bi(t.x+t.width,t.y+t.height),Bi(t.x,t.y+t.height)]},Jo=function(t,e){if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},Qo=function(t,e,n){return void 0===n&&(n=Oo(t)),Ko(t).map((function(t,r){var i=Co[r];return Bi(Di(t.x,1+i.x*e.x,n.x),Di(t.y,1+i.y*e.y,n.y))}))},ta=function(t){return t.x=0,t.y=0,t},ea=function(t){var e=t[0],n=t[t.length-1];t=Gi(e,n)?t:[].concat(t,[e]);for(var r,i,o,a=e.x,u=e.y,c=0,s=0,l=0,f=0,d=t.length;s<d;s++)r=t[s],i=t[s+1>d-1?0:s+1],c+=o=(r.y-u)*(i.x-a)-(i.y-u)*(r.x-a),l+=(r.x+i.x-2*a)*o,f+=(r.y+i.y-2*u)*o;return Bi(a+l/(o=3*c),u+f/o)},na=function(t,e){return ra(t.start,t.end,e.start,e.end)},ra=function(t,e,n,r){var i=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0!==i){var o=((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/i,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/i;if(!(o<0||o>1||a<0||a>1))return Bi(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))}},ia=function(t,e,n){for(var r=void 0===n?{}:n,i=r.ignoreIdenticalLines,o=void 0!==i&&i,a=r.breakOnIntersection,u=void 0!==a&&a,c=e.length,s=[],l=0;l<c-1;l++)if(!o||!(Gi(t.start,e[l])||Gi(t.start,e[l+1])||Gi(t.end,e[l])||Gi(t.end,e[l+1]))){var f=ra(t.start,t.end,e[l],e[l+1]);if(f){if(u)return[f];s.push(f)}}return s.length?s:void 0},oa=function(t,e){var n=0,r=0,i=!1,o=e.length;for(n=0,r=o-1;n<o;r=n++)e[n].y>t.y!=e[r].y>t.y&&t.x<(e[r].x-e[n].x)*(t.y-e[n].y)/(e[r].y-e[n].y)+e[n].x&&(i=!i);return i},aa=function(t){for(var e=[],n=0;n<t.length;n++){var r=n+1;r===t.length&&(r=0),e.push(wo(Vi(t[n]),Vi(t[r])))}return e},ua=function(t,e){return void 0===e&&(e=0),aa(t).map((function(t){return So(t,e)}))},ca=function(t,e,n,r,i,o,a){void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=12);for(var u=[],c=0;c<a;c++)u.push(Bi(t.x+e*Math.cos(c*(2*Math.PI)/a),t.y+n*Math.sin(c*(2*Math.PI)/a)));return(i||o)&&ao(u,i,o,t.x,t.y),r&&uo(u,r,t.x,t.y),u},sa=function(t,e){var n=To(t),r=Oo(n),i=Uo(n,e,r);return ta(Po(i))},la=function(t,e){return t instanceof HTMLElement&&(!e||new RegExp("^"+e+"$","i").test(t.nodeName))},fa=function(t){return t instanceof File},da=function(){var t=Sr(wr().mark((function t(e,n,r){var i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fi(e,n,r);case 2:return i=t.sent,t.abrupt("return",bi(i,"canvas"));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),ha=function(t){return t.split("/").pop().split(/\?|\#/).shift()},pa=Dr()&&!!Node.prototype.replaceChildren,va=pa?function(t,e){return t.replaceChildren(e)}:function(t,e){for(;t.lastChild;)t.removeChild(t.lastChild);void 0!==e&&t.append(e)},ma=Dr()&&Nr("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"}),ga=function(t){return va(ma,t),ma.parentNode||document.body.append(ma),clearTimeout(Cr),Cr=setTimeout((function(){ma.remove()}),500),t},ya=null,ba=function(){return null===ya&&(ya=Dr()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ya},$a=function(t){return new Promise((function(e,n){var r=!1;!t.parentNode&&ba()&&(r=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",ga(t));var i=function(){var n=t.naturalWidth,i=t.naturalHeight;n&&i&&(r&&t.remove(),clearInterval(o),e({width:n,height:i}))};t.onerror=function(t){clearInterval(o),n(t)};var o=setInterval(i,1);i()}))},xa=function(t){return new Promise((function(e,n){var r=function(){e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=function(){return n(t.error)}}))},wa=function(t){return/^image/.test(t.type)},ka=function(t){return new Promise((function(e){var n=ei(t)?t:URL.createObjectURL(t),r=function(){var t=new Image;t.src=n,e(t)};if(t instanceof Blob&&wa(t))return r();var i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=function(){return e(i)},i.onerror=r,i.src=n}))},Sa=function(t){return"VIDEO"===t.nodeName},Ca=function(){var t=Sr(wr().mark((function t(e){var n,r;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.src){t.next=6;break}return t.next=3,ka(e);case 3:n=t.sent,t.next=7;break;case 6:n=e;case 7:if(t.prev=7,!Sa(n)){t.next=14;break}return t.next=11,xa(n);case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,$a(n);case 16:t.t0=t.sent;case 17:r=t.t0;case 18:return t.prev=18,fa(e)&&URL.revokeObjectURL(n.src),t.finish(18);case 21:return t.abrupt("return",r);case 22:case"end":return t.stop()}}),t,null,[[7,,18,21]])})));return function(e){return t.apply(this,arguments)}}(),_a=function(t){return new Promise((function(e,n){if(t.complete)return e(t);t.onload=function(){return e(t)},t.onerror=function(){return n(new Error("Failed to load image"))}}))},Ma=function(){var t=Sr(wr().mark((function t(e){var n,r,i,o;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ca(e);case 2:return n=t.sent,t.next=5,_a(e);case 5:return r=t.sent,i=Nr("canvas",n),i.getContext("2d",{willReadFrequently:!0}).drawImage(r,0,0),t.next=11,fi(i);case 11:return o=t.sent,t.abrupt("return",bi(o,ha(r.src)));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ea=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=!0),new(Ir("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e})},Ta=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n="data-uri"),void 0===r&&(r=Pr),r(Ea(0)),t.next=5,fetch(e);case 5:return i=t.sent,r(Ea(.33)),t.next=9,i.blob();case 9:return o=t.sent,wa(o)||(a="image/"+(e.includes(",/9j/")?"jpeg":"png")),r(Ea(.66)),u=bi(o,n,a),r(Ea(1)),t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Ia=function(t,e,n){return void 0===n&&(n=function(t){return t}),t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0},Pa=function(t){if(!t)return null;var e=t.split(/filename=|filename\*=.+''/).splice(1).map((function(t){return t.trim().replace(/^["']|[;"']{0,2}$/g,"")})).filter((function(t){return t.length}));return e.length?decodeURI(e[e.length-1]):null},Ra="URL_REQUEST",Aa=function(t){function e(e,n,r){var i;return(i=t.call(this,e)||this).name="EditorError",i.code=n,i.metadata=r,i}return gr(e,t),e}(yr(Error)),La=function(t,e){var n=e||{},r=n.headers,i=void 0===r?{}:r,o=n.credentials;Object.entries(i).forEach((function(e){var n=e[0],r=e[1];return t.setRequestHeader(n,r)})),o&&(t.withCredentials="omit"!==o)},Oa=function(t,e,n){return/^data:/.test(t)?Ta(t,void 0,e):function(t,e,n){return new Promise((function(r,i){var o=function(){return i(new Aa("Error fetching image",Ra,a))},a=new XMLHttpRequest;a.onprogress=e,a.onerror=o,a.onload=function(){if(!a.response||a.status>=300||a.status<200)return o();var e=Ia(a,"Content-Type"),n=Ia(a,"Content-Disposition",Pa)||ha(t);r(bi(a.response,n,e||yi(n)))};var u=n.willRequest;Promise.resolve(u&&u(t,{resourceType:"image"})).then((function(e){if(!1===e)return i("Image load rejected");a.open("GET",t),La(a,e),a.responseType="blob",a.send()})).catch(console.error)}))}(t,e,n)},za=function(t){return t instanceof Blob&&!(t instanceof File)},Da=function(t){return"close"in t},Fa=function(){var t=Sr(wr().mark((function t(e,n,r){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!fa(e)&&!za(e)){t.next=4;break}return t.abrupt("return",e);case 4:if(!ei(e)){t.next=10;break}return t.next=7,Oa(e,n,r);case 7:case 13:case 19:case 29:return t.abrupt("return",t.sent);case 10:if(!la(e,"canvas")){t.next=16;break}return t.next=13,da(e);case 16:if(!la(e,"img")){t.next=22;break}return t.next=19,Ma(e);case 22:if(!Ur(e)&&!Da(e)){t.next=32;break}return t.t0=da,t.next=26,Yr(e);case 26:return t.t1=t.sent,t.next=29,(0,t.t0)(t.t1);case 32:throw new Aa("Invalid image source","invalid-image-source");case 33:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),ja=null,Ba=function(){return null===ja&&(ja=Dr()&&/^mac/i.test(navigator.platform)),ja},Na=null,Va=function(){return null===Na&&(Na=Dr()&&(Zr(/iPhone|iPad|iPod/)||Ba()&&navigator.maxTouchPoints>=1)),Na},Ha=function(){var t=Sr(wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),t.next=3,jr();case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=Va();case 6:if(!t.t0){t.next=8;break}return t.abrupt("return",e);case 8:if(!(n<5)){t.next=10;break}return t.abrupt("return",e);case 10:return t.abrupt("return",vo(e.height,e.width));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Wa=function(t){return/jpeg/.test(t.type)},Ua=function(t){return"object"!=typeof(e=t)||e.constructor!=Object?t:JSON.stringify(t);var e},Za=function(t,e,n){return new Promise((function(r,i){var o=n.token,a=void 0===o?{}:o,u=n.beforeSend,c=void 0===u?Pr:u,s=n.onprogress,l=void 0===s?Pr:s;a.cancel=function(){return f.abort()};var f=new XMLHttpRequest;f.upload.onprogress=l,f.onload=function(){return f.status>=200&&f.status<300?r(f):i(f)},f.onerror=function(){return i(f)},f.ontimeout=function(){return i(f)},f.open("POST",encodeURI(t)),c(f),f.send(e instanceof FormData?e:e.reduce((function(t,e){return t.append.apply(t,e.map(Ua)),t}),new FormData))}))},qa=function(t,e,n){return void 0===e&&(e=0),0===e||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t},Ga=function(t,e,n){return t.translate(e,n),t},Xa=function(t,e,n){return t.scale(e,n),t},Ya=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),i=(r=n).flipX,o=r.flipY,a=r.rotation,u=r.crop,c=lo(e),s=i||o,l=!!a,f=u&&(u.x||u.y||u.width||u.height),d=f&&No(u,To(c)),h=f&&!d,s||l||h){t.next=10;break}return t.abrupt("return",e);case 10:if((v=Nr("canvas",{width:e.width,height:e.height})).getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),s&&(m=Nr("canvas",{width:v.width,height:v.height}).getContext("2d",{willReadFrequently:!0}),Xa(m,i?-1:1,o?-1:1),m.drawImage(v,i?-v.width:0,o?-v.height:0),m.restore(),Wr(v),v=m.canvas),!l){t.next=24;break}g=xo(fo(Po(Uo(Io(v),a))),Math.floor),y=Nr("canvas",{width:u.width,height:u.height}).getContext("2d",{willReadFrequently:!0}),Ga(y,-u.x,-u.y),qa(y,a,yo(g)),y.drawImage(v,.5*(g.width-v.width),.5*(g.height-v.height)),y.restore(),Wr(v),v=y.canvas,t.next=29;break;case 24:if(!h){t.next=29;break}return b=v.getContext("2d",{willReadFrequently:!0}),p=b.getImageData(u.x,u.y,u.width,u.height),Wr(v),t.abrupt("return",p);case 29:return $=v.getContext("2d",{willReadFrequently:!0}),p=$.getImageData(0,0,v.width,v.height),Wr(v),t.abrupt("return",p);case 33:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ka=function(t,e){for(var n=t.imageData,r=t.width,i=t.height,o=n.width,a=n.height,u=Math.round(r),c=Math.round(i),s=n.data,l=new Uint8ClampedArray(u*c*4),f=o/u,d=a/c,h=Math.ceil(.5*f),p=Math.ceil(.5*d),v=0;v<c;v++)for(var m=0;m<u;m++){for(var g=4*(m+v*u),y=0,b=0,$=0,x=0,w=0,k=0,S=0,C=(v+.5)*d,_=Math.floor(v*d);_<(v+1)*d;_++)for(var M=Math.abs(C-(_+.5))/p,E=(m+.5)*f,T=M*M,I=Math.floor(m*f);I<(m+1)*f;I++){var P=Math.abs(E-(I+.5))/h,R=Math.sqrt(T+P*P);if(!(R<-1||R>1)&&!((y=2*R*R*R-3*R*R+1)<=0)){var A=s[(P=4*(I+_*o))+3];S+=y*A,$+=y,A<255&&(y=y*A/250),x+=y*s[P],w+=y*s[P+1],k+=y*s[P+2],b+=y}}l[g]=x/b,l[g+1]=w/b,l[g+2]=k/b,l[g+3]=S/$}e(null,{data:l,width:u,height:c})},Ja=function(t){if(t instanceof ImageData)return t;var e;try{e=new ImageData(t.width,t.height)}catch(n){e=Nr("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Qa=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u,c,s,l,f,d,h;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),o=(i=n).width,a=i.height,u=i.fit,c=i.upscale,o||a){t.next=4;break}return t.abrupt("return",e);case 4:if(s=o,l=a,o?a||(l=o):s=a,"force"===u){t.next=16;break}if(f=s/e.width,d=l/e.height,h=1,"cover"===u?h=Math.max(f,d):"contain"===u&&(h=Math.min(f,d)),!(h>1&&!1===c)){t.next=14;break}return t.abrupt("return",e);case 14:s=Math.round(e.width*h),l=Math.round(e.height*h);case 16:if(s=Math.max(s,1),l=Math.max(l,1),e.width!==s||e.height!==l){t.next=20;break}return t.abrupt("return",e);case 20:if(!r){t.next=22;break}return t.abrupt("return",r(e,s,l));case 22:return t.next=24,si(Ka,[{imageData:e,width:s,height:l}],[e.data.buffer]);case 24:return e=t.sent,t.abrupt("return",Ja(e));case 26:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),tu=function(t,e){var n=t.imageData,r=t.matrix;if(!r)return e(null,n);for(var i=new Uint8ClampedArray(n.width*n.height*4),o=n.data,a=o.length,u=r[0],c=r[1],s=r[2],l=r[3],f=r[4],d=r[5],h=r[6],p=r[7],v=r[8],m=r[9],g=r[10],y=r[11],b=r[12],$=r[13],x=r[14],w=r[15],k=r[16],S=r[17],C=r[18],_=r[19],M=0,E=0,T=0,I=0,P=0,R=0,A=0,L=0,O=0,z=0,D=0,F=0;M<a;M+=4)R=(E=o[M]/255)*u+(T=o[M+1]/255)*c+(I=o[M+2]/255)*s+(P=o[M+3]/255)*l+f,A=E*d+T*h+I*p+P*v+m,L=E*g+T*y+I*b+P*$+x,O=E*w+T*k+I*S+P*C+_,z=Math.max(0,R*O)+(1-O),D=Math.max(0,A*O)+(1-O),F=Math.max(0,L*O)+(1-O),i[M]=255*Math.max(0,Math.min(1,z)),i[M+1]=255*Math.max(0,Math.min(1,D)),i[M+2]=255*Math.max(0,Math.min(1,F)),i[M+3]=255*P;e(null,{data:i,width:n.width,height:n.height})},eu=function(t,e){var n=t.imageData,r=t.matrix;if(!r)return e(null,n);var i=r.reduce((function(t,e){return t+e}));i=i<=0?1:i;var o=n.width,a=n.height,u=n.data,c=0,s=0,l=0,f=Math.round(Math.sqrt(r.length)),d=Math.floor(f/2),h=0,p=0,v=0,m=0,g=0,y=0,b=0,$=0,x=0,w=0,k=new Uint8ClampedArray(o*a*4);for(l=0;l<a;l++)for(s=0;s<o;s++){for(h=0,p=0,v=0,m=0,y=0;y<f;y++)for(g=0;g<f;g++)(b=l+y-d)<0&&(b=a-1),b>=a&&(b=0),($=s+g-d)<0&&($=o-1),$>=o&&($=0),x=4*(b*o+$),w=r[y*f+g],h+=u[x]*w,p+=u[x+1]*w,v+=u[x+2]*w,m+=u[x+3]*w;k[c]=h/i,k[c+1]=p/i,k[c+2]=v/i,k[c+3]=m/i,c+=4}e(null,{data:k,width:o,height:a})},nu=function(t,e){var n=t.imageData,r=t.strength;if(!r)return e(null,n);var i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b=new Uint8ClampedArray(n.width*n.height*4),$=n.width,x=n.height,w=n.data,k=function(t,e){return i=t-_,o=e-M,Math.sqrt(i*i+o*o)},S=0,C=0,_=.5*$,M=.5*x,E=k(0,0);for(r>0?(a=0,u=0,c=0):(r=Math.abs(r),a=1,u=1,c=1),C=0;C<x;C++)for(S=0;S<$;S++)v=4*(S+C*$),m=w,g=b,y=k(S,C)*r/E,s=m[v]/255,l=m[v+1]/255,f=m[v+2]/255,d=m[v+3]/255,p=(h=1-y)*d+y,g[v]=(h*d*s+y*a)/p*255,g[v+1]=(h*d*l+y*u)/p*255,g[v+2]=(h*d*f+y*c)/p*255,g[v+3]=255*p;e(null,{data:b,width:n.width,height:n.height})},ru=function(t,e){var n=t.imageData,r=t.level,i=t.monochrome,o=void 0!==i&&i;if(!r)return e(null,n);for(var a,u,c,s=new Uint8ClampedArray(n.width*n.height*4),l=n.data,f=l.length,d=0,h=function(){return 255*(2*Math.random()-1)*r},p=o?function(){var t=h();return[t,t,t]}:function(){return[h(),h(),h()]};d<f;d+=4){var v=p();a=v[0],u=v[1],c=v[2],s[d]=l[d]+a,s[d+1]=l[d+1]+u,s[d+2]=l[d+2]+c,s[d+3]=l[d+3]}e(null,{data:s,width:n.width,height:n.height})},iu=function(t,e){var n=t.imageData,r=t.level;if(!r)return e(null,n);for(var i,o,a,u=new Uint8ClampedArray(n.width*n.height*4),c=n.data,s=c.length,l=0;l<s;l+=4)i=c[l]/255,o=c[l+1]/255,a=c[l+2]/255,u[l]=255*Math.pow(i,r),u[l+1]=255*Math.pow(o,r),u[l+2]=255*Math.pow(a,r),u[l+3]=c[l+3];e(null,{data:u,width:n.width,height:n.height})},ou=function(t){for(var e,n=t.length,r=n>=20?6:n>=16?5:3,i=0;i<n;i++){if(1===(e=t[i])&&i%r!=0)return!1;if(0!==e&&1!==e)return!1}return!0},au=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),i=(r=n).colorMatrix,o=r.convolutionMatrix,a=r.gamma,u=r.noise,c=r.vignette,s=[],o&&s.push([eu,{matrix:o.clarity}]),a>0&&s.push([iu,{level:1/a}]),i&&!ou(i)&&s.push([tu,{matrix:i}]),(u>0||u<0)&&s.push([ru,{level:u}]),(c>0||c<0)&&s.push([nu,{strength:c}]),s.length){t.next=10;break}return t.abrupt("return",e);case 10:return l="function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        ("+function t(e,n){return"(err, imageData) => {\n            ("+e[n][0].toString()+")(Object.assign({ imageData: imageData }, filterInstructions["+n+"]), \n                "+(e[n+1]?t(e,n+1):"done")+")\n        }"}(s,0)+")(null, imageData)\n    }",t.next=14,si(l,[{imageData:e,filterInstructions:s.map((function(t){return t[1]}))}],[e.data.buffer]);case 14:return e=t.sent,t.abrupt("return",Ja(e));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),uu=function(t){return"number"==typeof t},cu=function(t){return ei(t)&&null!==t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)},su=function(t,e){return t.hasOwnProperty(e)},lu=function(t){return Array.isArray(t)},fu=64,du=102,hu=112,pu=!1,vu=function(t,e){return!pu&&Dr()&&(/^win/i.test(navigator.platform)&&(du=103),(Va()||Ba())&&(fu=63.5,du=110,hu=123),pu=!0),"<svg"+(e?' aria-label="'+e+'"':"")+' width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="'+fu+'" y="'+du+'" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="'+hu+'px">'+t+"</text></svg>"},mu=function(t){return t instanceof Blob},gu=function(t,e){return t/e*100+"%"},yu=function(t){return"rgba("+Math.round(255*t[0])+", "+Math.round(255*t[1])+", "+Math.round(255*t[2])+", "+(uu(t[3])?t[3]:1)+")"},bu=function(t){return Object.values(t).join("_")},$u=function(t){return void 0===t&&(t=0),new Promise((function(e){setTimeout(e,t)}))},xu=function(t){return!new Uint32Array(t.getImageData(0,0,t.canvas.width,t.canvas.height).data.buffer).some((function(t){return 0!==t}))},wu=function(){var t=Sr(wr().mark((function t(e,n){var r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=0),r=Nr("canvas",{width:80,height:80}),i=r.getContext("2d"),t.next=5,$u(n);case 5:if(i.drawImage(e,0,0,80,80),!(xu(i)&&n<=256)){t.next=10;break}return t.next=9,wu(e,n+16);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ku=new Map,Su=function(t,e){var n=(void 0===e?{}:e).safariCacheKey,r=void 0===n?"*":n;return new Promise((function(e,n){var i=new Image;i.onerror=function(){return n(new Error("Failed to load SVG"))},i.onload=function(){if(!ba()||!t.includes("@font-face")||ku.has(r))return e(i);wu(i).then((function(){ku.set(r,!0),e(i)}))},i.src="data:image/svg+xml,"+t}))},Cu=function(t){return new Promise((function(e,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=function(){return e(r.result)},r.readAsDataURL(t)}))},_u=function(){var t=[];return{sub:function(e,n){return t.push({event:e,callback:n}),function(){return t=t.filter((function(t){return t.event!==e||t.callback!==n}))}},pub:function(e,n){t.filter((function(t){return t.event===e})).forEach((function(t){return t.callback(n)}))}}},Mu=32,Eu=function(t,e){var n=t.color,r=void 0===n?[0,0,0]:n,i=t.fontSize,o=void 0===i?16:i,a=t.fontFamily,u=void 0===a?"sans-serif":a,c=t.fontVariant,s=void 0===c?"normal":c,l=t.fontWeight,f=void 0===l?"normal":l,d=t.fontStyle,h=void 0===d?"normal":d,p=t.textAlign,v=void 0===p?"left":p,m=t.lineHeight;return void 0===e&&(e=1),"font-size:"+o*e+"px;font-style:"+h+";font-weight:"+f+";font-family:"+u+";font-variant:"+s+";line-height:"+(void 0===m?20:m)*e+"px;text-align:"+v+";color:"+yu(r)+";"},Tu=function(t,e,n){void 0===n&&(n=1);var r=e.width,i=e.height,o=!r,a=!1===e.disableNewline?function(t){return void 0===t&&(t=""),t.split("\n").length}(t):void 0,u=o?"auto":r*n+"px",c=i?i*n+"px":"auto",s=o?"normal":"break-word",l=o&&!a?"nowrap":"pre-line",f=function(t){var e=void 0===t?{}:t,n=e.fontSize,r=void 0===n?16:n,i=e.lineHeight,o=void 0===i?20:i;return.5*Math.max(0,r-o)}(e)*n;return"max-width:none;min-width:auto;width:"+u+";height:"+c+";margin-top:0;margin-bottom:0;padding-top:"+f+"px;word-break:"+s+";word-wrap:normal;white-space:"+l+";"},Iu=new Map,Pu=function t(e){for(var n=[],r=0,i=Array.from(e.childNodes);r<i.length;r++){var o=i[r];o.nodeType===Node.TEXT_NODE?n.push(Au(o)):n.push.apply(n,t(o))}return n},Ru=function(t,e){void 0===t&&(t="");var n=e.width,r=void 0===n?0:n,i=e.height,o=void 0===i?"auto":i,a=e.fontSize,u=e.fontFamily,c=e.lineHeight,s=e.fontWeight,l=e.fontStyle,f=e.fontVariant,d=bu({text:t,fontFamily:u,fontWeight:s,fontStyle:l,fontVariant:f,fontSize:a,lineHeight:c,width:r,height:o}),h=Iu.get(d);if(h)return h;var p=ga(Nr("pre",{contenteditable:"true",spellcheck:"false",style:"pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;"+Eu({fontFamily:u,fontWeight:s,fontStyle:l,fontVariant:f,fontSize:a,lineHeight:c})+";"+Tu(t,e)+'"',innerHTML:t})),v=p.getBoundingClientRect();return h={signature:Pu(p).flat().map((function(t){return t.text})).join("_;_"),textSize:xo(lo(v),Math.ceil)},Iu.set(d,h),p.remove(),h},Au=function(t){var e=t.nodeValue;if(!e)return[];var n=e.length,r=document.createRange();r.selectNodeContents(t);for(var i=[],o=0;o<n;o++){r.setStart(t,0),r.setEnd(t,o+1);var a=r.getClientRects().length-1,u=e.charAt(o);i[a]?i[a]+=u:i.push(u)}var c=r.getClientRects();return i.map((function(t,e){return{rect:c[e],text:t}}))},Lu=new Map,Ou=function(t,e){void 0===t&&(t="");var n=e.width,r=void 0===n?0:n,i=e.height,o=void 0===i?0:i;if(r&&o)return vo(r,o);var a=e.fontSize,u=void 0===a?16:a,c=e.fontFamily,s=e.lineHeight,l=void 0===s?20:s,f=e.fontWeight,d=e.fontStyle,h=e.fontVariant,p=bu({text:t,fontFamily:c,fontWeight:f,fontStyle:d,fontVariant:h,fontSize:u,lineHeight:l,width:r}),v=Lu.get(p);if(v)return v;var m=ga(Nr("pre",{contenteditable:"true",spellcheck:"false",style:"pointer-events:none;visibility:hidden;position:absolute;"+Eu(e)+";"+Tu(t,e)+'"',innerHTML:t})).getBoundingClientRect();return(v=lo(m)).height+=Math.max(0,u-l),Lu.set(p,v),v},zu=function(t){return t.pathname.split("/").slice(0,-1).join("/")},Du=new Map,Fu=function(t,e){return new Promise((function(n,r){var i=Du.get(t);void 0===i&&(i=function(t,e){var n,r,i=_u(),o=i.sub,a=i.pub;return Promise.resolve(e&&e(t,{resourceType:"stylesheet"})).then((function(e){if(!1===e)return a("error",r="requestPrevented");var i=e||{},o=i.headers,u=i.credentials;fetch(t,{headers:o,credentials:u}).then((function(t){return t.text()})).then((function(t){a("load",n=t)})).catch((function(t){a("error",r=t)}))})),{sub:function(t,e){return"load"===t&&n?e(n):"error"===t&&r?e(r):void o(t,e)}}}(t,e),Du.set(t,i)),i.sub("load",n),i.sub("error",r)}))},ju=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fu(e,n);case 3:r=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",[]);case 9:return i=Nr("style",{innerHTML:r,id:ui()}),document.head.append(i),o=Array.from(document.styleSheets).find((function(t){return t.ownerNode.id===i.id})),i.remove(),t.abrupt("return",Array.from(o.cssRules));case 14:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),Bu=new Map,Nu=function(t){return t.filter((function(t){return t instanceof CSSFontFaceRule}))},Vu=function(t){return t.filter((function(t){return t instanceof CSSImportRule}))},Hu=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Bu.has(e.href)){t.next=2;break}return t.abrupt("return",Bu.get(e.href));case 2:t.prev=2,r=Array.from(e.cssRules),i=vr(Vu(r));case 5:if((o=i()).done){t.next=19;break}if(a=o.value,u=a.href,!Bu.has(u)){t.next=12;break}return c=Bu.get(u),r=[].concat(r,c),t.abrupt("continue",17);case 12:return t.next=14,ju(u,n);case 14:s=t.sent,Bu.set(u,s),r=[].concat(r,s);case 17:t.next=5;break;case 19:t.next=28;break;case 21:return t.prev=21,t.t0=t.catch(2),l=e.href,t.next=26,ju(l,n);case 26:r=t.sent,Bu.set(l,r);case 28:return t.abrupt("return",Nu(r));case 29:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e,n){return t.apply(this,arguments)}}(),Wu=function(t,e){return t.style.getPropertyValue(e)},Uu=function(t,e){return!!t.style&&Wu(t,"font-family").replace(/^"|"$/g,"")==e},Zu=function(t,e){for(var n,r=[],i=vr(t);!(n=i()).done;){var o=n.value;Uu(o,e)&&r.push(o)}return r},qu=function(){var t=Sr(wr().mark((function t(e){var n,r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(document.styleSheets).map((function(t){return Hu(t,e)})),t.next=3,Promise.all(n);case 3:return r=t.sent,i=[],r.forEach((function(t){return i.push.apply(i,t)})),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Gu=function(){var t=Sr(wr().mark((function t(e,n){var r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qu(n);case 2:if(r=t.sent,(i=Zu(r,e)).length){t.next=6;break}return t.abrupt("return",[]);case 6:return t.abrupt("return",i.map((function(t){var e=t.parentStyleSheet.href&&new URL(t.parentStyleSheet.href),n=e?e.origin+zu(e)+"/":"",r=t.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],i=Array.from(t.style).filter((function(t){return"src"!=t})).reduce((function(e,n){return e+=n+":"+Wu(t,n)+";"}),"");return[/^http/.test(r)?r:n+r,i]})));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Xu=new Map,Yu=new Map,Ku=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Xu.get(e)){t.next=2;break}return t.abrupt("return");case 2:if(r=Yu.get(e)){t.next=26;break}return t.next=6,Gu(e,n);case 6:if((i=t.sent).length){t.next=10;break}return Xu.set(e,!0),t.abrupt("return");case 10:o=[],a=vr(i);case 12:if((u=a()).done){t.next=24;break}return c=u.value,s=c[0],l=c[1],t.next=16,fetch(s).then((function(t){return t.blob()}));case 16:return f=t.sent,p=f.type,d=!p||/woff2/.test(p)?"woff2":/woff/.test(p)?"woff":/ttf|truetype/.test(p)?"truetype":/otf|opentype/.test(p)?"opentype":/svg/.test(p)?"svg":"woff2",t.next=20,Cu(f);case 20:h=t.sent,o.push("@font-face { src:url("+h+") format('"+d+"');"+l+";font-display:block; }");case 22:t.next=12;break;case 24:r=o.join(""),Yu.set(e,r);case 26:return t.abrupt("return",r);case 27:case"end":return t.stop()}var p}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ju=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=""),e.length){t.next=3;break}return t.abrupt("return");case 3:return r=n.imageWidth,i=void 0===r?300:r,o=n.imageHeight,a=void 0===o?150:o,u=n.paddingLeft,c=void 0===u?Mu:u,s=n.paddingRight,l=void 0===s?Mu:s,f=n.fontFamily,d=n.pixelRatio,h=void 0===d?1:d,p=n.willRequest,v=(i+c+l)*h,m=a*h,g=Eu(n,h),y=Tu(e,n,h),t.next=10,Ku(f,p);case 10:return b=t.sent,$=e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"Â "),x=$.replace(/<br>|\n/g,"<br/>"),w='<svg xmlns="http://www.w3.org/2000/svg" width="'+v+'" height="'+m+'" viewBox="0 0 '+v+" "+m+'"><foreignObject x="0" y="0" width="'+v+'" height="'+m+'"><div xmlns="http://www.w3.org/1999/xhtml">'+(b?"<style>"+b+"</style>":"")+'<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:'+l*h+"px;padding-left:"+c*h+"px;"+g+";"+y+'">'+x+"</pre></div></foreignObject></svg>",t.abrupt("return",Su(w,{safariCacheKey:f}));case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Qu=function(t){var e=Object.assign({},t),n=ti(e);return n},tc=function(t,e){var n;void 0===e&&(e={});var r,i,o=Vo(t),a=e.width||e.rx,u=e.height||e.ry;if(a&&u)return so(e);if(a||u){r=parseFloat(a||Number.MAX_SAFE_INTEGER),i=parseFloat(u||Number.MAX_SAFE_INTEGER);var c=Math.min(r,i);ei(a)||ei(u)?(r=c+"%",i=c*o+"%"):(r=c,i=c)}else{r="10%",i=10*o+"%"}var s=e.width?"width":e.rx?"rx":void 0,l=e.width?"height":e.rx?"ry":void 0;return(n={})[s||"width"]=r,n[l||"height"]=i,n},ec=function(t,e){return void 0===e&&(e={}),Object.assign({width:void 0,height:void 0},e,{aspectRatio:1,backgroundImage:(n=vu(t),"data:image/svg+xml,"+n.replace("<","%3C").replace(">","%3E"))});var n},nc=function(t,e){void 0===e&&(e={});var n=lc(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0};return Object.assign({backgroundColor:[0,0,0,0]},n,e,{backgroundImage:ei(t)?t:mu(t)?URL.createObjectURL(t):t})},rc=function(t,e){var n;if(ei(t)||mu(t)){var r=Object.assign({},tc(e),{backgroundSize:"contain"});n=cu(t)?ec(t,r):nc(t,r)}else if(t.src){var i=tc(e,t.shape||t),o=Object.assign({},t.shape,i);if(t.width&&t.height&&!su(o,"aspectRatio")){var a=Gc(i,"width",e),u=Gc(i,"height",e);o.aspectRatio=$i(a,u)}o.backgroundSize||t.shape||t.width&&t.height||(o.backgroundSize="contain"),n=cu(t.src)?ec(t.src,o):nc(t.src,o)}else t.shape&&(n=Qu(t.shape));return su(n,"backgroundImage")&&(su(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),su(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?Zc(n,e):n},ic=function(t){return Bi(t.x1,t.y1)},oc=function(t){return Bi(t.x2,t.y2)},ac=function(t){return su(t,"text")},uc=function(t){return ac(t)&&!($c(t)||su(t,"width"))},cc=function(t){return ac(t)&&($c(t)||su(t,"width"))},sc=function(t){return!ac(t)&&xc(t)},lc=function(t){return su(t,"rx")},fc=function(t){return su(t,"x1")},dc=function(t){return su(t,"points")},hc=function(t){return ac(t)&&t.isEditing},pc=function(t){return!su(t,"opacity")||t.opacity>0},vc=function(t){return t.isSelected},mc=function(t){return t.isEditing},gc=function(t){return t._isDraft},yc=function(t){return su(t,"width")&&su(t,"height")},bc=function(t){var e=su(t,"right"),n=su(t,"bottom");return e||n},$c=function(t){return(su(t,"x")||su(t,"left"))&&su(t,"right")||(su(t,"y")||su(t,"top"))&&su(t,"bottom")},xc=function(t){return yc(t)||$c(t)},wc=function(t){return t._isDraft=!0,t},kc=function(t,e){return!0!==t.disableStyle&&(!lu(t.disableStyle)||!e||!t.disableStyle.includes(e))},Sc=function(t){return!0!==t.disableSelect},Cc=function(t){return!0!==t.disableRemove},_c=function(t){return!t.disableFlip&&(!gc(t)&&!bc(t)&&function(t){return su(t,"backgroundImage")||su(t,"text")}(t))},Mc=function(t,e){return!!ac(t)&&(!0!==t.disableInput&&(ni(t.disableInput)?t.disableInput(null!=e?e:t.text):e||!0))},Ec=function(t,e){return!0!==t.disableTextLayout&&(!lu(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e))},Tc=function(t){return!0!==t.disableManipulate&&!gc(t)&&!bc(t)},Ic=function(t){return Tc(t)&&!0!==t.disableMove},Pc=function(t){return delete t.left,delete t.right,delete t.top,delete t.bottom,t},Rc=function(t){return delete t.rotation,t},Ac=function(t){return t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t},Lc=function(t){return t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t},Oc=function(t){var e=t.text;e=(e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(function(t,e){return"___"+e+"___"}))).replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(function(t,e){return"&"+e+";"}))},zc=function(t){return t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format="html"===t.format?"html":"text","html"===t.format?Oc(t):function(t){Oc(t);var e=t.text;e=(e=e.replace(/</g,"&gt;")).replace(/>/g,"&lt;"),t.text=e}(t),uc(t)?Dc(t):Fc(t)},Dc=function(t){return!1!==t.disableNewline&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),Pc(t)},Fc=function(t){return t.textAlign=t.textAlign||"left",t},jc=function(t){return function(t){ei(t.id)||(t.id=ui()),su(t,"rotation")||(t.rotation=0),su(t,"opacity")||(t.opacity=1),su(t,"disableErase")||(t.disableErase=!0)}(t),ac(t)?zc(t):sc(t)?function(t){t.cornerRadius=t.cornerRadius||0,t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],Lc(t)}(t):dc(t)?function(t){Ac(t),Rc(t),su(t,"pathClose")||(t.disableResize=!0,su(t,"disableMove")||(t.disableMove=!0)),Pc(t)}(t):fc(t)?function(t){Ac(t),t.lineStart=t.lineStart||void 0,t.lineEnd=t.lineEnd||void 0,Rc(t),Pc(t)}(t):lc(t)&&function(t){t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],Lc(t)}(t),t},Bc=function(t){return ac(t)?"text":sc(t)?"rectangle":dc(t)?"path":fc(t)?"line":lc(t)?"ellipse":void 0},Nc=function(t,e){return parseFloat(t)/100*e},Vc=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),Hc=new RegExp(/^y|top|bottom|^height|ry/,"i"),Wc=function(t,e,n){var r=n.width,i=n.height;if(Array.isArray(e))return e.map((function(t){return Jr(t)&&Uc(t,{width:r,height:i}),t}));if("string"!=typeof e)return e;if(!e.endsWith("%"))return e;var o=parseFloat(e)/100;return Vc.test(t)?zi(r*o,6):Hc.test(t)?zi(i*o,6):e},Uc=function(t,e){Object.entries(t).map((function(n){var r=n[0],i=n[1];t[r]=Wc(r,i,e)}));var n=t.lineHeight;ei(n)&&(t.lineHeight=Math.round(t.fontSize*(parseFloat(n)/100)))},Zc=function(t,e){return Uc(t,e),Qc(t,e),t},qc=function(t,e){var n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?n=e.width:/^y|height|ry/.test(t)&&(n=e.height),n},Gc=function(t,e,n){return Array.isArray(t[e])?t[e].map((function(t){return Object.entries(t).reduce((function(t,e){var r=e[0],i=e[1];return t[r]=ei(i)?Nc(i,qc(r,n)):i,t}),{})})):ei(t[e])?Nc(t[e],qc(e,n)):t[e]},Xc=function(t,e,n){return e.reduce((function(e,r){var i=Gc(t,r,n);return e[r]=i,e}),{})},Yc=function(t,e,n){return Object.keys(e).forEach((function(r){return function(t,e,n,r){if(!ei(t[e]))return t[e]=n,t;var i=qc(e,r);return t[e]=void 0===i?n:gu(n,i),t}(t,r,e[r],n)})),t},Kc=function(t,e){var n=t.filter((function(t){return t.x<0||t.y<0||t.x1<0||t.y1<0})).reduce((function(t,e){var n=function(t){var e=Eo(),n=t.strokeWidth||0;if(sc(t))e.x=t.x-.5*n,e.y=t.y-.5*n,e.width=t.width+n,e.height=t.height+n;else if(fc(t)){var r=t.x1,i=t.y1,o=t.x2,a=t.y2,u=Math.abs(Math.min(r,o)),c=Math.abs(Math.max(r,o)),s=Math.abs(Math.min(i,a)),l=Math.abs(Math.min(i,a));e.x=u+.5*n,e.y=c+.5*n,e.width=c-u+n,e.height=l-s+n}else lc(t)&&(e.x=t.x-t.rx+.5*n,e.y=t.y-t.ry+.5*n,e.width=2*t.rx+n,e.height=2*t.ry+n);return e&&su(t,"rotation")&&Uo(e,t.rotation),Yo(e)}(e),r=n[0],i=n[1],o=n[2],a=n[3];return t.top=Math.min(r,t.top),t.left=Math.min(a,t.left),t.bottom=Math.max(o,t.bottom),t.right=Math.max(i,t.right),t}),{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},Jc=function(t,e,n){var r=Qu(t);Zc(r,e);var i=n(r);return Array.isArray(i)?i:[i]},Qc=function(t,e){if(su(t,"left")&&(t.x=t.left),su(t,"right")&&!ei(t.right)){var n=e.width-t.right;su(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):su(t,"width")&&(t.x=n-t.width)}if(su(t,"top")&&(t.y=t.top),su(t,"bottom")&&!ei(t.bottom)){var r=e.height-t.bottom;su(t,"top")?(t.y=t.top,t.height=Math.max(0,r-t.top)):su(t,"height")&&(t.y=r-t.height)}return t},ts=function(t,e){return dc(t)&&t.points.filter((function(t){return uu(t.x)})).forEach((function(t){t.x*=e,t.y*=e})),fc(t)&&uu(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),uu(t.x)&&uu(t.y)&&(t.x*=e,t.y*=e),uu(t.width)&&uu(t.height)&&(t.width*=e,t.height*=e),uu(t.rx)&&uu(t.ry)&&(t.rx*=e,t.ry*=e),function(t){return uu(t.strokeWidth)&&t.strokeWidth>0}(t)&&(t.strokeWidth*=e),ac(t)&&(t._scale=e,uu(t.fontSize)&&(t.fontSize*=e),uu(t.lineHeight)&&(t.lineHeight*=e),uu(t.width)&&!uu(t.height)&&(t.width*=e)),su(t,"cornerRadius")&&uu(t.cornerRadius)&&(t.cornerRadius*=e),t},es=function(t){if(sc(t))return Bi(t.x+.5*t.width,t.y+.5*t.height);if(lc(t))return Bi(t.x,t.y);if(t.text){if(cc(t)){var e=t.height||Ou(t.text,t).height;return Bi(t.x+.5*t.width,t.y+.5*e)}var n=Ou(t.text,t);return Bi(t.x+.5*n.width,t.y+.5*n.height)}return dc(t)?oo(t.points):fc(t)?oo([ic(t),oc(t)]):void 0},ns=function(t){return/canvas/i.test(t.nodeName)},rs=function(t,e){return void 0===e&&(e=void 0),new Promise((function(n,r){var i=t,o=!1,a=function(){o||(o=!0,ni(e)&&Promise.resolve().then((function(){return e(vo(i.naturalWidth,i.naturalHeight))})))};if(i.src||(i=new Image,ei(t)&&new URL(t,location.href).origin!==location.origin&&(i.crossOrigin="anonymous"),i.src=ei(t)?t:URL.createObjectURL(t)),i.complete)return a(),n(i);ni(e)&&$a(i).then(a).catch(r),i.onload=function(){a(),n(i)},i.onerror=function(){return r(new Error("Failed to load image"))}}))},is=new Map([]),os=function(t,e){return void 0===e&&(e={}),new Promise((function(n,r){var i=e,o=i.onMetadata,a=void 0===o?Pr:o,u=i.onLoad,c=void 0===u?n:u,s=i.onError,l=void 0===s?r:s,f=i.onComplete,d=void 0===f?Pr:f,h=is.get(t);if(h||(h={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:_u()},is.set(t,h)),h.bus.sub("meta",a),h.bus.sub("load",c),h.bus.sub("error",l),h.bus.sub("complete",d),ns(t)){var p=t,v=p.cloneNode();h.complete=!0,h.image=v,h.size=po(p)}if(h.complete)return h.bus.pub("meta",{size:h.size}),h.error?h.bus.pub("error",h.error):h.bus.pub("load",h.image),h.bus.pub("complete"),void(h.bus=_u());h.loading||(h.loading=!0,rs(t,(function(t){h.size=t,h.bus.pub("meta",{size:t})})).then((function(t){h.image=t,h.bus.pub("load",t)})).catch((function(t){h.error=t,h.bus.pub("error",t)})).finally((function(){h.complete=!0,h.loading=!1,h.bus.pub("complete"),h.bus=_u()})))}))},as=function(t,e,n,r){return t.drawImage(e,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height)},us=function(){var t=Sr(wr().mark((function t(e,n,r,i,o){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===o&&(o=as),e.save(),e.clip(),t.next=5,o(e,n,r,i);case 5:e.restore();case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}(),cs=function(t,e,n,r,i){var o=Mo(t);if(r){var a=Jo(Po(r),zi);return a.x*=n.width,a.width*=n.width,a.y*=n.height,a.height*=n.height,{srcRect:a,destRect:o}}var u=Lo(0,0,n.width,n.height);if("contain"===e){var c=Xo(t,Vo(u));o.width=c.width,o.height=c.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=c.x,o.y+=c.y)}else if("cover"===e){var s=Go(o,u.width/u.height);o.width=s.width,o.height=s.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,i&&(o.x+=i.x,o.y+=i.y)):i&&(o.width=n.width,o.height=n.height,o.x+=i.x,o.y+=i.y);return{srcRect:u,destRect:o}},ss=function(t,e){return e.cornerRadius>0?function(t,e,n,r,i,o){r<2*o&&(o=r/2),i<2*o&&(o=i/2),t.beginPath(),t.moveTo(e+o,n),t.arcTo(e+r,n,e+r,n+i,o),t.arcTo(e+r,n+i,e,n+i,o),t.arcTo(e,n+i,e,n,o),t.arcTo(e,n,e+r,n,o),t.closePath()}(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t},ls=function(t,e){return e.backgroundColor&&t.fill(),t},fs=function(t,e){return e.strokeWidth&&t.stroke(),t},ds=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u,c;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r={}),i=r.drawImage,e.lineWidth=n.strokeWidth?n.strokeWidth:1,e.strokeStyle=n.strokeColor?yu(n.strokeColor):"none",e.fillStyle=n.backgroundColor?yu(n.backgroundColor):"none",e.globalAlpha=n.opacity,!n.backgroundImage){t.next=21;break}if(!ns(n.backgroundImage)){t.next=11;break}o=n.backgroundImage,t.next=14;break;case 11:return t.next=13,os(n.backgroundImage);case 13:o=t.sent;case 14:return ss(e,n),ls(e,n),a=cs(n,n.backgroundSize,po(o),n.backgroundCorners,n.backgroundPosition),u=a.srcRect,c=a.destRect,t.next=19,us(e,o,u,c,i);case 19:return fs(e,n),t.abrupt("return",[]);case 21:return ss(e,n),ls(e,n),fs(e,n),t.abrupt("return",[]);case 25:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),hs=function(){var t=Sr(wr().mark((function t(e,n,r){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.abrupt("return",new Promise(function(){var t=Sr(wr().mark((function t(i,o){var a,u,c,s,l,f;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.drawImage,e.lineWidth=n.strokeWidth||1,e.strokeStyle=n.strokeColor?yu(n.strokeColor):"none",e.fillStyle=n.backgroundColor?yu(n.backgroundColor):"none",e.globalAlpha=n.opacity,e.ellipse(n.x,n.y,n.rx,n.ry,0,0,2*Math.PI),n.backgroundColor&&e.fill(),!n.backgroundImage){t.next=25;break}return t.prev=8,t.next=11,os(n.backgroundImage);case 11:u=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),o(t.t0);case 17:return c=Lo(n.x-n.rx,n.y-n.ry,2*n.rx,2*n.ry),s=cs(c,n.backgroundSize,po(u),n.backgroundCorners,n.backgroundPosition),l=s.srcRect,f=s.destRect,t.next=21,us(e,u,l,f,a);case 21:n.strokeWidth&&e.stroke(),i([]),t.next=27;break;case 25:n.strokeWidth&&e.stroke(),i([]);case 27:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),ps=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.width&&n.height?lo(n):Ou(n.text,n),o={x:n.x,y:n.y,width:i.width,height:i.height},ds(e,Object.assign({},n,o,{options:r})),n.text.length){t.next=5;break}return t.abrupt("return",[]);case 5:return a=r.willRequest,t.next=8,Ju(n.text,Object.assign({},n,o,{imageWidth:o.width,imageHeight:o.height,willRequest:a}));case 8:return u=t.sent,e.drawImage(u,n.x-Mu,n.y,u.width,u.height),t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),vs=function(){var t=Sr(wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Sr(wr().mark((function t(r){var i,o;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.lineWidth=n.strokeWidth||1,e.strokeStyle=n.strokeColor?yu(n.strokeColor):"none",e.globalAlpha=n.opacity,i=ic(n),o=oc(n),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),n.strokeWidth&&e.stroke(),r([]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ms=function(){var t=Sr(wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){e.lineWidth=n.strokeWidth||1,e.strokeStyle=n.strokeColor?yu(n.strokeColor):"none",e.fillStyle=n.backgroundColor?yu(n.backgroundColor):"none",e.globalAlpha=n.opacity;var i=n.points;n.pathClose&&e.beginPath(),e.moveTo(i[0].x,i[0].y);for(var o=i.length,a=1;a<o;a++)e.lineTo(i[a].x,i[a].y);n.pathClose&&e.closePath(),n.strokeWidth&&e.stroke(),n.backgroundColor&&e.fill(),t([])})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),gs=function(t,e,n,r){return e||n?(t.translate(r.x,r.y),t.scale(e?-1:1,n?-1:1),t.translate(-r.x,-r.y),t):t},ys=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=es(n),qa(e,n.rotation,i),gs(e,n.flipX,n.flipY,i),sc(n)?o=ds:lc(n)?o=hs:fc(n)?o=vs:dc(n)?o=ms:ac(n)&&(o=ps),!o){t.next=14;break}return t.next=7,o(e,n,r);case 7:if((a=t.sent).length){t.next=10;break}return t.abrupt("return",[]);case 10:return t.next=12,bs(e,a,r);case 12:return u=t.sent,t.abrupt("return",[n].concat(u));case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),bs=function(){var t=Sr(wr().mark((function t(e,n,r){var i,o,a,u;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],o=vr(n);case 2:if((a=o()).done){t.next=15;break}return u=a.value,e.save(),e.beginPath(),t.t0=[],t.t1=i,t.next=10,ys(e,u,r);case 10:t.t2=t.sent,i=t.t0.concat.call(t.t0,t.t1,t.t2),e.restore();case 13:t.next=2;break;case 15:return t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),$s=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),i=(r=n).shapes,o=void 0===i?[]:i,a=r.contextBounds,u=void 0===a?e:a,c=r.transform,s=void 0===c?Pr:c,l=r.drawImage,f=r.willRequest,d=r.canvasMemoryLimit,h=r.computeShape,p=void 0===h?xi:h,v=r.preprocessShape,m=void 0===v?xi:v,o.length){t.next=4;break}return t.abrupt("return",e);case 4:return(g=Nr("canvas")).width=u.width,g.height=u.height,(y=g.getContext("2d",{willReadFrequently:!0})).putImageData(e,u.x||0,u.y||0),b=o.map(Qu).map(p).map(m).flat(),s(y),t.next=13,bs(y,b,{drawImage:l,canvasMemoryLimit:d,willRequest:f});case 13:return $=y.getImageData(0,0,g.width,g.height),Wr(g),t.abrupt("return",$);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),xs=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),i=(r=n).backgroundColor,o=r.backgroundImage,a=!(!i||i&&0===i[3]),o||a){t.next=5;break}return t.abrupt("return",e);case 5:if((u=Nr("canvas")).width=e.width,u.height=e.height,(c=u.getContext("2d",{willReadFrequently:!0})).putImageData(e,0,0),c.globalCompositeOperation="destination-over",a&&(c.fillStyle=yu(i),c.fillRect(0,0,u.width,u.height)),!o){t.next=22;break}if(!ns(o)){t.next=17;break}s=o,t.next=20;break;case 17:return t.next=19,os(o);case 19:s=t.sent;case 20:l=cs({x:0,y:0,width:e.width,height:e.height},"cover",{width:s.width,height:s.height}),f=l.srcRect,d=l.destRect,c.drawImage(s,f.x,f.y,f.width,f.height,d.x,d.y,d.width,d.height);case 22:return h=c.getImageData(0,0,u.width,u.height),Wr(u),t.abrupt("return",h);case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ws=function(t){return t.length?t.reduce((function(t,e){return n=[].concat(t),r=e,(i=new Array(20))[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],i[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],i[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],i[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],i[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],i[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],i[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],i[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],i[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],i[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],i[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],i[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],i[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],i[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],i[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],i[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],i[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],i[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],i[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],i[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],i;var n,r,i}),t.shift()):[]},ks=function(t,e){var n,r,i=t.width*t.height,o=e.reduce((function(t,e){return e.width>t.width&&e.height>t.height&&(t.width=e.width,t.height=e.height),t}),{width:0,height:0}),a=o.width*o.height,u=Math.max(.5,.5+(1-a/i)/2);return n=u,void 0===(r=5)&&(r=2),Math.round(n*r)/r};function Ss(){}var Cs=function(t){return t};function _s(t,e){for(var n in e)t[n]=e[n];return t}function Ms(t){return t()}function Es(){return Object.create(null)}function Ts(t){t.forEach(Ms)}function Is(t){return"function"==typeof t}function Ps(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function Rs(t){if(null==t)return Ss;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.subscribe.apply(t,n);return i.unsubscribe?function(){return i.unsubscribe()}:i}function As(t){var e;return Rs(t,(function(t){return e=t}))(),e}function Ls(t,e,n){t.$$.on_destroy.push(Rs(e,n))}function Os(t,e,n,r){if(t){var i=zs(t,e,n,r);return t[0](i)}}function zs(t,e,n,r){return t[1]&&r?_s(n.ctx.slice(),t[1](r(e))):n.ctx}function Ds(t,e,n,r){if(t[2]&&r){var i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){for(var o=[],a=Math.max(e.dirty.length,i.length),u=0;u<a;u+=1)o[u]=e.dirty[u]|i[u];return o}return e.dirty|i}return e.dirty}function Fs(t,e,n,r,i,o){if(i){var a=zs(e,n,r,o);t.p(a,i)}}function js(t){if(t.ctx.length>32){for(var e=[],n=t.ctx.length/32,r=0;r<n;r++)e[r]=-1;return e}return-1}function Bs(t){var e={};for(var n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function Ns(t,e){var n={};for(var r in e=new Set(e),t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function Vs(t,e,n){return t.set(n),e}function Hs(t){return t&&Is(t.destroy)?t.destroy:Ss}var Ws="undefined"!=typeof window,Us=Ws?function(){return window.performance.now()}:function(){return Date.now()},Zs=Ws?function(t){return requestAnimationFrame(t)}:Ss,qs=new Set;function Gs(t){qs.forEach((function(e){e.c(t)||(qs.delete(e),e.f())})),0!==qs.size&&Zs(Gs)}function Xs(t){var e;return 0===qs.size&&Zs(Gs),{promise:new Promise((function(n){qs.add(e={c:t,f:n})})),abort:function(){qs.delete(e)}}}function Ys(t,e){t.appendChild(e)}function Ks(t){if(!t)return document;var e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Js(t){var e=el("style");return function(t,e){Ys(t.head||t,e),e.sheet}(Ks(t),e),e.sheet}function Qs(t,e,n){t.insertBefore(e,n||null)}function tl(t){t.parentNode.removeChild(t)}function el(t){return document.createElement(t)}function nl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function rl(t){return document.createTextNode(t)}function il(){return rl(" ")}function ol(){return rl("")}function al(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function ul(t){return function(e){return e.preventDefault(),t.call(this,e)}}function cl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function sl(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ll(t,e){var n=Object.getOwnPropertyDescriptors(t.__proto__);for(var r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:sl(t,r,e[r])}function fl(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function dl(t,e){t.value=null==e?"":e}function hl(t,e,n){var r=void 0===n?{}:n,i=r.bubbles,o=void 0!==i&&i,a=r.cancelable,u=void 0!==a&&a,c=document.createEvent("CustomEvent");return c.initCustomEvent(t,o,u,e),c}var pl=function(){function t(t){void 0===t&&(t=!1),this.is_svg=!1,this.is_svg=t,this.e=this.n=null}var e=t.prototype;return e.c=function(t){this.h(t)},e.m=function(t,e,n){void 0===n&&(n=null),this.e||(this.is_svg?this.e=nl(e.nodeName):this.e=el(e.nodeName),this.t=e,this.c(t)),this.i(n)},e.h=function(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)},e.i=function(t){for(var e=0;e<this.n.length;e+=1)Qs(this.t,this.n[e],t)},e.p=function(t){this.d(),this.h(t),this.i(this.a)},e.d=function(){this.n.forEach(tl)},t}();function vl(t,e){return new t(e)}var ml,gl=new Map,yl=0;function bl(t,e,n,r,i,o,a,u){void 0===u&&(u=0);for(var c=16.666/r,s="{\n",l=0;l<=1;l+=c){var f=e+(n-e)*o(l);s+=100*l+"%{"+a(f,1-f)+"}\n"}var d=s+"100% {"+a(n,1-n)+"}\n}",h="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)+"_"+u,p=Ks(t),v=gl.get(p)||function(t,e){var n={stylesheet:Js(e),rules:{}};return gl.set(t,n),n}(p,t),m=v.stylesheet,g=v.rules;g[h]||(g[h]=!0,m.insertRule("@keyframes "+h+" "+d,m.cssRules.length));var y=t.style.animation||"";return t.style.animation=(y?y+", ":"")+h+" "+r+"ms linear "+i+"ms 1 both",yl+=1,h}function $l(t,e){var n=(t.style.animation||"").split(", "),r=n.filter(e?function(t){return t.indexOf(e)<0}:function(t){return-1===t.indexOf("__svelte")}),i=n.length-r.length;i&&(t.style.animation=r.join(", "),(yl-=i)||Zs((function(){yl||(gl.forEach((function(t){var e=t.stylesheet.ownerNode;e&&tl(e)})),gl.clear())})))}function xl(t){ml=t}function wl(){if(!ml)throw new Error("Function called outside component initialization");return ml}function kl(t){wl().$$.on_mount.push(t)}function Sl(t){wl().$$.after_update.push(t)}function Cl(t){wl().$$.on_destroy.push(t)}function _l(){var t=wl();return function(e,n,r){var i=(void 0===r?{}:r).cancelable,o=void 0!==i&&i,a=t.$$.callbacks[e];if(a){var u=hl(e,n,{cancelable:o});return a.slice().forEach((function(e){e.call(t,u)})),!u.defaultPrevented}return!0}}function Ml(t,e){return wl().$$.context.set(t,e),e}function El(t){return wl().$$.context.get(t)}function Tl(t,e){var n=this,r=t.$$.callbacks[e.type];r&&r.slice().forEach((function(t){return t.call(n,e)}))}var Il=[],Pl=[],Rl=[],Al=[],Ll=Promise.resolve(),Ol=!1;function zl(){Ol||(Ol=!0,Ll.then(Hl))}function Dl(){return zl(),Ll}function Fl(t){Rl.push(t)}function jl(t){Al.push(t)}var Bl,Nl=new Set,Vl=0;function Hl(){var t=ml;do{for(;Vl<Il.length;){var e=Il[Vl];Vl++,xl(e),Wl(e.$$)}for(xl(null),Il.length=0,Vl=0;Pl.length;)Pl.pop()();for(var n=0;n<Rl.length;n+=1){var r=Rl[n];Nl.has(r)||(Nl.add(r),r())}Rl.length=0}while(Il.length);for(;Al.length;)Al.pop()();Ol=!1,Nl.clear(),xl(t)}function Wl(t){if(null!==t.fragment){t.update(),Ts(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Fl)}}function Ul(t,e,n){t.dispatchEvent(hl((e?"intro":"outro")+n))}var Zl,ql=new Set;function Gl(){Zl={r:0,c:[],p:Zl}}function Xl(){Zl.r||Ts(Zl.c),Zl=Zl.p}function Yl(t,e){t&&t.i&&(ql.delete(t),t.i(e))}function Kl(t,e,n,r){if(t&&t.o){if(ql.has(t))return;ql.add(t),Zl.c.push((function(){ql.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}var Jl={duration:0};function Ql(t,e,n,r){var i=e(t,n),o=r?0:1,a=null,u=null,c=null;function s(){c&&$l(t,c)}function l(t,e){var n=t.b-o;return e*=Math.abs(n),{a:o,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function f(e){var n=i||Jl,r=n.delay,f=void 0===r?0:r,d=n.duration,h=void 0===d?300:d,p=n.easing,v=void 0===p?Cs:p,m=n.tick,g=void 0===m?Ss:m,y=n.css,b={start:Us()+f,b:e};e||(b.group=Zl,Zl.r+=1),a||u?u=b:(y&&(s(),c=bl(t,o,e,h,f,v,y)),e&&g(0,1),a=l(b,h),Fl((function(){return Ul(t,e,"start")})),Xs((function(e){if(u&&e>u.start&&(a=l(u,h),u=null,Ul(t,a.b,"start"),y&&(s(),c=bl(t,o,a.b,a.duration,0,v,i.css))),a)if(e>=a.end)g(o=a.b,1-o),Ul(t,a.b,"end"),u||(a.b?s():--a.group.r||Ts(a.group.c)),a=null;else if(e>=a.start){var n=e-a.start;o=a.a+a.d*v(n/a.duration),g(o,1-o)}return!(!a&&!u)})))}return{run:function(t){Is(i)?(Bl||(Bl=Promise.resolve()).then((function(){Bl=null})),Bl).then((function(){i=i(),f(t)})):f(t)},end:function(){s(),a=u=null}}}var tf="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ef(t,e){t.d(1),e.delete(t.key)}function nf(t,e){Kl(t,1,1,(function(){e.delete(t.key)}))}function rf(t,e,n,r,i,o,a,u,c,s,l,f){for(var d=t.length,h=o.length,p=d,v={};p--;)v[t[p].key]=p;var m=[],g=new Map,y=new Map;for(p=h;p--;){var b=f(i,o,p),$=n(b),x=a.get($);x?r&&x.p(b,e):(x=s($,b)).c(),g.set($,m[p]=x),$ in v&&y.set($,Math.abs(p-v[$]))}var w=new Set,k=new Set;function S(t){Yl(t,1),t.m(u,l),a.set(t.key,t),l=t.first,h--}for(;d&&h;){var C=m[h-1],_=t[d-1],M=C.key,E=_.key;C===_?(l=C.first,d--,h--):g.has(E)?!a.has(M)||w.has(M)?S(C):k.has(E)?d--:y.get(M)>y.get(E)?(k.add(M),S(C)):(w.add(E),d--):(c(_,a),d--)}for(;d--;){var T=t[d];g.has(T.key)||c(T,a)}for(;h;)S(m[h-1]);return m}function of(t,e){for(var n={},r={},i={$$scope:1},o=t.length;o--;){var a=t[o],u=e[o];if(u){for(var c in a)c in u||(r[c]=1);for(var s in u)i[s]||(n[s]=u[s],i[s]=1);t[o]=u}else for(var l in a)i[l]=1}for(var f in r)f in n||(n[f]=void 0);return n}function af(t){return"object"==typeof t&&null!==t?t:{}}function uf(t,e,n){var r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function cf(t){t&&t.c()}function sf(t,e,n,r){var i=t.$$,o=i.fragment,a=i.after_update;o&&o.m(e,n),r||Fl((function(){var e,n=t.$$.on_mount.map(Ms).filter(Is);t.$$.on_destroy?(e=t.$$.on_destroy).push.apply(e,n):Ts(n);t.$$.on_mount=[]})),a.forEach(Fl)}function lf(t,e){var n=t.$$;null!==n.fragment&&(Ts(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ff(t,e,n,r,i,o,a,u){void 0===u&&(u=[-1]);var c=ml;xl(t);var s=t.$$={fragment:null,ctx:[],props:o,update:Ss,not_equal:i,bound:Es(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Es(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};a&&a(s.root);var l,f=!1;if(s.ctx=n?n(t,e.props||{},(function(e,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return s.ctx&&i(s.ctx[e],s.ctx[e]=r)&&(!s.skip_bound&&s.bound[e]&&s.bound[e](r),f&&function(t,e){-1===t.$$.dirty[0]&&(Il.push(t),zl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],s.update(),f=!0,Ts(s.before_update),s.fragment=!!r&&r(s.ctx),e.target){if(e.hydrate){var d=(l=e.target,Array.from(l.childNodes));s.fragment&&s.fragment.l(d),d.forEach(tl)}else s.fragment&&s.fragment.c();e.intro&&Yl(t.$$.fragment),sf(t,e.target,e.anchor,e.customElement),Hl()}xl(c)}var df=function(){function t(){}var e=t.prototype;return e.$destroy=function(){lf(this,1),this.$destroy=Ss},e.$on=function(t,e){if(!Is(e))return Ss;var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},e.$set=function(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)},t}(),hf=[];function pf(t,e){return{subscribe:vf(t,e).subscribe}}function vf(t,e){var n;void 0===e&&(e=Ss);var r=new Set;function i(e){if(Ps(t,e)&&(t=e,n)){for(var i,o=!hf.length,a=vr(r);!(i=a()).done;){var u=i.value;u[1](),hf.push(u,t)}if(o){for(var c=0;c<hf.length;c+=2)hf[c][0](hf[c+1]);hf.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,a){void 0===a&&(a=Ss);var u=[o,a];return r.add(u),1===r.size&&(n=e(i)||Ss),o(t),function(){r.delete(u),0===r.size&&(n(),n=null)}}}}function mf(t,e,n){var r=!Array.isArray(t),i=r?[t]:t,o=e.length<2;return pf(n,(function(t){var n=!1,a=[],u=0,c=Ss,s=function(){if(!u){c();var n=e(r?a[0]:a,t);o?t(n):c=Is(n)?n:Ss}},l=i.map((function(t,e){return Rs(t,(function(t){a[e]=t,u&=~(1<<e),n&&s()}),(function(){u|=1<<e}))}));return n=!0,s(),function(){Ts(l),c()}}))}var gf=function(t){return t.reduce((function(t,e){return Object.assign(t,e)}),{})},yf=function(t){return{updateValue:t}},bf=function(t){return{defaultValue:t}},$f=function(t){return{store:t}},xf=function(t){return{store:function(e,n){return mf.apply(void 0,t(n))}}},wf=function(t){return{store:function(e,n){var r,i=t(n),o=i[0],a=i[1],u=i[2],c=void 0===u?function(){return!1}:u,s=!0;return mf(o,(function(t,e){a(t,(function(t){!s&&c(r,t)||(r=t,s=!1,e(t))}))}))}}},kf=function(t){return{store:function(e,n){var r=t(n),i=r[0],o=r[1],a=void 0===o?{}:o,u=r[2],c=void 0===u?void 0:u,s=[],l={},f=function(t){return i(t,l)},d=function(t){(s.length||t.length)&&(s=t,h())},h=function(){var t=s.map(f);c&&t.sort(c),s=[].concat(t),m(t)};Object.entries(a).map((function(t){var e=t[0];return t[1].subscribe((function(t){l[e]=t,t&&h()}))}));var p=vf(e||[]),v=p.subscribe,m=p.set;return{set:d,update:function(t){return d(t(s))},subscribe:v}}}},Sf=function(t){var e={},n={};return t.forEach((function(t){var r=t[0],i=t.slice(1),o=gf(i),a=e[r]=function(t,e,n){var r,i=n.store,o=void 0===i?function(t){return vf(t)}:i,a=n.defaultValue,u=void 0===a?Pr:a,c=n.updateValue,s=void 0===c?void 0:c,l=o(u(),e,t),f=l.subscribe,d=l.update,h=void 0===d?Pr:d,p=function(t){var e=!0;r&&r(),r=f((function(n){if(e)return e=!1;t(n),r(),r=void 0}))},v=s?s(t):xi;return l.set=function(t){return h((function(e){return v(t,e,p)}))},l.defaultValue=u,l}(n,e,o),u={get:function(){return As(a)},set:a.set};Object.defineProperty(n,r,u)})),{stores:e,accessors:n}},Cf=[["src",$f((function(){var t,e=vf(),n=e.subscribe,r=e.set,i=function(e){t!==e&&r(t=e)};return{set:i,subscribe:n,update:function(e){return i(e(t))}}}))],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",bf((function(){return"pixelated"}))],["images",bf((function(){return[]}))],["shapePreprocessor"],["willRequestResource"],["willRequest"]],_f=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Mf=function(t,e){Object.keys(e).forEach((function(n){var r=ni(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,r)}))},Ef=function(t,e){var n,r,i,o,a,u=e.length;for(n=0;n<u;n++)if(r=e[n],i=e[n+1>u-1?0:n+1],o=r.x-t.x,a=r.y-t.y,(o-(i.x-t.x))*a-(a-(i.y-t.y))*o<-1e-5)return!1;return!0},Tf=1e4,If=function(t,e){var n=aa(e),r=ji();Ko(t).forEach((function(t){Yi(t,r),Ef(t,e)||n.forEach((function(e){var n=Math.atan2(e.start.y-e.end.y,e.start.x-e.end.x),i=Math.sin(Math.PI-n)*Tf,o=Math.cos(Math.PI-n)*Tf,a=Bi(t.x+i,t.y+o),u=So(ko(e),Tf),c=na(wo(t,a),u);c&&Yi(r,Ki(Vi(c),t))}))}));var i=Mo(t);return Yi(i,r),!!Ko(i).every((function(t){return Ef(t,e)}))&&(Wo(t,i),!0)},Pf=function(t,e){var n=Ko(t),r=ua(e,5),i=Oo(t),o=[];n.forEach((function(t){var e=function(t,e){if(0===e)return t;var n=Bi(t.start.x-t.end.x,t.start.y-t.end.y),r=Zi(n),i=Qi(r,e);return t.end.x+=i.x,t.end.y+=i.y,t}(wo(Vi(i),Vi(t)),1e6),n=!1;r.map(ko).forEach((function(t){var r=na(e,t);r&&!n&&(o.push(r),n=!0)}))}));var a=ro(o[0],o[2])<ro(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],u=Po(a);return u.width<t.width&&(Wo(t,u),!0)},Rf=function(t,e,n){void 0===n&&(n={x:0,y:0});var r=To(t),i=Oo(r),o=Qo(r,n,i).map((function(t){return Wi(t,e,i)})),a=Po(o);return o.map((function(t){return Ki(t,a)}))},Af=function(t,e,n){var r,i;if(void 0===e&&(e=0),void 0===n&&(n=Vo(t)),0!==e){var o,a=Math.atan2(1,n),u=Math.sign(e)*e,c=u%Math.PI,s=u%ki;o=c>Si&&c<ki+Si?s>Si?u:ki-s:s>Si?ki-s:u;var l=Math.min(Math.abs(t.height/Math.sin(a+o)),Math.abs(t.width/Math.cos(a-o)));i=(r=Math.cos(a)*l)/n}else(i=(r=t.width)/n)>t.height&&(r=(i=t.height)*n);return vo(r,i)},Lf=function(t,e,n,r,i,o,a,u){var c=so(a),s=so(u),l=zi(Math.max(e.width/s.width,e.height/s.height)),f=zi(Math.min(e.width/c.width,e.height/c.height)),d=Mo(e);if(f<1||l>1){var h=Oo(t),p=Oo(e),v=f<1?f:l,m=(p.x+h.x)/2,g=(p.y+h.y)/2,y=d.width/v,b=d.height/v;Ho(d,m-.5*y,g-.5*b,y,b)}return o?(function(t,e,n,r,i){if(void 0===n&&(n=0),void 0===r&&(r=ji()),uu(n)&&0!==n||r.x||r.y){var o=Vo(t),a=Rf(e,n,r),u=Af(e,n,o);if(!(t.width<u.width&&t.height<u.height)){var c=.5*t.width-.5*u.width,s=.5*t.height-.5*u.height;t.width>u.width&&(t.width=u.width,t.x+=c),t.height>u.height&&(t.height=u.height,t.y+=s)}If(t,a),Pf(t,a)&&If(t,a)}else{var l=Vo(t);t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height),t.x=Math.max(t.x,0),t.x+t.width>e.width&&(t.x-=t.x+t.width-e.width),t.y=Math.max(t.y,0),t.y+t.height>e.height&&(t.y-=t.y+t.height-e.height);var f=Oo(t),d=Xo(t,l);d.width=Math.max(i.width,d.width),d.height=Math.max(i.height,d.height),d.x=f.x-.5*d.width,d.y=f.y-.5*d.height,Wo(t,d)}}(d,n,r,i,c),{crop:d}):{crop:d}},Of=function(t,e,n){var r=To(t),i=Oo(r),o=Uo(r,n,i),a=Oo(ta(Po(o))),u=Oo(e),c=Wi(u,-n,a),s=Ki(c,a),l=Xi(Yi(i,s),zi);return Lo(l.x-.5*e.width,l.y-.5*e.height,e.width,e.height)},zf=function(t,e,n){return Math.max(e,Math.min(t,n))},Df=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume"],Ff=function t(e){return lu(e)?e.map(t):za(e)||fa(e)?e:Jr(e)?Object.assign({},e):e},jf=function(t){return t.map((function(t){return Object.entries(t).reduce((function(t,e){var n=e[0],r=e[1];return n.startsWith("_")||(t[n]=r),t}),{})}))},Bf=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Nf=function(t,e,n){var r=Xi(Oo(t),(function(t){return zi(t,8)})),i=To(e),o=Oo(i),a=Uo(i,n,o),u=Xi(yo(Po(a)),(function(t){return zi(t,8)})),c=Math.abs(u.x-r.x),s=Math.abs(u.y-r.y);return c<1&&s<1},Vf=function(t,e,n,r,i){if(!i)return[-1/0,1/0];var o,a=Math.max(n.width/r.width,n.height/r.height),u=vo(r.width*a,r.height*a),c=(o=u,Math.sqrt(o.width*o.width+o.height*o.height));if(c<Math.min(t.width,t.height))return[-1/0,1/0];var s=e?t.height:t.width,l=e?t.width:t.height,f=Math.acos(u.height/c),d=f-Math.acos(l/c),h=Math.asin(s/c)-f;if(Number.isNaN(d)&&Number.isNaN(h))return[-1/0,1/0];var p=Number.isNaN(d)?h:Number.isNaN(h)?d:Math.min(d,h);return[-p,p]},Hf=function(t,e){var n=e.context,r=e.props;return t._isFormatted||((t=jc(t))._isFormatted=!0,Object.assign(t,r)),t._isDraft||!$c(t)||t._context&&No(n,t._context)||(Qc(t,n),t._context=Object.assign({},n)),t},Wf=[["file"],["size"],["loadState"],["processState"],["aspectRatio",xf((function(t){return[t.size,function(t){return t?Vo(t):void 0}]}))],["perspectiveX",bf((function(){return 0}))],["perspectiveY",bf((function(){return 0}))],["perspective",xf((function(t){return[[t.perspectiveX,t.perspectiveY],function(t){return{x:t[0],y:t[1]}}]}))],["rotation",bf((function(){return 0})),yf((function(t){return function(e,n,r){if(e===n)return e;var i=t.loadState,o=t.size,a=t.rotationRange,u=t.cropMinSize,c=t.cropMaxSize,s=t.crop,l=t.perspective,f=t.cropLimitToImage,d=t.cropOrigin;if(!s||!i||!i.beforeComplete)return e;var h,p,v=f&&(p=Af(o,n,Vo(h=s)),mo(xo(p,Math.round),xo(so(h),Math.round))),m=f&&Nf(s,o,n),g=function(t,e,n,r,i,o,a,u,c,s){var l=so(c),f=so(s);a&&(f.width=Math.min(s.width,i.width),f.height=Math.min(s.height,i.height));var d=!1,h=Math.sign(e)*Math.round(Math.abs(e)/ki)*ki,p=zf(e,h+n[0],h+n[1]);return function e(n,c){var s=Of(i,r,n),h=To(i),p=Oo(h),v=Qo(h,o,p),m=Ki(Vi(p),ea(v)),g=Wi(Oo(s),c,p),y=Ki(Vi(p),g);v.forEach((function(t){return Wi(t,c,p)}));var b=Po(v),$=ea(v),x=Yi(Ki(Ki($,y),b),m),w=Lo(x.x-.5*s.width,x.y-.5*s.height,s.width,s.height);if(u&&Do(w,u.width/w.width),a){var k=Rf(i,c,o);Pf(w,k)}var S=zi(Math.min(w.width/l.width,w.height/l.height),8),C=zi(Math.max(w.width/f.width,w.height/f.height),8);return(S<1||C>1)&&zi(Math.abs(c-n))===zi(Math.PI/2)&&!d?(d=!0,e(t,t+Math.sign(c-n)*Math.PI)):{rotation:c,crop:Jo(w,(function(t){return zi(t,8)}))}}(t,p)}(n,e,a,s,o,l,f,d,u,c);if(v&&m){var y=Af(o,e,Vo(g.crop));g.crop.x+=.5*g.crop.width,g.crop.y+=.5*g.crop.height,g.crop.x-=.5*y.width,g.crop.y-=.5*y.height,g.crop.width=y.width,g.crop.height=y.height}return r((function(){t.crop=Jo(g.crop,(function(t){return zi(t,8)}))})),g.rotation}}))],["flipX",bf((function(){return!1}))],["flipY",bf((function(){return!1}))],["flip",xf((function(t){return[[t.flipX,t.flipY],function(t){return{x:t[0],y:t[1]}}]}))],["isRotatedSideways",wf((function(t){return[[t.rotation],function(t,e){var n=t[0];return e(Ci(n))},function(t,e){return t!==e}]}))],["crop",yf((function(t){return function(e,n){void 0===n&&(n=e);var r=t.loadState,i=t.size,o=t.cropMinSize,a=t.cropMaxSize,u=t.cropLimitToImage,c=t.cropAspectRatio,s=t.rotation,l=t.perspective;if(!e&&!n||!r||!r.beforeComplete)return e;e||(e=To(Af(i,s,c||Vo(i))));var f=Lf(n,e,i,s,l,u,o,a),d=Jo(f.crop,(function(t){return zi(t,8)}));return No(n,d)?n:d}}))],["cropAspectRatio",yf((function(t){return function(e,n){var r=t.loadState,i=t.crop,o=t.size,a=t.rotation,u=t.cropLimitToImage,c=function(t){if(t){if(/:/.test(t)){var e=t.split(":");return e[0]/e[1]}return parseFloat(t)}}(e);if(c){if(!i||!r||!r.beforeComplete)return c;var s=n?Math.abs(e-n):1;if(Nf(i,o,a)&&u&&s>=.1){var l=function(t,e){var n=t.width,r=t.height;return Ci(e)&&(t.width=r,t.height=n),t}(so(o),a);t.crop=Jo(Xo(To(l),e),zi)}else{var f={width:i.height*c,height:i.height},d=.5*(i.width-f.width),h=.5*(i.height-f.height);t.crop=Jo(Lo(i.x+d,i.y+h,f.width,f.height),zi)}return c}}}))],["cropOrigin"],["cropMinSize",bf((function(){return{width:1,height:1}}))],["cropMaxSize",bf((function(){return{width:32768,height:32768}}))],["cropLimitToImage",bf((function(){return!0})),yf((function(t){return function(e,n,r){return t.crop?(!n&&e&&r((function(){return t.crop=Mo(t.crop)})),e):e}}))],["cropSize",wf((function(t){return[[t.crop],function(t,e){var n=t[0];n&&e(vo(n.width,n.height))},function(t,e){return mo(t,e)}]}))],["cropRectAspectRatio",xf((function(t){return[[t.cropSize],function(t,e){var n=t[0];n&&e(zi(Vo(n),5))}]}))],["cropRange",wf((function(t){return[[t.size,t.rotation,t.cropRectAspectRatio,t.cropMinSize,t.cropMaxSize,t.cropLimitToImage],function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5];if(n){var c=function(t,e,n,r,i,o){var a=so(r),u=so(i);return o?[a,xo(Af(t,e,n),Math.round)]:[a,u]}(n,r,i,o,a,u);e(c)}},function(t,e){return Bf(t,e)}]}))],["rotationRange",wf((function(t){return[[t.size,t.isRotatedSideways,t.cropMinSize,t.cropSize,t.cropLimitToImage],function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4];n&&o&&e(Vf(n,r,i,o,a))},function(t,e){return Bf(t,e)}]}))],["backgroundColor",yf((function(){return function(t){return function(t,e){return void 0===t&&(t=[0,0,0,0]),void 0===e&&(e=1),4===t.length?t:[].concat(t,[e])}(t)}}))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["trim"],["volume"],["redaction",kf((function(t){var e=t.size;return[Hf,{context:e}]}))],["annotation",kf((function(t){var e=t.size;return[Hf,{context:e}]}))],["decoration",kf((function(t){var e=t.crop;return[Hf,{context:e}]}))],["frame",yf((function(){return function(t){if(t){var e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return ei(t)?e.frameStyle=t:Object.assign(e,t),e}}}))],["metadata"],["state",$f((function(t,e,n){var r=Df.map((function(t){return e[t]})),i=!1,o=vf({}),a=mf([].concat(r,[o]),(function(t,e){if(!i){var n=Df.reduce((function(e,n,r){return e[n]=Ff(t[r]),e}),{});n.crop&&Jo(n.crop,Math.round),n.redaction=n.redaction&&jf(n.redaction),n.annotation=n.annotation&&jf(n.annotation),n.decoration=n.decoration&&jf(n.decoration),e(n)}})).subscribe,u=function(t){t&&(i=!0,n.cropOrigin=void 0,Df.filter((function(e){return su(t,e)})).forEach((function(e){var r=t[e];n[e]=null===r?void 0:Ff(r)})),i=!1,o.set({}))};return{set:u,update:function(t){return u(t(null))},subscribe:a}}))]],Uf=function(){var t=Sr(wr().mark((function t(e,n,r,i){var o,a,u,c,s,l,f,d,h,p;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===r&&(r={}),o=i.ontaskstart,a=i.ontaskprogress,u=i.ontaskend,c=i.token,s=!1,l={cancel:Pr},c.cancel=function(){s=!0,l.cancel()},f=wr().mark((function t(){var n,i,c,f,d;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.value,i=n[0],c=n[1],!s){t.next=3;break}return t.abrupt("return",{v:void 0});case 3:return f=c[0],d=c[1],o(i,d),t.prev=5,t.next=8,f(e,Object.assign({},r,{taskCancelToken:l}),(function(t){return a(i,d,t)}));case 8:e=t.sent,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(5),s=!0,t.t0;case 15:u(i,d);case 16:case"end":return t.stop()}}),t,null,[[5,11]])})),d=vr(n.entries());case 7:if((h=d()).done){t.next=14;break}return t.delegateYield(f(),"t0",9);case 9:if("object"!=typeof(p=t.t0)){t.next=12;break}return t.abrupt("return",p.v);case 12:t.next=7;break;case 14:return t.abrupt("return",e);case 15:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),Zf=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],qf=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],Gf=Wf.map((function(t){return t[0]})).filter((function(t){return!qf.includes(t)})),Xf=function(t){return"image"+_f(t)},Yf=function(t){return ei(t)||mu(t)||la(t)},Kf=function(t){return su(t,"crop")},Jf=function(){var t=Sf(Cf),e=t.stores,n=t.accessors,r=_u(),i=r.sub,o=r.pub,a=function(){return n.images?n.images[0]:{}},u={},c={};Gf.forEach((function(t){Object.defineProperty(n,Xf(t),{get:function(){var e=a();if(e)return e.accessors[t]},set:function(e){u[Xf(t)]=e,c[Xf(t)]=e;var n=a();n&&(n.accessors[t]=e)}})}));var s,l,f=function(){return n.images&&n.images[0]},d=e.src.subscribe((function(t){if(!t)return n.images=[];n.imageReader&&(n.images.length&&(u={}),p(t))})),h=e.imageReader.subscribe((function(t){t&&(n.images.length||n.src&&p(n.src))})),p=function(t){Promise.resolve().then((function(){return v(t,u)})).catch((function(){}))},v=function(t,e){return void 0===e&&(e={}),new Promise((function(r,i){var a=f(),l=!(!1===e.cropLimitToImage||!1===e.imageCropLimitToImage||!1===c.imageCropLmitedToImage),d=e.cropMinSize||e.imageCropMinSize||c.imageCropMinSize,h=l?d:a&&a.accessors.cropMinSize;a&&m(),a=function(t){var e=(void 0===t?{}:t).minSize,n=void 0===e?{width:1,height:1}:e,r=Sf(Wf),i=r.stores,o=r.accessors,a=_u(),u=a.pub,c=a.sub,s=function(t,e){var n=function(){return o[t]||{}},r=function(e){o[t]=Object.assign({},n(),e,{timeStamp:Date.now()})},i=function(){return n().error},a=function(t){i()||(r({error:t}),u(e+"error",Object.assign({},n())))};return{start:function(){u(e+"start")},onabort:function(){r({abort:!0}),u(e+"abort",Object.assign({},n()))},ontaskstart:function(t,o){i()||(r({index:t,task:o,taskProgress:void 0,taskLengthComputable:void 0}),u(e+"taskstart",Object.assign({},n())))},ontaskprogress:function(t,o,a){i()||(r({index:t,task:o,taskProgress:a.loaded/a.total,taskLengthComputable:a.lengthComputable}),u(e+"taskprogress",Object.assign({},n())),u(e+"progress",Object.assign({},n())))},ontaskend:function(t,o){i()||(r({index:t,task:o}),u(e+"taskend",Object.assign({},n())))},ontaskerror:function(t){a(t)},error:function(t){a(t)},beforeComplete:function(t){i()||(r({beforeComplete:!0}),u("before"+e,t))},complete:function(t){i()||(r({complete:!0}),u(e,t))}}};return Mf(o,{read:function(t,e,r){var i=e.reader;if(void 0===r&&(r={}),i){Object.assign(o,{file:void 0,size:void 0,loadState:void 0});var a={cancel:Pr},u=!1,c=s("loadState","load"),l=Object.assign({token:a},c),f={src:t,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(Sr(wr().mark((function t(){var e,s,d,h,p;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c.start(),!u){t.next=4;break}return t.abrupt("return",c.onabort());case 4:return t.next=6,Uf(f,i,r,l);case 6:if(e=t.sent,!u){t.next=9;break}return t.abrupt("return",c.onabort());case 9:if(d=(s=e||{}).size,h=s.duration,p=s.dest,d&&d.width&&d.height){t.next=12;break}throw new Aa("Image size missing","IMAGE_SIZE_MISSING",e);case 12:if(!(d.width<n.width||d.height<n.height)){t.next=14;break}throw new Aa("Image too small","IMAGE_TOO_SMALL",Object.assign({},e,{minWidth:n.width,minHeight:n.height}));case 14:Object.assign(o,{file:p,size:d,duration:h}),c.beforeComplete(e),c.complete(e),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),c.error(t.t0);case 22:return t.prev=22,a=void 0,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,19,22,25]])})))),function(){u=!0,a&&a.cancel(),c.onabort()}}},write:function(t,e){if(o.loadState.complete){o.processState=void 0;var n=s("processState","process"),r={src:o.file,imageState:o.state,dest:void 0};if(ni(t)&&(t=t(o.file,o.state)),!t)return n.start(),void n.complete(r);var i={cancel:Pr},a=!1,u=e,c=Object.assign({token:i},n);return Promise.resolve().then(Sr(wr().mark((function e(){var o;return wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.start(),!a){e.next=4;break}return e.abrupt("return",n.onabort());case 4:return e.next=6,Uf(r,t,u,c);case 6:if(o=e.sent,!a){e.next=9;break}return e.abrupt("return",n.onabort());case 9:n.complete(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n.error(e.t0);case 15:return e.prev=15,i=void 0,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})))),function(){a=!0,i&&i.cancel()}}},on:c}),{accessors:o,stores:i}}({minSize:h}),Zf.map((function(t){return a.accessors.on(t,(e=t,function(t){return o(e,t)}));var e}));var p=function(){u={},v.forEach((function(t){return t()}))},v=[];v.push(a.accessors.on("loaderror",(function(t){p(),i(t)}))),v.push(a.accessors.on("loadabort",(function(){p(),i({name:"AbortError"})}))),v.push(a.accessors.on("load",(function(t){s=void 0,p(),r(t)}))),v.push(a.accessors.on("beforeload",(function(){return function(t,e){if(Kf(e))n.imageState=e;else{if(!e.imageCrop){var r=t.accessors.size,i=e.imageRotation||0,o=bo(so(r),i),a=To(o);a.width=zi(Math.abs(a.width),6),a.height=zi(Math.abs(a.height),6);var u,c=e.imageCropAspectRatio||(e.imageCropLimitToImage?Vo(r):Vo(a));e.imageCropLimitToImage?u=Xo(a,c):((u=Go(a,c)).x=(r.width-u.width)/2,u.y=(r.height-u.height)/2),e.imageCrop=u}var s=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];s.filter((function(t){return su(e,t)})).forEach((function(t){n[t]=e[t],delete e[t]}));var l=Object.keys(e).filter((function(t){return!s.includes(t)})).reduce((function(t,n){return t[n]=e[n],t}),{});Object.assign(n,l)}}(a,e)}))),n.images=[a],e.imageReader&&(n.imageReader=e.imageReader),e.imageWriter&&(n.imageWriter=e.imageWriter),s=a.accessors.read(t,{reader:n.imageReader},{willRequest:n.willRequest})}))},m=function(){var t=f();t&&(s&&s(),t.accessors.loadState=void 0,n.images=[])};return Object.defineProperty(n,"stores",{get:function(){return e}}),Mf(n,{on:i,loadImage:v,abortLoadImage:function(){s&&s(),n.images=[]},editImage:function(t,e){return new Promise((function(r,i){v(t,e).then((function(){var t=n.images[0],e=function(){o(),a()},o=t.accessors.on("processerror",(function(t){e(),i(t)})),a=t.accessors.on("process",(function(t){e(),r(t)}))})).catch(i)}))},removeImage:m,processImage:function(t,e){return new Promise((function(r,i){try{var o=[],a=function(){l=void 0,o.forEach((function(t){return t()}))};Sr(wr().mark((function u(){var c;return wr().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!Yf(t)){u.next=11;break}return u.prev=1,u.next=4,v(t,e);case 4:u.next=9;break;case 6:u.prev=6,u.t0=u.catch(1),i(u.t0);case 9:u.next=12;break;case 11:t&&(Kf(t)?n.imageState=t:Object.assign(n,t));case 12:if(c=f()){u.next=15;break}return u.abrupt("return",i("no image"));case 15:o.push(c.accessors.on("processerror",(function(t){a(),i(t)}))),o.push(c.accessors.on("processabort",(function(){a(),i({name:"AbortError"})}))),o.push(c.accessors.on("process",(function(t){a(),r(t)}))),l=c.accessors.write(n.imageWriter,{redactionRenderStyle:n.imageRedactionRendering,shapePreprocessor:n.shapePreprocessor||xi,imageScrambler:n.imageScrambler,willRequest:n.willRequest,willRequestResource:n.willRequestResource});case 19:case"end":return u.stop()}}),u,null,[[1,6]])})))()}catch(t){i(t)}}))},abortProcessImage:function(){var t=f();t&&(l&&l(),t.accessors.processState=void 0)},destroy:function(){d&&d(),h&&h()}}),n},Qf=function(t,e){var n=Jf().processImage;return n(t,e)},td=function(){if(!ba())return 1/0;var t=/15_/.test(navigator.userAgent);return Va()?t?14745600:16777216:t?16777216:1/0},ed=function(t,e){return Object.keys(t).filter((function(t){return!e.includes(t)})).reduce((function(e,n){return e[n]=t[n],e}),{})},nd=function(t){return new Promise((function(e){if(t.duration===1/0)return t.ontimeupdate=function(){t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)}))},rd=function(t){return new Promise((function(e,n){var r=function(){nd(t).then((function(){e(t.duration)}))};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=function(){return n(t.error)}}))},id=function(t){var e=void 0===t?{}:t,n=e.imageDataResizer,r=e.canvasMemoryLimit;return function(){var t=Sr(wr().mark((function t(e,i,o,a){var u,c;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),a.width=Math.max(a.width,1),a.height=Math.max(a.height,1),t.next=6,Qf(i,{imageReader:Ed(),imageWriter:Id({format:"canvas",targetSize:Object.assign({},a,{upscale:!0}),imageDataResizer:n,canvasMemoryLimit:r}),imageCrop:o});case 6:u=t.sent,c=u.dest,e.drawImage(c,a.x,a.y,a.width,a.height),Wr(c);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},od=function(t,e,n){return void 0===e&&(e=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}),function(){var r=Sr(wr().mark((function r(i,o,a){var u,c;return wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(Ea(0,!1)),u=!1,r.next=4,t.apply(void 0,e(i,o,(function(t){u=!0,a(t)})));case 4:return c=r.sent,n&&n(i,c),u||a(Ea(1,!1)),r.abrupt("return",i);case 8:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}()},ad=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"dest":n,i=e.destProp,o=void 0===i?"dest":i;return[od(function(){var t=Sr(wr().mark((function t(e){var n,r,i;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!/octet-stream/.test(e.type)){t.next=9;break}return n="image",t.next=5,ka(e);case 5:return r=t.sent,/video/i.test(r.nodeName)&&(n="video"),i={type:n+"/unknown"},t.abrupt("return",fa(e)?new File([e],e.name,Object.assign({},i,{lastModified:e.lastModified})):new Blob([e],i));case 9:return t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return[t[r]]}),(function(t,e){return t[o]=e})),"any-to-file"]},ud=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"src":n,i=e.destProp,o=void 0===i?"size":i;return[od(Ca,(function(t){return[t[r]]}),(function(t,e){return t[o]=e})),"read-image-size"]},cd=function(){var t=Sr(wr().mark((function t(e){var n;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ka(e);case 2:if(n=t.sent,!Sa(n)){t.next=7;break}return t.next=6,rd(n);case 6:return t.abrupt("return",t.sent);case 7:return t.abrupt("return",void 0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),sd=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"src":n,i=e.destProp,o=void 0===i?"duration":i;return[od(cd,(function(t){return[t[r]]}),(function(t,e){return t[o]=e})),"read-image-size"]},ld=function(t){var e=void 0===t?{}:t,n=e.srcSize,r=void 0===n?"size":n,i=e.srcOrientation,o=void 0===i?"orientation":i,a=e.destSize,u=void 0===a?"size":a;return[od(Ha,(function(t){return[t[r],t[o]]}),(function(t,e){return t[u]=e})),"image-size-match-orientation"]},fd=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"src":n,i=e.destProp,o=void 0===i?"head":i;return[od((function(t,e){return Wa(t)?Lr(t,e):void 0}),(function(t){return[t[r],[0,262144],onprogress]}),(function(t,e){return t[o]=e})),"read-image-head"]},dd=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"head":n,i=e.destProp,o=void 0===i?"orientation":i;return[od(Er,(function(t){return[t[r],274]}),(function(t,e){return void 0===e&&(e=1),t[o]=e})),"read-exif-orientation-tag"]},hd=function(t){var e=void 0===t?{}:t,n=e.srcProp,r=void 0===n?"src":n,i=e.destProp,o=void 0===i?"imageData":i,a=e.canvasMemoryLimit,u=void 0===a?void 0:a;return[od(li,(function(t){return[t[r],u]}),(function(t,e){return t[o]=e})),"blob-to-image-data"]},pd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i;return[od(xs,(function(t){return[t[r],{backgroundColor:t[o].backgroundColor,backgroundImage:t[o].backgroundImage}]}),(function(t,e){return t.imageData=e})),"image-data-fill"]},vd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i,a=e.destScalar,u=void 0===a?"scalar":a;return[od(Ya,(function(t){var e=t[u],n=t[o].crop;return n&&1!==e&&(n=Do(Mo(n),e,ji())),[t[r],{crop:n,rotation:t[o].rotation,flipX:t[o].flipX,flipY:t[o].flipY}]}),(function(t,e){return t.imageData=e})),"image-data-crop"]},md=function(t){var e=t.targetSize,n=void 0===e?{width:void 0,height:void 0,fit:void 0,upscale:void 0}:e,r=t.imageDataResizer,i=void 0===r?void 0:r,o=t.srcProp,a=void 0===o?"imageData":o,u=t.srcImageState,c=void 0===u?"imageState":u,s=t.destImageScaledSize,l=void 0===s?"imageScaledSize":s;return[od(Qa,(function(t){var e,r=Math.min(n.width||Number.MAX_SAFE_INTEGER,t[c].targetSize&&t[c].targetSize.width||Number.MAX_SAFE_INTEGER),o=Math.min(n.height||Number.MAX_SAFE_INTEGER,t[c].targetSize&&t[c].targetSize.height||Number.MAX_SAFE_INTEGER);return[t[a],{width:r,height:o,fit:n.fit||"contain",upscale:(e=t[c],!!(e.targetSize&&e.targetSize.width||e.targetSize&&e.targetSize.height)||(n.upscale||!1))},i]}),(function(t,e){mo(t.imageData,e)||(t[l]=lo(e)),t.imageData=e})),"image-data-resize"]},gd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i,a=e.destImageData,u=void 0===a?"imageData":a;return[od(au,(function(t){var e=t[o].colorMatrix,n=e&&Object.keys(e).map((function(t){return e[t]})).filter(Boolean);return[t[r],{colorMatrix:n&&ws(n),convolutionMatrix:t[o].convolutionMatrix,gamma:t[o].gamma,noise:t[o].noise,vignette:t[o].vignette}]}),(function(t,e){return t[u]=e})),"image-data-filter"]},yd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i,a=e.destImageData,u=void 0===a?"imageData":a,c=e.destScalar,s=void 0===c?"scalar":c;return[od(function(){var t=Sr(wr().mark((function t(e,n,r,i,o,a){var u,c,s,l,f,d,h;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",e);case 2:return t.prev=2,c={dataSizeScalar:ks(e,i)},r&&r[3]>0&&(c.backgroundColor=[].concat(r)),t.next=7,n(e,c);case 7:u=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return(s=Nr("canvas")).width=e.width,s.height=e.height,(l=s.getContext("2d",{willReadFrequently:!0})).putImageData(e,0,0),"auto"===a&&(f=Math.sqrt(e.width*e.height),l.filter="blur("+Math.round(f/100)+"px)"),d=new Path2D,i.forEach((function(t){var e=Lo(t.x,t.y,t.width,t.height);Bo(e,o);var n=Uo(Mo(e),t.rotation),r=new Path2D;n.forEach((function(t,e){if(0===e)return r.moveTo(t.x,t.y);r.lineTo(t.x,t.y)})),d.addPath(r)})),l.clip(d,"nonzero"),l.imageSmoothingEnabled=!1,l.drawImage(u,0,0,s.width,s.height),Wr(u),h=l.getImageData(0,0,s.width,s.height),Wr(s),t.abrupt("return",h);case 27:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}(),(function(t,e){var n=e.imageScrambler,i=e.redactionRenderStyle;return[t[r],n,t[o].backgroundColor,t[o].redaction,t[s],i]}),(function(t,e){return t[u]=e})),"image-data-redact"]},bd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcSize,o=void 0===i?"size":i,a=e.srcImageState,u=void 0===a?"imageState":a,c=e.destImageData,s=void 0===c?"imageData":c,l=e.destImageScaledSize,f=void 0===l?"imageScaledSize":l,d=e.destScalar,h=void 0===d?"scalar":d,p=e.imageDataResizer,v=void 0===p?void 0:p,m=e.canvasMemoryLimit,g=void 0===m?void 0:m;return[od($s,(function(t,e){var n=e.shapePreprocessor,i=e.willRequestResource,a=e.willRequest,c=t[u].annotation;if(!c.length)return[t[r]];var s=t[h],l=t[u].crop,d=t[o],p=s,m=t[f];m&&(p=Math.min(m.width/l.width,m.height/l.height));var y={width:d.width/s,height:d.height/s};return[t[r],{shapes:c,computeShape:function(t){return t=Zc(t,y),t=ed(t,["left","right","top","bottom"]),t=ts(t,p)},transform:function(e){var n=t[o],r=t[u],i=r.rotation,a=void 0===i?0:i,c=r.flipX,s=r.flipY,l=r.cropLimitToImage,d=t[h],p=t[u].crop,v=void 0===p?To(n):p,m=t[f],g=m?Math.min(m.width/v.width,m.height/v.height):1,y={width:n.width/d*g,height:n.height/d*g},b=sa(y,a),$=b.width,x=b.height,w=.5*y.width-.5*$,k=.5*y.height-.5*x,S=yo(y);e.translate(-w,-k),e.translate(-v.x*g,-v.y*g),e.translate(S.x,S.y),e.rotate(a),e.translate(-S.x,-S.y),e.scale(c?-1:1,s?-1:1),e.translate(c?-y.width:0,s?-y.height:0),l&&(e.rect(0,0,y.width,y.height),e.clip())},drawImage:id({imageDataResizer:v,canvasMemoryLimit:g}),preprocessShape:function(e){return n(e,Object.assign({isPreview:!1},t[u]))},canvasMemoryLimit:g,willRequest:a||i}]}),(function(t,e){return t[s]=e})),"image-data-annotate"]},$d=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i,a=e.destImageData,u=void 0===a?"imageData":a,c=e.destImageScaledSize,s=void 0===c?"imageScaledSize":c,l=e.imageDataResizer,f=void 0===l?void 0:l,d=e.canvasMemoryLimit,h=void 0===d?void 0:d,p=e.destScalar,v=void 0===p?"scalar":p;return[od($s,(function(t,e){var n=e.shapePreprocessor,i=e.willRequestResource,a=e.willRequest,u=t[o].decoration;if(!u.length)return[t[r]];var c=t[v],l=t[o].crop,d=t[s];if(d){var p=Math.min(d.width/l.width,d.height/l.height);c=p}return[t[r],{shapes:u,drawImage:id({imageDataResizer:f,canvasMemoryLimit:h}),computeShape:function(t){return t=Zc(t,l),t=ed(t,["left","right","top","bottom"]),t=ts(t,c)},preprocessShape:function(e){return n(e,Object.assign({isPreview:!1},t[o]))},canvasMemoryLimit:h,willRequest:a||i}]}),(function(t,e){return t[u]=e})),"image-data-decorate"]},xd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcImageState,o=void 0===i?"imageState":i,a=e.destImageData,u=void 0===a?"imageData":a,c=e.destImageScaledSize,s=void 0===c?"imageScaledSize":c,l=e.imageDataResizer,f=void 0===l?void 0:l,d=e.canvasMemoryLimit,h=void 0===d?void 0:d,p=e.destScalar,v=void 0===p?"scalar":p;return[od($s,(function(t,e){var n=e.shapePreprocessor,i=e.willRequestResource,a=e.willRequest,u=t[o].frame;if(!u)return[t[r]];var c=t[v],l=t[o].crop;l&&1!==c&&(l=Do(Mo(l),c,ji()));var d=Object.assign({},l),p=Kc(Jc(u,d,n),d);d.x=Math.abs(p.left),d.y=Math.abs(p.top),d.width+=Math.abs(p.left)+Math.abs(p.right),d.height+=Math.abs(p.top)+Math.abs(p.bottom);var m=t[s],g=m?Math.min(m.width/l.width,m.height/l.height):1;return Bo(d,g),d.x=Math.floor(d.x),d.y=Math.floor(d.y),d.width=Math.floor(d.width),d.height=Math.floor(d.height),[t[r],{shapes:[u],contextBounds:d,computeShape:function(e){return Zc(e,t[r])},transform:function(t){t.translate(d.x,d.y)},drawImage:id({imageDataResizer:f,canvasMemoryLimit:h}),preprocessShape:function(e){return n(e,Object.assign({isPreview:!1},t[o]))},canvasMemoryLimit:h,willRequest:a||i}]}),(function(t,e){return t[u]=e})),"image-data-frame"]},wd=function(t){var e=void 0===t?{}:t,n=e.mimeType,r=void 0===n?void 0:n,i=e.quality,o=void 0===i?void 0:i,a=e.srcImageData,u=void 0===a?"imageData":a,c=e.srcFile,s=void 0===c?"src":c,l=e.destBlob,f=void 0===l?"blob":l;return[od(di,(function(t){return[t[u],r||yi(t[s].name)||t[s].type,o]}),(function(t,e){return t[f]=e})),"image-data-to-blob"]},kd=function(t){var e=void 0===t?{}:t,n=e.srcImageData,r=void 0===n?"imageData":n,i=e.srcOrientation,o=void 0===i?"orientation":i,a=e.destCanvas,u=void 0===a?"dest":a;return[od(Yr,(function(t){return[t[r],t[o]]}),(function(t,e){return t[u]=e})),"image-data-to-canvas"]},Sd=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Wa(e)&&n){t.next=2;break}return t.abrupt("return",e);case 2:if(r=new DataView(n),(i=Mr(r))&&i.exif){t.next=6;break}return t.abrupt("return",e);case 6:return o=["exif","mpf","xmp"].reduce((function(t,e){return i[e]?Math.max(t,i[e].offset+i[e].size):t}),0),a=n.slice(0,o+2),t.abrupt("return",hi(e,a,[20]));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Cd=function(t){var e=void 0===t?{}:t,n=e.renameFile,r=void 0===n?void 0:n,i=e.srcBlob,o=void 0===i?"blob":i,a=e.srcFile,u=void 0===a?"src":a,c=e.destFile,s=void 0===c?"dest":c,l=e.defaultFilename,f=void 0===l?void 0:l;return[od(bi,(function(t){return[t[o],r?r(t[u]):t[u].name||f+"."+vi(t[o].type)]}),(function(t,e){return t[s]=e})),"blob-to-file"]},_d=function(t){var e=t.url,n=void 0===e?"./":e,r=t.dataset,i=void 0===r?function(t){return[["dest",t.dest,t.dest.name],["imageState",t.imageState]]}:r,o=t.destStore,a=void 0===o?"store":o,u=t.credentials,c=t.headers,s=void 0===c?{}:c;return[od(function(){var t=Sr(wr().mark((function t(e,r){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Za(n,e,{onprogress:r,beforeSend:function(t){return La(t,{headers:s,credentials:u})}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),(function(t,e,n){return[i(t),n]}),(function(t,e){return t[a]=e})),"store"]},Md=function(t){return[od((function(e){return t&&t.length?(Object.keys(e).forEach((function(n){t.includes(n)||delete e[n]})),e):e})),"prop-filter"]},Ed=function(t){void 0===t&&(t={});var e,n,r,i,o,a,u,c,s=t,l=s.orientImage,f=void 0===l||l,d=s.outputProps,h=void 0===d?["src","dest","size","duration"]:d,p=s.preprocessImageFile,v=s.request,m=void 0===v?{}:v;return[(e={willRequest:function(){return m}},n=void 0===e?{}:e,r=n.willRequest,i=void 0===r?void 0:r,o=n.srcProp,a=void 0===o?"src":o,u=n.destProp,c=void 0===u?"dest":u,[od(Fa,(function(t,e,n){return[t[a],n,Object.assign({},e,{willRequest:i})]}),(function(t,e){return t[c]=e})),"any-to-file"]),ad(),p&&[od(p,(function(t,e,n){return[t.dest,e,n]}),(function(t,e){return t.dest=e})),"preprocess-image-file"],ud({srcProp:"dest"}),sd({srcProp:"dest"}),f&&fd({srcProp:"dest"}),f&&dd(),f&&ld(),Md(h)].filter(Boolean)},Td=function(t){return t&&(ei(t)?_d({url:t}):ni(t)?[t,"store"]:_d(t))},Id=function(t){return void 0===t&&(t={}),function(e,n,r){if(void 0===r&&(r={}),wa(e)){var i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E=Object.assign({},t,r),T=E.canvasMemoryLimit,I=void 0===T?td():T,P=E.orientImage,R=void 0===P||P,A=E.copyImageHead,L=void 0===A||A,O=E.mimeType,z=void 0===O?void 0:O,D=E.quality,F=void 0===D?void 0:D,j=E.renameFile,B=void 0===j?void 0:j,N=E.targetSize,V=void 0===N?void 0:N,H=E.imageDataResizer,W=void 0===H?void 0:H,U=E.store,Z=void 0===U?void 0:U,q=E.format,G=void 0===q?"file":q,X=E.outputProps,Y=void 0===X?["src","dest","imageState","store"]:X,K=E.preprocessImageSource,J=void 0===K?void 0:K,Q=E.preprocessImageState,tt=void 0===Q?void 0:Q,et=E.postprocessImageData,nt=void 0===et?void 0:et,rt=E.postprocessImageBlob,it=void 0===rt?void 0:rt;return[J&&[od(J,(function(t,e,n){return[t.src,e,n,t.imageState]}),(function(t,e){return t.src=e})),"preprocess-image-source"],(R||L)&&fd(),R&&dd(),ud(),tt&&[od(tt,(function(t,e,n,r){return[t.imageState,e,n,{size:t.size,orientation:t.orientation}]}),(function(t,e){return t.imageState=e})),"preprocess-image-state"],hd({canvasMemoryLimit:I}),R&&ld(),R&&(k=void 0===w?{}:w,S=k.srcImageData,C=void 0===S?"imageData":S,_=k.srcOrientation,M=void 0===_?"orientation":_,[od(Kr,(function(t){return[t[C],t[M]]}),(function(t,e){return t.imageData=e})),"image-data-match-orientation"]),(f=void 0===l?{}:l,d=f.srcImageSize,h=void 0===d?"size":d,p=f.srcCanvasSize,v=void 0===p?"imageData":p,m=f.srcImageState,g=void 0===m?"imageState":m,y=f.destImageSize,b=void 0===y?"size":y,$=f.destScalar,x=void 0===$?"scalar":$,[od((function(t,e){return[Math.min(e.width/t.width,e.height/t.height),lo(e)]}),(function(t){return[t[h],t[v],t[g]]}),(function(t,e){var n=e[0],r=e[1];t[x]=n,t[b]=r})),"calculate-canvas-scalar"]),yd(),vd(),md({imageDataResizer:W,targetSize:V}),gd(),pd(),bd({imageDataResizer:W,canvasMemoryLimit:I}),$d({imageDataResizer:W,canvasMemoryLimit:I}),xd({imageDataResizer:W,canvasMemoryLimit:I}),nt&&[od(nt,(function(t,e,n){return[t.imageData,e,n]}),(function(t,e){return t.imageData=e})),"postprocess-image-data"],"file"===G?wd({mimeType:z,quality:F}):"canvas"===G?kd():[function(t){return t.dest=t.imageData,t}],"file"===G&&R&&(c=(void 0===u?{}:u).srcProp,s=void 0===c?"head":c,[od(Er,(function(t){return[t[s],274,1]})),"clear-exif-orientation-tag"]),"file"===G&&L&&(void 0===i&&(i="blob"),void 0===o&&(o="head"),void 0===a&&(a="blob"),[od(Sd,(function(t){return[t[i],t[o]]}),(function(t,e){return t[a]=e})),"blob-write-image-head"]),it&&[od(it,(function(t,e,n){return[{blob:t.blob,imageData:t.imageData,src:t.src},e,n]}),(function(t,e){return t.blob=e})),"postprocess-image-file"],"file"===G&&Cd({defaultFilename:"image",renameFile:B}),"file"===G?Td(Z):ni(Z)&&[Z,"store"],Md(Y)].filter(Boolean)}}},Pd=function(t,e,n,r,i,o,a,u,c,s,l){if(t&&e&&n&&r&&u){u*=o;var f=ta(Mo(e)),d=Oo(f),h=Oo(t),p=To(n),v=Oo(p),m=Of(n,r,c),g=Oo(m),y=Ki(Vi(v),g),b=Ki(Vi(h),d);y.x+=b.x,y.y+=b.y;var $=Hi(Vi(y));$.x+=b.x,$.y+=b.y;var x=Oo(zo(zo(Mo(i),a),t)),w=Ki(x,h);return Yi(y,w),{origin:$,translation:y,rotation:{x:l?Math.PI:0,y:s?Math.PI:0,z:c},scale:u}}},Rd=null,Ad=function(){if(null===Rd)if("WebGL2RenderingContext"in window){var t;try{t=Nr("canvas"),Rd=!!t.getContext("webgl2")}catch(t){Rd=!1}t&&Wr(t),t=void 0}else Rd=!1;return Rd},Ld=function(t){return 0==(t&t-1)},Od=function(t,e,n,r){return void 0===e&&(e={}),void 0===n&&(n=""),void 0===r&&(r=""),Object.keys(e).filter((function(t){return!Jr(e[t])})).reduce((function(t,i){return t.replace(new RegExp(n+i+r),e[i])}),t)},zd={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},Dd={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",edgeaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},Fd=function(t,e,n){var r=t.createShader(n),i=function(t,e,n){return e=Od(e,n===t.VERTEX_SHADER?zd:Dd,"##").trim(),Ad()?e:(e=(e=e.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),n===t.VERTEX_SHADER&&(e=e.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),n===t.FRAGMENT_SHADER&&(e=e.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+e)}(t,e,n);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS),r},jd=function(t,e,n,r,i){var o=Fd(t,e,t.VERTEX_SHADER),a=Fd(t,n,t.FRAGMENT_SHADER),u=t.createProgram();t.attachShader(u,o),t.attachShader(u,a),t.linkProgram(u);var c={};return r.forEach((function(e){c[e]=t.getAttribLocation(u,e)})),i.forEach((function(e){c[e]=t.getUniformLocation(u,e)})),{program:u,locations:c,destroy:function(){t.detachShader(u,o),t.detachShader(u,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(u)}}},Bd=function(t){return"VIDEO"!==t.nodeName&&(!!Ad()||Ld(t.width)&&Ld(t.height))},Nd=function(t,e,n,r){return t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),function(t,e,n){t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,Bd(e)?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n.filterParam),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n.wrapParam),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n.wrapParam),Bd(e)&&t.generateMipmap(t.TEXTURE_2D)}(t,n,r),t.bindTexture(t.TEXTURE_2D,null),e},Vd=function(t,e){return void 0===e&&(e=1),t?[t[0],t[1],t[2],uu(t[3])?e*t[3]:e]:[0,0,0,0]},Hd=function(){var t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Wd=function(t,e,n,r,i,o,a){var u=1/(e-n),c=1/(r-i),s=1/(o-a);t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*c,t[14]=(a+o)*s,t[15]=1},Ud=function(t,e,n,r){t[12]=t[0]*e+t[4]*n+t[8]*r+t[12],t[13]=t[1]*e+t[5]*n+t[9]*r+t[13],t[14]=t[2]*e+t[6]*n+t[10]*r+t[14],t[15]=t[3]*e+t[7]*n+t[11]*r+t[15]},Zd=function(t,e){t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},qd=function(t,e){var n=Math.sin(e),r=Math.cos(e),i=t[4],o=t[5],a=t[6],u=t[7],c=t[8],s=t[9],l=t[10],f=t[11];t[4]=i*r+c*n,t[5]=o*r+s*n,t[6]=a*r+l*n,t[7]=u*r+f*n,t[8]=c*r-i*n,t[9]=s*r-o*n,t[10]=l*r-a*n,t[11]=f*r-u*n},Gd=function(t,e){var n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],u=t[3],c=t[8],s=t[9],l=t[10],f=t[11];t[0]=i*r-c*n,t[1]=o*r-s*n,t[2]=a*r-l*n,t[3]=u*r-f*n,t[8]=i*n+c*r,t[9]=o*n+s*r,t[10]=a*n+l*r,t[11]=u*n+f*r},Xd=function(t,e){var n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],u=t[3],c=t[4],s=t[5],l=t[6],f=t[7];t[0]=i*r+c*n,t[1]=o*r+s*n,t[2]=a*r+l*n,t[3]=u*r+f*n,t[4]=c*r-i*n,t[5]=s*r-o*n,t[6]=l*r-a*n,t[7]=f*r-u*n},Yd=function(t,e){return Ad()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},Kd=function(t,e){var n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},Jd=function(t,e,n,r){var i=Bi(n.x-e.x,n.y-e.y),o=Bi(r.x-n.x,r.y-n.y),a=Bi(e.x-r.x,e.y-r.y),u=Bi(t.x-e.x,t.y-e.y),c=Bi(t.x-n.x,t.y-n.y),s=Bi(t.x-r.x,t.y-r.y),l=eo(i,u),f=eo(o,c),d=eo(a,s);return l<=0&&f<=0&&d<=0},Qd=function(t){if(t.length<3)return[];if(function(t){for(var e=t.length,n=0;n<e;n++){var r=wo(t[n],Kd(t,n+1));if(ia(r,t,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1}(t))return[];(function(t){var e,n,r,i=0,o=t.length;for(e=0;e<o;e++)n=t[e],i+=((r=t[(e+1)%o]).x-n.x)*((r.y+n.y)/2);return i})(t)<0&&t.reverse();for(var e,n,r,i,o,a,u,c,s,l,f,d,h=t.length,p=[].concat(Array(h).keys()),v=[],m=128;p.length>3;){if(m<=0)return[];for(m--,e=0;e<p.length;e++)if(r=p[e],i=Kd(p,e-1),o=Kd(p,e+1),a=t[r],u=t[i],c=t[o],s=Bi(u.x-a.x,u.y-a.y),l=Bi(c.x-a.x,c.y-a.y),!(eo(s,l)<0)){for(f=!0,n=0;n<h;n++)if(n!==r&&n!==i&&n!==o&&(d=t[n],Jd(d,u,a,c))){f=!1;break}if(f){v.push([u,a,c]),p.splice(e,1);break}}}return v.push([t[p[0]],t[p[1]],t[p[2]]]),v},th=function(t,e,n,r,i){var o=Zi(Bi(r.x-n.x,r.y-n.y)),a=Zi(Bi(i.x-r.x,i.y-r.y)),u=Zi(Bi(o.x+a.x,o.y+a.y)),c=Bi(-u.y,u.x),s=Bi(-o.y,o.x),l=Math.min(1/to(c,s),5);t[e]=r.x,t[e+1]=r.y,t[e+2]=c.x*l,t[e+3]=c.y*l,t[e+4]=-1,t[e+5]=r.x,t[e+6]=r.y,t[e+7]=c.x*l,t[e+8]=c.y*l,t[e+9]=1},eh=function(t){var e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},nh=function(t,e,n,r){void 0===e&&(e=0);var i=Ko(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(n||r)&&ao(i,n,r,o,a),0!==e&&uo(i,e,o,a),i},rh=function(t,e,n,r,i){for(var o=Math.min(20,Math.max(4,Math.round(r/2))),a=0,u=0,c=0,s=0;s<o;s++)a=i*ki+s/o*ki,u=r*Math.cos(a),c=r*Math.sin(a),t.push(Bi(e+u,n+c))},ih=null,oh=function(){if(null!==ih)return ih;var t=Nr("canvas"),e=Yd(t);return ih=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,Wr(t),t=void 0,ih},ah=null,uh=function(){return null===ah&&(ah=Zr(/Firefox/)),ah},ch=function(){return Dr()&&!!window.chrome},sh=new Float32Array([0,1,0,0,1,1,1,0]),lh=new Float32Array([1,0,0,0,1,1,0,1]),fh=Dr()&&uh(),dh=[0,0,0,0,1,0,0,0,0],hh=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],ph=[0,0,0,0],vh=[0,0,0,0],mh=function(t,e,n,r,i){if(!n||!r)return sh;var o=r.x/n.width,a=r.y/n.height,u=t/n.width/i,c=e/n.height/i;return u-=o,c-=a,new Float32Array([-o,c,-o,-a,u,c,u,-a])},gh=function(t,e){void 0===e&&(e={});var n,r,i,o,a,u,c,s,l,f,d,h,p=e.alpha,v=void 0!==p&&p,m={width:0,height:0},g={width:0,height:0},y=oh()||1024,b=Hd(),$=Hd(),x=0,w=0,k=0,S=1,C=new Map([]),_=function(){T.stencilOp(T.KEEP,T.KEEP,T.KEEP),T.stencilFunc(T.ALWAYS,1,255),T.stencilMask(255)},M=30*Math.PI/180,E=Math.tan(M/2),T=Yd(t,{alpha:v,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(T){T.getExtension("OES_standard_derivatives"),T.disable(T.DEPTH_TEST),T.enable(T.STENCIL_TEST),T.enable(T.BLEND),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!v&&uh())),_();var I=T.createTexture();T.bindTexture(T.TEXTURE_2D,I),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(ph)),C.set(0,I);var P=T.createTexture();C.set(2,P);var R=T.createFramebuffer(),A=T.createTexture();C.set(1,A);var L=T.createFramebuffer(),O=jd(T,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),z=T.createBuffer(),D=T.createBuffer();T.bindBuffer(T.ARRAY_BUFFER,D),T.bufferData(T.ARRAY_BUFFER,sh,T.STATIC_DRAW);var F=T.createBuffer();T.bindBuffer(T.ARRAY_BUFFER,F),T.bufferData(T.ARRAY_BUFFER,lh,T.STATIC_DRAW);var j=jd(T,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),B=T.createBuffer();ch()&&(T.bindBuffer(T.ARRAY_BUFFER,B),T.bufferData(T.ARRAY_BUFFER,1,T.DYNAMIC_DRAW));var N=function(t,e,n,r){void 0===r&&(r=!1);var a=j.program,u=j.locations;T.useProgram(a),T.enableVertexAttribArray(u.aPosition),T.enableVertexAttribArray(u.aNormal),T.enableVertexAttribArray(u.aMiter);var c=function(t,e){var n,r,i,o=0,a=t.length,u=new Float32Array(10*(e?a+1:a)),c=t[0],s=t[a-1];for(o=0;o<a;o++)n=t[o-1],r=t[o],i=t[o+1],n||(n=e?s:Bi(r.x+(r.x-i.x),r.y+(r.y-i.y))),i||(i=e?c:Bi(r.x+(r.x-n.x),r.y+(r.y-n.y))),th(u,10*o,n,r,i);return e&&th(u,10*a,s,c,t[1]),u}(t,r),s=5*Float32Array.BYTES_PER_ELEMENT,d=2*Float32Array.BYTES_PER_ELEMENT,h=4*Float32Array.BYTES_PER_ELEMENT;T.uniform1f(u.uWidth,e),T.uniform1f(u.uSharpness,i),T.uniform4fv(u.uColor,n),T.uniformMatrix4fv(u.uMatrix,!1,o),T.uniform4f(u.uCanvasColor,x,w,k,S),T.uniform1fv(u.uMaskBounds,f),T.uniform1f(u.uMaskOpacity,l),T.bindBuffer(T.ARRAY_BUFFER,B),T.bufferData(T.ARRAY_BUFFER,c,T.STATIC_DRAW),T.vertexAttribPointer(u.aPosition,2,T.FLOAT,!1,s,0),T.vertexAttribPointer(u.aNormal,2,T.FLOAT,!1,s,d),T.vertexAttribPointer(u.aMiter,1,T.FLOAT,!1,s,h),T.drawArrays(T.TRIANGLE_STRIP,0,c.length/5),T.disableVertexAttribArray(u.aPosition),T.disableVertexAttribArray(u.aNormal),T.disableVertexAttribArray(u.aMiter)},V=jd(T,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),H=T.createBuffer(),W=jd(T,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){\n##init\n##colorize\n##edgeaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),U=T.createBuffer(),Z=T.createBuffer(),q=T.createBuffer(),G=jd(T,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),X=T.createBuffer(),Y=T.createBuffer(),K=new Map,J={2:{width:0,height:0},1:{width:0,height:0}},Q=function(t,e,n,i){void 0===i&&(i=1);var a=Math.min(Math.min(4096,y)/n.width,Math.min(4096,y)/n.height,i),u=Math.floor(a*n.width),c=Math.floor(a*n.height);mo(n,J[t])?T.bindFramebuffer(T.FRAMEBUFFER,e):(T.bindTexture(T.TEXTURE_2D,C.get(t)),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,u,c,0,T.RGBA,T.UNSIGNED_BYTE,null),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.bindFramebuffer(T.FRAMEBUFFER,e),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,C.get(t),0),J[t]=n);var s,l,f=n.width*r,d=n.height*r;Wd($,0,f,d,0,-1,1),Ud($,0,d,0),l=1,(s=$)[0]*=l,s[1]*=l,s[2]*=l,s[3]*=l,function(t,e){t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e}($,-1),o=$,T.viewport(0,0,u,c),T.colorMask(!0,!0,!0,!0),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),h=[1,0,1,0,1,Math.max(m.width,n.width),1,Math.max(m.width,n.width)]},tt=function(t,e){void 0===e&&(e=!1);var n=K.get(t).src;n instanceof HTMLCanvasElement&&(e||n.dataset.retain||Wr(n)),K.delete(t),T.deleteTexture(t)},et=function(t){return K.get(t).isRotatedVideo};return{drawPath:function(t,e,n,i,a,u,c,s,d){if(void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=!1),!(t.length<2)){var h=t.map((function(t){return{x:t.x*r,y:t.y*r}})),p=a*r;if(p>0&&N(h,p,Vd(u,d),c),!(h.length<3)&&s&&0!==s[3]&&c){var v=Qd(h),m=new Float32Array(6*v.length);v.forEach((function(t,e){var n=t[0],r=t[1],i=t[2],o=6*e;m[o+0]=n.x,m[o+1]=n.y,m[o+2]=r.x,m[o+3]=r.y,m[o+4]=i.x,m[o+5]=i.y})),function(t,e){var n=V.program,r=V.locations;T.useProgram(n),T.enableVertexAttribArray(r.aPosition),T.uniform4fv(r.uColor,e),T.uniformMatrix4fv(r.uMatrix,!1,o),T.uniform1fv(r.uMaskBounds,f),T.uniform1f(r.uMaskOpacity,l),T.uniform4f(r.uCanvasColor,x,w,k,S),T.bindBuffer(T.ARRAY_BUFFER,H),T.bufferData(T.ARRAY_BUFFER,t,T.STATIC_DRAW),T.vertexAttribPointer(r.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLES,0,t.length/2),T.disableVertexAttribArray(r.aPosition)}(m,Vd(s,d))}}},drawRect:function(t,e,n,i,a,u,c,s,d,p,v,m,g,y,b,$,C){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===p&&(p=!1),void 0===v&&(v=void 0),void 0===b&&(b=void 0);var _=Bo(Mo(t),r),M=a.map((function(e){return function(t,e){return Math.floor(zf(t,0,Math.min(.5*(e.width-1),.5*(e.height-1))))}(e||0,t)})).map((function(t){return t*r}));if(u||c){var E=Mo(_);E.x-=.5,E.y-=.5,E.width+=1,E.height+=1;var P,R=nh(E,e,n,i),A=eh(R);$&&0===(P=Vd($))[3]&&(P[3]=.001);var L=s&&p?[E.width/s.width,E.height/s.height]:[1,1];!function(t,e,n,i,a,u,c,s,d,p,v,m){void 0===u&&(u=I),void 0===s&&(s=1),void 0===d&&(d=ph),void 0===p&&(p=sh),void 0===v&&(v=h);var g=W.program,y=W.locations;T.useProgram(g),T.enableVertexAttribArray(y.aPosition),T.enableVertexAttribArray(y.aTexCoord),T.enableVertexAttribArray(y.aRectCoord),T.uniform4fv(y.uColor,a),T.uniform2fv(y.uSize,[e,n]),T.uniform2fv(y.uPosition,[t[2],t[3]]),T.uniform2fv(y.uRepeat,c),T.uniform1i(y.uInverted,m?1:0),T.uniform1fv(y.uCornerRadius,i),T.uniform4f(y.uCanvasColor,x,w,k,S),T.uniform1fv(y.uMaskFeather,v.map((function(t,e){return e%2==0?t:t*r}))),T.uniform1fv(y.uMaskBounds,f),T.uniform1f(y.uMaskOpacity,l),T.uniformMatrix4fv(y.uMatrix,!1,o),T.uniform1i(y.uTexture,4),T.uniform4fv(y.uTextureColor,d),T.uniform1f(y.uTextureOpacity,s),T.activeTexture(T.TEXTURE0+4),T.bindTexture(T.TEXTURE_2D,u),T.bindBuffer(T.ARRAY_BUFFER,Z),T.bufferData(T.ARRAY_BUFFER,p,T.STATIC_DRAW),T.vertexAttribPointer(y.aTexCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,q),T.bufferData(T.ARRAY_BUFFER,sh,T.STATIC_DRAW),T.vertexAttribPointer(y.aRectCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,U),T.bufferData(T.ARRAY_BUFFER,t,T.STATIC_DRAW),T.vertexAttribPointer(y.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLE_STRIP,0,t.length/2),T.disableVertexAttribArray(y.aPosition),T.disableVertexAttribArray(y.aTexCoord),T.disableVertexAttribArray(y.aRectCoord)}(A,E.width,E.height,M,Vd(u,y),c,L,y,P,v?new Float32Array(v):mh(E.width,E.height,s,d,r),b,C)}m&&(m=Math.min(m,_.width,_.height),N(function(t,e,n,r,i,o,a,u){var c=[];if(o.every((function(t){return 0===t})))c.push(Bi(t,e),Bi(t+n,e),Bi(t+n,e+r),Bi(t,e+r));else{var s=o[0],l=o[1],f=o[2],d=o[3],h=t,p=t+n,v=e,m=e+r;c.push(Bi(h+s,v)),rh(c,p-l,v+l,l,-1),c.push(Bi(p,v+l)),rh(c,p-d,m-d,d,0),c.push(Bi(p-d,m)),rh(c,h+f,m-f,f,1),c.push(Bi(h,m-f)),rh(c,h+s,v+s,s,2)}return(a||u)&&ao(c,a,u,t+.5*n,e+.5*r),i&&uo(c,i,t+.5*n,e+.5*r),c}(_.x,_.y,_.width,_.height,e,M,n,i),m*r,Vd(g,y),!0))},drawEllipse:function(t,e,n,i,a,u,c,s,d,h,p,v,m,g,y){void 0===d&&(d=void 0),void 0===h&&(h=void 0),void 0===p&&(p=void 0);var b=Bo(Lo(t.x-e,t.y-n,2*e,2*n),r);if(c||s){var $=Mo(b);$.x-=.5,$.y-=.5,$.width+=1,$.height+=1;var C=nh($,i,a,u);!function(t,e,n,r,i,a,u,c){void 0===i&&(i=I),void 0===a&&(a=sh),void 0===u&&(u=1),void 0===c&&(c=!1);var s=G.program,d=G.locations;T.useProgram(s),T.enableVertexAttribArray(d.aPosition),T.enableVertexAttribArray(d.aTexCoord),T.uniformMatrix4fv(d.uMatrix,!1,o),T.uniform2fv(d.uRadius,[.5*e,.5*n]),T.uniform1i(d.uInverted,c?1:0),T.uniform4fv(d.uColor,r),T.uniform4f(d.uCanvasColor,x,w,k,S),T.uniform2fv(d.uRepeat,[1,1]),T.uniform1fv(d.uMaskBounds,f),T.uniform1f(d.uMaskOpacity,l),T.uniform1i(d.uTexture,4),T.uniform1f(d.uTextureOpacity,u),T.activeTexture(T.TEXTURE0+4),T.bindTexture(T.TEXTURE_2D,i),T.bindBuffer(T.ARRAY_BUFFER,Y),T.bufferData(T.ARRAY_BUFFER,a,T.STATIC_DRAW),T.vertexAttribPointer(d.aTexCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,X),T.bufferData(T.ARRAY_BUFFER,t,T.STATIC_DRAW),T.vertexAttribPointer(d.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLE_STRIP,0,t.length/2),T.disableVertexAttribArray(d.aPosition),T.disableVertexAttribArray(d.aTexCoord)}(eh(C),$.width,$.height,Vd(c,g),s,p?new Float32Array(p):mh($.width,$.height,d,h,r),g,y)}v&&N(function(t,e,n,r,i,o,a){var u=.5*Math.abs(n),c=.5*Math.abs(r),s=Math.abs(n)+Math.abs(r),l=Math.max(20,Math.round(s/6));return ca(Bi(t+u,e+c),u,c,i,o,a,l)}(b.x,b.y,b.width,b.height,i,a,u),v*r,Vd(m,g),!0)},drawImage:function(t,e,i,o,a,u,c,s,h,p,v,g,y,b,$,x,w,k,S,_,I){void 0===v&&(v=hh),void 0===g&&(g=1),void 0===b&&(b=1),void 0===$&&($=0),void 0===x&&(x=d),void 0===w&&(w=vh),void 0===k&&(k=ph),void 0===S&&(S=!1),void 0===_&&(_=!1),void 0===I&&(I=!0);var P=e.width*r,R=e.height*r,A=-.5*P,L=.5*R,j=.5*P,B=-.5*R,N=new Float32Array([A,B,0,A,L,0,j,B,0,j,L,0]);T.bindBuffer(T.ARRAY_BUFFER,z),T.bufferData(T.ARRAY_BUFFER,N,T.STATIC_DRAW);var V=e.height/2/E*(m.height/e.height)*-1;a*=r,u*=r,i*=r,o*=r;var H,W,U,Z,q,G,X,Y=O.program,K=O.locations,J=Hd();H=J,W=M,U=n,Z=1,q=2*-V,G=1/Math.tan(W/2),X=1/(Z-q),H[0]=G/U,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=G,H[6]=0,H[7]=0,H[8]=0,H[9]=0,H[10]=(q+Z)*X,H[11]=-1,H[12]=0,H[13]=0,H[14]=2*q*Z*X,H[15]=0,Ud(J,a,-u,V),Ud(J,i,-o,0),Xd(J,-h),Zd(J,p),Ud(J,-i,o,0),Gd(J,s),qd(J,c),T.useProgram(Y),T.enableVertexAttribArray(K.aPosition),T.enableVertexAttribArray(K.aTexCoord),T.uniform1i(K.uTexture,3),T.uniform2f(K.uTextureSize,e.width,e.height),T.activeTexture(T.TEXTURE0+3),T.bindTexture(T.TEXTURE_2D,t);var Q=_?1:0,tt=C.get(Q);T.uniform1i(K.uTextureBlend,Q),T.activeTexture(T.TEXTURE0+Q),T.bindTexture(T.TEXTURE_2D,tt);var nt=S?2:0,rt=C.get(nt);T.uniform1i(K.uTextureOverlay,nt),T.activeTexture(T.TEXTURE0+nt),T.bindTexture(T.TEXTURE_2D,rt),T.bindBuffer(T.ARRAY_BUFFER,z),T.vertexAttribPointer(K.aPosition,3,T.FLOAT,!1,0,0);var it,ot=fh&&et(t);T.bindBuffer(T.ARRAY_BUFFER,ot?F:D),T.vertexAttribPointer(K.aTexCoord,2,T.FLOAT,!1,0,0),T.uniformMatrix4fv(K.uMatrix,!1,J),T.uniform4fv(K.uOverlayColor,k),!y||Bf(y,dh)?(y=dh,it=-1):it=(it=y.reduce((function(t,e){return t+e}),0))<=0?1:it,T.uniform1fv(K.uClarityKernel,y),T.uniform1f(K.uClarityKernelWeight,it),T.uniform1f(K.uColorGamma,1/b),T.uniform1f(K.uColorVignette,$),T.uniform1i(K.uAntialias,I?1:0),T.uniform4f(K.uColorOffset,v[4],v[9],v[14],v[19]),T.uniformMatrix4fv(K.uColorMatrix,!1,[v[0],v[1],v[2],v[3],v[5],v[6],v[7],v[8],v[10],v[11],v[12],v[13],v[15],v[16],v[17],v[18]]),T.uniform1f(K.uOpacity,g),T.uniform1f(K.uMaskOpacity,l),T.uniform1fv(K.uMaskBounds,f),T.uniform1fv(K.uMaskCornerRadius,w.map((function(t){return t*r}))),T.uniform1fv(K.uMaskFeather,x.map((function(t,e){return e%2==0?t:t*r}))),T.drawArrays(T.TRIANGLE_STRIP,0,4),T.disableVertexAttribArray(K.aPosition),T.disableVertexAttribArray(K.aTexCoord)},textureFilterNearest:T.NEAREST,textureFilterLinear:T.LINEAR,textureClamp:T.CLAMP_TO_EDGE,textureRepeat:T.REPEAT,textureCreate:function(){return T.createTexture()},textureUpdate:function(t,e,n){return K.set(t,{src:e,options:n,isRotatedVideo:"VIDEO"===e.nodeName&&(e.dataset&&90==e.dataset.rotation||270==e.dataset.rotation)}),Nd(T,t,e,n)},textureGetSize:function(t){var e=K.get(t),n=e.src,r=e.options,i=lo(n);return r.scalar?xo(i,(function(t){return t/r.scalar})):i},textureDelete:tt,enablePreviewStencil:function(){T.stencilOp(T.KEEP,T.KEEP,T.REPLACE),T.stencilFunc(T.ALWAYS,1,255),T.stencilMask(255)},applyPreviewStencil:function(){T.stencilFunc(T.EQUAL,1,255),T.stencilMask(0)},disablePreviewStencil:_,setCanvasColor:function(t){x=t[0],w=t[1],k=t[2],S=v?t[3]:1,T.clear(T.COLOR_BUFFER_BIT)},resetCanvasMatrix:function(){Wd(b,0,m.width,m.height,0,-1,1)},updateCanvasMatrix:function(t,e,n,i,o){var a=t.width,u=t.height,c=m.width*(.5/r),s=m.height*(.5/r),l={x:c+(n.x+e.x),y:s+(n.y+e.y)},f={x:l.x-e.x,y:l.y-e.y},d=.5*a,h=.5*u;Wi(f,o.z,l),io(f,i,l),Ud(b,(f.x-d)*r,(f.y-h)*r,0),Ud(b,d*r,h*r,0),Xd(b,o.z);var p=o.x>Math.PI/2;qd(b,p?Math.PI:0);var v=o.y>Math.PI/2;Gd(b,v?Math.PI:0),Zd(b,i),Ud(b,-d*r,-h*r,0)},drawToCanvas:function(){T.bindFramebuffer(T.FRAMEBUFFER,null),o=b,T.viewport(0,0,T.drawingBufferWidth,T.drawingBufferHeight),T.colorMask(!0,!0,!0,!0),T.clearColor(x,w,k,S),T.clear(T.COLOR_BUFFER_BIT),h=[1,0,1,0,1,m.width,1,m.width]},drawToImageBlendBuffer:function(t,e){Q(1,L,t,e)},drawToImageOverlayBuffer:function(t,e){Q(2,R,t,e)},enableMask:function(t,e){var n=t.x*r,i=t.y*r,o=t.width*r,d=t.height*r;u=(s=n)+o,a=m.height-i,c=m.height-(i+d),l=1-e,f=[a,u,c,s]},disableMask:function(){s=0,u=m.width,a=m.height,l=1,f=[a,u,c=0,s]},resize:function(e,o,a){i=1===(r=a)?.75:1,g.width=e,g.height=o,m.width=e*r,m.height=o*r,n=$i(m.width,m.height),t.width=m.width,t.height=m.height,Wd(b,0,m.width,m.height,0,-1,1),d=[1,0,1,0,1,g.width,1,g.width]},release:function(){Array.from(K.keys()).forEach((function(t){return tt(t,!0)})),K.clear(),C.forEach((function(t){T.deleteTexture(t)})),C.clear(),O.destroy(),j.destroy(),V.destroy(),W.destroy(),G.destroy(),t.width=1,t.height=1,t=void 0}}}},yh=function(t,e){var n,r,i,o,a,u=t.imageData,c=t.amount,s=void 0===c?1:c,l=Math.round(2*Math.max(1,s)),f=Math.round(.5*l),d=u.width,h=u.height,p=new Uint8ClampedArray(d*h*4),v=u.data,m=0,g=0,y=0,b=d*h*4-4;for(i=0;i<h;i++)for(n=crypto.getRandomValues(new Uint8ClampedArray(h)),r=0;r<d;r++)g=0,y=0,(o=n[i]/255)<.5&&(g=4*(-f+Math.round(Math.random()*l))),o>.5&&(y=(-f+Math.round(Math.random()*l))*(4*d)),a=Math.min(Math.max(0,m+g+y),b),p[m]=v[a],p[m+1]=v[a+1],p[m+2]=v[a+2],p[m+3]=v[a+3],m+=4;e(null,{data:p,width:u.width,height:u.height})},bh=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],$h=function(){var t=Sr(wr().mark((function t(e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),e){t.next=3;break}return t.abrupt("return");case 3:if(r=e.width,i=e.height,a=(o=n).dataSize,u=void 0===a?96:a,c=o.dataSizeScalar,s=void 0===c?1:c,l=o.scrambleAmount,f=void 0===l?4:l,d=o.blurAmount,h=void 0===d?6:d,p=o.outputFormat,v=void 0===p?"canvas":p,m=o.backgroundColor,g=void 0===m?[0,0,0]:m,y=Math.round(u*s),b=Math.min(y/r,y/i),$=Math.floor(r*b),x=Math.floor(i*b),w=Nr("canvas",{width:$,height:x}),k=w.getContext("2d",{willReadFrequently:!0}),g.length=3,k.fillStyle=yu(g),k.fillRect(0,0,$,x),Ur(e)?((S=Nr("canvas",{width:r,height:i})).getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),k.drawImage(S,0,0,$,x),Wr(S)):k.drawImage(e,0,0,$,x),C=k.getImageData(0,0,$,x),_=[],f>0&&_.push([yh,{amount:f}]),h>0)for(M=0;M<h;M++)_.push([eu,{matrix:bh}]);if(!_.length){t.next=28;break}return T=function t(e,n){return"(err, imageData) => {\n("+e[n][0].toString()+")(Object.assign({ imageData: imageData }, filterInstructions["+n+"]), \n"+(e[n+1]?t(e,n+1):"done")+")\n}"},I="function (options, done) {\nconst filterInstructions = options.filterInstructions;\nconst imageData = options.imageData;\n("+T(_,0)+")(null, imageData)\n}",t.next=24,si(I,[{imageData:C,filterInstructions:_.map((function(t){return t[1]}))}],[C.data.buffer]);case 24:P=t.sent,E=Ja(P),t.next=29;break;case 28:E=C;case 29:if("canvas"!==v){t.next=32;break}return k.putImageData(E,0,0),t.abrupt("return",w);case 32:return t.abrupt("return",E);case 33:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function xh(t){return Math.sqrt(1- --t*t)}function wh(t){return"[object Date]"===Object.prototype.toString.call(t)}function kh(t,e){if(t===e||t!=t)return function(){return t};var n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){var r=e.map((function(e,n){return kh(t[n],e)}));return function(t){return r.map((function(e){return e(t)}))}}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(wh(t)&&wh(e)){t=t.getTime();var i=(e=e.getTime())-t;return function(e){return new Date(t+e*i)}}var o=Object.keys(e),a={};return o.forEach((function(n){a[n]=kh(t[n],e[n])})),function(t){var e={};return o.forEach((function(n){e[n]=a[n](t)})),e}}if("number"===n){var u=e-t;return function(e){return t+e*u}}throw new Error("Cannot interpolate "+n+" values")}function Sh(t,e){void 0===e&&(e={});var n,r=vf(t),i=t;function o(o,a){if(null==t)return r.set(t=o),Promise.resolve();i=o;var u=n,c=!1,s=_s(_s({},e),a),l=s.delay,f=void 0===l?0:l,d=s.duration,h=void 0===d?400:d,p=s.easing,v=void 0===p?Cs:p,m=s.interpolate,g=void 0===m?kh:m;if(0===h)return u&&(u.abort(),u=null),r.set(t=i),Promise.resolve();var y,b=Us()+f;return n=Xs((function(e){if(e<b)return!0;c||(y=g(t,o),"function"==typeof h&&(h=h(t,o)),c=!0),u&&(u.abort(),u=null);var n=e-b;return n>h?(r.set(t=o),!1):(r.set(t=y(v(n/h))),!0)})),n.promise}return{set:o,update:function(e,n){return o(e(i,t),n)},subscribe:r.subscribe}}function Ch(t,e,n,r){if("number"==typeof n){var i=r-n,o=(n-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*i-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,n+a)}if(lu(n))return n.map((function(i,o){return Ch(t,e[o],n[o],r[o])}));if("object"==typeof n){var u={};for(var c in n)u[c]=Ch(t,e[c],n[c],r[c]);return u}throw new Error("Cannot spring "+typeof n+" values")}function _h(t,e){void 0===e&&(e={});var n,r,i,o=vf(t),a=e,u=a.stiffness,c=void 0===u?.15:u,s=a.damping,l=void 0===s?.8:s,f=a.precision,d=void 0===f?.01:f,h=t,p=t,v=1,m=0,g=!1;function y(e,a){void 0===a&&(a={}),p=e;var u=i={};if(null==t||a.hard||b.stiffness>=1&&b.damping>=1)return g=!0,n=null,h=e,o.set(t=p),Promise.resolve();if(a.soft){var c=!0===a.soft?.5:+a.soft;m=1/(60*c),v=0}if(!r){n=null,g=!1;var s={inv_mass:void 0,opts:b,settled:!0,dt:void 0};r=Xs((function(e){if(null===n&&(n=e),g)return g=!1,r=null,!1;v=Math.min(v+m,1),s.inv_mass=v,s.opts=b,s.settled=!0,s.dt=60*(e-n)/1e3;var i=Ch(s,h,t,p);return n=e,h=t,o.set(t=i),s.settled&&(r=null),!s.settled}))}return new Promise((function(t){r.promise.then((function(){u===i&&t()}))}))}var b={set:y,update:function(e,n){return y(e(p,t),n)},subscribe:o.subscribe,stiffness:c,damping:l,precision:d};return b}var Mh,Eh,Th=pf(!1,(function(t){var e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=function(){return t(e.matches)};return n(),e.addListener(n),function(){return e.removeListener(n)}})),Ih=function(){return"ResizeObserver"in window},Ph=Eo(),Rh=function(t,e,n,r,i){t.rect||(t.rect=Eo());var o=t.rect;Ho(Ph,e,n,r,i),No(o,Ph)||(Wo(o,Ph),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},Ah=Math.round,Lh=function(t){var e=t.getBoundingClientRect();Dh&&Rh(t,Ah(e.x),Ah(e.y),Ah(e.width),Ah(e.height))},Oh=function(t){Dh&&Rh(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},zh=[],Dh=void 0;function Fh(){zh.length?(zh.forEach((function(t){return t.measure(t)})),Dh=requestAnimationFrame(Fh)):Dh=void 0}var jh=0,Bh=function(t,e){void 0===e&&(e={});var n=e,r=n.observePosition,i=void 0!==r&&r,o=n.observeViewRect,a=void 0!==o&&o,u=n.once,c=void 0!==u&&u,s=n.disabled,l=void 0!==s&&s,f=n.isMeasureRoot,d=void 0!==f&&f;if(Ih()&&d&&!Eh&&(Eh=new ResizeObserver((function(t){var e=t[0].contentRect,n=e.width,r=e.height;n<=0||r<=0?(Dh&&cancelAnimationFrame(Dh),Dh=!1):!1===Dh&&Fh()})),Eh.observe(t)),!l)return!Ih()||i||a?(t.measure=a?Lh:Oh,zh.push(t),void 0===Dh&&(Dh=requestAnimationFrame(Fh)),t.measure(t),{destroy:function(){d&&Eh&&(Eh.unobserve(t),Eh.disconnect(),Eh=void 0);var e=zh.indexOf(t);zh.splice(e,1),delete t.measure}}):(Mh||(Mh=new ResizeObserver((function(t){t.forEach((function(t){Dh&&Oh(t.target)}))}))),Mh.observe(t),Oh(t),c?Mh.unobserve(t):jh++,{destroy:function(){d&&Eh&&(Eh.unobserve(t),Eh.disconnect(),Eh=void 0),c||(Mh.unobserve(t),0===--jh&&(Mh.disconnect(),Mh=void 0))}})},Nh=function(t){var e=!1,n={pointerdown:function(){e=!1},keydown:function(){e=!0},keyup:function(){e=!1},focus:function(t){e&&(t.target.dataset.focusVisible="")},blur:function(t){delete t.target.dataset.focusVisible}};return Object.keys(n).forEach((function(e){return t.addEventListener(e,n[e],!0)})),{destroy:function(){Object.keys(n).forEach((function(e){return t.removeEventListener(e,n[e],!0)}))}}},Vh=function(){var t=Sr(wr().mark((function t(e){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){if("file"===e.kind)return t(e.getAsFile());e.getAsString(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Hh=function(t){return new Promise((function(e,n){var r=t.dataTransfer.items;if(!r)return e([]);Promise.all(Array.from(r).map(Vh)).then((function(t){e(t.filter((function(t){return mu(t)&&wa(t)||/^http/.test(t)})))})).catch(n)}))},Wh=function(t,e){void 0===e&&(e={});var n=function(t){t.preventDefault()},r=function(){var n=Sr(wr().mark((function n(r){var i;return wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),r.stopPropagation(),n.prev=2,n.next=5,Hh(r);case 5:i=n.sent,t.dispatchEvent(new CustomEvent("dropfiles",Object.assign({detail:{event:r,resources:i}},e))),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(t){return n.apply(this,arguments)}}();return t.addEventListener("drop",r),t.addEventListener("dragover",n),{destroy:function(){t.removeEventListener("drop",r),t.removeEventListener("dragover",n)}}},Uh=null,Zh=function(){if(null===Uh)if(Dr()){var t=Nr("canvas");Uh=!Yd(t,{failIfMajorPerformanceCaveat:!0}),Wr(t)}else Uh=!1;return Uh},qh=function(t){return t instanceof WebGLTexture};function Gh(t){var e,n,r,i;return{c:function(){e=el("div"),n=el("canvas"),sl(e,"class","PinturaCanvas")},m:function(o,a){Qs(o,e,a),Ys(e,n),t[35](n),r||(i=[al(n,"measure",t[36]),Hs(Bh.call(null,n))],r=!0)},p:Ss,i:Ss,o:Ss,d:function(n){n&&tl(e),t[35](null),r=!1,Ts(i)}}}function Xh(t,e,n){var r,i,o,a,u,c,s,l,f=[0,0,0,0],d=Dr()&&function(t){var e=.5*t,n=Nr("canvas",{"data-retain":!0,width:t,height:t}),r=n.getContext("2d");return r.fillStyle="#f0f",r.fillRect(0,0,e,e),r.fillRect(e,e,e,e),n}(128),h=_l(),p=e.isAnimated,v=e.isTransparent,m=e.maskRect,g=e.maskOpacity,y=void 0===g?1:g,b=e.maskFrameOpacity,$=void 0===b?.95:b,x=e.maskMarkupOpacity,w=void 0===x?1:x,k=e.clipAnnotationsToImage,S=void 0===k||k,C=e.pixelRatio,_=void 0===C?1:C,M=e.textPixelRatio,E=void 0===M?_:M,T=e.backgroundColor,I=e.willRender,P=void 0===I?xi:I,R=e.didRender,A=void 0===R?xi:R,L=e.willRequest,O=void 0===L?void 0:L,z=e.loadImageData,D=void 0===z?xi:z,F=e.enableGrid,j=void 0!==F&&F,B=e.gridColors,N=void 0===B?void 0:B,V=e.gridSize,H=void 0===V?void 0:V,W=e.gridOpacity,U=void 0===W?0:W,Z=e.images,q=void 0===Z?[]:Z,G=e.interfaceImages,X=void 0===G?[]:G,Y=null,K=null,J=null,Q=function(t,e){return t.set(e,{hard:!p})},tt={precision:1e-4*.01},et=0,nt=Sh(void 0,{duration:0});Ls(t,nt,(function(t){return n(34,s=t)}));var rt=_h(1,tt);Ls(t,rt,(function(t){return n(33,u=t)}));var it=_h(1,tt);Ls(t,it,(function(t){return n(45,o=t)}));var ot=vf();Ls(t,ot,(function(t){return n(47,c=t)}));var at=vf();Ls(t,at,(function(t){return n(46,a=t)}));var ut,ct=function(){return requestAnimationFrame((function(){yt=!0,Ct=0,i()}))},st=new Map([]),lt=new Map([]),ft=function(t,e,n){if(st.has(t)){if(Sa(t)){var r=st.get(t),i="pixelated"===e?Y.textureFilterNearest:Y.textureFilterLinear,o="repeat"===n?Y.textureRepeat:Y.textureClamp;Y.textureUpdate(r,t,{filterParam:i,wrapParam:o})}}else{st.set(t,t);var a="pixelated"===e?Y.textureFilterNearest:Y.textureFilterLinear,u="repeat"===n?Y.textureRepeat:Y.textureClamp;if(!ei(t)&&(Da(t)||Ur(t)||ns(t)||Sa(t))){var c=Y.textureCreate();Y.textureUpdate(c,t,{filterParam:a,wrapParam:u}),st.set(t,c)}else D(t).then((function(e){if(Y&&e){var n=Y.textureCreate();Y.textureUpdate(n,e,{filterParam:a,wrapParam:u}),st.set(t,n),ct()}})).catch((function(t){}))}return st.get(t)},dt=function(t){var e;if(t.backgroundImage)e=ft(t.backgroundImage,t.backgroundImageRendering);else if(ei(t.text)){if(t.width&&t.width<1||t.height&&t.height<1)return;e=function(t){if(t.text.length){var e=t.text,n=t.textAlign,r=t.fontFamily,i=t.fontSize,o=void 0===i?16:i,a=t.fontWeight,u=t.fontVariant,c=t.fontStyle,s=t.lineHeight,l=void 0===s?o:s,f=t.width,d=t.height;f=uu(f)?Math.floor(f):f,d=uu(d)?Math.floor(d):d;var h=Ru(e,Object.assign({},t,{width:f,height:d})),p=h.textSize,v=h.signature,m=bu({text:e,textAlign:n,fontFamily:r,fontSize:o,fontWeight:a,fontVariant:u,fontStyle:c,lineHeight:l,signature:v});if(!st.has(m)){st.set(m,e);var g=Math.ceil(p.width),y=Math.ceil(p.height/l)*l;if(0===g||0===y)return;var b=oh(),$=Math.min(1,(b-Mu*E*2)/(g*E),b/(y*E));Ju(e,{fontSize:o,fontFamily:r,fontWeight:a,fontVariant:u,fontStyle:c,textAlign:n,lineHeight:l,width:f,height:d,imageWidth:g,imageHeight:y,pixelRatio:E*$,willRequest:O,color:[1,0,1]}).then((function(e){if(Y){var n=Y.textureCreate();Y.textureUpdate(n,e,{filterParam:Y.textureFilterLinear,wrapParam:Y.textureClamp,scalar:$}),st.set(m,n),lt.set(t.id,n),ct()}})).catch(console.error)}var x=st.get(m);return qh(x)?x:lt.get(t.id)}lt.delete(t.id)}(t)}return e},ht=function(t){var e=t.data,n=t.size,r=t.origin,i=t.translation,o=t.rotation,a=t.scale,u=t.colorMatrix,c=t.opacity,s=t.convolutionMatrix,l=t.gamma,f=t.vignette,d=t.maskFeather,h=t.maskCornerRadius,p=t.overlayColor,v=t.enableOverlay,m=t.enableBlend,g=t.enableAntialiasing,y=ft(e),b=0,$=0;if(1===_){var x=Math.abs(1-a)<Number.EPSILON;b=x&&K%2!=0?.5:0,$=x&&J%2!=0?.5:0}return Y.drawImage(y,n,r.x,r.y,i.x+b,i.y+$,o.x,o.y,o.z,a,u,zf(c,0,1),s,l,f,d,h,p,v,m,g),y},pt=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return[i.x,i.y,e.x,e.y,r.x,r.y,n.x,n.y]},vt=ji(),mt=function(t,e){return void 0===t&&(t=[]),t.map((function(t){var e=!t._isLoading&&dt(t),n=qh(e)?e:void 0,r=t._scale||1,i=t._translate||vt,o=t.strokeWidth&&t.strokeWidth*r;if(lu(t.points)){var a=t.points.map((function(t){return Bi(t.x*r+i.x,t.y*r+i.y)}));Y.drawPath(a,t.rotation,t.flipX,t.flipY,o,t.strokeColor,t.pathClose,t.backgroundColor,t.opacity)}else if(uu(t.rx)&&uu(t.ry)){var u=t.x,c=t.y;u*=r,c*=r,u+=i.x,c+=i.y,Y.drawEllipse(Bi(u,c),t.rx*r,t.ry*r,t.rotation,t.flipX,t.flipY,t.backgroundColor,n,void 0,void 0,t.backgroundCorners&&pt(t.backgroundCorners),o,t.strokeColor,t.opacity,t.inverted)}else if(ei(t.text)&&n||t.width){var s,l,f,d=n&&Y.textureGetSize(n),h=void 0,p=t.backgroundColor,v=t.strokeColor,m=[t.cornerRadius,t.cornerRadius,t.cornerRadius,t.cornerRadius].map((function(t){return t*r}));if(s=t.width?Io(t):Object.assign({x:t.x,y:t.y},d),r&&i&&(s.x*=r,s.y*=r,s.x+=i.x,s.y+=i.y,s.width*=r,s.height*=r),d)if(t.backgroundImage&&(t.backgroundSize||t.backgroundPosition)){var g=$i(d.width,d.height);if("contain"===t.backgroundSize){var y=Xo(s,g,s);l=fo(y),f=t.backgroundPosition?t.backgroundPosition:Bi(.5*(s.width-l.width),.5*(s.height-l.height))}else if("cover"===t.backgroundSize){var b=Go(s,g,s);l=fo(b),t.backgroundPosition?f=t.backgroundPosition:(f=Bi(b.x,b.y),f=Bi(.5*(s.width-l.width),.5*(s.height-l.height)))}else t.backgroundSize?(l=t.backgroundSize,f=t.backgroundPosition):t.backgroundPosition&&(l=Object.assign({},d),f=t.backgroundPosition)}else if(t.text){var $={width:d.width/E,height:d.height/E};if(f=Bi(0,0),l={width:$.width*r,height:$.height*r},t.backgroundColor||t.strokeColor){p=void 0,v=void 0;var x=(t.width||$.width-64)*r,w=(t.height||$.height)*r;Y.drawRect(Object.assign({},s,{width:x,height:w}),t.rotation,t.flipX,t.flipY,m,t.backgroundColor,void 0,void 0,void 0,!1,void 0,o,t.strokeColor,t.opacity,void 0,void 0,t.inverted)}s.x-=Mu*r,h=t.color||[0,0,0],t.width?(s.height=s.height||$.height*r,s.width+=64*r,"center"===t.textAlign?f.x=.5*(s.width-l.width):"right"===t.textAlign&&(f.x=s.width-l.width)):(s.width=$.width*r,s.height=$.height*r),t._prerender&&(h[3]=0)}Y.drawRect(s,t.rotation,t.flipX,t.flipY,m,p,n,l,f,!1,t.backgroundCorners&&pt(t.backgroundCorners),o,v,t.opacity,void 0,h,t.inverted)}return e})).filter(Boolean)},gt=function(t,e,n,r,i,o){return Y.drawRect(e,0,!1,!1,f,f,t,r,n,!0,void 0,0,void 0,o,void 0,i)},yt=!1,bt=!0,$t=!1,xt=[],wt=[],kt=[],St=function(){kt.length=0;var t=q[0],e=P({opacity:t.opacity,rotation:t.rotation,scale:t.scale,images:q,size:vo(K,J),backgroundColor:[].concat(s),selectionRect:c}),n=e.blendShapes,r=e.blendShapesDirty,i=e.annotationShapes,l=e.annotationShapesDirty,h=e.interfaceShapes,p=e.decorationShapes,g=e.frameShapes,y=[].concat(s),b=c,$=zf(u,0,1),x=a,k=Math.abs(t.rotation.x/Math.PI*2-1),C=Math.abs(t.rotation.y/Math.PI*2-1),_=k<.99||C<.99,M=Object.assign({},t.size),T=t.backgroundColor,I=t.backgroundImage,R=n.length>0,L=i.length>0,O=T[3]>0,z=!!S&&w>=1;if($<1&&O){var D=y[0],F=y[1],B=y[2],V=1-$,W=T[0]*V,Z=T[1]*V,G=T[2]*V,Q=1-V;y[0]=W+D*Q,y[1]=Z+F*Q,y[2]=G+B*Q,y[3]=1}if(Y.setCanvasColor(v?f:y),R&&r?(Y.disableMask(),Y.drawToImageBlendBuffer(M),xt.length=0,xt.push.apply(xt,mt(n))):R||(xt.length=0),kt.push.apply(kt,xt),bt&&(Y.drawToImageOverlayBuffer(M,E),bt=!1),_?(L&&(l||yt)||!$t?(Y.disableMask(),Y.drawToImageOverlayBuffer(M,E),wt.length=0,wt.push.apply(wt,mt(i))):L||(wt.length=0),$t=!0):$t=!1,Y.drawToCanvas(),Y.enableMask(b,$),j&&H>=1&&2===N.length&&U&&function(t,e,n,r,i){var o=vo(e,e),a=ft(d,"pixelated","repeat"),u=Bi(-t.x%e,-t.y%e),c=Bi(u.x+.5*o.width,u.y);gt(a,t,u,o,n,i),gt(a,t,c,o,r,i)}(b,H,N[0],N[1],U),O&&Y.drawRect(b,0,!1,!1,f,T),I){Y.enableMask(b,1);var tt=Math.max(m.width/I.width,m.height/I.height),et=I.width*tt,nt=I.height*tt,rt={x:m.x+.5*m.width-.5*et,y:m.y+.5*m.height-.5*nt,width:et,height:nt};Y.drawRect(rt,0,!1,!1,f,f,ft(I,"linear")),Y.enableMask(b,$)}if(z&&Y.enablePreviewStencil(),kt.push.apply(kt,[].concat(q).reverse().map((function(t){return ht(Object.assign({},t,{enableOverlay:_&&L,enableBlend:R,enableAntialiasing:!0,mask:b,maskOpacity:$,overlayColor:x}))}))),Y.enableMask(b,w),_||(z&&Y.applyPreviewStencil(),Y.resetCanvasMatrix(),Y.updateCanvasMatrix(M,t.origin,t.translation,t.scale,t.rotation),wt.length=0,wt.push.apply(wt,mt(i)),z&&Y.disablePreviewStencil()),kt.push.apply(kt,wt),Y.resetCanvasMatrix(),Y.enableMask(b,w),kt.push.apply(kt,mt(p)),g.length){Y.enableMask(b,1);var it=g.filter((function(t){return!t.expandsCanvas})),ot=g.filter((function(t){return t.expandsCanvas}));it.length&&kt.push.apply(kt,mt(it)),ot.length&&(Y.enableMask({x:b.x+.5,y:b.y+.5,width:b.width-1,height:b.height-1},o),kt.push.apply(kt,mt(ot)))}Y.disableMask(),kt.push.apply(kt,mt(h)),X.forEach((function(t){if(Y.enableMask(t.mask,t.maskOpacity),t.backgroundColor){var e=I&&Go(Object.assign({},t.mask),I.width/I.height),n=I&&ft(I,"linear");Y.drawRect(t.mask,0,!1,!1,t.maskCornerRadius,t.backgroundColor,n,e,e,void 0,void 0,void 0,void 0,t.opacity,t.maskFeather)}ht(Object.assign({},t,{enableAntialiasing:!1,translation:{x:t.translation.x+t.offset.x-.5*K,y:t.translation.y+t.offset.y-.5*J}}))})),Y.disableMask(),function(t){st.forEach((function(e,n){!t.find((function(t){return t===e}))&&qh(e)&&(Array.from(lt.values()).includes(e)||(st.delete(n),Y.textureDelete(e)))}))}(kt),A(),yt=!1},Ct=0,_t=function t(){clearTimeout(ut);var e=Date.now();e-Ct<48?ut=setTimeout(t,48):(Ct=e,St())};Sl((function(){return i()})),kl((function(){return n(29,Y=gh(l,{alpha:v}))})),Cl((function(){Y&&(Y.release(),n(29,Y=void 0),n(0,l=void 0))}));return t.$$set=function(t){"isAnimated"in t&&n(9,p=t.isAnimated),"isTransparent"in t&&n(10,v=t.isTransparent),"maskRect"in t&&n(11,m=t.maskRect),"maskOpacity"in t&&n(12,y=t.maskOpacity),"maskFrameOpacity"in t&&n(13,$=t.maskFrameOpacity),"maskMarkupOpacity"in t&&n(14,w=t.maskMarkupOpacity),"clipAnnotationsToImage"in t&&n(15,S=t.clipAnnotationsToImage),"pixelRatio"in t&&n(16,_=t.pixelRatio),"textPixelRatio"in t&&n(17,E=t.textPixelRatio),"backgroundColor"in t&&n(18,T=t.backgroundColor),"willRender"in t&&n(19,P=t.willRender),"didRender"in t&&n(20,A=t.didRender),"willRequest"in t&&n(21,O=t.willRequest),"loadImageData"in t&&n(22,D=t.loadImageData),"enableGrid"in t&&n(23,j=t.enableGrid),"gridColors"in t&&n(24,N=t.gridColors),"gridSize"in t&&n(25,H=t.gridSize),"gridOpacity"in t&&n(26,U=t.gridOpacity),"images"in t&&n(27,q=t.images),"interfaceImages"in t&&n(28,X=t.interfaceImages)},t.$$.update=function(){if(1&t.$$.dirty[0]&&l){var e=getComputedStyle(l).getPropertyValue("--color-transition-duration");n(30,(o=e,a=parseFloat(o),et=/^[0-9]+s$/.test(o)?1e3*a:a))}var o,a;1074004480&t.$$.dirty[0]&&T&&nt.set(T,{duration:p?et:0}),4096&t.$$.dirty[0]&&Q(rt,uu(y)?y:1),8192&t.$$.dirty[0]&&Q(it,uu($)?$:1),2048&t.$$.dirty[0]&&m&&ot.set(m),12&t.$$.dirty[1]&&s&&at.set([s[0],s[1],s[2],zf(u,0,1)]),671088646&t.$$.dirty[0]&&n(32,r=!!(Y&&K&&J&&q.length)),536936454&t.$$.dirty[0]&&K&&J&&Y&&(Ct=0,Y.resize(K,J,_)),2&t.$$.dirty[1]&&n(31,i=r?Zh()?_t:St:Pr),3&t.$$.dirty[1]&&r&&i&&i()},[l,K,J,h,nt,rt,it,ot,at,p,v,m,y,$,w,S,_,E,T,P,A,O,D,j,N,H,U,q,X,Y,et,i,r,u,s,function(t){Pl[t?"unshift":"push"]((function(){n(0,l=t)}))},function(t){n(1,K=t.detail.width),n(2,J=t.detail.height),h("measure",{width:K,height:J})}]}var Yh=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Xh,Gh,Ps,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28},null,[-1,-1,-1]),n}return gr(e,t),e}(df),Kh=function(t,e,n){return void 0===e&&(e=Boolean),void 0===n&&(n=" "),t.filter(e).join(n)};function Jh(t,e,n){var r=t.slice();return r[17]=e[n],r}var Qh=function(t){return{tab:4&t}},tp=function(t){return{tab:t[17]}};function ep(t){for(var e,n,r,i=[],o=new Map,a=t[2],u=function(t){return t[17].id},c=0;c<a.length;c+=1){var s=Jh(t,a,c),l=u(s);o.set(l,i[c]=np(l,s))}return{c:function(){e=el("ul");for(var r=0;r<i.length;r+=1)i[r].c();sl(e,"class",n=Kh(["PinturaTabList",t[0]])),sl(e,"role","tablist"),sl(e,"data-layout",t[1])},m:function(n,o){Qs(n,e,o);for(var a=0;a<i.length;a+=1)i[a].m(e,null);t[14](e),r=!0},p:function(t,c){1124&c&&(a=t[2],Gl(),i=rf(i,c,u,1,t,a,o,e,nf,np,null,Jh),Xl()),(!r||1&c&&n!==(n=Kh(["PinturaTabList",t[0]])))&&sl(e,"class",n),(!r||2&c)&&sl(e,"data-layout",t[1])},i:function(t){if(!r){for(var e=0;e<a.length;e+=1)Yl(i[e]);r=!0}},o:function(t){for(var e=0;e<i.length;e+=1)Kl(i[e]);r=!1},d:function(n){n&&tl(e);for(var r=0;r<i.length;r+=1)i[r].d();t[14](null)}}}function np(t,e){var n,r,i,o,a,u,c,s,l,f,d=e[11].default,h=Os(d,e,e[10],tp);function p(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[12].apply(t,[e[17]].concat(r))}function v(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[13].apply(t,[e[17]].concat(r))}return{key:t,first:null,c:function(){n=el("li"),r=el("button"),h&&h.c(),o=il(),sl(r,"type","button"),r.disabled=i=e[17].disabled,sl(n,"role","tab"),sl(n,"aria-controls",a=e[17].href.substr(1)),sl(n,"id",u=e[17].tabId),sl(n,"aria-selected",c=e[17].selected),this.first=n},m:function(t,e){Qs(t,n,e),Ys(n,r),h&&h.m(r,null),Ys(n,o),s=!0,l||(f=[al(r,"keydown",p),al(r,"click",v)],l=!0)},p:function(t,o){e=t,h&&h.p&&(!s||1028&o)&&Fs(h,d,e,e[10],s?Ds(d,e[10],o,Qh):js(e[10]),tp),(!s||4&o&&i!==(i=e[17].disabled))&&(r.disabled=i),(!s||4&o&&a!==(a=e[17].href.substr(1)))&&sl(n,"aria-controls",a),(!s||4&o&&u!==(u=e[17].tabId))&&sl(n,"id",u),(!s||4&o&&c!==(c=e[17].selected))&&sl(n,"aria-selected",c)},i:function(t){s||(Yl(h,t),s=!0)},o:function(t){Kl(h,t),s=!1},d:function(t){t&&tl(n),h&&h.d(t),l=!1,Ts(f)}}}function rp(t){var e,n,r=t[4]&&ep(t);return{c:function(){r&&r.c(),e=ol()},m:function(t,i){r&&r.m(t,i),Qs(t,e,i),n=!0},p:function(t,n){var i=n[0];t[4]?r?(r.p(t,i),16&i&&Yl(r,1)):((r=ep(t)).c(),Yl(r,1),r.m(e.parentNode,e)):r&&(Gl(),Kl(r,1,1,(function(){r=null})),Xl())},i:function(t){n||(Yl(r),n=!0)},o:function(t){Kl(r),n=!1},d:function(t){r&&r.d(t),t&&tl(e)}}}function ip(t,e,n){var r,i,o,a=e.$$slots,u=void 0===a?{}:a,c=e.$$scope,s=e.class,l=void 0===s?void 0:s,f=e.name,d=e.selected,h=e.tabs,p=void 0===h?[]:h,v=e.layout,m=void 0===v?void 0:v,g=_l(),y=function(t){var e=o.querySelectorAll('[role="tab"] button')[t];e&&e.focus()},b=function(t,e){t.preventDefault(),t.stopPropagation(),g("select",e)},$=function(t,e){var n=t.key;if(/arrow/i.test(n)){var r=p.findIndex((function(t){return t.id===e}));return/right|down/i.test(n)?y(r<p.length-1?r+1:0):/left|up/i.test(n)?y(r>0?r-1:p.length-1):void 0}};return t.$$set=function(t){"class"in t&&n(0,l=t.class),"name"in t&&n(7,f=t.name),"selected"in t&&n(8,d=t.selected),"tabs"in t&&n(9,p=t.tabs),"layout"in t&&n(1,m=t.layout),"$$scope"in t&&n(10,c=t.$$scope)},t.$$.update=function(){896&t.$$.dirty&&n(2,r=p.map((function(t){var e=t.id===d;return Object.assign({},t,{tabId:"tab-"+f+"-"+t.id,href:"#panel-"+f+"-"+t.id,selected:e})}))),4&t.$$.dirty&&n(4,i=r.length>1)},[l,m,r,o,i,b,$,f,d,p,c,u,function(t,e){return $(e,t.id)},function(t,e){return b(e,t.id)},function(t){Pl[t?"unshift":"push"]((function(){n(3,o=t)}))}]}var op=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,ip,rp,Ps,{class:0,name:7,selected:8,tabs:9,layout:1}),n}return gr(e,t),e}(df),ap=function(t){return{panel:16&t}},up=function(t){return{panel:t[4][0].id,panelIsActive:!0}};function cp(t,e,n){var r=t.slice();return r[14]=e[n].id,r[15]=e[n].shouldDraw,r[16]=e[n].panelId,r[17]=e[n].tabindex,r[18]=e[n].labelledBy,r[19]=e[n].isActive,r[20]=e[n].hidden,r[3]=e[n].visible,r}var sp=function(t){return{panel:16&t,panelIsActive:16&t}},lp=function(t){return{panel:t[14],panelIsActive:t[19]}};function fp(t){var e,n,r,i,o,a,u=t[11].default,c=Os(u,t,t[10],up);return{c:function(){e=el("div"),n=el("div"),c&&c.c(),sl(n,"class",r=Kh([t[1]])),sl(e,"class",t[0]),sl(e,"style",t[2])},m:function(r,u){Qs(r,e,u),Ys(e,n),c&&c.m(n,null),i=!0,o||(a=[al(e,"measure",t[13]),Hs(Bh.call(null,e))],o=!0)},p:function(t,o){c&&c.p&&(!i||1040&o)&&Fs(c,u,t,t[10],i?Ds(u,t[10],o,ap):js(t[10]),up),(!i||2&o&&r!==(r=Kh([t[1]])))&&sl(n,"class",r),(!i||1&o)&&sl(e,"class",t[0]),(!i||4&o)&&sl(e,"style",t[2])},i:function(t){i||(Yl(c,t),i=!0)},o:function(t){Kl(c,t),i=!1},d:function(t){t&&tl(e),c&&c.d(t),o=!1,Ts(a)}}}function dp(t){for(var e,n,r,i,o,a=[],u=new Map,c=t[4],s=function(t){return t[14]},l=0;l<c.length;l+=1){var f=cp(t,c,l),d=s(f);u.set(d,a[l]=pp(d,f))}return{c:function(){e=el("div");for(var r=0;r<a.length;r+=1)a[r].c();sl(e,"class",n=Kh(["PinturaTabPanels",t[0]])),sl(e,"style",t[2])},m:function(n,u){Qs(n,e,u);for(var c=0;c<a.length;c+=1)a[c].m(e,null);r=!0,i||(o=[al(e,"measure",t[12]),Hs(Bh.call(null,e,{observePosition:!0}))],i=!0)},p:function(t,i){1042&i&&(c=t[4],Gl(),a=rf(a,i,s,1,t,c,u,e,nf,pp,null,cp),Xl()),(!r||1&i&&n!==(n=Kh(["PinturaTabPanels",t[0]])))&&sl(e,"class",n),(!r||4&i)&&sl(e,"style",t[2])},i:function(t){if(!r){for(var e=0;e<c.length;e+=1)Yl(a[e]);r=!0}},o:function(t){for(var e=0;e<a.length;e+=1)Kl(a[e]);r=!1},d:function(t){t&&tl(e);for(var n=0;n<a.length;n+=1)a[n].d();i=!1,Ts(o)}}}function hp(t){var e,n=t[11].default,r=Os(n,t,t[10],lp);return{c:function(){r&&r.c()},m:function(t,n){r&&r.m(t,n),e=!0},p:function(t,i){r&&r.p&&(!e||1040&i)&&Fs(r,n,t,t[10],e?Ds(n,t[10],i,sp):js(t[10]),lp)},i:function(t){e||(Yl(r,t),e=!0)},o:function(t){Kl(r,t),e=!1},d:function(t){r&&r.d(t)}}}function pp(t,e){var n,r,i,o,a,u,c,s,l,f=e[15]&&hp(e);return{key:t,first:null,c:function(){n=el("div"),f&&f.c(),r=il(),sl(n,"class",i=Kh(["PinturaTabPanel",e[1]])),n.hidden=o=e[20],sl(n,"id",a=e[16]),sl(n,"tabindex",u=e[17]),sl(n,"aria-labelledby",c=e[18]),sl(n,"data-inert",s=!e[3]),this.first=n},m:function(t,e){Qs(t,n,e),f&&f.m(n,null),Ys(n,r),l=!0},p:function(t,d){(e=t)[15]?f?(f.p(e,d),16&d&&Yl(f,1)):((f=hp(e)).c(),Yl(f,1),f.m(n,r)):f&&(Gl(),Kl(f,1,1,(function(){f=null})),Xl()),(!l||2&d&&i!==(i=Kh(["PinturaTabPanel",e[1]])))&&sl(n,"class",i),(!l||16&d&&o!==(o=e[20]))&&(n.hidden=o),(!l||16&d&&a!==(a=e[16]))&&sl(n,"id",a),(!l||16&d&&u!==(u=e[17]))&&sl(n,"tabindex",u),(!l||16&d&&c!==(c=e[18]))&&sl(n,"aria-labelledby",c),(!l||16&d&&s!==(s=!e[3]))&&sl(n,"data-inert",s)},i:function(t){l||(Yl(f),l=!0)},o:function(t){Kl(f),l=!1},d:function(t){t&&tl(n),f&&f.d()}}}function vp(t){var e,n,r,i,o=[dp,fp],a=[];function u(t,e){return t[5]?0:1}return e=u(t),n=a[e]=o[e](t),{c:function(){n.c(),r=ol()},m:function(t,n){a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=i[0],s=e;(e=u(t))===s?a[e].p(t,c):(Gl(),Kl(a[s],1,1,(function(){a[s]=null})),Xl(),(n=a[e])?n.p(t,c):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r))},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){a[e].d(t),t&&tl(r)}}}function mp(t,e,n){var r,i,o=e.$$slots,a=void 0===o?{}:o,u=e.$$scope,c=e.class,s=void 0===c?void 0:c,l=e.name,f=e.selected,d=e.panelClass,h=void 0===d?void 0:d,p=e.panels,v=void 0===p?[]:p,m=e.visible,g=void 0===m?void 0:m,y=e.style,b=void 0===y?void 0:y,$={};return t.$$set=function(t){"class"in t&&n(0,s=t.class),"name"in t&&n(6,l=t.name),"selected"in t&&n(7,f=t.selected),"panelClass"in t&&n(1,h=t.panelClass),"panels"in t&&n(8,v=t.panels),"visible"in t&&n(3,g=t.visible),"style"in t&&n(2,b=t.style),"$$scope"in t&&n(10,u=t.$$scope)},t.$$.update=function(){968&t.$$.dirty&&n(4,r=v.map((function(t){var e=t===f;e&&n(9,$[t]=!0,$);var r=g?-1!==g.indexOf(t):e;return{id:t,panelId:"panel-"+l+"-"+t,labelledBy:"tab-"+l+"-"+t,isActive:e,hidden:!e,visible:r,tabindex:e?0:-1,shouldDraw:e||$[t]}}))),16&t.$$.dirty&&n(5,i=r.length>1)},[s,h,b,g,r,i,l,f,v,$,u,a,function(e){Tl.call(this,t,e)},function(e){Tl.call(this,t,e)}]}var gp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,mp,vp,Ps,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2}),n}return gr(e,t),e}(df),yp=function(t){var e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter((function(t){return!!e[t].get}))};function bp(t){var e,n,r,i=t[5].default,o=Os(i,t,t[4],null);return{c:function(){e=nl("svg"),o&&o.c(),sl(e,"class",t[3]),sl(e,"style",t[2]),sl(e,"width",t[0]),sl(e,"height",t[1]),sl(e,"viewBox",n="0 0 "+t[0]+"\n    "+t[1]),sl(e,"xmlns","http://www.w3.org/2000/svg"),sl(e,"aria-hidden","true"),sl(e,"focusable","false"),sl(e,"stroke-linecap","round"),sl(e,"stroke-linejoin","round")},m:function(t,n){Qs(t,e,n),o&&o.m(e,null),r=!0},p:function(t,a){var u=a[0];o&&o.p&&(!r||16&u)&&Fs(o,i,t,t[4],r?Ds(i,t[4],u,null):js(t[4]),null),(!r||8&u)&&sl(e,"class",t[3]),(!r||4&u)&&sl(e,"style",t[2]),(!r||1&u)&&sl(e,"width",t[0]),(!r||2&u)&&sl(e,"height",t[1]),(!r||3&u&&n!==(n="0 0 "+t[0]+"\n    "+t[1]))&&sl(e,"viewBox",n)},i:function(t){r||(Yl(o,t),r=!0)},o:function(t){Kl(o,t),r=!1},d:function(t){t&&tl(e),o&&o.d(t)}}}function $p(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,o=e.$$scope,a=e.width,u=void 0===a?24:a,c=e.height,s=void 0===c?24:c,l=e.style,f=void 0===l?void 0:l,d=e.class,h=void 0===d?void 0:d;return t.$$set=function(t){"width"in t&&n(0,u=t.width),"height"in t&&n(1,s=t.height),"style"in t&&n(2,f=t.style),"class"in t&&n(3,h=t.class),"$$scope"in t&&n(4,o=t.$$scope)},[u,s,f,h,o,i]}var xp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,$p,bp,Ps,{width:0,height:1,style:2,class:3}),n}return gr(e,t),e}(df),wp=function(t,e){void 0===e&&(e={});var n=e,r=n.direction,i=void 0===r?void 0:r,o=n.shiftMultiplier,a=void 0===o?10:o,u=n.bubbles,c=void 0!==u&&u,s=n.preventDefault,l=void 0!==s&&s,f=n.stopKeydownPropagation,d=void 0===f||f,h="horizontal"===i,p="vertical"===i,v=function(e){var n=e.key,r=e.shiftKey,i=/up|down/i.test(n),o=/left|right/i.test(n);if((o||i)&&!(h&&i||p&&o)){var u=r?a:1;d&&e.stopPropagation(),l&&e.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:c,detail:Bi((/left/i.test(n)?-1:/right/i.test(n)?1:0)*u,(/up/i.test(n)?-1:/down/i.test(n)?1:0)*u)}))}};return t.addEventListener("keydown",v),{destroy:function(){t.removeEventListener("keydown",v)}}},kp=function(t,e,n){return(t-e)/(n-e)},Sp=function(t){return{}},Cp=function(t){return{}};function _p(t){var e,n,r,i,o,a,u,c;return n=new xp({props:{$$slots:{default:[Mp]},$$scope:{ctx:t}}}),o=new xp({props:{$$slots:{default:[Ep]},$$scope:{ctx:t}}}),{c:function(){e=el("button"),cf(n.$$.fragment),r=il(),i=el("button"),cf(o.$$.fragment),sl(e,"type","button"),sl(e,"aria-label","Increase"),sl(i,"type","button"),sl(i,"aria-label","Decrease")},m:function(s,l){Qs(s,e,l),sf(n,e,null),Qs(s,r,l),Qs(s,i,l),sf(o,i,null),a=!0,u||(c=[al(e,"pointerdown",t[20](1)),al(i,"pointerdown",t[20](-1))],u=!0)},p:function(t,e){var r={};128&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);var i={};128&e[1]&&(i.$$scope={dirty:e,ctx:t}),o.$set(i)},i:function(t){a||(Yl(n.$$.fragment,t),Yl(o.$$.fragment,t),a=!0)},o:function(t){Kl(n.$$.fragment,t),Kl(o.$$.fragment,t),a=!1},d:function(t){t&&tl(e),lf(n),t&&tl(r),t&&tl(i),lf(o),u=!1,Ts(c)}}}function Mp(t){var e;return{c:function(){sl(e=nl("path"),"d","M8 12 h8 M12 8 v8")},m:function(t,n){Qs(t,e,n)},p:Ss,d:function(t){t&&tl(e)}}}function Ep(t){var e;return{c:function(){sl(e=nl("path"),"d","M9 12 h6")},m:function(t,n){Qs(t,e,n)},p:Ss,d:function(t){t&&tl(e)}}}function Tp(t){var e,n,r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y=t[36].default,b=Os(y,t,t[38],null),$=t[36].knob,x=Os($,t,t[38],Cp),w=t[9]&&_p(t);return{c:function(){e=el("div"),n=el("div"),r=el("input"),o=il(),a=el("div"),b&&b.c(),c=il(),s=el("div"),l=el("div"),x&&x.c(),h=il(),w&&w.c(),sl(r,"type","range"),sl(r,"id",t[3]),sl(r,"min",t[0]),sl(r,"max",t[1]),sl(r,"step",t[2]),r.value=t[14],sl(r,"style",i=t[10]?"pointer-events:none":""),sl(a,"class",u=Kh(["PinturaSliderTrack",t[5]])),sl(a,"style",t[4]),sl(l,"class",f=Kh(["PinturaSliderKnob",t[7]])),sl(l,"style",t[6]),sl(s,"class","PinturaSliderKnobController"),sl(s,"style",t[17]),sl(n,"class","PinturaSliderControl"),sl(n,"style",d="--slider-position:"+Math.round(t[15])),sl(e,"class",p=Kh(["PinturaSlider",t[12]])),sl(e,"data-direction",t[8])},m:function(i,u){Qs(i,e,u),Ys(e,n),Ys(n,r),t[37](r),Ys(n,o),Ys(n,a),b&&b.m(a,null),Ys(n,c),Ys(n,s),Ys(s,l),x&&x.m(l,null),Ys(e,h),w&&w.m(e,null),v=!0,m||(g=[al(r,"input",t[18]),al(r,"nudge",t[19]),Hs(wp.call(null,r)),al(n,"pointerdown",(function(){Is(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)}))],m=!0)},p:function(o,c){t=o,(!v||8&c[0])&&sl(r,"id",t[3]),(!v||1&c[0])&&sl(r,"min",t[0]),(!v||2&c[0])&&sl(r,"max",t[1]),(!v||4&c[0])&&sl(r,"step",t[2]),(!v||16384&c[0])&&(r.value=t[14]),(!v||1024&c[0]&&i!==(i=t[10]?"pointer-events:none":""))&&sl(r,"style",i),b&&b.p&&(!v||128&c[1])&&Fs(b,y,t,t[38],v?Ds(y,t[38],c,null):js(t[38]),null),(!v||32&c[0]&&u!==(u=Kh(["PinturaSliderTrack",t[5]])))&&sl(a,"class",u),(!v||16&c[0])&&sl(a,"style",t[4]),x&&x.p&&(!v||128&c[1])&&Fs(x,$,t,t[38],v?Ds($,t[38],c,Sp):js(t[38]),Cp),(!v||128&c[0]&&f!==(f=Kh(["PinturaSliderKnob",t[7]])))&&sl(l,"class",f),(!v||64&c[0])&&sl(l,"style",t[6]),(!v||131072&c[0])&&sl(s,"style",t[17]),(!v||32768&c[0]&&d!==(d="--slider-position:"+Math.round(t[15])))&&sl(n,"style",d),t[9]?w?(w.p(t,c),512&c[0]&&Yl(w,1)):((w=_p(t)).c(),Yl(w,1),w.m(e,null)):w&&(Gl(),Kl(w,1,1,(function(){w=null})),Xl()),(!v||4096&c[0]&&p!==(p=Kh(["PinturaSlider",t[12]])))&&sl(e,"class",p),(!v||256&c[0])&&sl(e,"data-direction",t[8])},i:function(t){v||(Yl(b,t),Yl(x,t),Yl(w),v=!0)},o:function(t){Kl(b,t),Kl(x,t),Kl(w),v=!1},d:function(n){n&&tl(e),t[37](null),b&&b.d(n),x&&x.d(n),w&&w.d(),m=!1,Ts(g)}}}function Ip(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$=e.$$slots,x=void 0===$?{}:$,w=e.$$scope,k=e.min,S=void 0===k?0:k,C=e.max,_=void 0===C?100:C,M=e.step,E=void 0===M?1:M,T=e.id,I=void 0===T?void 0:T,P=e.value,R=void 0===P?0:P,A=e.valueMin,L=void 0===A?void 0:A,O=e.valueMax,z=void 0===O?void 0:O,D=e.trackStyle,F=void 0===D?void 0:D,j=e.trackClass,B=void 0===j?void 0:j,N=e.knobStyle,V=void 0===N?void 0:N,H=e.knobClass,W=void 0===H?void 0:H,U=e.ongrab,Z=void 0===U?Pr:U,q=e.onchange,G=void 0===q?Pr:q,X=e.onrelease,Y=void 0===X?Pr:X,K=e.onexceed,J=void 0===K?Pr:K,Q=e.direction,tt=void 0===Q?"x":Q,et=e.getValue,nt=void 0===et?xi:et,rt=e.setValue,it=void 0===rt?xi:rt,ot=e.enableSpinButtons,at=void 0===ot||ot,ut=e.enableForceUseKnob,ct=void 0!==ut&&ut,st=e.enableStopPropagation,lt=void 0===st||st,ft=e.enablePointerdownListener,dt=void 0===ft||ft,ht=e.maxInteractionDistance,pt=void 0===ht?6:ht,vt=e.class,mt=void 0===vt?void 0:vt,gt=function(t){return it(function(t,e){return e=1/e,Math.round(t*e)/e}(zf(t,S,_),E))},yt=function(t,e,r){void 0===r&&(r={});var o=r,a=o.grabbed,u=void 0!==a&&a,c=o.released,s=void 0!==c&&c,l=gt(S+t/e*i),f=L||S,d=z||_;n(21,R=ei(l)?l:zf(l,f,d)),g!==l&&(g=l,!ei(l)&&(l<f||l>d)&&J(R,l),R!==m&&(m=R,u&&Z(R),G(R),s&&Y(R)))},bt=function(t){var e=t[l]-v;yt(p+e,h)},$t=function t(e){h=void 0,document.documentElement.removeEventListener("pointermove",bt),document.documentElement.removeEventListener("pointerup",t),G(R),Y(R)},xt=function(){n(21,R=gt(r+wt*E)),G(R)},wt=1,kt=!1,St=function t(e){clearTimeout(b),kt||xt(),Y(R),document.removeEventListener("pointerup",t)};return t.$$set=function(t){"min"in t&&n(0,S=t.min),"max"in t&&n(1,_=t.max),"step"in t&&n(2,E=t.step),"id"in t&&n(3,I=t.id),"value"in t&&n(21,R=t.value),"valueMin"in t&&n(22,L=t.valueMin),"valueMax"in t&&n(23,z=t.valueMax),"trackStyle"in t&&n(4,F=t.trackStyle),"trackClass"in t&&n(5,B=t.trackClass),"knobStyle"in t&&n(6,V=t.knobStyle),"knobClass"in t&&n(7,W=t.knobClass),"ongrab"in t&&n(24,Z=t.ongrab),"onchange"in t&&n(25,G=t.onchange),"onrelease"in t&&n(26,Y=t.onrelease),"onexceed"in t&&n(27,J=t.onexceed),"direction"in t&&n(8,tt=t.direction),"getValue"in t&&n(28,nt=t.getValue),"setValue"in t&&n(29,it=t.setValue),"enableSpinButtons"in t&&n(9,at=t.enableSpinButtons),"enableForceUseKnob"in t&&n(10,ct=t.enableForceUseKnob),"enableStopPropagation"in t&&n(30,lt=t.enableStopPropagation),"enablePointerdownListener"in t&&n(11,dt=t.enablePointerdownListener),"maxInteractionDistance"in t&&n(31,pt=t.maxInteractionDistance),"class"in t&&n(12,mt=t.class),"$$scope"in t&&n(38,w=t.$$scope)},t.$$.update=function(){270532608&t.$$.dirty[0]&&n(14,r=void 0!==R?nt(R):0),3&t.$$.dirty[0]&&(i=_-S),16387&t.$$.dirty[0]&&n(33,o=kp(r,S,_)),4&t.$$.dirty[1]&&n(15,a=100*o),256&t.$$.dirty[0]&&n(34,u=tt.toUpperCase()),256&t.$$.dirty[0]&&n(35,c="x"===tt?"Width":"Height"),16&t.$$.dirty[1]&&(s="offset"+c),t.$$.dirty[1],8&t.$$.dirty[1]&&(l="page"+u),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(17,f="transform: translate"+u+"("+a+"%)")},[S,_,E,I,F,B,V,W,tt,at,ct,dt,mt,function(t){var e=!1;lt&&t.stopPropagation(),clearTimeout(y);var n=d.getBoundingClientRect();if(h=d[s],v=t[l],p=v-n[tt],ct){if(Math.abs(p-o*h)>pt)return;e=!0,t.stopPropagation()}return document.activeElement!==d&&d.focus(),yt(p,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",bt),document.documentElement.addEventListener("pointerup",$t),e},r,a,d,f,function(t){h||(n(21,R=it(parseFloat(t.target.value))),R!==m&&(m=R,G(R)))},function(t){var e=d[s];yt(r/i*e+t.detail[tt],e),clearTimeout(y),y=setTimeout((function(){Y(R)}),250)},function(t){return function(e){clearTimeout(y),wt=t,kt=!1,b=setInterval((function(){kt=!0,xt()}),100),document.addEventListener("pointercancel",St),document.addEventListener("pointerup",St)}},R,L,z,Z,G,Y,J,nt,it,lt,pt,function(t){var e=d.getBoundingClientRect(),n=t[l]-e[tt],r=d[s];return Math.abs(n-o*r)},o,u,c,x,function(t){Pl[t?"unshift":"push"]((function(){n(16,d=t)}))},w]}var Pp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Ip,Tp,Ps,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"eventDistanceToKnob",get:function(){return this.$$.ctx[32]}},{key:"handlePointerDown",get:function(){return this.$$.ctx[13]}}]),e}(df),Rp=function(t,e){return e===t.target||e.contains(t.target)},Ap=function(t,e,n){return(ei(e)?e:t)+(n?" ("+(n.map((function(t){return"CMD"===t?Ba()?"âŒ˜":"Ctrl":t})).join("+")+")"):"")};function Lp(t){var e,n;return e=new xp({props:{class:"PinturaButtonIcon",$$slots:{default:[Op]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};536870920&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Op(t){var e;return{c:function(){e=nl("g")},m:function(n,r){Qs(n,e,r),e.innerHTML=t[3]},p:function(t,n){8&n&&(e.innerHTML=t[3])},d:function(t){t&&tl(e)}}}function zp(t){var e;return{c:function(){sl(e=el("span"),"class",t[11])},m:function(n,r){Qs(n,e,r),e.innerHTML=t[0]},p:function(t,n){1&n&&(e.innerHTML=t[0]),2048&n&&sl(e,"class",t[11])},d:function(t){t&&tl(e)}}}function Dp(t){var e,n,r,i,o,a=t[27].default,u=Os(a,t,t[29],null),c=u||function(t){var e,n,r,i=t[3]&&Lp(t),o=t[0]&&zp(t);return{c:function(){e=el("span"),i&&i.c(),n=il(),o&&o.c(),sl(e,"class",t[13])},m:function(t,a){Qs(t,e,a),i&&i.m(e,null),Ys(e,n),o&&o.m(e,null),r=!0},p:function(t,a){t[3]?i?(i.p(t,a),8&a&&Yl(i,1)):((i=Lp(t)).c(),Yl(i,1),i.m(e,n)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[0]?o?o.p(t,a):((o=zp(t)).c(),o.m(e,null)):o&&(o.d(1),o=null),(!r||8192&a)&&sl(e,"class",t[13])},i:function(t){r||(Yl(i),r=!0)},o:function(t){Kl(i),r=!1},d:function(t){t&&tl(e),i&&i.d(),o&&o.d()}}}(t);return{c:function(){e=el("button"),c&&c.c(),sl(e,"type",t[6]),sl(e,"style",t[4]),e.disabled=t[5],sl(e,"class",t[12]),sl(e,"title",n=Ap(t[0],t[1],t[2]))},m:function(n,a){Qs(n,e,a),c&&c.m(e,null),t[28](e),r=!0,i||(o=[al(e,"keydown",(function(){Is(t[8])&&t[8].apply(this,arguments)})),al(e,"click",(function(){Is(t[7])&&t[7].apply(this,arguments)})),al(e,"pointerdown",(function(){Is(t[14])&&t[14].apply(this,arguments)})),Hs(t[9].call(null,e))],i=!0)},p:function(i,o){var s=o[0];t=i,u?u.p&&(!r||536870912&s)&&Fs(u,a,t,t[29],r?Ds(a,t[29],s,null):js(t[29]),null):c&&c.p&&(!r||10249&s)&&c.p(t,r?s:-1),(!r||64&s)&&sl(e,"type",t[6]),(!r||16&s)&&sl(e,"style",t[4]),(!r||32&s)&&(e.disabled=t[5]),(!r||4096&s)&&sl(e,"class",t[12]),(!r||7&s&&n!==(n=Ap(t[0],t[1],t[2])))&&sl(e,"title",n)},i:function(t){r||(Yl(c,t),r=!0)},o:function(t){Kl(c,t),r=!1},d:function(n){n&&tl(e),c&&c.d(n),t[28](null),i=!1,Ts(o)}}}function Fp(t,e,n){var r,i,o,a,u,c,s,l=e.$$slots,f=void 0===l?{}:l,d=e.$$scope,h=e.class,p=void 0===h?void 0:h,v=e.label,m=void 0===v?void 0:v,g=e.title,y=void 0===g?void 0:g,b=e.shortcut,$=void 0===b?void 0:b,x=e.labelClass,w=void 0===x?void 0:x,k=e.innerClass,S=void 0===k?void 0:k,C=e.hideLabel,_=void 0!==C&&C,M=e.icon,E=void 0===M?void 0:M,T=e.style,I=void 0===T?void 0:T,P=e.disabled,R=void 0===P?void 0:P,A=e.type,L=void 0===A?"button":A,O=e.onclick,z=void 0===O?void 0:O,D=e.onkeydown,F=void 0===D?void 0:D,j=e.onhold,B=void 0===j?void 0:j,N=e.action,V=void 0===N?function(){}:N,H=e.holdThreshold,W=void 0===H?500:H,U=e.holdSpeedUpFactor,Z=void 0===U?.5:U,q=e.holdSpeedMin,G=void 0===q?20:q,X=function t(e){n(25,c=setTimeout((function(){B(),t(Math.max(e*Z,G))}),e))};return t.$$set=function(t){"class"in t&&n(15,p=t.class),"label"in t&&n(0,m=t.label),"title"in t&&n(1,y=t.title),"shortcut"in t&&n(2,$=t.shortcut),"labelClass"in t&&n(16,w=t.labelClass),"innerClass"in t&&n(17,S=t.innerClass),"hideLabel"in t&&n(18,_=t.hideLabel),"icon"in t&&n(3,E=t.icon),"style"in t&&n(4,I=t.style),"disabled"in t&&n(5,R=t.disabled),"type"in t&&n(6,L=t.type),"onclick"in t&&n(7,z=t.onclick),"onkeydown"in t&&n(8,F=t.onkeydown),"onhold"in t&&n(19,B=t.onhold),"action"in t&&n(9,V=t.action),"holdThreshold"in t&&n(20,W=t.holdThreshold),"holdSpeedUpFactor"in t&&n(21,Z=t.holdSpeedUpFactor),"holdSpeedMin"in t&&n(22,G=t.holdSpeedMin),"$$scope"in t&&n(29,d=t.$$scope)},t.$$.update=function(){101187584&t.$$.dirty&&n(26,i=B?function(){c&&(clearTimeout(c),n(25,c=void 0),document.documentElement.removeEventListener("pointerup",i))}:Ss),68681728&t.$$.dirty&&n(14,r=B?function(){document.documentElement.addEventListener("pointerup",i),X(W)}:Ss),131072&t.$$.dirty&&n(13,o=Kh(["PinturaButtonInner",S])),294912&t.$$.dirty&&n(12,a=Kh(["PinturaButton",_&&"PinturaButtonIconOnly",p])),327680&t.$$.dirty&&n(11,u=Kh([_?"implicit":"PinturaButtonLabel",w]))},[m,y,$,E,I,R,L,z,F,V,s,u,a,o,r,p,w,S,_,B,W,Z,G,function(t){return Rp(t,s)},function(){return s},c,i,f,function(t){Pl[t?"unshift":"push"]((function(){n(10,s=t)}))},d]}var jp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Fp,Dp,Ps,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24}),n}return gr(e,t),hr(e,[{key:"isEventTarget",get:function(){return this.$$.ctx[23]}},{key:"getElement",get:function(){return this.$$.ctx[24]}}]),e}(df);function Bp(t){var e,n,r,i,o=[t[4]];function a(e){t[22](e)}var u=t[10];function c(t){for(var e={},n=0;n<o.length;n+=1)e=_s(e,o[n]);return void 0!==t[2]&&(e.name=t[2]),{props:e}}return u&&(e=vl(u,c(t)),Pl.push((function(){return uf(e,"name",a)})),t[23](e),e.$on("measure",t[11])),{c:function(){e&&cf(e.$$.fragment),r=ol()},m:function(t,n){e&&sf(e,t,n),Qs(t,r,n),i=!0},p:function(t,i){var s=16&i?of(o,[af(t[4])]):{};if(!n&&4&i&&(n=!0,s.name=t[2],jl((function(){return n=!1}))),u!==(u=t[10])){if(e){Gl();var l=e;Kl(l.$$.fragment,1,0,(function(){lf(l,1)})),Xl()}u?(e=vl(u,c(t)),Pl.push((function(){return uf(e,"name",a)})),t[23](e),e.$on("measure",t[11]),cf(e.$$.fragment),Yl(e.$$.fragment,1),sf(e,r.parentNode,r)):e=null}else u&&e.$set(s)},i:function(t){i||(e&&Yl(e.$$.fragment,t),i=!0)},o:function(t){e&&Kl(e.$$.fragment,t),i=!1},d:function(n){t[23](null),n&&tl(r),e&&lf(e,n)}}}function Np(t){var e,n,r,i=t[5]&&Bp(t);return{c:function(){e=el("div"),i&&i.c(),sl(e,"data-util",t[2]),sl(e,"class",n=Kh(["PinturaUtilPanel",t[1]])),sl(e,"style",t[6])},m:function(n,o){Qs(n,e,o),i&&i.m(e,null),t[24](e),r=!0},p:function(t,o){var a=o[0];t[5]?i?(i.p(t,a),32&a&&Yl(i,1)):((i=Bp(t)).c(),Yl(i,1),i.m(e,null)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),(!r||4&a)&&sl(e,"data-util",t[2]),(!r||2&a&&n!==(n=Kh(["PinturaUtilPanel",t[1]])))&&sl(e,"class",n),(!r||64&a)&&sl(e,"style",t[6])},i:function(t){r||(Yl(i),r=!0)},o:function(t){Kl(i),r=!1},d:function(n){n&&tl(e),i&&i.d(),t[24](null)}}}function Vp(t,e,n){var r,i,o,a,u,c,s,l=_l(),f=e.isActive,d=void 0===f||f,h=e.stores,p=e.content,v=e.component,m=e.locale,g=e.class,y=void 0===g?void 0:g,b=El("isAnimated");Ls(t,b,(function(t){return n(21,c=t)}));var $=_h(0),x=mf($,(function(t){return zf(t,0,1)}));Ls(t,x,(function(t){return n(20,u=t)}));var w=!d,k=vf(d);Ls(t,k,(function(t){return n(25,a=t)}));var S,C,_={isActive:mf(k,function(){var t=Sr(wr().mark((function t(e,n){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",n(e));case 2:return t.next=4,Dl();case 4:n(e);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),isActiveFraction:mf(x,(function(t){return t})),isVisible:mf(x,(function(t){return t>0}))},M=p.view,E=yp(M),T=Object.keys(p.props||{}).reduce((function(t,e){return E.includes(e)?(t[e]=p.props[e],t):t}),{}),I=Object.keys(_).reduce((function(t,e){return E.includes(e)?(t[e]=_[e],t):t}),{}),P=function(t){n(17,s=Object.assign({},t.detail)),R&&d&&l("measure",Object.assign({},s))},R=!1;return kl((function(){if(n(19,R=!0),!o){n(0,v=new M({target:C,props:Object.assign({},i)})),n(2,S=v.name);var t=v.$on("measure",P);return function(){t(),v.$destroy()}}})),t.$$set=function(t){"isActive"in t&&n(12,d=t.isActive),"stores"in t&&n(13,h=t.stores),"content"in t&&n(14,p=t.content),"component"in t&&n(0,v=t.component),"locale"in t&&n(15,m=t.locale),"class"in t&&n(1,y=t.class)},t.$$.update=function(){135169&t.$$.dirty&&s&&d&&v&&l("measure",s),2101248&t.$$.dirty&&$.set(d?1:0,{hard:!1===c}),1310720&t.$$.dirty&&(u<=0&&!w?n(18,w=!0):u>0&&w&&n(18,w=!1)),786432&t.$$.dirty&&R&&l(w?"hide":"show"),1048576&t.$$.dirty&&l("fade",u),1048576&t.$$.dirty&&n(6,r=u<1?"opacity: "+u:void 0),4096&t.$$.dirty&&Vs(k,a=d,a),40960&t.$$.dirty&&n(4,i=Object.assign({},T,I,{stores:h,locale:m}))},n(5,o=!E.includes("external")),[v,y,S,C,i,o,r,b,x,k,M,P,d,h,p,m,$,s,w,R,u,c,function(t){n(2,S=t)},function(t){Pl[t?"unshift":"push"]((function(){n(0,v=t)}))},function(t){Pl[t?"unshift":"push"]((function(){n(3,C=t)}))}]}var Hp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Vp,Np,Ps,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16}),n}return gr(e,t),hr(e,[{key:"opacity",get:function(){return this.$$.ctx[16]}}]),e}(df),Wp=function(t,e){var n=t.findIndex(e);if(n>=0)return t.splice(n,1)},Up=function(t,e){void 0===e&&(e={});var n=e,r=n.inertia,i=void 0!==r&&r,o=n.inertiaDurationMultiplier,a=void 0===o?80:o,u=n.shouldStartInteraction,c=void 0===u?function(){return!0}:u,s=n.pinch,l=void 0!==s&&s,f=n.multiTouch,d=void 0===f?void 0:f,h=n.getEventPosition,p=void 0===h?function(t){return Bi(t.clientX,t.clientY)}:h;function v(e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}function m(){$&&$(),$=void 0}var g,y,b,$,x,w,k,S,C=[],_=function(t){return 0===t.timeStamp?Date.now():t.timeStamp},M=function(t){var e=Wp(C,(function(e){return e.event.pointerId===t.pointerId}));if(e)return e[0]},E=function(){var t=Vi(C[0].position);if(C[1]){var e=.5*(C[1].position.x-t.x),n=.5*(C[1].position.y-t.y);t.x+=e,t.y+=n}return t},T=function(t){t.origin.x=t.position.x,t.origin.y=t.position.y,t.translation.x=0,t.translation.y=0},I=function(t){var e=P(t);if(e){var n=_(t),r=p(t),i=Math.max(1,n-e.timeStamp);e.velocity.x=(r.x-e.position.x)/i,e.velocity.y=(r.y-e.position.y)/i,e.velocityHistory.push(Vi(e.velocity)),e.velocityHistory=e.velocityHistory.slice(-3),e.velocityAverage=e.velocityHistory.reduce((function(t,e,n,r){return t.x+=e.x/r.length,t.y+=e.y/r.length,t}),ji()),e.translation.x=r.x-e.origin.x,e.translation.y=r.y-e.origin.y,e.timeStamp=n,e.position.x=r.x,e.position.y=r.y,e.event=t}},P=function(t){var e=function(t){return C.findIndex((function(e){return e.event.pointerId===t.pointerId}))}(t);if(!(e<0))return C[e]},R=function(){return 1===C.length},A=function(){return 2===C.length},L=function(t){var e=oo(t.map((function(t){return t.position}))),n=function(t,e){return t.reduce((function(t,n){return t+ro(e,n.position)}),0)/t.length}(t,e);return{center:e,distance:n,velocity:oo(t.map((function(t){return t.velocity}))),translation:oo(t.map((function(t){return t.translation})))}},O=0,z=void 0;function D(e){if(!A()&&!function(t){return uu(t.button)&&0!==t.button}(e)&&c(e,t))if(m(),function(t){var e=_(t),n={timeStamp:e,timeStampInitial:e,position:p(t),origin:p(t),velocity:ji(),velocityHistory:[],velocityAverage:ji(),translation:ji(),interactionState:void 0,event:t};C.push(n),n.interactionState=L(C)}(e),R())document.documentElement.addEventListener("pointermove",j),document.documentElement.addEventListener("pointerup",B),document.documentElement.addEventListener("pointercancel",B),document.addEventListener("visibilitychange",V),S=!1,k=1,w=ji(),x=void 0,v("interactionstart",{origin:Vi(P(e).origin)});else if(l)S=!0,x=ro(C[0].position,C[1].position),w.x+=C[0].translation.x,w.y+=C[0].translation.y,T(C[0]);else if(!1===d)return C.length=0,W(),v("interactioncancel")}t.addEventListener("pointerdown",D);var F=Date.now();function j(t){t.preventDefault(),I(t);var e=Vi(C[0].translation),n=k;l&&A()&&(n*=ro(C[0].position,C[1].position)/x,Yi(e,C[1].translation));Yi(e,w);var r=Date.now();r-F<16||(F=r,v("interactionupdate",{position:E(),translation:e,scalar:l?n:void 0,isMultiTouching:A()}))}function B(t){if(P(t)){var e=E(),n=M(t);if(l&&R()){var r=ro(C[0].position,n.position);k*=r/x,w.x+=C[0].translation.x+n.translation.x,w.y+=C[0].translation.y+n.translation.y,T(C[0])}var o=!1,u=!1;if(!S&&n){var c=performance.now(),s=c-n.timeStampInitial,f=no(n.translation);o=f<64&&s<300,u=!!(z&&o&&c-O<700&&no(z,n.position)<128),o&&(z=Vi(n.position),O=c)}if(!(C.length>0)){W();var d=Vi(n.translation),h=Vi(n.velocityAverage),p=!1;v("interactionrelease",{isTap:o,isDoubleTap:u,position:e,translation:d,scalar:k,preventInertia:function(){return p=!0}});var m=ro(h);if(p||!i||m<.25)return H(d,{isTap:o,isDoubleTap:u});y=Vi(e),b=Vi(d),(g=Sh(Vi(d),{easing:xh,duration:m*a})).set({x:d.x+50*h.x,y:d.y+50*h.y}).then((function(){$&&H(As(g),{isTap:o,isDoubleTap:u})})),$=g.subscribe(N)}}}function N(t){t&&v("interactionupdate",{position:Bi(y.x+(t.x-b.x),y.y+(t.y-b.y)),translation:t,scalar:l?k:void 0})}function V(t){if("visible"!==document.visibilityState&&C.length){var e=L(C);m(),v("interactionend",Object.assign({},e)),C.length=0,W()}}function H(t,e){m(),v("interactionend",Object.assign({},e,{translation:t,scalar:l?k:void 0}))}function W(){document.documentElement.removeEventListener("pointermove",j),document.documentElement.removeEventListener("pointerup",B),document.documentElement.removeEventListener("pointercancel",B),document.addEventListener("visibilitychange",V)}return{destroy:function(){m(),t.removeEventListener("pointerdown",D)}}};function Zp(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}var qp=function(t,e,n){if(!e||!n)return Object.assign({},t);var r=t.x+Zp(e.x-t.x,n),i=t.x+t.width+Zp(e.x+e.width-(t.x+t.width),n),o=t.y+Zp(e.y-t.y,n);return{x:r,y:o,width:i-r,height:t.y+t.height+Zp(e.y+e.height-(t.y+t.height),n)-o}},Gp=function(t,e,n){return e&&n?Bi(t.x+Zp(e.x-t.x,n),t.y+Zp(e.y-t.y,n)):Object.assign({},t)},Xp=function(t,e){if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Yp=function(t){var e=t.detail||0,n=t.deltaX,r=t.deltaY,i=t.wheelDelta,o=t.wheelDeltaX,a=t.wheelDeltaY;return uu(o)&&Math.abs(o)>Math.abs(a)?e=o/-120:uu(n)&&Math.abs(n)>Math.abs(r)?e=n/20:(i||a)&&(e=(i||a)/-120),e||(e=r/20),(uh()||ba())&&(e*=2),e};function Kp(t){var e,n,r,i,o,a,u,c=t[36].default,s=Os(c,t,t[35],null);return{c:function(){e=el("div"),n=el("div"),s&&s.c(),sl(n,"style",t[5]),sl(e,"class",r=Kh(["PinturaScrollable",t[0]])),sl(e,"style",t[4]),sl(e,"data-direction",t[1]),sl(e,"data-state",t[6])},m:function(r,c){Qs(r,e,c),Ys(e,n),s&&s.m(n,null),t[38](e),o=!0,a||(u=[al(n,"interactionstart",t[8]),al(n,"interactionupdate",t[10]),al(n,"interactionend",t[11]),al(n,"interactionrelease",t[9]),Hs(Up.call(null,n,{inertia:!0})),al(n,"measure",t[37]),Hs(Bh.call(null,n)),al(e,"wheel",t[13],{passive:!1}),al(e,"scroll",t[15]),al(e,"focusin",t[14]),al(e,"nudge",t[16]),al(e,"measure",t[12]),Hs(Bh.call(null,e,{observePosition:!0})),Hs(i=wp.call(null,e,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p:function(t,a){s&&s.p&&(!o||16&a[1])&&Fs(s,c,t,t[35],o?Ds(c,t[35],a,null):js(t[35]),null),(!o||32&a[0])&&sl(n,"style",t[5]),(!o||1&a[0]&&r!==(r=Kh(["PinturaScrollable",t[0]])))&&sl(e,"class",r),(!o||16&a[0])&&sl(e,"style",t[4]),(!o||2&a[0])&&sl(e,"data-direction",t[1]),(!o||64&a[0])&&sl(e,"data-state",t[6]),i&&Is(i.update)&&2&a[0]&&i.update.call(null,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i:function(t){o||(Yl(s,t),o=!0)},o:function(t){Kl(s,t),o=!1},d:function(n){n&&tl(e),s&&s.d(n),t[38](null),a=!1,Ts(u)}}}function Jp(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v=e.$$slots,m=void 0===v?{}:v,g=e.$$scope,y=_l(),b="idle",$=_h(0);Ls(t,$,(function(t){return n(34,l=t)}));var x,w,k,S,C=e.class,_=void 0===C?void 0:C,M=e.scrollBlockInteractionDist,E=void 0===M?5:M,T=e.scrollStep,I=void 0===T?10:T,P=e.scrollFocusMargin,R=void 0===P?64:P,A=e.scrollDirection,L=void 0===A?"x":A,O=e.scrollAutoCancel,z=void 0!==O&&O,D=e.elasticity,F=void 0===D?0:D,j=e.onscroll,B=void 0===j?Pr:j,N=e.maskFeatherSize,V=void 0===N?void 0:N,H=e.maskFeatherStartOpacity,W=void 0===H?void 0:H,U=e.maskFeatherEndOpacity,Z=void 0===U?void 0:U,q=e.scroll,G=void 0===q?void 0:q,X="",Y=!0,K=$.subscribe((function(t){var e=ji();e[L]=t,B(e)})),J=function(t){return Math.max(Math.min(0,t),h[r]-d[r])},Q=function(t,e){void 0===e&&(e={});var r=e,i=r.elastic,o=void 0!==i&&i,a=r.animate,u=void 0!==a&&a,c=r.preventScrollState,s=void 0!==c&&c;Math.abs(t-f)>E&&"idle"===b&&!p&&!s&&n(27,b="scrolling");var l=J(t),d=o&&F&&!p?l+Zp(t-l,F):l,h=!0;u?h=!1:Y||(h=!p),Y=!1,$.set(d,{hard:h}).then((function(t){p&&(Y=!0)}))};Cl((function(){K()}));return t.$$set=function(t){"class"in t&&n(0,_=t.class),"scrollBlockInteractionDist"in t&&n(20,E=t.scrollBlockInteractionDist),"scrollStep"in t&&n(21,I=t.scrollStep),"scrollFocusMargin"in t&&n(22,R=t.scrollFocusMargin),"scrollDirection"in t&&n(1,L=t.scrollDirection),"scrollAutoCancel"in t&&n(23,z=t.scrollAutoCancel),"elasticity"in t&&n(24,F=t.elasticity),"onscroll"in t&&n(25,B=t.onscroll),"maskFeatherSize"in t&&n(19,V=t.maskFeatherSize),"maskFeatherStartOpacity"in t&&n(17,W=t.maskFeatherStartOpacity),"maskFeatherEndOpacity"in t&&n(18,Z=t.maskFeatherEndOpacity),"scroll"in t&&n(26,G=t.scroll),"$$scope"in t&&n(35,g=t.$$scope)},t.$$.update=function(){if(2&t.$$.dirty[0]&&n(31,r="x"===L?"width":"height"),2&t.$$.dirty[0]&&n(29,i=L.toUpperCase()),8&t.$$.dirty[0]&&n(33,o=x&&getComputedStyle(x)),8&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,a=o&&Xp(o.getPropertyValue("--scrollable-feather-size"))),268828676&t.$$.dirty[0]|11&t.$$.dirty[1]&&null!=l&&h&&null!=a&&d){var e=-1*l/a,f=-(h[r]-d[r]-l)/a;n(17,W=zf(1-e,0,1)),n(18,Z=zf(1-f,0,1)),n(19,V=a),n(4,X="--scrollable-feather-start-opacity: "+W+";--scrollable-feather-end-opacity: "+Z)}67108872&t.$$.dirty[0]&&x&&void 0!==G&&(uu(G)?Q(G):Q(G.scrollOffset,G)),268435460&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(30,u=h&&d?d[r]>h[r]:void 0),1207959552&t.$$.dirty[0]&&n(6,c=Kh([b,u?"overflows":void 0])),1610612736&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(5,s=u?"transform: translate"+i+"("+l+"px)":void 0)},[_,L,d,x,X,s,c,$,function(){u&&(k=!1,w=!0,S=Bi(0,0),p=!1,n(27,b="idle"),f=As($))},function(t){t.detail;u&&(p=!0,n(27,b="idle"))},function(t){var e=t.detail;u&&(k||w&&(w=!1,no(e.translation)<.1)||(!z||"x"!==L||function(t){var e=Xi(Bi(t.x-S.x,t.y-S.y),Math.abs);S=Vi(t);var n=no(e),r=e.x-e.y;return!(n>1&&r<-.5)}(e.translation)?Q(f+e.translation[L],{elastic:!0}):k=!0))},function(t){var e=t.detail;if(u&&!k){var n=f+e.translation[L],r=J(n);Y=!1,$.set(r).then((function(t){p&&(Y=!0)}))}},function(t){var e=t.detail;n(28,h=e),y("measure",{x:e.x,y:e.y,width:e.width,height:e.height})},function(t){if(u){t.preventDefault(),t.stopPropagation();var e=t.shiftKey,n=Yp(t)*(e?-1:1),r=As($);Q(r+n*I,{animate:!0})}},function(t){if(u&&p){var e=t.target;t.target.classList.contains("implicit")&&(e=e.parentNode);var n=e["x"===L?"offsetLeft":"offsetTop"],i=n+e["x"===L?"offsetWidth":"offsetHeight"],o=As($),a=R+V;o+n<a?Q(-n+a):o+i>h[r]-a&&Q(h[r]-i-a,{animate:!0})}},function(){n(3,x["x"===L?"scrollLeft":"scrollTop"]=0,x)},function(t){var e=t.detail;if(!x.querySelector("[data-focus-visible]")){var n=-2*e[L],r=As($);Q(r+n*I,{animate:!0,preventScrollState:!0})}},W,Z,V,E,I,R,z,F,B,G,b,h,i,u,r,a,o,l,g,m,function(t){return n(2,d=t.detail)},function(t){Pl[t?"unshift":"push"]((function(){n(3,x=t)}))}]}var Qp=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Jp,Kp,Ps,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1]),n}return gr(e,t),e}(df);function tv(t,e){var n=void 0===e?{}:e,r=n.delay,i=void 0===r?0:r,o=n.duration,a=void 0===o?400:o,u=n.easing,c=void 0===u?Cs:u,s=+getComputedStyle(t).opacity;return{delay:i,duration:a,easing:c,css:function(t){return"opacity: "+t*s}}}function ev(t){var e,n,r,i,o;return{c:function(){sl(e=el("span"),"class","PinturaStatusMessage")},m:function(n,a){Qs(n,e,a),e.innerHTML=t[0],r=!0,i||(o=[al(e,"measure",(function(){Is(t[1])&&t[1].apply(this,arguments)})),Hs(Bh.call(null,e))],i=!0)},p:function(n,i){var o=i[0];t=n,(!r||1&o)&&(e.innerHTML=t[0])},i:function(t){r||(Fl((function(){n||(n=Ql(e,tv,{duration:500},!0)),n.run(1)})),r=!0)},o:function(t){n||(n=Ql(e,tv,{duration:500},!1)),n.run(0),r=!1},d:function(t){t&&tl(e),t&&n&&n.end(),i=!1,Ts(o)}}}function nv(t,e,n){var r=e.text,i=e.onmeasure,o=void 0===i?Pr:i;return t.$$set=function(t){"text"in t&&n(0,r=t.text),"onmeasure"in t&&n(1,o=t.onmeasure)},[r,o]}var rv=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,nv,ev,Ps,{text:0,onmeasure:1}),n}return gr(e,t),e}(df);function iv(t){var e,n,r,i,o,a,u,c;return{c:function(){e=el("span"),n=nl("svg"),r=nl("g"),i=nl("circle"),o=nl("circle"),a=il(),u=el("span"),c=rl(t[3]),sl(i,"class","PinturaProgressIndicatorBar"),sl(i,"r","8.5"),sl(i,"cx","10"),sl(i,"cy","10"),sl(i,"stroke-linecap","round"),sl(i,"opacity",".25"),sl(o,"class","PinturaProgressIndicatorFill"),sl(o,"r","8.5"),sl(o,"stroke-dasharray",t[2]),sl(o,"cx","10"),sl(o,"cy","10"),sl(o,"transform","rotate(-90) translate(-20)"),sl(r,"fill","none"),sl(r,"stroke","currentColor"),sl(r,"stroke-width","2.5"),sl(r,"stroke-linecap","round"),sl(r,"opacity",t[1]),sl(n,"width","20"),sl(n,"height","20"),sl(n,"viewBox","0 0 20 20"),sl(n,"xmlns","http://www.w3.org/2000/svg"),sl(n,"aria-hidden","true"),sl(n,"focusable","false"),sl(u,"class","implicit"),sl(e,"class","PinturaProgressIndicator"),sl(e,"data-status",t[0])},m:function(t,s){Qs(t,e,s),Ys(e,n),Ys(n,r),Ys(r,i),Ys(r,o),Ys(e,a),Ys(e,u),Ys(u,c)},p:function(t,n){var i=n[0];4&i&&sl(o,"stroke-dasharray",t[2]),2&i&&sl(r,"opacity",t[1]),8&i&&fl(c,t[3]),1&i&&sl(e,"data-status",t[0])},i:Ss,o:Ss,d:function(t){t&&tl(e)}}}function ov(t,e,n){var r,i,o,a,u,c,s=_l(),l=e.progress,f=e.min,d=void 0===f?0:f,h=e.max,p=void 0===h?100:h,v=e.labelBusy,m=void 0===v?"Busy":v,g=_h(0,{precision:.01}),y=_h(0,{precision:.01});Ls(t,y,(function(t){return n(10,u=t)}));var b=mf([g],(function(t){return zf(t,d,p)}));Ls(t,b,(function(t){return n(11,c=t)}));var $=b.subscribe((function(t){1===l&&Math.round(t)>=100&&s("complete")}));return kl((function(){y.set(1)})),Cl((function(){$()})),t.$$set=function(t){"progress"in t&&n(6,l=t.progress),"min"in t&&n(7,d=t.min),"max"in t&&n(8,p=t.max),"labelBusy"in t&&n(9,m=t.labelBusy)},t.$$.update=function(){64&t.$$.dirty&&l&&l!==1/0&&g.set(100*l),2624&t.$$.dirty&&n(3,r=l===1/0?m:Math.round(c)+"%"),2112&t.$$.dirty&&n(2,i=l===1/0?"26.5 53":c/100*53+" 53"),1024&t.$$.dirty&&n(1,o=u),64&t.$$.dirty&&n(0,a=l===1/0?"busy":"loading")},[a,o,i,r,y,b,l,d,p,m,u,c]}var av=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,ov,iv,Ps,{progress:6,min:7,max:8,labelBusy:9}),n}return gr(e,t),e}(df);function uv(t){var e,n,r,i=t[5].default,o=Os(i,t,t[4],null);return{c:function(){e=el("span"),o&&o.c(),sl(e,"class",n="PinturaStatusAside "+t[0]),sl(e,"style",t[1])},m:function(t,n){Qs(t,e,n),o&&o.m(e,null),r=!0},p:function(t,a){var u=a[0];o&&o.p&&(!r||16&u)&&Fs(o,i,t,t[4],r?Ds(i,t[4],u,null):js(t[4]),null),(!r||1&u&&n!==(n="PinturaStatusAside "+t[0]))&&sl(e,"class",n),(!r||2&u)&&sl(e,"style",t[1])},i:function(t){r||(Yl(o,t),r=!0)},o:function(t){Kl(o,t),r=!1},d:function(t){t&&tl(e),o&&o.d(t)}}}function cv(t,e,n){var r,i=e.$$slots,o=void 0===i?{}:i,a=e.$$scope,u=e.offset,c=void 0===u?0:u,s=e.opacity,l=void 0===s?0:s,f=e.class,d=void 0===f?void 0:f;return t.$$set=function(t){"offset"in t&&n(2,c=t.offset),"opacity"in t&&n(3,l=t.opacity),"class"in t&&n(0,d=t.class),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=function(){12&t.$$.dirty&&n(1,r="transform:translateX("+c+"px);opacity:"+l)},[d,r,c,l,a,o]}var sv=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,cv,uv,Ps,{offset:2,opacity:3,class:0}),n}return gr(e,t),e}(df);function lv(t){for(var e,n,r=t[3].default,i=Os(r,t,t[2],null),o=[{for:"_"},t[1]],a={},u=0;u<o.length;u+=1)a=_s(a,o[u]);return{c:function(){e=el("label"),i&&i.c(),ll(e,a)},m:function(t,r){Qs(t,e,r),i&&i.m(e,null),n=!0},p:function(t,u){i&&i.p&&(!n||4&u)&&Fs(i,r,t,t[2],n?Ds(r,t[2],u,null):js(t[2]),null),ll(e,a=of(o,[{for:"_"},2&u&&t[1]]))},i:function(t){n||(Yl(i,t),n=!0)},o:function(t){Kl(i,t),n=!1},d:function(t){t&&tl(e),i&&i.d(t)}}}function fv(t){for(var e,n,r=t[3].default,i=Os(r,t,t[2],null),o=[t[1]],a={},u=0;u<o.length;u+=1)a=_s(a,o[u]);return{c:function(){e=el("div"),i&&i.c(),ll(e,a)},m:function(t,r){Qs(t,e,r),i&&i.m(e,null),n=!0},p:function(t,u){i&&i.p&&(!n||4&u)&&Fs(i,r,t,t[2],n?Ds(r,t[2],u,null):js(t[2]),null),ll(e,a=of(o,[2&u&&t[1]]))},i:function(t){n||(Yl(i,t),n=!0)},o:function(t){Kl(i,t),n=!1},d:function(t){t&&tl(e),i&&i.d(t)}}}function dv(t){for(var e,n,r=t[3].default,i=Os(r,t,t[2],null),o=[t[1]],a={},u=0;u<o.length;u+=1)a=_s(a,o[u]);return{c:function(){e=el("div"),i&&i.c(),ll(e,a)},m:function(t,r){Qs(t,e,r),i&&i.m(e,null),n=!0},p:function(t,u){i&&i.p&&(!n||4&u)&&Fs(i,r,t,t[2],n?Ds(r,t[2],u,null):js(t[2]),null),ll(e,a=of(o,[2&u&&t[1]]))},i:function(t){n||(Yl(i,t),n=!0)},o:function(t){Kl(i,t),n=!1},d:function(t){t&&tl(e),i&&i.d(t)}}}function hv(t){var e,n,r,i,o=[dv,fv,lv],a=[];function u(t,e){return"div"===t[0]?0:"span"===t[0]?1:"label"===t[0]?2:-1}return~(e=u(t))&&(n=a[e]=o[e](t)),{c:function(){n&&n.c(),r=ol()},m:function(t,n){~e&&a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=i[0],s=e;(e=u(t))===s?~e&&a[e].p(t,c):(n&&(Gl(),Kl(a[s],1,1,(function(){a[s]=null})),Xl()),~e?((n=a[e])?n.p(t,c):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r)):n=null)},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){~e&&a[e].d(t),t&&tl(r)}}}function pv(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,o=e.$$scope,a=e.name,u=void 0===a?"div":a,c=e.attributes,s=void 0===c?{}:c;return t.$$set=function(t){"name"in t&&n(0,u=t.name),"attributes"in t&&n(1,s=t.attributes),"$$scope"in t&&n(2,o=t.$$scope)},[u,s,o,i]}var vv=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,pv,hv,Ps,{name:0,attributes:1}),n}return gr(e,t),e}(df),mv=function(){return Dr()&&window.devicePixelRatio||1},gv=null,yv=function(t){return null===gv&&(gv=1===mv()?Math.round:function(t){return t}),gv(t)},bv=function(t,e){if(void 0===e&&(e={}),t){if(e.preventScroll&&ba()){var n=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=n)}t.focus(e)}},$v=function(t){return{}},xv=function(t){return{}},wv=function(t){return{}},kv=function(t){return{}};function Sv(t){for(var e,n,r=[t[7]],i={$$slots:{default:[_v]},$$scope:{ctx:t}},o=0;o<r.length;o+=1)i=_s(i,r[o]);return e=new jp({props:i}),t[40](e),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=128&n[0]?of(r,[af(t[7])]):{};8192&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(n){t[40](null),lf(e,n)}}}function Cv(t){for(var e,n,r=[t[7]],i={},o=0;o<r.length;o+=1)i=_s(i,r[o]);return e=new jp({props:i}),t[39](e),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=128&n[0]?of(r,[af(t[7])]):{};e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(n){t[39](null),lf(e,n)}}}function _v(t){var e,n=t[38].label,r=Os(n,t,t[44],kv);return{c:function(){r&&r.c()},m:function(t,n){r&&r.m(t,n),e=!0},p:function(t,i){r&&r.p&&(!e||8192&i[1])&&Fs(r,n,t,t[44],e?Ds(n,t[44],i,wv):js(t[44]),kv)},i:function(t){e||(Yl(r,t),e=!0)},o:function(t){Kl(r,t),e=!1},d:function(t){r&&r.d(t)}}}function Mv(t){var e,n,r,i,o,a,u,c=t[38].details,s=Os(c,t,t[44],xv);return{c:function(){e=el("div"),s&&s.c(),n=il(),sl(r=el("span"),"class","PinturaPanelTip"),sl(r,"style",t[10]),sl(e,"class",i=Kh(["PinturaPanel","pintura-editor-panel",t[2]])),sl(e,"tabindex","-1"),sl(e,"style",t[11])},m:function(i,c){Qs(i,e,c),s&&s.m(e,null),Ys(e,n),Ys(e,r),t[41](e),o=!0,a||(u=[al(e,"close",t[42]),al(e,"keydown",t[18]),al(e,"measure",t[43]),Hs(Bh.call(null,e))],a=!0)},p:function(t,n){s&&s.p&&(!o||8192&n[1])&&Fs(s,c,t,t[44],o?Ds(c,t[44],n,$v):js(t[44]),xv),(!o||1024&n[0])&&sl(r,"style",t[10]),(!o||4&n[0]&&i!==(i=Kh(["PinturaPanel","pintura-editor-panel",t[2]])))&&sl(e,"class",i),(!o||2048&n[0])&&sl(e,"style",t[11])},i:function(t){o||(Yl(s,t),o=!0)},o:function(t){Kl(s,t),o=!1},d:function(n){n&&tl(e),s&&s.d(n),t[41](null),a=!1,Ts(u)}}}function Ev(t){var e,n,r,i,o,a,u,c,s,l=[Cv,Sv],f=[];function d(t,e){return t[1]?0:1}n=d(t),r=f[n]=l[n](t);var h=t[6]&&Mv(t);return{c:function(){e=il(),r.c(),i=il(),h&&h.c(),o=il(),a=ol()},m:function(r,l){Qs(r,e,l),f[n].m(r,l),Qs(r,i,l),h&&h.m(r,l),Qs(r,o,l),Qs(r,a,l),u=!0,c||(s=[al(document.body,"pointerdown",(function(){Is(t[9])&&t[9].apply(this,arguments)})),al(document.body,"pointerup",(function(){Is(t[8])&&t[8].apply(this,arguments)}))],c=!0)},p:function(e,a){var u=n;(n=d(t=e))===u?f[n].p(t,a):(Gl(),Kl(f[u],1,1,(function(){f[u]=null})),Xl(),(r=f[n])?r.p(t,a):(r=f[n]=l[n](t)).c(),Yl(r,1),r.m(i.parentNode,i)),t[6]?h?(h.p(t,a),64&a[0]&&Yl(h,1)):((h=Mv(t)).c(),Yl(h,1),h.m(o.parentNode,o)):h&&(Gl(),Kl(h,1,1,(function(){h=null})),Xl())},i:function(t){u||(Yl(r),Yl(h),Yl(false),u=!0)},o:function(t){Kl(r),Kl(h),Kl(false),u=!1},d:function(t){t&&tl(e),f[n].d(t),t&&tl(i),h&&h.d(t),t&&tl(o),t&&tl(a),c=!1,Ts(s)}}}var Tv=12;function Iv(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x=e.$$slots,w=void 0===x?{}:x,k=e.$$scope,S=e.buttonClass,C=void 0===S?void 0:S,_=e.buttonLabel,M=void 0===_?void 0:_,E=e.panelClass,T=void 0===E?void 0:E,I=e.isActive,P=void 0!==I&&I,R=e.onshow,A=void 0===R?function(t){var e=t.panel;return bv(e,{preventScroll:!0})}:R,L=e.onhide,O=void 0===L?Pr:L,z=El("isAnimated");Ls(t,z,(function(t){return n(37,$=t)}));var D=El("rootPortal");Ls(t,D,(function(t){return n(32,v=t)}));var F,j,B,N=El("rootRect");Ls(t,N,(function(t){return n(36,b=t)}));var V=function(){return n(22,B=r&&r.getBoundingClientRect())},H=ji(),W=_h(0);Ls(t,W,(function(t){return n(34,g=t)}));var U=ji(),Z=vf({x:0,y:0});Ls(t,Z,(function(t){return n(33,m=t)}));var q=_h(-5,{stiffness:.1,damping:.35,precision:.001});Ls(t,q,(function(t){return n(35,y=t)}));var G,X,Y=function(t){return Rp(t,v)||j.isEventTarget(t)},K=!1,J=function(t){P||V(),n(26,X=t),n(0,P=!P)},Q=function(t){/down/i.test(t.key)&&(n(0,P=!0),n(26,X=t))};Cl((function(){if(v&&G){var t=G;Dl().then((function(){t.parentNode&&t.remove()}))}}));return t.$$set=function(t){"buttonClass"in t&&n(19,C=t.buttonClass),"buttonLabel"in t&&n(1,M=t.buttonLabel),"panelClass"in t&&n(2,T=t.panelClass),"isActive"in t&&n(0,P=t.isActive),"onshow"in t&&n(20,A=t.onshow),"onhide"in t&&n(21,O=t.onhide),"$$scope"in t&&n(44,k=t.$$scope)},t.$$.update=function(){if(16&t.$$.dirty[0]&&(r=j&&j.getElement()),33554433&t.$$.dirty[0]&&n(8,h=P?function(t){K&&(n(25,K=!1),Y(t)||n(0,P=!1))}:void 0),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&W.set(P?1:0,{hard:!1===$}),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&q.set(P?0:-5,{hard:!1===$}),16&t.$$.dirty[1]&&n(29,i=1-y/-5),1&t.$$.dirty[0]|32&t.$$.dirty[1]&&b&&P&&V(),4194313&t.$$.dirty[0]|32&t.$$.dirty[1]&&b&&F&&B&&P){var e=B.x-b.x+.5*B.width-.5*F.width,x=B.y-b.y+B.height,w=b.width-Tv,k=b.height-Tv,S=e,_=x,E=S+F.width,T=_+F.height;if(S<12&&(n(24,U.x=S-12,U),e=12),E>w&&(n(24,U.x=E-w,U),e=w-F.width),T>k)n(23,H.y=-1,H),12<x-F.height-B.height?(n(24,U.y=0,U),x-=F.height+B.height):(n(24,U.y=x-(T-k),U),x-=T-k);else n(23,H.y=1,H);Vs(Z,m=Xi(Bi(e,x),yv),m)}8&t.$$.dirty[1]&&n(6,o=g>0),8&t.$$.dirty[1]&&n(31,a=g<1),8388608&t.$$.dirty[0]|20&t.$$.dirty[1]&&n(30,u="translateX("+(Math.round(m.x)+H.x*Tv)+"px) translateY("+(Math.round(m.y)+H.y*Tv+H.y*y)+"px)"),1073741824&t.$$.dirty[0]|9&t.$$.dirty[1]&&n(11,c=a?"opacity: "+g+"; pointer-events: "+(g<1?"none":"all")+"; transform: "+u+";":"transform: "+u),536870912&t.$$.dirty[0]&&n(27,s=.5+.5*i),536870912&t.$$.dirty[0]&&n(28,l=i),427819016&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(10,f=m&&F&&"opacity:"+l+";transform:scaleX("+s+")rotate(45deg);top:"+(H.y<0?U.y+F.height:0)+"px;left:"+(U.x+.5*F.width)+"px"),1&t.$$.dirty[0]&&n(9,d=P?function(t){Y(t)||n(25,K=!0)}:void 0),96&t.$$.dirty[0]|2&t.$$.dirty[1]&&o&&v&&G&&G.parentNode!==v&&v.append(G),1&t.$$.dirty[0]&&(P||n(26,X=void 0)),68157537&t.$$.dirty[0]&&P&&o&&G&&A({e:X,panel:G}),2097217&t.$$.dirty[0]&&o&&!P&&O(),524290&t.$$.dirty[0]&&n(7,p={label:M,class:Kh(["PinturaPanelButton",C]),onkeydown:Q,onclick:J})},[P,M,T,F,j,G,o,p,h,d,f,c,z,D,N,W,Z,q,function(t){/esc/i.test(t.key)&&(n(0,P=!1),r.focus())},C,A,O,B,H,U,K,X,s,l,i,u,a,v,m,g,y,b,$,w,function(t){Pl[t?"unshift":"push"]((function(){n(4,j=t)}))},function(t){Pl[t?"unshift":"push"]((function(){n(4,j=t)}))},function(t){Pl[t?"unshift":"push"]((function(){n(5,G=t)}))},function(t){t.stopPropagation(),n(0,P=!1)},function(t){return n(3,F=lo(t.detail))},k]}var Pv=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Iv,Ev,Ps,{buttonClass:19,buttonLabel:1,panelClass:2,isActive:0,onshow:20,onhide:21},null,[-1,-1]),n}return gr(e,t),e}(df),Rv={Up:38,Down:40,Left:37,Right:39};function Av(t){var e,n,r,i,o,a,u,c,s=t[15].default,l=Os(s,t,t[14],null);return{c:function(){e=el("li"),n=el("input"),r=il(),i=el("label"),l&&l.c(),sl(n,"type","radio"),sl(n,"class","implicit"),sl(n,"id",t[7]),sl(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],sl(i,"for",t[7]),sl(i,"title",t[2]),sl(e,"class",o=Kh(["PinturaRadioGroupOption",t[1]])),sl(e,"data-hidden",t[5]),sl(e,"data-disabled",t[6]),sl(e,"data-selected",t[4])},m:function(o,s){Qs(o,e,s),Ys(e,n),Ys(e,r),Ys(e,i),l&&l.m(i,null),a=!0,u||(c=[al(n,"change",cl(t[16])),al(n,"keydown",t[9]),al(n,"click",t[10])],u=!0)},p:function(t,r){var u=r[0];(!a||128&u)&&sl(n,"id",t[7]),(!a||1&u)&&sl(n,"name",t[0]),(!a||8&u)&&(n.value=t[3]),(!a||64&u)&&(n.disabled=t[6]),(!a||32&u)&&(n.hidden=t[5]),(!a||16&u)&&(n.checked=t[4]),l&&l.p&&(!a||16384&u)&&Fs(l,s,t,t[14],a?Ds(s,t[14],u,null):js(t[14]),null),(!a||128&u)&&sl(i,"for",t[7]),(!a||4&u)&&sl(i,"title",t[2]),(!a||2&u&&o!==(o=Kh(["PinturaRadioGroupOption",t[1]])))&&sl(e,"class",o),(!a||32&u)&&sl(e,"data-hidden",t[5]),(!a||64&u)&&sl(e,"data-disabled",t[6]),(!a||16&u)&&sl(e,"data-selected",t[4])},i:function(t){a||(Yl(l,t),a=!0)},o:function(t){Kl(l,t),a=!1},d:function(t){t&&tl(e),l&&l.d(t),u=!1,Ts(c)}}}function Lv(t,e,n){var r,i,o=e.$$slots,a=void 0===o?{}:o,u=e.$$scope,c=e.name,s=e.class,l=void 0===s?void 0:s,f=e.label,d=e.id,h=e.value,p=e.checked,v=e.onkeydown,m=e.onclick,g=e.hidden,y=void 0!==g&&g,b=e.disabled,$=void 0!==b&&b,x=Object.values(Rv),w=El("keysPressed");Ls(t,w,(function(t){return n(17,i=t)}));return t.$$set=function(t){"name"in t&&n(0,c=t.name),"class"in t&&n(1,l=t.class),"label"in t&&n(2,f=t.label),"id"in t&&n(11,d=t.id),"value"in t&&n(3,h=t.value),"checked"in t&&n(4,p=t.checked),"onkeydown"in t&&n(12,v=t.onkeydown),"onclick"in t&&n(13,m=t.onclick),"hidden"in t&&n(5,y=t.hidden),"disabled"in t&&n(6,$=t.disabled),"$$scope"in t&&n(14,u=t.$$scope)},t.$$.update=function(){2049&t.$$.dirty&&n(7,r=c+"-"+d)},[c,l,f,h,p,y,$,r,w,function(t){v(t)},function(t){i.some((function(t){return x.includes(t)}))||m(t)},d,v,m,u,a,function(e){Tl.call(this,t,e)}]}var Ov=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Lv,Av,Ps,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6}),n}return gr(e,t),e}(df),zv=function(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return(lu(e)?lu(e[1]):!!e.options)?t.concat(lu(e)?e[1]:e.options):(t.push(e),t)}),[])},Dv=function(t,e,n){var r;return lu(t)?r=Object.assign({id:e,value:t[0],label:t[1]},t[2]||{}):(r=t).id=null!=r.id?r.id:e,n?n(r):r},Fv=function(t,e,n){return ni(t)?t(e,n):t},jv=function t(e,n){return e.map((function(e){var r=e[0],i=e[1],o=e[2];if(lu(i))return[Fv(r,n),t(i,n)];var a=[r,Fv(i,n)];if(o){var u=Object.assign({},o);o.icon&&(u.icon=Fv(o.icon,n)),a.push(u)}return a}))},Bv=function(t,e){return jv(t,e)},Nv=function(t,e){return Array.isArray(t)&&Array.isArray(e)?Bf(t,e):t===e};function Vv(t,e,n){var r=t.slice();return r[27]=e[n],r}var Hv=function(t){return{option:1024&t[0]}},Wv=function(t){return{option:t[27]}};function Uv(t,e,n){var r=t.slice();return r[27]=e[n],r}var Zv=function(t){return{option:1024&t[0]}},qv=function(t){return{option:t[27]}},Gv=function(t){return{option:1024&t[0]}},Xv=function(t){return{option:t[27]}};function Yv(t){for(var e,n,r,i,o,a=[],u=new Map,c=t[1]&&Kv(t),s=t[10],l=function(t){return t[27].id},f=0;f<s.length;f+=1){var d=Vv(t,s,f),h=l(d);u.set(h,a[f]=sm(h,d))}return{c:function(){e=el("fieldset"),c&&c.c(),n=il(),r=el("ul");for(var o=0;o<a.length;o+=1)a[o].c();sl(r,"class","PinturaRadioGroupOptions"),sl(e,"class",i=Kh(["PinturaRadioGroup",t[3]])),sl(e,"data-layout",t[5]),sl(e,"title",t[7])},m:function(t,i){Qs(t,e,i),c&&c.m(e,null),Ys(e,n),Ys(e,r);for(var u=0;u<a.length;u+=1)a[u].m(r,null);o=!0},p:function(t,f){t[1]?c?c.p(t,f):((c=Kv(t)).c(),c.m(e,n)):c&&(c.d(1),c=null),8419153&f[0]&&(s=t[10],Gl(),a=rf(a,f,l,1,t,s,u,r,nf,sm,null,Vv),Xl()),(!o||8&f[0]&&i!==(i=Kh(["PinturaRadioGroup",t[3]])))&&sl(e,"class",i),(!o||32&f[0])&&sl(e,"data-layout",t[5]),(!o||128&f[0])&&sl(e,"title",t[7])},i:function(t){if(!o){for(var e=0;e<s.length;e+=1)Yl(a[e]);o=!0}},o:function(t){for(var e=0;e<a.length;e+=1)Kl(a[e]);o=!1},d:function(t){t&&tl(e),c&&c.d();for(var n=0;n<a.length;n+=1)a[n].d()}}}function Kv(t){var e,n,r;return{c:function(){e=el("legend"),n=rl(t[1]),sl(e,"class",r=t[2]&&"implicit")},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,i){2&i[0]&&fl(n,t[1]),4&i[0]&&r!==(r=t[2]&&"implicit")&&sl(e,"class",r)},d:function(t){t&&tl(e)}}}function Jv(t){var e,n;return e=new Ov({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[rm]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16&n[0]&&(r.name=t[4]),1024&n[0]&&(r.label=t[27].label),1024&n[0]&&(r.id=t[27].id),1024&n[0]&&(r.value=t[27].value),1024&n[0]&&(r.disabled=t[27].disabled),1024&n[0]&&(r.hidden=t[27].hidden),256&n[0]&&(r.class=t[8]),1025&n[0]&&(r.checked=t[12](t[27])===t[0]),1024&n[0]&&(r.onkeydown=t[13](t[27])),1024&n[0]&&(r.onclick=t[14](t[27])),8389696&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Qv(t){for(var e,n,r,i,o,a,u=[],c=new Map,s=t[22].group,l=Os(s,t,t[23],Xv),f=l||function(t){var e,n,r=t[27].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"class","PinturaRadioGroupOptionGroupLabel")},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){1024&e[0]&&r!==(r=t[27].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}(t),d=t[27].options,h=function(t){return t[27].id},p=0;p<d.length;p+=1){var v=Uv(t,d,p),m=h(v);c.set(m,u[p]=cm(m,v))}return{c:function(){e=el("li"),f&&f.c(),n=il(),r=el("ul");for(var a=0;a<u.length;a+=1)u[a].c();i=il(),sl(r,"class","PinturaRadioGroupOptions"),sl(e,"class",o=Kh(["PinturaRadioGroupOptionGroup",t[9]]))},m:function(t,o){Qs(t,e,o),f&&f.m(e,null),Ys(e,n),Ys(e,r);for(var c=0;c<u.length;c+=1)u[c].m(r,null);Ys(e,i),a=!0},p:function(t,n){l?l.p&&(!a||8389632&n[0])&&Fs(l,s,t,t[23],a?Ds(s,t[23],n,Gv):js(t[23]),Xv):f&&f.p&&(!a||1024&n[0])&&f.p(t,a?n:[-1,-1]),8418641&n[0]&&(d=t[27].options,Gl(),u=rf(u,n,h,1,t,d,c,r,nf,cm,null,Uv),Xl()),(!a||512&n[0]&&o!==(o=Kh(["PinturaRadioGroupOptionGroup",t[9]])))&&sl(e,"class",o)},i:function(t){if(!a){Yl(f,t);for(var e=0;e<d.length;e+=1)Yl(u[e]);a=!0}},o:function(t){Kl(f,t);for(var e=0;e<u.length;e+=1)Kl(u[e]);a=!1},d:function(t){t&&tl(e),f&&f.d(t);for(var n=0;n<u.length;n+=1)u[n].d()}}}function tm(t){var e,n;return e=new xp({props:{$$slots:{default:[em]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function em(t){var e,n=t[27].icon+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){1024&r[0]&&n!==(n=t[27].icon+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function nm(t){var e,n,r=t[27].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"class",t[6])},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,i){1024&i[0]&&r!==(r=t[27].label+"")&&fl(n,r),64&i[0]&&sl(e,"class",t[6])},d:function(t){t&&tl(e)}}}function rm(t){var e,n=t[22].option,r=Os(n,t,t[23],Wv),i=r||function(t){var e,n,r,i=t[27].icon&&tm(t),o=!t[27].hideLabel&&nm(t);return{c:function(){i&&i.c(),e=il(),o&&o.c(),n=il()},m:function(t,a){i&&i.m(t,a),Qs(t,e,a),o&&o.m(t,a),Qs(t,n,a),r=!0},p:function(t,r){t[27].icon?i?(i.p(t,r),1024&r[0]&&Yl(i,1)):((i=tm(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[27].hideLabel?o&&(o.d(1),o=null):o?o.p(t,r):((o=nm(t)).c(),o.m(n.parentNode,n))},i:function(t){r||(Yl(i),r=!0)},o:function(t){Kl(i),r=!1},d:function(t){i&&i.d(t),t&&tl(e),o&&o.d(t),t&&tl(n)}}}(t);return{c:function(){i&&i.c()},m:function(t,n){i&&i.m(t,n),e=!0},p:function(t,o){r?r.p&&(!e||8389632&o[0])&&Fs(r,n,t,t[23],e?Ds(n,t[23],o,Hv):js(t[23]),Wv):i&&i.p&&(!e||1088&o[0])&&i.p(t,e?o:[-1,-1])},i:function(t){e||(Yl(i,t),e=!0)},o:function(t){Kl(i,t),e=!1},d:function(t){i&&i.d(t)}}}function im(t){var e,n;return e=new xp({props:{$$slots:{default:[om]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function om(t){var e,n=t[27].icon+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){1024&r[0]&&n!==(n=t[27].icon+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function am(t){var e,n,r=t[27].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"class",t[6])},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,i){1024&i[0]&&r!==(r=t[27].label+"")&&fl(n,r),64&i[0]&&sl(e,"class",t[6])},d:function(t){t&&tl(e)}}}function um(t){var e,n=t[22].option,r=Os(n,t,t[23],qv),i=r||function(t){var e,n,r,i=t[27].icon&&im(t),o=!t[27].hideLabel&&am(t);return{c:function(){i&&i.c(),e=il(),o&&o.c(),n=il()},m:function(t,a){i&&i.m(t,a),Qs(t,e,a),o&&o.m(t,a),Qs(t,n,a),r=!0},p:function(t,r){t[27].icon?i?(i.p(t,r),1024&r[0]&&Yl(i,1)):((i=im(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[27].hideLabel?o&&(o.d(1),o=null):o?o.p(t,r):((o=am(t)).c(),o.m(n.parentNode,n))},i:function(t){r||(Yl(i),r=!0)},o:function(t){Kl(i),r=!1},d:function(t){i&&i.d(t),t&&tl(e),o&&o.d(t),t&&tl(n)}}}(t);return{c:function(){i&&i.c()},m:function(t,n){i&&i.m(t,n),e=!0},p:function(t,o){r?r.p&&(!e||8389632&o[0])&&Fs(r,n,t,t[23],e?Ds(n,t[23],o,Zv):js(t[23]),qv):i&&i.p&&(!e||1088&o[0])&&i.p(t,e?o:[-1,-1])},i:function(t){e||(Yl(i,t),e=!0)},o:function(t){Kl(i,t),e=!1},d:function(t){i&&i.d(t)}}}function cm(t,e){var n,r,i;return r=new Ov({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[um]},$$scope:{ctx:e}}}),{key:t,first:null,c:function(){n=ol(),cf(r.$$.fragment),this.first=n},m:function(t,e){Qs(t,n,e),sf(r,t,e),i=!0},p:function(t,n){e=t;var i={};16&n[0]&&(i.name=e[4]),1024&n[0]&&(i.label=e[27].label),1024&n[0]&&(i.id=e[27].id),1024&n[0]&&(i.value=e[27].value),1024&n[0]&&(i.disabled=e[27].disabled),1024&n[0]&&(i.hidden=e[27].hidden),256&n[0]&&(i.class=e[8]),1025&n[0]&&(i.checked=e[12](e[27])===e[0]),1024&n[0]&&(i.onkeydown=e[13](e[27])),1024&n[0]&&(i.onclick=e[14](e[27])),8389696&n[0]&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i:function(t){i||(Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(r.$$.fragment,t),i=!1},d:function(t){t&&tl(n),lf(r,t)}}}function sm(t,e){var n,r,i,o,a,u=[Qv,Jv],c=[];function s(t,e){return t[27].options?0:1}return r=s(e),i=c[r]=u[r](e),{key:t,first:null,c:function(){n=ol(),i.c(),o=ol(),this.first=n},m:function(t,e){Qs(t,n,e),c[r].m(t,e),Qs(t,o,e),a=!0},p:function(t,n){var a=r;(r=s(e=t))===a?c[r].p(e,n):(Gl(),Kl(c[a],1,1,(function(){c[a]=null})),Xl(),(i=c[r])?i.p(e,n):(i=c[r]=u[r](e)).c(),Yl(i,1),i.m(o.parentNode,o))},i:function(t){a||(Yl(i),a=!0)},o:function(t){Kl(i),a=!1},d:function(t){t&&tl(n),c[r].d(t),t&&tl(o)}}}function lm(t){var e,n,r,i=t[11].length&&Yv(t);return{c:function(){i&&i.c(),e=il(),n=ol()},m:function(t,o){i&&i.m(t,o),Qs(t,e,o),Qs(t,n,o),r=!0},p:function(t,n){t[11].length?i?(i.p(t,n),2048&n[0]&&Yl(i,1)):((i=Yv(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl())},i:function(t){r||(Yl(i),Yl(false),r=!0)},o:function(t){Kl(i),Kl(false),r=!1},d:function(t){i&&i.d(t),t&&tl(e),t&&tl(n)}}}function fm(t,e,n){var r,i,o,a=e.$$slots,u=void 0===a?{}:a,c=e.$$scope,s=_l(),l=e.label,f=void 0===l?void 0:l,d=e.hideLabel,h=void 0===d||d,p=e.class,v=void 0===p?void 0:p,m=e.name,g=void 0===m?"radio-group-"+ui():m,y=e.selectedIndex,b=void 0===y?-1:y,$=e.options,x=void 0===$?[]:$,w=e.onchange,k=void 0===w?void 0:w,S=e.layout,C=void 0===S?void 0:S,_=e.optionMapper,M=void 0===_?void 0:_,E=e.optionFilter,T=void 0===E?void 0:E,I=e.value,P=void 0===I?void 0:I,R=e.optionLabelClass,A=void 0===R?void 0:R,L=e.title,O=void 0===L?void 0:L,z=e.locale,D=void 0===z?void 0:z,F=e.optionClass,j=void 0===F?void 0:F,B=e.optionGroupClass,N=void 0===B?void 0:B,V=function(t){return o.findIndex((function(e){return e.id===t.id}))},H=function(t,e){n(0,b=V(t));var r=Object.assign({index:b},t);!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t&&t.apply(void 0,n)}(k,r,e),s("change",r)};return t.$$set=function(t){"label"in t&&n(1,f=t.label),"hideLabel"in t&&n(2,h=t.hideLabel),"class"in t&&n(3,v=t.class),"name"in t&&n(4,g=t.name),"selectedIndex"in t&&n(0,b=t.selectedIndex),"options"in t&&n(15,x=t.options),"onchange"in t&&n(16,k=t.onchange),"layout"in t&&n(5,C=t.layout),"optionMapper"in t&&n(17,M=t.optionMapper),"optionFilter"in t&&n(18,T=t.optionFilter),"value"in t&&n(19,P=t.value),"optionLabelClass"in t&&n(6,A=t.optionLabelClass),"title"in t&&n(7,O=t.title),"locale"in t&&n(20,D=t.locale),"optionClass"in t&&n(8,j=t.optionClass),"optionGroupClass"in t&&n(9,N=t.optionGroupClass),"$$scope"in t&&n(23,c=t.$$scope)},t.$$.update=function(){1343488&t.$$.dirty[0]&&n(11,r=Bv(T?x.filter(T):x,D)),133120&t.$$.dirty[0]&&n(10,i=function(t,e){void 0===t&&(t=[]);var n=0;return t.map((function(t){return n++,lu(t)?lu(t[1])?{id:n,label:t[0],options:t[1].map((function(t){return Dv(t,++n,e)}))}:Dv(t,n,e):t.options?{id:t.id||n,label:t.label,options:t.options.map((function(t){return Dv(t,++n,e)}))}:Dv(t,n,e)}))}(r,M)),1024&t.$$.dirty[0]&&n(21,o=zv(i)),2654209&t.$$.dirty[0]&&b<0&&(n(0,b=o.findIndex((function(t){return Nv(t.value,P)}))),b<0&&n(0,b=function(t){return t.findIndex((function(t){return void 0===t[0]}))}(x)))},[b,f,h,v,g,C,A,O,j,N,i,r,V,function(t){return function(e){var n;(n=e.key,/enter| /i.test(n))&&H(t,e)}},function(t){return function(e){H(t,e)}},x,k,M,T,P,D,o,u,c]}var dm=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,fm,lm,Ps,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1]),n}return gr(e,t),e}(df),hm=function(t){return{}},pm=function(t){return{}};function vm(t){var e,n;return e=new xp({props:{class:"PinturaButtonIcon",$$slots:{default:[mm]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};268435520&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function mm(t){var e;return{c:function(){e=nl("g")},m:function(n,r){Qs(n,e,r),e.innerHTML=t[6]},p:function(t,n){64&n&&(e.innerHTML=t[6])},d:function(t){t&&tl(e)}}}function gm(t){var e,n,r,i,o,a,u,c=(t[2]||t[18])+"",s=t[6]&&vm(t);return{c:function(){e=el("span"),s&&s.c(),n=il(),sl(r=el("span"),"class",i=Kh(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),sl(e,"slot","label"),sl(e,"title",o=Fv(t[1],t[15])),sl(e,"class",a=Kh(["PinturaButtonInner",t[4]]))},m:function(t,i){Qs(t,e,i),s&&s.m(e,null),Ys(e,n),Ys(e,r),r.innerHTML=c,u=!0},p:function(t,l){t[6]?s?(s.p(t,l),64&l&&Yl(s,1)):((s=vm(t)).c(),Yl(s,1),s.m(e,n)):s&&(Gl(),Kl(s,1,1,(function(){s=null})),Xl()),(!u||262148&l)&&c!==(c=(t[2]||t[18])+"")&&(r.innerHTML=c),(!u||40&l&&i!==(i=Kh(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&sl(r,"class",i),(!u||32770&l&&o!==(o=Fv(t[1],t[15])))&&sl(e,"title",o),(!u||16&l&&a!==(a=Kh(["PinturaButtonInner",t[4]])))&&sl(e,"class",a)},i:function(t){u||(Yl(s),u=!0)},o:function(t){Kl(s),u=!1},d:function(t){t&&tl(e),s&&s.d()}}}function ym(t){var e,n,r=t[30].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"slot","group")},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){1073741824&e&&r!==(r=t[30].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function bm(t){var e,n;return e=new xp({props:{style:ni(t[13])?t[13](t[30].value):t[13],$$slots:{default:[$m]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};1073750016&n&&(r.style=ni(t[13])?t[13](t[30].value):t[13]),1342177280&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function $m(t){var e,n=t[30].icon+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){1073741824&r&&n!==(n=t[30].icon+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function xm(t){var e,n=t[30].sublabel+"";return{c:function(){sl(e=el("span"),"class","PinturaDropdownOptionSublabel")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){1073741824&r&&n!==(n=t[30].sublabel+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function wm(t){var e,n,r,i,o,a,u,c,s=t[30].label+"",l=t[30].icon&&bm(t),f=t[30].sublabel&&xm(t);return{c:function(){e=el("span"),l&&l.c(),n=il(),r=el("span"),i=new pl(!1),o=il(),f&&f.c(),i.a=o,sl(r,"style",a=ni(t[14])?t[14](t[30].value):t[14]),sl(r,"class",u=Kh(["PinturaDropdownOptionLabel",t[10]])),sl(e,"slot","option")},m:function(t,a){Qs(t,e,a),l&&l.m(e,null),Ys(e,n),Ys(e,r),i.m(s,r),Ys(r,o),f&&f.m(r,null),c=!0},p:function(t,o){t[30].icon?l?(l.p(t,o),1073741824&o&&Yl(l,1)):((l=bm(t)).c(),Yl(l,1),l.m(e,n)):l&&(Gl(),Kl(l,1,1,(function(){l=null})),Xl()),(!c||1073741824&o)&&s!==(s=t[30].label+"")&&i.p(s),t[30].sublabel?f?f.p(t,o):((f=xm(t)).c(),f.m(r,null)):f&&(f.d(1),f=null),(!c||1073758208&o&&a!==(a=ni(t[14])?t[14](t[30].value):t[14]))&&sl(r,"style",a),(!c||1024&o&&u!==(u=Kh(["PinturaDropdownOptionLabel",t[10]])))&&sl(r,"class",u)},i:function(t){c||(Yl(l),c=!0)},o:function(t){Kl(l),c=!1},d:function(t){t&&tl(e),l&&l.d(),f&&f.d()}}}function km(t){var e,n,r,i,o,a,u=t[26].controls,c=Os(u,t,t[28],pm);return r=new dm({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[9],selectedIndex:t[8],optionFilter:t[11],optionMapper:t[12],optionLabelClass:Kh(["PinturaDropdownOptionLabel",t[10]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[16],onchange:t[19],$$slots:{option:[wm,function(t){return{30:t.option}},function(t){return t.option?1073741824:0}],group:[ym,function(t){return{30:t.option}},function(t){return t.option?1073741824:0}]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),c&&c.c(),n=il(),cf(r.$$.fragment),sl(e,"slot","details"),sl(e,"class","PinturaOptionsListWrapper")},m:function(u,s){Qs(u,e,s),c&&c.m(e,null),Ys(e,n),sf(r,e,null),i=!0,o||(a=al(e,"keydown",t[21]),o=!0)},p:function(t,e){c&&c.p&&(!i||268435456&e)&&Fs(c,u,t,t[28],i?Ds(u,t[28],e,hm):js(t[28]),pm);var n={};128&e&&(n.name=t[7]),512&e&&(n.value=t[9]),256&e&&(n.selectedIndex=t[8]),2048&e&&(n.optionFilter=t[11]),4096&e&&(n.optionMapper=t[12]),1024&e&&(n.optionLabelClass=Kh(["PinturaDropdownOptionLabel",t[10]])),65536&e&&(n.options=t[16]),1342202880&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i:function(t){i||(Yl(c,t),Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(c,t),Kl(r.$$.fragment,t),i=!1},d:function(t){t&&tl(e),c&&c.d(t),lf(r),o=!1,a()}}}function Sm(t){var e,n,r;function i(e){t[27](e)}var o={onshow:t[20],buttonClass:Kh(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[km],label:[gm]},$$scope:{ctx:t}};return void 0!==t[17]&&(o.isActive=t[17]),e=new Pv({props:o}),Pl.push((function(){return uf(e,"isActive",i)})),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i=r[0],o={};33&i&&(o.buttonClass=Kh(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"])),268828670&i&&(o.$$scope={dirty:i,ctx:t}),!n&&131072&i&&(n=!0,o.isActive=t[17],jl((function(){return n=!1}))),e.$set(o)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function Cm(t,e,n){var r,i,o,a=e.$$slots,u=void 0===a?{}:a,c=e.$$scope,s=e.class,l=void 0===s?void 0:s,f=e.title,d=void 0===f?void 0:f,h=e.label,p=void 0===h?void 0:h,v=e.labelClass,m=void 0===v?void 0:v,g=e.innerClass,y=void 0===g?void 0:g,b=e.hideLabel,$=void 0!==b&&b,x=e.icon,w=void 0===x?void 0:x,k=e.name,S=void 0===k?void 0:k,C=e.options,_=void 0===C?[]:C,M=e.selectedIndex,E=void 0===M?-1:M,T=e.value,I=void 0===T?void 0:T,P=e.optionLabelClass,R=void 0===P?void 0:P,A=e.optionFilter,L=void 0===A?void 0:A,O=e.optionMapper,z=void 0===O?void 0:O,D=e.optionIconStyle,F=void 0===D?void 0:D,j=e.optionLabelStyle,B=void 0===j?void 0:j,N=e.locale,V=void 0===N?void 0:N,H=e.onchange,W=void 0===H?Pr:H,U=e.onload,Z=void 0===U?Pr:U,q=e.ondestroy,G=void 0===q?Pr:q;return kl((function(){return Z({options:_})})),Cl((function(){return G({options:_})})),t.$$set=function(t){"class"in t&&n(0,l=t.class),"title"in t&&n(1,d=t.title),"label"in t&&n(2,p=t.label),"labelClass"in t&&n(3,m=t.labelClass),"innerClass"in t&&n(4,y=t.innerClass),"hideLabel"in t&&n(5,$=t.hideLabel),"icon"in t&&n(6,w=t.icon),"name"in t&&n(7,S=t.name),"options"in t&&n(22,_=t.options),"selectedIndex"in t&&n(8,E=t.selectedIndex),"value"in t&&n(9,I=t.value),"optionLabelClass"in t&&n(10,R=t.optionLabelClass),"optionFilter"in t&&n(11,L=t.optionFilter),"optionMapper"in t&&n(12,z=t.optionMapper),"optionIconStyle"in t&&n(13,F=t.optionIconStyle),"optionLabelStyle"in t&&n(14,B=t.optionLabelStyle),"locale"in t&&n(15,V=t.locale),"onchange"in t&&n(23,W=t.onchange),"onload"in t&&n(24,Z=t.onload),"ondestroy"in t&&n(25,G=t.ondestroy),"$$scope"in t&&n(28,c=t.$$scope)},t.$$.update=function(){4227072&t.$$.dirty&&n(16,r=V?Bv(_,V):_),66048&t.$$.dirty&&n(18,i=r.reduce((function(t,e){if(t)return t;var n=Array.isArray(e)?e:[e,e],r=n[0],i=n[1];return Nv(r,I)?i:void 0}),void 0)||function(t){var e=t.find((function(t){return void 0===t[0]}));if(e)return e[1]}(r)||I)},[l,d,p,m,y,$,w,S,E,I,R,L,z,F,B,V,r,o,i,function(t){n(18,i=t.value),W(t),n(17,o=!1)},function(t){var e=t.e,n=t.panel;if(e&&e.key&&/up|down/i.test(e.key))return bv(n.querySelector("input:not([disabled])"));bv(n.querySelector("fieldset"))},function(t){/tab/i.test(t.key)&&t.preventDefault()},_,W,Z,G,u,function(t){n(17,o=t)},c]}var _m=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Cm,Sm,Ps,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:22,selectedIndex:8,value:9,optionLabelClass:10,optionFilter:11,optionMapper:12,optionIconStyle:13,optionLabelStyle:14,locale:15,onchange:23,onload:24,ondestroy:25}),n}return gr(e,t),e}(df);function Mm(t){var e;return{c:function(){sl(e=el("div"),"slot","details")},m:function(n,r){Qs(n,e,r),t[10](e)},p:Ss,d:function(n){n&&tl(e),t[10](null)}}}function Em(t){var e,n,r;function i(e){t[11](e)}var o={buttonLabel:t[0],buttonClass:t[1],onshow:t[2],onhide:t[3],$$slots:{details:[Mm]},$$scope:{ctx:t}};return void 0!==t[5]&&(o.isActive=t[5]),e=new Pv({props:o}),Pl.push((function(){return uf(e,"isActive",i)})),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i=r[0],o={};1&i&&(o.buttonLabel=t[0]),2&i&&(o.buttonClass=t[1]),4&i&&(o.onshow=t[2]),8&i&&(o.onhide=t[3]),4112&i&&(o.$$scope={dirty:i,ctx:t}),!n&&32&i&&(n=!0,o.isActive=t[5],jl((function(){return n=!1}))),e.$set(o)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function Tm(t,e,n){var r,i=e.buttonLabel,o=void 0===i?void 0:i,a=e.buttonClass,u=void 0===a?void 0:a,c=e.root,s=void 0===c?void 0:c,l=e.ondestroy,f=void 0===l?Pr:l,d=e.onshow,h=void 0===d?Pr:d,p=e.onhide,v=void 0===p?Pr:p,m=!1;return Cl(f),t.$$set=function(t){"buttonLabel"in t&&n(0,o=t.buttonLabel),"buttonClass"in t&&n(1,u=t.buttonClass),"root"in t&&n(6,s=t.root),"ondestroy"in t&&n(7,f=t.ondestroy),"onshow"in t&&n(2,h=t.onshow),"onhide"in t&&n(3,v=t.onhide)},t.$$.update=function(){80&t.$$.dirty&&r&&s&&r.firstChild!==s&&(r.hasChildNodes()?r.replaceChild(s,r.firstChild):r.append(s))},[o,u,h,v,r,m,s,f,function(){return n(5,m=!1)},function(){return n(5,m=!0)},function(t){Pl[t?"unshift":"push"]((function(){n(4,r=t)}))},function(t){n(5,m=t)}]}var Im=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Tm,Em,Ps,{buttonLabel:0,buttonClass:1,root:6,ondestroy:7,onshow:2,onhide:3,hide:8,show:9}),n}return gr(e,t),hr(e,[{key:"hide",get:function(){return this.$$.ctx[8]}},{key:"show",get:function(){return this.$$.ctx[9]}}]),e}(df);function Pm(t){var e,n;return e=new xp({props:{class:"PinturaButtonIcon",$$slots:{default:[Rm]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};524292&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Rm(t){var e;return{c:function(){e=nl("g")},m:function(n,r){Qs(n,e,r),e.innerHTML=t[2]},p:function(t,n){4&n&&(e.innerHTML=t[2])},d:function(t){t&&tl(e)}}}function Am(t){var e,n,r,i,o,a,u,c,s=t[2]&&Pm(t);return{c:function(){e=el("span"),s&&s.c(),n=il(),r=el("span"),i=rl(t[8]),sl(r,"class",o=Kh(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),sl(e,"slot","label"),sl(e,"title",a=Fv(t[1],t[6])),sl(e,"class",u=Kh(["PinturaButtonInner",t[4]]))},m:function(t,o){Qs(t,e,o),s&&s.m(e,null),Ys(e,n),Ys(e,r),Ys(r,i),c=!0},p:function(t,l){t[2]?s?(s.p(t,l),4&l&&Yl(s,1)):((s=Pm(t)).c(),Yl(s,1),s.m(e,n)):s&&(Gl(),Kl(s,1,1,(function(){s=null})),Xl()),(!c||256&l)&&fl(i,t[8]),(!c||40&l&&o!==(o=Kh(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&sl(r,"class",o),(!c||66&l&&a!==(a=Fv(t[1],t[6])))&&sl(e,"title",a),(!c||16&l&&u!==(u=Kh(["PinturaButtonInner",t[4]])))&&sl(e,"class",u)},i:function(t){c||(Yl(s),c=!0)},o:function(t){Kl(s),c=!1},d:function(t){t&&tl(e),s&&s.d()}}}function Lm(t){for(var e,n,r,i,o,a=[t[11],{value:t[7]},{onchange:t[10]}],u={},c=0;c<a.length;c+=1)u=_s(u,a[c]);return n=new Pp({props:u}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"slot","details")},m:function(a,u){Qs(a,e,u),sf(n,e,null),r=!0,i||(o=al(e,"keydown",t[9]),i=!0)},p:function(t,e){var r=3200&e?of(a,[2048&e&&af(t[11]),128&e&&{value:t[7]},1024&e&&{onchange:t[10]}]):{};n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n),i=!1,o()}}}function Om(t){var e,n;return e=new Pv({props:{panelClass:"PinturaSliderPanel",buttonClass:Kh(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[Lm],label:[Am]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r=n[0],i={};33&r&&(i.buttonClass=Kh(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"])),526846&r&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function zm(t,e,n){var r,i=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"],o=Ns(e,i),a=e.class,u=void 0===a?void 0:a,c=e.title,s=void 0===c?void 0:c,l=e.label,f=void 0===l?Math.round:l,d=e.icon,h=void 0===d?void 0:d,p=e.labelClass,v=void 0===p?void 0:p,m=e.innerClass,g=void 0===m?void 0:m,y=e.hideLabel,b=void 0!==y&&y,$=e.locale,x=void 0===$?void 0:$,w=e.value,k=void 0===w?void 0:w,S=e.onchange,C=void 0===S?Pr:S,_=o,M=_.min,E=_.max,T=_.getValue,I=void 0===T?xi:T,P=function(t){return n(8,r=function(t){return ni(f)?f(I(t),M,E):f}(t))};return t.$$set=function(t){e=_s(_s({},e),Bs(t)),n(11,o=Ns(e,i)),"class"in t&&n(0,u=t.class),"title"in t&&n(1,s=t.title),"label"in t&&n(12,f=t.label),"icon"in t&&n(2,h=t.icon),"labelClass"in t&&n(3,v=t.labelClass),"innerClass"in t&&n(4,g=t.innerClass),"hideLabel"in t&&n(5,b=t.hideLabel),"locale"in t&&n(6,x=t.locale),"value"in t&&n(7,k=t.value),"onchange"in t&&n(13,C=t.onchange)},t.$$.update=function(){4224&t.$$.dirty&&P(k)},[u,s,h,v,g,b,x,k,r,function(t){/tab/i.test(t.key)&&t.preventDefault()},function(t){P(t),C(t)},o,f,C]}var Dm=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,zm,Om,Ps,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13}),n}return gr(e,t),e}(df);function Fm(t,e,n){var r=t.slice();return r[9]=e[n][0],r[0]=e[n][1],r[10]=e[n][2],r[2]=e[n][3],r}function jm(t){var e,n,r,i=[t[10]],o=t[3][t[9]]||t[9];function a(t){for(var e={},n=0;n<i.length;n+=1)e=_s(e,i[n]);return{props:e}}return o&&(e=vl(o,a())),{c:function(){e&&cf(e.$$.fragment),n=ol()},m:function(t,i){e&&sf(e,t,i),Qs(t,n,i),r=!0},p:function(t,r){var u=4&r?of(i,[af(t[10])]):{};if(o!==(o=t[3][t[9]]||t[9])){if(e){Gl();var c=e;Kl(c.$$.fragment,1,0,(function(){lf(c,1)})),Xl()}o?(cf((e=vl(o,a())).$$.fragment),Yl(e.$$.fragment,1),sf(e,n.parentNode,n)):e=null}else o&&e.$set(u)},i:function(t){r||(e&&Yl(e.$$.fragment,t),r=!0)},o:function(t){e&&Kl(e.$$.fragment,t),r=!1},d:function(t){t&&tl(n),e&&lf(e,t)}}}function Bm(t){var e,n;return e=new vv({props:{name:t[9],attributes:t[4](t[10]),$$slots:{default:[Wm]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};4&n&&(r.name=t[9]),4&n&&(r.attributes=t[4](t[10])),8196&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Nm(t){var e,n,r=t[10].innerHTML+"";return{c:function(){e=new pl(!1),n=ol(),e.a=n},m:function(t,i){e.m(r,t,i),Qs(t,n,i)},p:function(t,n){4&n&&r!==(r=t[10].innerHTML+"")&&e.p(r)},i:Ss,o:Ss,d:function(t){t&&tl(n),t&&e.d()}}}function Vm(t){var e,n=t[10].textContent+"";return{c:function(){e=rl(n)},m:function(t,n){Qs(t,e,n)},p:function(t,r){4&r&&n!==(n=t[10].textContent+"")&&fl(e,n)},i:Ss,o:Ss,d:function(t){t&&tl(e)}}}function Hm(t){var e,n;return e=new Gm({props:{items:t[2],discardEmptyItems:!0}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};4&n&&(r.items=t[2]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Wm(t){var e,n,r,i,o=[Hm,Vm,Nm],a=[];function u(t,e){return t[2]&&t[2].length?0:t[10].textContent?1:t[10].innerHTML?2:-1}return~(e=u(t))&&(n=a[e]=o[e](t)),{c:function(){n&&n.c(),r=il()},m:function(t,n){~e&&a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=e;(e=u(t))===c?~e&&a[e].p(t,i):(n&&(Gl(),Kl(a[c],1,1,(function(){a[c]=null})),Xl()),~e?((n=a[e])?n.p(t,i):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r)):n=null)},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){~e&&a[e].d(t),t&&tl(r)}}}function Um(t,e){var n,r,i,o,a,u,c=[Bm,jm],s=[];function l(t,e){return 4&e&&(r=null),null==r&&(r=!t[5](t[9])),r?0:1}return i=l(e,-1),o=s[i]=c[i](e),{key:t,first:null,c:function(){n=ol(),o.c(),a=ol(),this.first=n},m:function(t,e){Qs(t,n,e),s[i].m(t,e),Qs(t,a,e),u=!0},p:function(t,n){var r=i;(i=l(e=t,n))===r?s[i].p(e,n):(Gl(),Kl(s[r],1,1,(function(){s[r]=null})),Xl(),(o=s[i])?o.p(e,n):(o=s[i]=c[i](e)).c(),Yl(o,1),o.m(a.parentNode,a))},i:function(t){u||(Yl(o),u=!0)},o:function(t){Kl(o),u=!1},d:function(t){t&&tl(n),s[i].d(t),t&&tl(a)}}}function Zm(t){for(var e,n,r=[],i=new Map,o=t[2],a=function(t){return t[0]+t[1]},u=0;u<o.length;u+=1){var c=Fm(t,o,u),s=a(c);i.set(s,r[u]=Um(s,c))}return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=ol()},m:function(t,i){for(var o=0;o<r.length;o+=1)r[o].m(t,i);Qs(t,e,i),n=!0},p:function(t,n){var u=n[0];62&u&&(o=t[2],Gl(),r=rf(r,u,a,1,t,o,i,e.parentNode,nf,Um,e,Fm),Xl())},i:function(t){if(!n){for(var e=0;e<o.length;e+=1)Yl(r[e]);n=!0}},o:function(t){for(var e=0;e<r.length;e+=1)Kl(r[e]);n=!1},d:function(t){for(var n=0;n<r.length;n+=1)r[n].d(t);t&&tl(e)}}}function qm(t,e,n){var r,i,o=e.items,a=e.discardEmptyItems,u=void 0===a||a,c=e.key,s=void 0===c?"":c,l={Button:jp,Dropdown:_m,Panel:Im,Slider:Dm},f=function(t){return!ei(t)||!!l[t]},d=function t(e){if(!e)return!1;var n=e[0],r=e[2],i=e[3],o=void 0===i?[]:i;return!!f(n)||(o.some(t)||r.textContent||r.innerHTML)};return t.$$set=function(t){"items"in t&&n(6,o=t.items),"discardEmptyItems"in t&&n(7,u=t.discardEmptyItems),"key"in t&&n(0,s=t.key)},t.$$.update=function(){1&t.$$.dirty&&n(1,r=s),192&t.$$.dirty&&n(2,i=(o&&u?o.filter(d):o)||[])},[s,r,i,l,function(t){void 0===t&&(t={});var e=t;e.textContent,e.innerHTML;return fr(e,cr)},f,o,u]}var Gm=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,qm,Zm,Ps,{items:6,discardEmptyItems:7,key:0}),n}return gr(e,t),e}(df),Xm=["aspectRatio","isRotatedSideways","flip","cropSize"],Ym=Wf.map((function(t){return t[0]})).filter((function(t){return!Xm.includes(t)})),Km=function(t,e){return new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0})},Jm=function(t){return/textarea/i.test(t.nodeName)||function(t){return/date|email|number|search|text|url/.test(t.type)}(t)||t.isContentEditable},Qm=function(t,e){return(e?Od(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()},tg=function(t,e){void 0===e&&(e=xi);var n=vf(void 0),r=n.subscribe,i=n.set,o=function(t,e){var n=matchMedia(t);return n.addListener(e),e(n),{get matches(){return n.matches},destroy:function(){return n.removeListener(e)}}}(t,(function(t){var n=t.matches;return i(e(n))}));return{subscribe:r,destroy:o.destroy}},eg=function(){var t=Sr(wr().mark((function t(e){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Br,t.next=3,Yr(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ng=function(t){return/video/.test(t.type)},rg=function(t){return new Promise((function(e,n){var r=Nr("video");r.onseeked=function(){var t=Nr("canvas");xa(r).then((function(n){var i=n.width,o=n.height;t.width=i,t.height=o;var a=t.getContext("2d",{willReadFrequently:!0}),u=function(){a.drawImage(r,0,0,t.width,t.height);var n=a.getImageData(0,0,t.width,t.height);Wr(t),e(n)};ba()?setTimeout(u,16):u()}))},r.onloadeddata=function(){r.currentTime=0},r.onerror=function(t){n(r.error)},r.src=URL.createObjectURL(t),r.load()}))},ig=function(t,e,n){return new Promise((function(r,i){Sr(wr().mark((function o(){var a,u,c;return wr().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!ng(t)){o.next=6;break}return o.t0=r,o.next=4,rg(t);case 4:o.t1=o.sent,(0,o.t0)(o.t1);case 6:return o.next=8,e.read(t);case 8:if(a=o.sent,u=function(t){return li(t,n).then((function(t){return e.apply(t,a)})).then(r).catch(i)},!ai(t)&&oi()&&!ba()&&!Va()){o.next=12;break}return o.abrupt("return",u(t));case 12:return o.prev=12,o.next=15,si((function(t,e){return createImageBitmap(t).then((function(t){return e(null,t)})).catch(e)}),[t]);case 15:c=o.sent,o.next=20;break;case 18:o.prev=18,o.t2=o.catch(12);case 20:if(c&&c.width){o.next=22;break}return o.abrupt("return",u(t));case 22:return o.next=24,jr();case 24:if(o.sent){o.next=26;break}return o.abrupt("return",r(e.apply(c,a)));case 26:if(!(ch()&&a>1)){o.next=32;break}return o.t3=r,o.next=30,eg(c);case 30:return o.t4=o.sent,o.abrupt("return",(0,o.t3)(o.t4));case 32:r(c);case 33:case"end":return o.stop()}}),o,null,[[12,18]])})))()}))},og=function(t,e){return new Promise(function(){var n=Sr(wr().mark((function n(r){var i,o,a,u,c,s;return wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.width<e.width&&t.height<e.height)){n.next=2;break}return n.abrupt("return",r(t));case 2:if(i=Math.min(e.width/t.width,e.height/t.height),o=i*t.width,a=i*t.height,u=Nr("canvas",{width:o,height:a}),c=u.getContext("2d",{willReadFrequently:!0}),!Ur(t)){n.next=13;break}return n.next=10,Yr(t);case 10:n.t0=n.sent,n.next=14;break;case 13:n.t0=t;case 14:s=n.t0,c.drawImage(s,0,0,o,a),r(Br(u));case 17:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},ag=function(t){return t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((function(t,e){return t/(3===e?1:255)})):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map((function(t){return t/255})):/^#/.test(t)?function(t){var e=t.split(""),n=e[1],r=e[2],i=e[3];t=4===t.length?"#"+n+n+r+r+i+i:t;var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[o[1],o[2],o[3]].map((function(t){return parseInt(t,16)/255}))}(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map((function(t){return parseInt(t,10)})).map((function(t){return t/255})):void 0},ug=null,cg=function(){if(null===ug){var t=Nr("canvas");ug=!!Yd(t),Wr(t),t=void 0}return ug},sg=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],lg={precision:1e-4},fg={precision:.01*lg.precision},dg=function(){var t=[],e=[],n=[],r=function(){e.forEach((function(t){return t(n)}))},i=function(e){e.unsub=e.subscribe((function(i){return function(e,i){var o=t.indexOf(e);o<0||(n[o]=i,r())}(e,i)})),r()};return{get length(){return t.length},clear:function(){t.forEach((function(t){return t.unsub()})),t.length=0,n.length=0},unshift:function(e){t.unshift(e),i(e)},get:function(e){return t[e]},push:function(e){t.push(e),i(e)},remove:function(e){e.unsub();var r=t.indexOf(e);t.splice(r,1),n.splice(r,1)},forEach:function(e){return t.forEach(e)},filter:function(e){return t.filter(e)},subscribe:function(t){return e.push(t),t(n),function(){e.splice(e.indexOf(t),1)}}}},hg=function(t){return t[0]<.25&&t[1]<.25&&t[2]<.25},pg=function(t){return void 0===t&&(t={}),new Promise((function(e){var n=t.accept,r=Nr("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:void 0===n?"image/*":n});r.addEventListener("change",(function t(){var n=r.files[0];r.parentNode&&r.remove(),r.removeEventListener("change",t),e(n)})),Va()&&document.body.append(r),r.click()}))},vg=function(t){try{return t()}catch(t){}},mg=function(t){return Math.round(100*t)},gg=function(t){return Bi(t.clientX,t.clientY)},yg=function(t,e,n){var r=gg(t);return Ki(Ki(r,e),n)};function bg(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k=e.root,S=e.locale,C=e.stores,_=e.allowPan,M=void 0===_||_,E=e.allowZoom,T=void 0===E||E,I=e.enablePan,P=void 0===I||I,R=e.enableZoom,A=void 0===R||R,L=e.enableZoomControls,O=void 0===L?A:L,z=e.enableZoomInput,D=void 0===z||z,F=e.enablePanInput,j=void 0===F||F,B=e.enablePanLimit,N=void 0===B||B,V=e.panLimitGutterScalar,H=void 0===V?0:V,W=e.zoomOptions,U=void 0===W?[.25,.5,1,1.25,1.5,2,3,4,6,8,16]:W,Z=e.zoomAdjustStep,q=void 0===Z?.25:Z,G=e.zoomAdjustFactor,X=void 0===G?.1:G,Y=e.zoomAdjustWheelFactor,K=void 0===Y?1:Y,J=e.elasticity,Q=void 0===J?5:J,tt=e.imageSelectionRectCentered,et=void 0===tt?void 0:tt,nt=e.imageSelectionRectScalar,rt=void 0===nt?void 0:nt,it=e.zoomLevel,ot=void 0===it?null:it,at=e.zoomControls,ut=e.zoomMultiTouching,ct=void 0!==ut&&ut,st=C,lt=st.isAnimated,ft=st.isInteracting,dt=st.rootRect,ht=st.stageRect,pt=st.stageScalar,vt=st.imageSelectionPan,mt=st.imageSelectionZoom,gt=st.imageSelectionStageFitScalar,yt=st.imageSelectionRect,bt=st.imageSelectionStoredState,$t=st.imagePreviewUpscale;Ls(t,lt,(function(t){return n(68,x=t)})),Ls(t,ft,(function(t){return n(67,b=t)})),Ls(t,dt,(function(t){return n(65,g=t)})),Ls(t,ht,(function(t){return n(64,m=t)})),Ls(t,pt,(function(t){return n(45,$=t)})),Ls(t,vt,(function(t){return n(63,h=t)})),Ls(t,mt,(function(t){return n(42,d=t)})),Ls(t,gt,(function(t){return n(43,p=t)})),Ls(t,yt,(function(t){return n(66,y=t)})),Ls(t,bt,(function(t){return n(69,w=t)})),Ls(t,$t,(function(t){return n(44,v=t)}));var xt=!1,wt=void 0,kt=void 0,St=void 0,Ct=void 0,_t=function(t){var e=k.querySelector(".PinturaMain > .PinturaUtilMain")||k.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!e&&(!!e.contains(t.target)&&!Jm(t.target))},Mt=function(t){void 0===t&&(t={});var e=t,n=e.pan,r=void 0===n?h:n,i=e.zoom;Vs(bt,w={translation:r,zoom:void 0===i?d:i},w)},Et=function(){return h&&0===h.x&&0===h.y},Tt=function(){Vs(mt,d=void 0,d),Et()||Vs(vt,h=ji(),h),Pt.set(void 0,{hard:!0})},It=function(){Tt(),Mt()},Pt=_h(void 0,{precision:.01});Pt.subscribe((function(t){if(void 0===t)return Vs(mt,d=void 0,d),void(Et()||Vs(vt,h=ji(),h));var e=d;t<=1?Et()||Vs(vt,h=ji(),h):t<=e&&Vs(vt,h=Qi(h,.8),h),Vs(mt,d=t,d)}));var Rt,At,Lt,Ot,zt,Dt,Ft,jt,Bt=function(t){Pt.update((function(e){var n=t(e||p);return Mt({zoom:n}),n}))},Nt=function(t){t?Pt.set(t,{hard:!1===x}):(t=void 0,Pt.set(void 0,{hard:!0})),Vs(mt,d=t,d),Mt({zoom:t})},Vt=function(t,e){var n=rt*e,r=Object.assign({},et),i=1-zf(H,0,1);Do(r,n<i?n:i);var o=Object.assign({},et);Do(o,n),zo(o,t);var a=Object.assign({},o);return o.x>r.x&&(a.x=r.x),o.y>r.y&&(a.y=r.y),o.x+o.width<r.x+r.width&&(a.x=r.x+r.width-o.width),o.y+o.height<r.y+r.height&&(a.y=r.y+r.height-o.height),Ki(Oo(a),Oo(r))},Ht=function(t){var e=t.translation,n=t.zoom,r=void 0===n?1:n,i=t.elastify,o=void 0===i||i;if(wt){var a=e,u=Bi(wt.x+a.x,wt.y+a.y);if(!N)return u;var c=Vt(u,r);return o?Gp(c,u,Q):c}},Wt=function(){At=void 0,Vs(ft,b=!0,b),n(33,xt=j),Rt=!1,St=!1,wt=Object.assign({},h),kt=v?d||p:o?d||1:d||p},Ut=function(t){var e=t.detail,i=e.scalar,o=e.translation,a=e.isMultiTouching;if(wt&&(a||j)){a&&Qi(o,.5),(j||a)&&(Rt=!0),ct||n(12,ct=a);var s=r?zf(kt*i,u,c):1,l=Ht({translation:o,zoom:s,elastify:!0}),f=Ui(l);Ct=Ui(h),St=f<Ct,r&&mt.set(s),vt.set(l),At=ct&&{translation:t.detail.translation,scalar:i}}},Zt=function(t){Vs(ft,b=!1,b),n(33,xt=!1),n(12,ct=!1),St&&Ct<50&&(wt=void 0,kt=void 0,vt.set(ji()))},qt=function(t){Vs(ft,b=!1,b),n(33,xt=!1),n(12,ct=!1),Promise.resolve().then((function(){if(Rt&&wt){var e=At||t.detail,n=r?zf(kt*e.scalar,u,c):1,i=Ht({elastify:!1,translation:e.translation,zoom:n});vt.set(i)}wt=void 0,kt=void 0,j&&t.detail.isDoubleTap&&It(),Mt()}))},Gt=Date.now(),Xt=0,Yt=!1,Kt=!1,Jt=function(t){if(_t(t)&&(t.preventDefault(),t.stopPropagation(),!Kt)){clearTimeout(Lt);var e=Date.now(),n=e-Gt;Gt=e;var r=n<24;Xt=r?Xt+1:0;var i=1+-1*Yp(t)*K/(r?50:100),o=yg(t,g,m);Qt(o,i,{isZoomingFast:r})}},Qt=function(t,e,n){var r=n.isZoomingFast,i=v?d||p:o?d||1:d||p,a=i*e,s=ji(),l=h,f=v?p:o?1:p,m=Math.abs(a-f),g=a<i,b=i>f&&g||i<f&&a>i,$=Xt>=5;if(r||(Yt=!1),Xt>0&&!Yt&&(Yt=b),$&&Yt)return It(),Kt=!0,void setTimeout((function(){Kt=!1}),100);if(!$){!r&&b&&m<=.05&&(Lt=setTimeout((function(){It()}),250)),Vs(mt,d=zf(a,u,c),d);var x=Mo(y);Do(x,i),zo(x,l);var w=Oo(x),k=Mo(x);Do(k,d-i+1,t);var S=Oo(k),C=Ji(Ki(S,w),i);!function(t,e,n){t.x=e,t.y=n}(s,l.x+C.x,l.y+C.y),Vs(vt,h=g&&r?Qi(Vi(h),.85):Vt(s,i),h),Mt()}},te=function(t){return(t?"add":"remove")+"EventListener"},ee=function(t){t.preventDefault(),zt=Object.assign({},h),Ft=Mo(y),Dt=yg(t,g,m),Ot=v?d||p:o?d||1:d||p},ne=function(t){t.preventDefault(),Vs(mt,d=zf(t.scale*Ot,u,c),d);var e=Mo(Ft);Do(e,Ot),zo(e,zt);var n=Oo(e),r=Mo(e);Do(r,d-Ot+1,Dt);var i=Oo(r),o=Ji(Ki(i,n),Ot),a={x:zt.x+o.x,y:zt.y+o.y};Vs(vt,h=Vt(a,d),h)},re=function(t){t.preventDefault()},ie=function(t){k[te(t)]("wheel",Jt),Va()||(k[te(t)]("gesturestart",ee),k[te(t)]("gesturechange",ne),k[te(t)]("gestureend",re))},oe=function(t){var e=te(t);k[e]("interactionstart",Wt),k[e]("interactionupdate",Ut),k[e]("interactionrelease",Zt),k[e]("interactionend",qt)};return kl((function(){jt=Up(k,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:_t})})),Cl((function(){ie(!1),oe(!1),jt.destroy(),jt=void 0})),t.$$set=function(t){"root"in t&&n(13,k=t.root),"locale"in t&&n(14,S=t.locale),"stores"in t&&n(15,C=t.stores),"allowPan"in t&&n(16,M=t.allowPan),"allowZoom"in t&&n(17,T=t.allowZoom),"enablePan"in t&&n(18,P=t.enablePan),"enableZoom"in t&&n(19,A=t.enableZoom),"enableZoomControls"in t&&n(20,O=t.enableZoomControls),"enableZoomInput"in t&&n(21,D=t.enableZoomInput),"enablePanInput"in t&&n(22,j=t.enablePanInput),"enablePanLimit"in t&&n(23,N=t.enablePanLimit),"panLimitGutterScalar"in t&&n(24,H=t.panLimitGutterScalar),"zoomOptions"in t&&n(25,U=t.zoomOptions),"zoomAdjustStep"in t&&n(26,q=t.zoomAdjustStep),"zoomAdjustFactor"in t&&n(27,X=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&n(28,K=t.zoomAdjustWheelFactor),"elasticity"in t&&n(29,Q=t.elasticity),"imageSelectionRectCentered"in t&&n(30,et=t.imageSelectionRectCentered),"imageSelectionRectScalar"in t&&n(31,rt=t.imageSelectionRectScalar),"zoomLevel"in t&&n(32,ot=t.zoomLevel),"zoomControls"in t&&n(11,at=t.zoomControls),"zoomMultiTouching"in t&&n(12,ct=t.zoomMultiTouching)},t.$$.update=function(){var e,m;2752512&t.$$.dirty[0]&&n(35,r=T&&A&&D),327680&t.$$.dirty[0]&&n(34,i=M&&P),196608&t.$$.dirty[0]&&(M||T?(Vs(mt,d=A?w.zoom:void 0,d),Vs(vt,h=P?Vi(w.translation):Et()?h:ji(),h),Pt.set(d)):Tt()),16384&t.$$.dirty[1]&&(o=$>=1),33570816&t.$$.dirty[0]|28672&t.$$.dirty[1]&&n(39,a=[(v||$<1)&&[p,mg(p)+"%",{sublabel:S.labelZoomFit}]].concat(U.map((function(t){return[t,mg(t)+"%"]}))).filter(Boolean).map((function(t){return 1===t[0]&&(t[2]={sublabel:S.labelZoomActual}),t})).sort((function(t,e){var n=t[0]||p,r=e[0]||p;return n<r?-1:r<n?1:0}))),4352&t.$$.dirty[1]&&n(37,u=Math.min(a.reduce((function(t,e){var n=e[0];return n<t?n:t}),Number.MAX_SAFE_INTEGER),p)),256&t.$$.dirty[1]&&n(36,c=a.reduce((function(t,e){var n=e[0];return n>t?n:t}),Number.MIN_SAFE_INTEGER)),2&t.$$.dirty[1]&&null!==ot&&Nt(ot),30720&t.$$.dirty[1]&&n(41,l=d||(v||$<1?p:1)),1280&t.$$.dirty[1]&&n(38,(e=a.map((function(t){return t[0]})),m=l,s=e.findIndex((function(t){return t===m})))),1024&t.$$.dirty[1]&&n(40,f=mg(l)+"%"),202522624&t.$$.dirty[0]|3040&t.$$.dirty[1]&&n(11,at=(T||T)&&O?[["Button","zoom-out",{hideLabel:!0,label:S.labelZoomOut,icon:S.iconZoomOut,disabled:d===u,onclick:function(){return Bt((function(t){return Math.max(u,t-q)}))},onhold:function(){return Bt((function(t){return Math.max(u,t*(1-X))}))}}],["Dropdown","zoom-level",{label:f,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:s,onchange:function(t){return Nt(t.value)}}],["Button","zoom-in",{hideLabel:!0,label:S.labelZoomIn,icon:S.iconZoomIn,disabled:d===c,onclick:function(){return Bt((function(t){return Math.min(c,t+q)}))},onhold:function(){return Bt((function(t){return Math.min(c,t*(1+X))}))}}]]:[]),8192&t.$$.dirty[0]|16&t.$$.dirty[1]&&k&&ie(r),8192&t.$$.dirty[0]|8&t.$$.dirty[1]&&k&&oe(i),4202496&t.$$.dirty[0]|12&t.$$.dirty[1]&&k&&k.style.setProperty("--cursor",i&&j?xt?"grabbing":"grab":"")},[lt,ft,dt,ht,pt,vt,mt,gt,yt,bt,$t,at,ct,k,S,C,M,T,P,A,O,D,j,N,H,U,q,X,K,Q,et,rt,ot,xt,i,r,c,u,s,a,f,l,d,p,v,$]}var $g=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,bg,null,Ps,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1]),n}return gr(e,t),e}(df),xg=function(){var t=Sr(wr().mark((function t(e){var n,r;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wg(e);case 2:return n=t.sent,r=new DataView(n),t.abrupt("return",kg(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wg=function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){return e(n.result)},n.readAsArrayBuffer(t)}))},kg=function(t,e){var n=(void 0===e?{}:e).limit,r=void 0===n?1024:n,i=0;if(i+=4,1718909296!==t.getUint32(i))return 0;if(i+=4,1836069938!==t.getUint32(i))return 0;for(var o=!1,a=-1,u=i;u<r;u++){if(o||1953653099!==t.getUint32(u)||(o=!0,u+=4),o)if(64==t.getUint8(u)){a=u;break}}if(a<0)return 0;var c=t.getUint32(a-28),s=t.getUint32(a-20),l=t.getUint32(a-32),f=t.getUint32(a-16);return 65536===c&&4294901760===s?90:4294901760===l&&4294901760===f?180:4294901760===c&&65536===s?270:0},Sg=tf.window;function Cg(t){var e,n,r,i=t[41]&&_g(t),o=t[38]&&Og(t);return{c:function(){i&&i.c(),e=il(),o&&o.c(),n=ol()},m:function(t,a){i&&i.m(t,a),Qs(t,e,a),o&&o.m(t,a),Qs(t,n,a),r=!0},p:function(t,r){t[41]?i?(i.p(t,r),1024&r[1]&&Yl(i,1)):((i=_g(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[38]?o?(o.p(t,r),128&r[1]&&Yl(o,1)):((o=Og(t)).c(),Yl(o,1),o.m(n.parentNode,n)):o&&(Gl(),Kl(o,1,1,(function(){o=null})),Xl())},i:function(t){r||(Yl(i),Yl(o),r=!0)},o:function(t){Kl(i),Kl(o),r=!1},d:function(t){i&&i.d(t),t&&tl(e),o&&o.d(t),t&&tl(n)}}}function _g(t){var e,n,r,i,o,a,u=[Eg,Mg],c=[];function s(t,e){return t[39]?0:t[34]?1:-1}return~(r=s(t))&&(i=c[r]=u[r](t)),{c:function(){e=el("div"),n=el("p"),i&&i.c(),sl(n,"style",t[68]),sl(e,"class","PinturaStatus"),sl(e,"style",o="opacity: "+t[53])},m:function(t,i){Qs(t,e,i),Ys(e,n),~r&&c[r].m(n,null),a=!0},p:function(t,l){var f=r;(r=s(t))===f?~r&&c[r].p(t,l):(i&&(Gl(),Kl(c[f],1,1,(function(){c[f]=null})),Xl()),~r?((i=c[r])?i.p(t,l):(i=c[r]=u[r](t)).c(),Yl(i,1),i.m(n,null)):i=null),(!a||64&l[2])&&sl(n,"style",t[68]),(!a||4194304&l[1]&&o!==(o="opacity: "+t[53]))&&sl(e,"style",o)},i:function(t){a||(Yl(i),a=!0)},o:function(t){Kl(i),a=!1},d:function(t){t&&tl(e),~r&&c[r].d()}}}function Mg(t){var e,n,r,i;e=new rv({props:{text:t[34].text||"",onmeasure:t[199]}});var o=t[34].aside&&Tg(t);return{c:function(){cf(e.$$.fragment),n=il(),o&&o.c(),r=ol()},m:function(t,a){sf(e,t,a),Qs(t,n,a),o&&o.m(t,a),Qs(t,r,a),i=!0},p:function(t,n){var i={};8&n[1]&&(i.text=t[34].text||""),e.$set(i),t[34].aside?o?(o.p(t,n),8&n[1]&&Yl(o,1)):((o=Tg(t)).c(),Yl(o,1),o.m(r.parentNode,r)):o&&(Gl(),Kl(o,1,1,(function(){o=null})),Xl())},i:function(t){i||(Yl(e.$$.fragment,t),Yl(o),i=!0)},o:function(t){Kl(e.$$.fragment,t),Kl(o),i=!1},d:function(t){lf(e,t),t&&tl(n),o&&o.d(t),t&&tl(r)}}}function Eg(t){var e,n,r,i;return e=new rv({props:{text:t[39],onmeasure:t[199]}}),r=new sv({props:{class:"PinturaStatusIcon",offset:t[78],opacity:t[79],$$slots:{default:[Lg]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment),n=il(),cf(r.$$.fragment)},m:function(t,o){sf(e,t,o),Qs(t,n,o),sf(r,t,o),i=!0},p:function(t,n){var i={};256&n[1]&&(i.text=t[39]),e.$set(i);var o={};65536&n[2]&&(o.offset=t[78]),131072&n[2]&&(o.opacity=t[79]),8&n[0]|2&n[17]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i:function(t){i||(Yl(e.$$.fragment,t),Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(e.$$.fragment,t),Kl(r.$$.fragment,t),i=!1},d:function(t){lf(e,t),t&&tl(n),lf(r,t)}}}function Tg(t){var e,n;return e=new sv({props:{class:"PinturaStatusButton",offset:t[78],opacity:t[79],$$slots:{default:[Rg]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};65536&n[2]&&(r.offset=t[78]),131072&n[2]&&(r.opacity=t[79]),8&n[1]|2&n[17]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Ig(t){var e,n;return e=new av({props:{progress:t[34].progressIndicator.progress}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8&n[1]&&(r.progress=t[34].progressIndicator.progress),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Pg(t){for(var e,n,r=[t[34].closeButton,{hideLabel:!0}],i={},o=0;o<r.length;o+=1)i=_s(i,r[o]);return e=new jp({props:i}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=8&n[1]?of(r,[af(t[34].closeButton),r[1]]):{};e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Rg(t){var e,n,r,i=t[34].progressIndicator.visible&&Ig(t),o=t[34].closeButton&&t[34].text&&Pg(t);return{c:function(){i&&i.c(),e=il(),o&&o.c(),n=ol()},m:function(t,a){i&&i.m(t,a),Qs(t,e,a),o&&o.m(t,a),Qs(t,n,a),r=!0},p:function(t,r){t[34].progressIndicator.visible?i?(i.p(t,r),8&r[1]&&Yl(i,1)):((i=Ig(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[34].closeButton&&t[34].text?o?(o.p(t,r),8&r[1]&&Yl(o,1)):((o=Pg(t)).c(),Yl(o,1),o.m(n.parentNode,n)):o&&(Gl(),Kl(o,1,1,(function(){o=null})),Xl())},i:function(t){r||(Yl(i),Yl(o),r=!0)},o:function(t){Kl(i),Kl(o),r=!1},d:function(t){i&&i.d(t),t&&tl(e),o&&o.d(t),t&&tl(n)}}}function Ag(t){var e,n=t[3].iconSupportError+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){8&r[0]&&n!==(n=t[3].iconSupportError+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function Lg(t){var e,n;return e=new xp({props:{$$slots:{default:[Ag]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8&n[0]|2&n[17]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Og(t){var e,n,r,i,o,a,u,c,s,l,f,d,h,p,v=t[10]&&zg(t),m=t[45]&&t[44]&&Dg(t),g=[Vg,Ng],y=[];function b(t,e){return t[45]?0:1}function $(e){t[387](e)}function x(e){t[388](e)}function w(e){t[389](e)}r=b(t),i=y[r]=g[r](t),a=new Yh({props:{isAnimated:t[52],isTransparent:t[19],pixelRatio:t[56],textPixelRatio:t[6],backgroundColor:t[55],maskRect:t[57],maskOpacity:t[69]?t[69].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[81],images:t[54],interfaceImages:t[82],loadImageData:t[27],enableGrid:t[11],gridSize:t[83],gridColors:[t[84],t[85]],gridOpacity:t[86],willRequest:t[77]||t[87],willRender:t[384],didRender:t[385]}});var k={root:t[2],locale:t[3],stores:t[185],allowPan:t[89],enablePan:t[16],enablePanLimit:t[20],panLimitGutterScalar:t[21],enablePanInput:t[90],allowZoom:t[91],enableZoom:t[17],enableZoomInput:void 0!==t[18]?t[18]:t[92],enableZoomControls:t[93],zoomOptions:t[12]||t[22],zoomAdjustStep:t[13]||t[23],zoomAdjustFactor:t[14]||t[24],zoomAdjustWheelFactor:t[15]||t[25],imageSelectionRectCentered:t[94],imageSelectionRectScalar:t[95],elasticity:Zg*t[8]};return void 0!==t[0]&&(k.zoomLevel=t[0]),void 0!==t[32]&&(k.zoomControls=t[32]),void 0!==t[33]&&(k.zoomMultiTouching=t[33]),l=new $g({props:k}),Pl.push((function(){return uf(l,"zoomLevel",$)})),Pl.push((function(){return uf(l,"zoomControls",x)})),Pl.push((function(){return uf(l,"zoomMultiTouching",w)})),{c:function(){v&&v.c(),e=il(),m&&m.c(),n=il(),i.c(),o=il(),cf(a.$$.fragment),u=il(),c=el("div"),s=il(),cf(l.$$.fragment),sl(c,"class","PinturaRootPortal")},m:function(i,f){v&&v.m(i,f),Qs(i,e,f),m&&m.m(i,f),Qs(i,n,f),y[r].m(i,f),Qs(i,o,f),sf(a,i,f),Qs(i,u,f),Qs(i,c,f),t[386](c),Qs(i,s,f),sf(l,i,f),p=!0},p:function(t,u){t[10]?v?(v.p(t,u),1024&u[0]&&Yl(v,1)):((v=zg(t)).c(),Yl(v,1),v.m(e.parentNode,e)):v&&(Gl(),Kl(v,1,1,(function(){v=null})),Xl()),t[45]&&t[44]?m?(m.p(t,u),24576&u[1]&&Yl(m,1)):((m=Dg(t)).c(),Yl(m,1),m.m(n.parentNode,n)):m&&(Gl(),Kl(m,1,1,(function(){m=null})),Xl());var c=r;(r=b(t))===c?y[r].p(t,u):(Gl(),Kl(y[c],1,1,(function(){y[c]=null})),Xl(),(i=y[r])?i.p(t,u):(i=y[r]=g[r](t)).c(),Yl(i,1),i.m(o.parentNode,o));var s={};2097152&u[1]&&(s.isAnimated=t[52]),524288&u[0]&&(s.isTransparent=t[19]),33554432&u[1]&&(s.pixelRatio=t[56]),64&u[0]&&(s.textPixelRatio=t[6]),16777216&u[1]&&(s.backgroundColor=t[55]),67108864&u[1]&&(s.maskRect=t[57]),128&u[2]&&(s.maskOpacity=t[69]?t[69].maskOpacity:1),128&u[0]&&(s.maskMarkupOpacity=t[7]),32&u[0]&&(s.maskFrameOpacity=t[5]),524288&u[2]&&(s.clipAnnotationsToImage=t[81]),8388608&u[1]&&(s.images=t[54]),1048576&u[2]&&(s.interfaceImages=t[82]),134217728&u[0]&&(s.loadImageData=t[27]),2048&u[0]&&(s.enableGrid=t[11]),2097152&u[2]&&(s.gridSize=t[83]),12582912&u[2]&&(s.gridColors=[t[84],t[85]]),16777216&u[2]&&(s.gridOpacity=t[86]),33587200&u[2]&&(s.willRequest=t[77]||t[87]),512&u[0]|1507344&u[1]|67108864&u[2]&&(s.willRender=t[384]),1879048192&u[1]|3&u[2]&&(s.didRender=t[385]),a.$set(s);var p={};4&u[0]&&(p.root=t[2]),8&u[0]&&(p.locale=t[3]),134217728&u[2]&&(p.allowPan=t[89]),65536&u[0]&&(p.enablePan=t[16]),1048576&u[0]&&(p.enablePanLimit=t[20]),2097152&u[0]&&(p.panLimitGutterScalar=t[21]),268435456&u[2]&&(p.enablePanInput=t[90]),536870912&u[2]&&(p.allowZoom=t[91]),131072&u[0]&&(p.enableZoom=t[17]),262144&u[0]|1073741824&u[2]&&(p.enableZoomInput=void 0!==t[18]?t[18]:t[92]),1&u[3]&&(p.enableZoomControls=t[93]),4198400&u[0]&&(p.zoomOptions=t[12]||t[22]),8396800&u[0]&&(p.zoomAdjustStep=t[13]||t[23]),16793600&u[0]&&(p.zoomAdjustFactor=t[14]||t[24]),33587200&u[0]&&(p.zoomAdjustWheelFactor=t[15]||t[25]),2&u[3]&&(p.imageSelectionRectCentered=t[94]),4&u[3]&&(p.imageSelectionRectScalar=t[95]),256&u[0]&&(p.elasticity=Zg*t[8]),!f&&1&u[0]&&(f=!0,p.zoomLevel=t[0],jl((function(){return f=!1}))),!d&&2&u[1]&&(d=!0,p.zoomControls=t[32],jl((function(){return d=!1}))),!h&&4&u[1]&&(h=!0,p.zoomMultiTouching=t[33],jl((function(){return h=!1}))),l.$set(p)},i:function(t){p||(Yl(v),Yl(m),Yl(i),Yl(a.$$.fragment,t),Yl(l.$$.fragment,t),p=!0)},o:function(t){Kl(v),Kl(m),Kl(i),Kl(a.$$.fragment,t),Kl(l.$$.fragment,t),p=!1},d:function(i){v&&v.d(i),i&&tl(e),m&&m.d(i),i&&tl(n),y[r].d(i),i&&tl(o),lf(a,i),i&&tl(u),i&&tl(c),t[386](null),i&&tl(s),lf(l,i)}}}function zg(t){var e,n,r,i,o;return n=new Gm({props:{items:t[65]}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaNav PinturaNavTools")},m:function(a,u){Qs(a,e,u),sf(n,e,null),r=!0,i||(o=[al(e,"measure",t[371]),Hs(Bh.call(null,e))],i=!0)},p:function(t,e){var r={};8&e[2]&&(r.items=t[65]),n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n),i=!1,Ts(o)}}}function Dg(t){var e,n,r;return n=new Qp({props:{elasticity:t[8]*Gg,scrollDirection:t[71]?"y":"x",$$slots:{default:[Bg]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaNav PinturaNavMain")},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,e){var r={};256&e[0]&&(r.elasticity=t[8]*Gg),512&e[2]&&(r.scrollDirection=t[71]?"y":"x"),4096&e[1]|12288&e[2]|2&e[17]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function Fg(t){var e,n=t[527].icon+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){1&r[17]&&n!==(n=t[527].icon+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function jg(t){var e,n,r,i,o,a=t[527].label+"";return e=new xp({props:{$$slots:{default:[Fg]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment),n=il(),r=el("span"),i=rl(a)},m:function(t,a){sf(e,t,a),Qs(t,n,a),Qs(t,r,a),Ys(r,i),o=!0},p:function(t,n){var r={};3&n[17]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r),(!o||1&n[17])&&a!==(a=t[527].label+"")&&fl(i,a)},i:function(t){o||(Yl(e.$$.fragment,t),o=!0)},o:function(t){Kl(e.$$.fragment,t),o=!1},d:function(t){lf(e,t),t&&tl(n),t&&tl(r)}}}function Bg(t){for(var e,n,r=[t[75],{tabs:t[74]}],i={$$slots:{default:[jg,function(t){return{527:t.tab}},function(t){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.tab?1:0]}]},$$scope:{ctx:t}},o=0;o<r.length;o+=1)i=_s(i,r[o]);return(e=new op({props:i})).$on("select",t[372]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=12288&n[2]?of(r,[8192&n[2]&&af(t[75]),4096&n[2]&&{tabs:t[74]}]):{};3&n[17]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Ng(t){var e,n,r;function i(e){t[380](e)}var o={class:"PinturaMain",content:Object.assign({},t[46].find(t[379]),{props:t[26][t[43]]}),locale:t[3],stores:t[185]};return void 0!==t[1][t[43]]&&(o.component=t[1][t[43]]),e=new Hp({props:o}),Pl.push((function(){return uf(e,"component",i)})),e.$on("measure",t[211]),e.$on("show",t[381]),e.$on("hide",t[382]),e.$on("fade",t[383]),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i={};67108864&r[0]|36864&r[1]&&(i.content=Object.assign({},t[46].find(t[379]),{props:t[26][t[43]]})),8&r[0]&&(i.locale=t[3]),!n&&2&r[0]|4096&r[1]&&(n=!0,i.component=t[1][t[43]],jl((function(){return n=!1}))),e.$set(i)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function Vg(t){for(var e,n,r=[{class:"PinturaMain"},{visible:t[58]},t[75],{panels:t[73]}],i={$$slots:{default:[Hg,function(t){return{525:t.panel,526:t.panelIsActive}},function(t){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t.panel?536870912:0)|(t.panelIsActive?1073741824:0)]}]},$$scope:{ctx:t}},o=0;o<r.length;o+=1)i=_s(i,r[o]);return(e=new gp({props:i})).$on("measure",t[378]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=134217728&n[1]|10240&n[2]?of(r,[r[0],134217728&n[1]&&{visible:t[58]},8192&n[2]&&af(t[75]),2048&n[2]&&{panels:t[73]}]):{};67108874&n[0]|134250560&n[1]|1610612736&n[16]|2&n[17]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Hg(t){var e,n,r;function i(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[373].apply(e,[t[525]].concat(r))}function o(e){t[374](e,t[525])}var a={content:Object.assign({},t[46].find(i),{props:t[26][t[525]]}),locale:t[3],isActive:t[526],stores:t[185]};return void 0!==t[1][t[525]]&&(a.component=t[1][t[525]]),e=new Hp({props:a}),Pl.push((function(){return uf(e,"component",o)})),e.$on("measure",t[211]),e.$on("show",(function(){return t[375](t[525])})),e.$on("hide",(function(){return t[376](t[525])})),e.$on("fade",(function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[377].apply(e,[t[525]].concat(r))})),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(r,o){t=r;var a={};67108864&o[0]|32768&o[1]|536870912&o[16]&&(a.content=Object.assign({},t[46].find(i),{props:t[26][t[525]]})),8&o[0]&&(a.locale=t[3]),1073741824&o[16]&&(a.isActive=t[526]),!n&&2&o[0]|536870912&o[16]&&(n=!0,a.component=t[1][t[525]],jl((function(){return n=!1}))),e.$set(a)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function Wg(t){var e,n;return{c:function(){sl(e=el("span"),"class","PinturaEditorOverlay"),sl(e,"style",n="opacity:"+t[96])},m:function(t,n){Qs(t,e,n)},p:function(t,r){8&r[3]&&n!==(n="opacity:"+t[96])&&sl(e,"style",n)},d:function(t){t&&tl(e)}}}function Ug(t){var e,n,r,i,o;Fl(t[370]);var a=t[40]&&Cg(t),u=t[96]>0&&Wg(t);return{c:function(){e=el("div"),a&&a.c(),n=il(),u&&u.c(),sl(e,"id",t[4]),sl(e,"class",t[72]),sl(e,"data-env",t[70])},m:function(c,s){Qs(c,e,s),a&&a.m(e,null),Ys(e,n),u&&u.m(e,null),t[390](e),r=!0,i||(o=[al(Sg,"keydown",t[202]),al(Sg,"keyup",t[203]),al(Sg,"blur",t[204]),al(Sg,"paste",t[208]),al(Sg,"resize",t[370]),al(e,"ping",(function(){Is(t[64])&&t[64].apply(this,arguments)})),al(e,"contextmenu",t[205]),al(e,"touchstart",t[200],{passive:!1}),al(e,"touchmove",(function(){Is(t[67])&&t[67].apply(this,arguments)})),al(e,"pointermove",(function(){Is(t[66])&&t[66].apply(this,arguments)})),al(e,"transitionend",t[190]),al(e,"dropfiles",t[206]),al(e,"measure",t[391]),al(e,"click",(function(){Is(t[42]?t[207]:Pr)&&(t[42]?t[207]:Pr).apply(this,arguments)})),Hs(Bh.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Hs(Nh.call(null,e)),Hs(Wh.call(null,e))],i=!0)},p:function(i,o){(t=i)[40]?a?(a.p(t,o),512&o[1]&&Yl(a,1)):((a=Cg(t)).c(),Yl(a,1),a.m(e,n)):a&&(Gl(),Kl(a,1,1,(function(){a=null})),Xl()),t[96]>0?u?u.p(t,o):((u=Wg(t)).c(),u.m(e,null)):u&&(u.d(1),u=null),(!r||16&o[0])&&sl(e,"id",t[4]),(!r||1024&o[2])&&sl(e,"class",t[72]),(!r||256&o[2])&&sl(e,"data-env",t[70])},i:function(t){r||(Yl(a),r=!0)},o:function(t){Kl(a),r=!1},d:function(n){n&&tl(e),a&&a.d(),u&&u.d(),t[390](null),i=!1,Ts(o)}}}var Zg=1,qg="stage-overlay",Gg=10;function Xg(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P,R,A,L,O,z,D,F,j,B,N,V,H,W,U,Z,q,G,X,Y,K,J,Q,tt,et,nt,rt,it,ot,at,ut,ct,st,lt,ft,dt,ht,pt,vt,mt,gt,yt,bt,$t,xt,wt,kt,St,Ct,_t,Mt,Et,Tt,It,Pt,Rt,At,Lt,Ot,zt,Dt,Ft,jt,Bt,Nt,Vt,Ht,Wt,Ut,Zt,qt,Gt,Xt,Yt,Kt,Jt,Qt,te,ee,ne,re,ie,oe,ae,ue,ce,se,le,fe,de,he,pe,ve,me,ge,ye,be,$e,xe,we,ke,Se,Ce,_e,Me,Ee,Te,Ie,Pe,Re,Ae,Le,Oe,ze,De,Fe,je,Be,Ne,Ve,He,We,Ue,Ze,qe,Ge,Xe,Ye,Ke,Je,Qe,tn,en,nn,rn,on,an,un,cn,sn,ln,fn,dn,hn,pn,vn,mn,gn,yn,bn,$n,xn,wn,kn,Sn,Cn,_n,Mn,En,Tn,In,Pn=Ss,Rn=Ss;Ls(t,Th,(function(t){return n(366,en=t)})),t.$$.on_destroy.push((function(){return Pn()})),t.$$.on_destroy.push((function(){return Rn()}));var An=_u(),Ln=_l(),On=e.class,zn=void 0===On?void 0:On,Dn=e.layout,Fn=void 0===Dn?void 0:Dn,jn=e.stores,Bn=e.locale,Nn=void 0===Bn?void 0:Bn,Vn=e.id,Hn=void 0===Vn?void 0:Vn,Wn=e.util,Un=void 0===Wn?void 0:Wn,Zn=e.utils,qn=void 0===Zn?void 0:Zn,Gn=e.animations,Xn=void 0===Gn?"auto":Gn,Yn=e.disabled,Kn=void 0!==Yn&&Yn,Jn=e.status,Qn=void 0===Jn?void 0:Jn,tr=e.previewUpscale,er=void 0!==tr&&tr,nr=e.previewPad,rr=void 0!==nr&&nr,ir=e.previewMaskOpacity,or=void 0===ir?.95:ir,ar=e.previewImageDataMaxSize,ur=void 0===ar?void 0:ar,cr=e.previewImageTextPixelRatio,sr=void 0===cr?void 0:cr,lr=e.markupMaskOpacity,fr=void 0===lr?1:lr,dr=e.zoomMaskOpacity,hr=void 0===dr?.85:dr,pr=e.elasticityMultiplier,vr=void 0===pr?10:pr,mr=e.willRevert,gr=void 0===mr?function(){return Promise.resolve(!0)}:mr,yr=e.willProcessImage,br=void 0===yr?function(){return Promise.resolve(!0)}:yr,$r=e.willRenderCanvas,xr=void 0===$r?xi:$r,wr=e.willRenderToolbar,kr=void 0===wr?xi:wr,Sr=e.willSetHistoryInitialState,Cr=void 0===Sr?xi:Sr,_r=e.enableButtonExport,Mr=void 0===_r||_r,Er=e.enableButtonRevert,Tr=void 0===Er||Er,Ir=e.enableNavigateHistory,Rr=void 0===Ir||Ir,Ar=e.enableToolbar,Lr=void 0===Ar||Ar,Or=e.enableUtils,zr=void 0===Or||Or,Dr=e.enableButtonClose,Fr=void 0!==Dr&&Dr,jr=e.enableDropImage,Nr=void 0!==jr&&jr,Vr=e.enablePasteImage,Hr=void 0!==Vr&&Vr,Ur=e.enableBrowseImage,Zr=void 0!==Ur&&Ur,qr=e.enableTransparencyGrid,Yr=void 0!==qr&&qr,Kr=e.layoutDirectionPreference,Jr=void 0===Kr?"auto":Kr,Qr=e.layoutHorizontalUtilsPreference,ti=void 0===Qr?"left":Qr,ni=e.layoutVerticalUtilsPreference,ri=void 0===ni?"bottom":ni,ii=e.layoutVerticalToolbarPreference,oi=void 0===ii?"top":ii,ai=e.layoutVerticalControlGroupsPreference,ci=void 0===ai?"bottom":ai,si=e.layoutVerticalControlTabsPreference,li=void 0===si?"bottom":si,fi=e.markupEditorZoomLevel,di=void 0===fi?null:fi,hi=e.markupEditorZoomLevels,pi=void 0===hi?void 0:hi,vi=e.markupEditorZoomAdjustStep,mi=void 0===vi?void 0:vi,gi=e.markupEditorZoomAdjustFactor,yi=void 0===gi?void 0:gi,bi=e.markupEditorZoomAdjustWheelFactor,$i=void 0===bi?void 0:bi,wi=e.markupEditorInteractionMode,ki=void 0!==wi&&wi,Si=e.muteAudio,Ci=void 0===Si||Si,_i=e.willSetMediaInitialTimeOffset,Mi=void 0===_i?function(t,e){return t*(n=e[0],(r=n[0])+.5*(n[1]-r));var n,r}:_i,Ei=e.enablePan,Ti=void 0===Ei||Ei,Ii=e.enableZoom,Pi=void 0===Ii||Ii,Ri=e.enableZoomControls,Ai=void 0===Ri||Ri,Li=e.enableZoomInput,Oi=void 0===Li?void 0:Li,Di=e.enablePanInput,Fi=void 0===Di?void 0:Di,Ni=e.enableCanvasAlpha,Vi=void 0!==Ni&&Ni,Hi=e.enablePanLimit,Wi=void 0===Hi?void 0:Hi,Ui=e.panLimitGutterScalar,Zi=void 0===Ui?void 0:Ui,qi=e.zoomPresetOptions,Gi=void 0===qi?[.25,.5,1,1.25,1.5,2,3,4,6,8,16]:qi,Yi=e.zoomAdjustStep,Ki=void 0===Yi?.25:Yi,Ji=e.zoomAdjustFactor,Qi=void 0===Ji?.1:Ji,to=e.zoomAdjustWheelFactor,eo=void 0===to?1:to,no=e.zoomLevel,ro=void 0===no?null:no,io=e.imagePreviewSrc,oo=void 0===io?void 0:io,ao=e.imageOrienter,uo=void 0===ao?{read:function(){return 1},apply:function(t){return t}}:ao,co=e.pluginComponents,so=void 0===co?void 0:co,lo=e.pluginOptions,fo=void 0===lo?{}:lo,ho=An.sub,po={},mo=e.root,go=vf(Ci);Ls(t,go,(function(t){return n(351,Me=t)}));var yo=vf({});Ls(t,yo,(function(t){return n(51,ne=t)})),Ml("redrawTrigger",yo);var bo=vf(vr);Ls(t,bo,(function(t){return n(430,fn=t)})),Ml("elasticityMultiplier",bo);var $o=[],xo=_h();Ls(t,xo,(function(t){return n(96,In=t)}));var wo,ko,So,Co=oh()||1024,_o=vo(Co,Co),Io=td(),Ro=e.imageSourceToImageData,Ao=void 0===Ro?function(t){return ei(t)?function(t){return Promise.resolve(ln&&ln(t,{resourceType:"image"})).then((function(e){if(!1!==e){var n=e||{},r=n.headers,i=n.credentials;return fetch(t,{headers:r,credentials:i}).then((function(t){if(200!==t.status)throw t.status+" ("+t.statusText+")";return t.blob()})).then((function(t){return ig(t,uo,Io)})).then((function(t){return og(t,o)}))}}))}(t):la(t)?new Promise((function(e){return e(Br(t))})):za(t)||fa(t)?ig(t,uo,Io).then((function(t){return og(t,o)})):void 0}:Ro,Oo=(So=Ym.reduce((function(t,e){return t[e]=function(t,e,n){var r=[];return{set:e,update:n,publish:function(t){r.forEach((function(e){return e(t)}))},subscribe:function(e){return r.push(e),t(e),function(){r=r.filter((function(t){return t!==e}))}}}}((function(t){if(!ko)return t();ko.stores[e].subscribe(t)()}),(function(t){ko&&ko.stores[e].set(t)}),(function(t){ko&&ko.stores[e].update(t)})),t}),{}),{update:function(t){if(ko=t,wo&&(wo.forEach((function(t){return t()})),wo=void 0),!t)return So.file.publish(void 0),void So.loadState.publish(void 0);wo=Ym.map((function(e){return t.stores[e].subscribe((function(t){So[e].publish(t)}))}))},stores:So,destroy:function(){wo&&wo.forEach((function(t){return t()}))}}),Fo=Oo.stores,jo=Fo.file,Ho=Fo.size,Wo=Fo.duration,qo=Fo.trim,Go=Fo.loadState,Ko=Fo.processState,Qo=Fo.cropAspectRatio,ea=Fo.cropLimitToImage,na=Fo.crop,ra=Fo.cropMinSize,ia=Fo.cropMaxSize,oa=Fo.cropRange,aa=Fo.cropOrigin,ua=Fo.cropRectAspectRatio,ca=Fo.rotation,sa=Fo.rotationRange,da=Fo.targetSize,ha=Fo.flipX,pa=Fo.flipY,va=Fo.backgroundColor,ma=Fo.backgroundImage,ga=Fo.colorMatrix,ya=Fo.convolutionMatrix,$a=Fo.gamma,xa=Fo.vignette,wa=Fo.noise,ka=Fo.decoration,Sa=Fo.annotation,Ca=Fo.redaction,_a=Fo.frame,Ma=Fo.state;Ls(t,jo,(function(t){return n(352,Ee=t)})),Ls(t,Ho,(function(t){return n(320,Dt=t)})),Ls(t,Wo,(function(t){return n(348,we=t)})),Ls(t,qo,(function(t){return n(429,sn=t)})),Ls(t,Go,(function(t){return n(340,de=t)})),Ls(t,Ko,(function(t){return n(339,fe=t)})),Ls(t,Qo,(function(t){return n(426,nn=t)})),Ls(t,ea,(function(t){return n(81,vn=t)})),Ls(t,na,(function(t){return n(361,Ve=t)})),Ls(t,ca,(function(t){return n(323,Bt=t)})),Ls(t,ha,(function(t){return n(322,jt=t)})),Ls(t,pa,(function(t){return n(321,Ft=t)})),Ls(t,va,(function(t){return n(330,Kt=t)})),Ls(t,ka,(function(t){return n(48,zt=t)})),Ls(t,Sa,(function(t){return n(49,Nt=t)})),Ls(t,Ca,(function(t){return n(328,Xt=t)})),Ls(t,_a,(function(t){return n(47,Ot=t)})),Ls(t,Ma,(function(t){return n(415,Ce=t)}));var Ea,Ta=function(t,e,n){return void 0===n&&(n=0),new Promise((function(r,i){if(ng(t)){(uh()?xg(t):Promise.resolve()).then((function(e){var n=document.createElement("video");n.onerror=function(){},n.playsInline=!0,n.preload="auto",n.onloadeddata=function(){n.onloadeddata=void 0,n.dataset.rotation=e,nd(n).then((function(){n.currentTime=Mi(n.duration,sn||[[0,1]]),r(n)}))},n.src=URL.createObjectURL(t),n.load()}))}else{var o,a=!1;e.cancel=function(){return a=!0};var u=Date.now();Ao(t).then((function(t){var e=Date.now()-u;clearTimeout(o),o=setTimeout((function(){a||r(t)}),Math.max(0,n-e))})).catch(i)}}))},Ia=jn,Pa=Ia.images,Ra=Ia.shapePreprocessor,Aa=Ia.imageScrambler,La=Ia.imageRedactionRendering,Oa=Ia.willRequest,Da=Ia.willRequestResource;Ls(t,Pa,(function(t){return n(369,cn=t)})),Ls(t,Ra,(function(t){return n(368,un=t)})),Ls(t,Aa,(function(t){return n(331,Jt=t)})),Ls(t,La,(function(t){return n(329,Yt=t)})),Ls(t,Oa,(function(t){return n(77,ln=t)})),Ls(t,Da,(function(t){return n(87,xn=t)}));var Fa=mf(ma,(function(t,e){if(!t)return e(void 0);Ea&&(Ea.cancel(),Ea=void 0),Ta(t,Ea={cancel:Pr}).then(e).catch((function(t){}))})),ja=Ma.subscribe((function(t){return An.pub("update",t)})),Ba=vf();Ml("ui",vf({}));var Na=vf(!0);Ls(t,Na,(function(t){return n(89,kn=t)}));var Ha=vf(!0);Ls(t,Ha,(function(t){return n(91,Cn=t)}));var Wa=vf(!0);Ls(t,Wa,(function(t){return n(367,an=t)}));var Ua=vf(!0);Ls(t,Ua,(function(t){return n(427,rn=t)}));var Za=vf(!0);Ls(t,Za,(function(t){return n(92,_n=t)}));var qa=vf();Ls(t,qa,(function(t){return n(93,Mn=t)}));var Ga=vf();Ls(t,Ga,(function(t){return n(428,on=t)}));var Xa=mf([Ga,Ua],(function(){return void 0!==on?on:rn}));Ls(t,Xa,(function(t){return n(90,Sn=t)}));var Ya=vf([0,0,0]);Ls(t,Ya,(function(t){return n(55,Re=t)}));var Ka=vf([1,1,1]);Ls(t,Ka,(function(t){return n(412,qt=t)}));var Ja=_h([1,1,1]);Ls(t,Ja,(function(t){return n(411,Zt=t)}));var Qa=vf(),tu=vf();Ls(t,tu,(function(t){return n(50,te=t)}));var eu=vf();Ls(t,eu,(function(t){return n(325,Ht=t)}));var nu=vf(Eo());Ls(t,nu,(function(t){return n(76,_e=t)}));var ru=vf(Eo());Ls(t,ru,(function(t){return n(80,pn=t)}));var iu=vf();Ls(t,iu,(function(t){return n(409,Lt=t)}));var ou=tg("(pointer: fine)",(function(t){return t?"pointer-fine":"pointer-coarse"}));Ls(t,ou,(function(t){return n(346,$e=t)}));var au=tg("(hover: hover)",(function(t){return t?"pointer-hover":"pointer-no-hover"}));Ls(t,au,(function(t){return n(345,be=t)}));var cu=vf(!1),su=vf(!1);Ls(t,su,(function(t){return n(326,Ut=t)}));var lu=pf(void 0,(function(t){var e=_h(0),n=[su.subscribe((function(t){e.set(t?1:0)})),e.subscribe(t)];return function(){return n.forEach((function(t){return t()}))}}));Ls(t,lu,(function(t){return n(410,Wt=t)}));var fu=vf();Ls(t,fu,(function(t){return n(414,me=t)}));var du,hu=vf();Ls(t,hu,(function(t){return n(52,ie=t)})),Ml("isAnimated",hu);var pu=vf(er);Ls(t,pu,(function(t){return n(349,ke=t)}));var vu=vf(!1);Ls(t,vu,(function(t){return n(420,Ze=t)})),Ml("imageIsStatic",vu);var gu=vf();Ls(t,gu,(function(t){return n(421,qe=t)}));var yu=vf();Ls(t,yu,(function(t){return n(418,We=t)}));var bu=pf(void 0,(function(t){var e=vf(void 0),n=[na.subscribe((function(){if(Ve){if(Ze)return e.set(Mo(Ve));var t=qp(Ve,We,5*vr);e.set(t)}})),e.subscribe(t)];return function(){return n.forEach((function(t){return t()}))}})),$u=vf();Ls(t,$u,(function(t){return n(417,Ne=t)}));var xu=vf();Ls(t,xu,(function(t){return n(419,Ue=t)}));var wu=vf(void 0);Ls(t,wu,(function(t){return n(424,Je=t)}));var ku=vf(ji());Ls(t,ku,(function(t){return n(425,Qe=t)}));var Su=function(t,e){if(!e||!t)return{top:0,right:0,bottom:0,left:0};var n=Jc(e,t,a),r=Kc(n,t);return{top:Math.abs(r.top),right:Math.abs(r.right),bottom:Math.abs(r.bottom),left:Math.abs(r.left)}},Cu=vf({}),Mu=mf([iu,nu,ru,Cu],(function(t,e){var n=t[0],i=t[1],o=t[2];t[3];if(!n)return e(void 0);var a=0;1!==x.length||r||"bottom"===oi||(a=o.y+o.height),e(Lo(n.x+i.x,n.y+i.y+a,n.width,n.height))})),Eu={left:0,right:0,top:0,bottom:0},Tu=vf(!1),Iu=mf([Tu,_a,Mu,su],(function(t,e){var n=t[0],r=t[1],i=t[2];t[3];if(!i)return e({left:0,right:0,top:0,bottom:0});if(n){var o=Math.min(i.width,i.height),a=Su({width:o,height:o},r);zi(Eu.top,4)===zi(a.top,4)&&zi(Eu.bottom,4)===zi(a.bottom,4)&&zi(Eu.right,4)===zi(a.right,4)&&zi(Eu.left,4)===zi(a.left,4)||(Eu=a,e(a))}}));Ls(t,Iu,(function(t){return n(359,Fe=t)}));var Pu=mf([Tu,Iu],(function(t,e){var n=t[0],r=t[1];if(!n)return e(!1);e(Object.values(r).some((function(t){return t>0})))}));Ls(t,Pu,(function(t){return n(360,je=t)}));var Ru=mf([Tu,iu,Pu,Iu],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];if(r)return n&&i?void e(Lo(r.x+o.left,r.y+o.top,r.width-o.left-o.right,r.height-o.top-o.bottom)):e(Object.assign({},r))})),Au=mf([Mu,Pu,Iu],(function(t,e){var n=t[0],r=t[1],i=t[2];return n?r?void e(Lo(n.x+i.left,n.y+i.top,n.width-i.left-i.right,n.height-i.top-i.bottom)):e(n):e(void 0)}));Ls(t,Au,(function(t){return n(324,Vt=t)}));var Lu=mf([vu,Ho,ca],(function(t,e){var n=t[0],r=t[1],i=t[2];if(!n||!r)return e(void 0);var o=To(r);e(Uo(o,i))})),Ou=mf([Lu],(function(t,e){var n=t[0];if(!n)return e(void 0);var r=Po(n);e(ta(r))}));Ls(t,Ou,(function(t){return n(362,He=t)}));var zu=mf([Au,na,Ou,pu],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];if(n&&r&&!!(!qe&&!We)){var a=i||r,u=a.width,c=a.height,s=Math.min(n.width/u,n.height/c);e(o?s:Math.min(1,s))}}));Ls(t,zu,(function(t){return n(363,Xe=t)}));var Du=mf([vu,Ho,ca,Au,iu,zu],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5];if(!(n&&o&&a&&r))return e(void 0);var c=To(r),s=ta(Do(c,u)),l=Zo(o,s);s.x=l.x,s.y=l.y,e(Uo(s,i))}));Ml("imageStaticVisualCorners",Du);var Fu=vf(void 0);Ls(t,Fu,(function(t){return n(365,tn=t)}));var ju=mf([na,Au],(function(t){var e=t[0],n=t[1];if(n&&e)return Math.min(n.width/e.width,n.height/e.height)})),Bu=mf([na,$u],(function(t){var e=t[0],n=t[1];return e&&n?Math.min(e.width/n.width,e.height/n.height):1}));Ls(t,Bu,(function(t){return n(95,Tn=t)}));var Nu=mf([Fu,Bu],(function(t){var e=t[0],n=t[1];return e&&n?n*e:1}));Ls(t,Nu,(function(t){return n(423,Ye=t)}));var Vu=vf(ji());Ls(t,Vu,(function(t){return n(364,Ke=t)}));var Hu=vf({scalar:Ye,translation:Ke}),Wu=function(){Hu.set({scalar:void 0,translation:ji()})},Uu=pf(void 0,(function(t){var e=_h(void 0,{precision:1e-4}),n=1===mv()?function(t){return Jo(t,Math.round)}:xi,r=function(){if(Ne){var t=Ut||!me;if(Ze){var r=Mo(Ne);return zo(r,Qe),zo(r,Vt),e.set(r,{hard:t})}var i=qp(Ne,Je,Zg*vr);i.width<0&&(i.width=0,i.x=Ne.x),i.height<0&&(i.height=0,i.y=Ne.y),zo(i,Vt),zo(i,Ke),Do(i,Ye),!t&&n(i),e.set(i,{hard:t})}},i=[Au.subscribe(r),$u.subscribe(r),Nu.subscribe(r),Vu.subscribe(r),_a.subscribe(r),e.subscribe(t)];return function(){return i.forEach((function(t){return t()}))}}));Ls(t,Uu,(function(t){return n(57,De=t)}));var Zu=vf(1);Ls(t,Zu,(function(t){return n(416,Be=t)}));var qu=function(){if(Ve&&Vt){var t=Bo(Mo(Ve),Xe||1),e=Zo(Vt,Bo(Mo(He),Xe));zo(t,e);var n=Lt.width/t.width,r=Lt.height/t.height,i=Math.min(1,n,r);Zu.set(i),Do(t,i),function(t,e){var n=Yo(t),r=n[0],i=n[1],o=n[2],a=n[3];r<e.y&&(t.y=Math.max(e.y,t.y)),i>e.width&&(t.x=e.width-t.width),o>e.height&&(t.y=e.height-t.height),a<e.x&&(t.x=Math.max(e.x,t.x))}(t,Object.assign({},Lt,{x:0,y:0})),$u.set(t)}},Gu=mf([Au,zu,na,Ho],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n&&(i||o)&&e(Ju(n,r||1,i||o))}));Ls(t,Gu,(function(t){return n(94,En=t)}));var Xu,Yu,Ku,Ju=function(t,e,n){return n.width<=t.width&&n.height<=t.height?Zo(t,Bo(Mo(n),e)):Xo(t,Vo(n))},tc=function(t){if(!(r&&Xu&&No(Xu,t)&&Yu===Xe)){if(Ze)return qu();Xu=t,Yu=Xe;var e=Ju(t,Xe,Ve||Dt);$u.set(e)}},ec=!1,nc=zu.subscribe((function(t){!ec&&void 0!==t&&Ve&&(tc(Vt),ec=!0)})),rc=Au.subscribe((function(t){t&&void 0!==Xe&&Ve&&tc(t)})),ic=vu.subscribe((function(t){!t&&Vt&&tc(Vt)})),oc=xu.subscribe((function(t){if(!t)return Ku=void 0,void Vs(gu,qe=void 0,qe);Ku=Ge;var e=Mo(Ve);gu.set(e)})),cc=$u.subscribe((function(t){if(t&&Ue){var e,n,r=(e=Mo(t),n=Ue,e.x-=n.x,e.y-=n.y,e.width-=n.width,e.height-=n.height,e);!function(t,e){t.x/=e,t.y/=e,t.width/=e,t.height/=e}(r,Ku);var i=function(t,e){return t.x+=e.x,t.y+=e.y,t.width+=e.width,t.height+=e.height,t}(Mo(qe),r);na.set(i)}})),sc=na.subscribe((function(t){if(t&&Ne)if(Ze)Ue||qu();else if(!(Ut||Ue||We)){var e=Vo(Ne),n=Vo(t);if(zi(e,6)!==zi(n,6)){var r=He||Ve,i=r.width,o=r.height,a=Math.min(Vt.width/i,Vt.height/o),u=vo(t.width*a,t.height*a),c=.5*(Ne.width-u.width),s=.5*(Ne.height-u.height),l=Lo(Ne.x+c,Ne.y+s,u.width,u.height);$u.set(l)}}})),lc=mf([zu,na,$u,vu],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];if(n&&r&&i){if(o)return e(Be);var a=i.width/r.width,u=i.height/r.height;e(Math.max(a,u)/n)}})),dc=mf([zu,lc],(function(t,e){var n=t[0],r=t[1];r&&e(n*r)}));Ls(t,dc,(function(t){return n(422,Ge=t)}));var hc={left:0,right:0,top:0,bottom:0},vc=mf([_a,$u],(function(t,e){var n=t[0],r=t[1];if(!r)return e(hc);var i=Su(r,n);zi(hc.top,4)===zi(i.top,4)&&zi(hc.bottom,4)===zi(i.bottom,4)&&zi(hc.right,4)===zi(i.right,4)&&zi(hc.left,4)===zi(i.left,4)||(hc=i,e(i))})),mc=mf([vc],(function(t,e){var n=t[0];e(Object.values(n).some((function(t){return t>0})))})),gc=_h(.075,{stiffness:.03,damping:.4,precision:.001}),yc=mf([Ja,Ya,gc,Uu,Nu,_a,mc,vc,Pu],(function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],s=t[6],l=t[7],f=t[8];if(!a||r)return e([]);var d=a.x,h=a.y,p=a.width,v=a.height;d+=.5,h+=.5,p-=.5,v-=.5;var m=[];if(c){if(s){var g=l.left,y=l.right,b=l.top,$=l.bottom;g*=u,y*=u,b*=u,$*=u;var x=hg(i)?[1,1,1,.125]:[0,0,0,.075];m.push({x:d-g-.5,y:h-b-.5,width:p+g+y+1,height:v+b+$+1,strokeWidth:1,strokeColor:x,opacity:f?1:.5})}var w=hg(n);c&&c.frameColor&&hg(c.frameColor)||w||(m.push({x:d-1,y:h-1,width:p+2,height:v+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}),m.push({x:d+1,y:h+1,width:p-2,height:v-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}))}e([].concat(m,[{x:d,y:h,width:p,height:v,strokeWidth:1,strokeColor:n,opacity:o}]))})),bc=vf([]);Ls(t,bc,(function(t){return n(353,Te=t)}));var $c=mf([yc,bc],(function(t,e){var n=t[0],r=t[1];e([].concat(n,r))}));Ls(t,$c,(function(t){return n(88,wn=t)}));var xc=_h(0,{precision:.001});Ls(t,xc,(function(t){return n(355,Pe=t)}));var wc=_h();Ls(t,wc,(function(t){return n(358,Oe=t)}));var kc=_h();Ls(t,kc,(function(t){return n(357,Le=t)}));var Sc=_h();Ls(t,Sc,(function(t){return n(356,Ae=t)}));var Cc=_h();Ls(t,Cc,(function(t){return n(354,Ie=t)}));var _c=vf(!1);Ls(t,_c,(function(t){return n(338,le=t)}));var Mc,Ec=vf();Ls(t,Ec,(function(t){return n(341,he=t)}));var Tc=mf([_c,Ec],(function(t,e){var r=t[0],i=t[1];if(r&&i){if(Mc&&(Mc.cancel(),n(255,Mc=void 0)),ns(i))return e(Xr(i));var o=Qc.length?0:ie?250:0;n(255,Mc={cancel:Pr}),Ta(i,Mc,o).then(e).catch((function(t){Vs(Go,de.error=t,de)})).finally((function(){n(255,Mc=void 0)}))}else e(void 0)}));Pn(),Pn=Rs(Tc,(function(t){return n(327,Gt=t)}));var Ic=function(t){we&&Gt&&(t&&Gt.paused?Gt.play().catch((function(){})):t||Gt.paused||Gt.pause())},Pc=e.imagePreviewCurrent,Rc=void 0===Pc?void 0:Pc,Ac=vf({});Ls(t,Ac,(function(t){return n(343,ge=t)}));var Lc=vf([]);Ls(t,Lc,(function(t){return n(82,mn=t)}));var Oc=mf([Au,eu,Ho,bu,$u,dc,ca,ha,pa,Nu,Vu,cu],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],d=t[10],h=t[11];if(n&&a){var p=Pd(n,r,i,o,a,f,d,u,c,s,l);!h&&y(p),e(p)}}));Ls(t,Oc,(function(t){return n(344,ye=t)}));var zc,Dc,Fc=mf([ga,ya,$a,xa,wa],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=n&&Object.keys(n).map((function(t){return n[t]})).filter(Boolean);e({gamma:i||void 0,vignette:o||void 0,noise:a||void 0,convolutionMatrix:r||void 0,colorMatrix:u&&u.length&&ws(u)})})),jc=function(){if(!Va())return!1;var t=(navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[]).map((function(t){return parseInt(t,10)||0})),e=t[1],n=t[2];return e>13||13===e&&n>=4}(),Bc=vf({});Ls(t,Bc,(function(t){return n(332,ee=t)}));var Nc=mv(),Vc=pf(Nc,(function(t){var e=function(){return t(mv())},n=matchMedia("(resolution: "+Nc+"dppx)");return n.addListener(e),function(){return n.removeListener(e)}}));Ls(t,Vc,(function(t){return n(56,ze=t)}));var Hc=function(t,e){var n=_u(),r=n.sub,i=n.pub,o=[],a=vf(0),u=[],c=function(){return u.forEach((function(t){return t({index:As(a),length:o.length})}))},s={get index(){return As(a)},set index(t){t=Number.isInteger(t)?t:0,t=zf(t,0,o.length-1),a.set(t),e(o[s.index]),c()},get state(){return o[o.length-1]},length:function(){return o.length},undo:function(){var t=s.index--;return i("undo",t),t},redo:function(){var t=s.index++;return i("redo",s.index),t},revert:function(){o.length=1,s.index=0,i("revert")},write:function(n){n&&e(Object.assign({},t(),n));var r=t(),u=o[o.length-1];JSON.stringify(r)!==JSON.stringify(u)&&(o.length=s.index+1,o.push(r),a.set(o.length-1),c(),i("writehistory"))},set:function(t){void 0===t&&(t={}),o.length=0,s.index=0;var e=Array.isArray(t)?t:[t];o.push.apply(o,e),s.index=o.length-1},get:function(){return[].concat(o)},subscribe:function(t){return u.push(t),t({index:s.index,length:o.length}),function(){return u.splice(u.indexOf(t),1)}},on:r};return s}((function(){return Ce}),(function(t){Vs(Ma,Ce=t,Ce),nu.set(_e)}));Rn(),Rn=Rs(Hc,(function(t){return n(350,Se=t)}));var Wc=function(){var t=Object.assign({x:0,y:0},Dt),e=Jo(Xo(t,Ce.cropAspectRatio),Math.round),n=Cr(Object.assign({},Ce,{rotation:0,crop:e}),Ce),r=[n];JSON.stringify(n)!==JSON.stringify(Ce)&&r.push(Object.assign({},Ce)),Hc.set(r)},Uc=Go.subscribe((function(t){t&&t.complete&&Wc()})),qc=function(){return gr().then((function(t){return t&&Hc.revert()}))},Gc=vf(!1);Ls(t,Gc,(function(t){return n(333,re=t)}));var Xc=function(){Vs(Gc,re=!0,re),br().then((function(t){var e;t?e=_s.subscribe((function(t){1===t&&(e&&e(),Ln("processImage"))})):Vs(Gc,re=!1,re)}))},Yc=Ko.subscribe((function(t){if(t){Vs(Gc,re=!0,re);var e=t.complete,n=t.abort;(e||n)&&Vs(Gc,re=!1,re)}else Vs(Gc,re=!1,re)})),Qc=dg();Ls(t,Qc,(function(t){return n(54,pe=t)}));var ts=mf([Qc],(function(t,e){var n=t[0];if(!n.length)return e();var r=n[0];e({origin:r.origin,translation:r.translation,rotation:r.rotation,scale:r.scale})})),es=vf();Ls(t,es,(function(t){return n(347,xe=t)}));var rs,is=[],os=vf(),as=vf(),us=mf([Fu,as,zu,ju],(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e||(n||r<1?i:1)})),cs=Object.assign({},jn,{imageFile:jo,imageSize:Ho,mediaDuration:Wo,mediaTrim:qo,imageBackgroundColor:va,imageBackgroundImage:ma,imageCropAspectRatio:Qo,imageCropMinSize:ra,imageCropMaxSize:ia,imageCropLimitToImage:ea,imageCropRect:na,imageCropRectOrigin:aa,imageCropRectSnapshot:gu,imageCropRectAspectRatio:ua,imageCropRange:oa,imageRotation:ca,imageRotationRange:sa,imageFlipX:ha,imageFlipY:pa,imageOutputSize:da,imageColorMatrix:ga,imageConvolutionMatrix:ya,imageGamma:$a,imageVignette:xa,imageNoise:wa,imageDecoration:ka,imageAnnotation:Sa,imageRedaction:Ca,imageFrame:_a,imagePreview:Tc,imagePreviewSource:Ec,imageTransforms:Oc,imagePreviewModifiers:Ac,history:Hc,animation:fu,pixelRatio:Vc,elasticityMultiplier:vr,scrollElasticity:Gg,rangeInputElasticity:5,redrawTrigger:yo,pointerAccuracy:ou,pointerHoverable:au,env:Bc,rootRect:eu,stageRect:Au,stageRectBase:Mu,stageRecenter:Cu,stageScalar:zu,stagePadding:Iu,stagePadded:Pu,presentationScalar:dc,imagePreviewUpscale:as,utilRect:iu,utilRectPadded:Ru,allowPan:Na,allowZoom:Ha,allowZoomControls:Wa,enableZoomInput:Za,enablePanInput:Ua,enablePanInputStatus:Xa,imageSelectionMultiTouching:os,rootBackgroundColor:Ya,rootForegroundColor:Ka,rootLineColor:Ja,rootColorSecondary:Qa,imageOutlineOpacity:gc,utilTools:es,imageSelectionPan:Vu,imageSelectionZoom:Fu,imageSelectionZoomCurrent:us,imageSelectionStageFitScalar:ju,imageSelectionStoredState:Hu,muteAudioStore:go,imageOverlayMarkup:bc,interfaceImages:Lc,isInteracting:su,isTransformingImage:cu,isInteractingFraction:lu,imageCropRectIntent:yu,imageCropRectPresentation:bu,imageSelectionRect:$u,imageSelectionRectIntent:wu,imageSelectionRectPresentation:Uu,imageSelectionRectSnapshot:xu,imageScalar:lc,imageTransformsInterpolated:ts,imageEffects:Fc});delete cs.image;var ss="util-"+ui(),ls=[],fs=Va(),ds=function(t,e,n){void 0===n&&(n=!1);var r,i,o=(r=t,i=J.getPropertyValue(r),ag(i));o&&0!==o[3]&&(n||(o.length=3),e.set(o,{hard:!ie}))},hs=vf();Ls(t,hs,(function(t){return n(83,gn=t)}));var ps=vf();Ls(t,ps,(function(t){return n(84,yn=t)}));var vs=vf();Ls(t,vs,(function(t){return n(85,bn=t)}));var ms=_h(0,{damping:.9});Ls(t,ms,(function(t){return n(86,$n=t)}));var gs=function(){var t,e,n;ds("color",Ka),ds(Vi?"--color-background":"background-color",Ya),ds("outline-color",Ja),ds("--color-secondary",Qa),ds("--grid-color-even",ps,!0),ds("--grid-color-odd",vs,!0),t="--grid-size",e=hs,n=J.getPropertyValue(t),n=/^[0-9]+$/.test(n)?parseFloat(n):void 0,e.set(n,{hard:!ie})},ys=mf([Oc,Fc,va,Fa],(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e&&Object.assign({},e,n,{backgroundColor:r,backgroundImage:i})}));Ls(t,ys,(function(t){return n(342,ve=t)}));var bs,$s,xs=function(){var t=Qc.length?void 0:{resize:1.05},e=function(t,e,n){void 0===n&&(n={});var r,i=n,o=i.resize,a=void 0===o?1:o,u=i.opacity,c={opacity:[_h(void 0===u?0:u,Object.assign({},lg,{stiffness:.1})),xi],resize:[_h(a,Object.assign({},lg,{stiffness:.1})),xi],translation:[_h(void 0,lg),xi],rotation:[_h(void 0,fg),xi],origin:[_h(void 0,lg),xi],scale:[_h(void 0,fg),xi],gamma:[_h(void 0,fg),function(t){return t||1}],vignette:[_h(void 0,fg),function(t){return t||0}],colorMatrix:[_h([].concat(sg),lg),function(t){return t||[].concat(sg)}],convolutionMatrix:[vf(void 0),function(t){return t&&t.clarity||void 0}],backgroundColor:[_h(void 0,lg),function(t,e,n){if(Array.isArray(t)){if(Array.isArray(e)){var r=[].concat(t);0===e[3]?(r[3]=0,n(r)):0===r[3]&&((t=[].concat(e))[3]=0)}return t}}],backgroundImage:[vf(void 0),xi]},s=Object.entries(c).map((function(t){return[t[0],t[1][0]]})),l=s.map((function(t){return t[1]})),f=Object.entries(c).reduce((function(t,e){var n=e[0],i=e[1],o=i[0],a=i[1];return t[n]=function(t,e){return o.set(a(t,r[n],(function(t){o.set(t,{hard:!0})})),e)},t}),{}),d=mf(l,(function(n){return(r=n.reduce((function(t,e,n){return t[s[n][0]]=e,t}),{})).data=t,r.size=e,r.scale*=n[1],r}));return d.get=function(){return r},d.set=function(t,e){var n={hard:!e};Object.entries(t).forEach((function(t){var e=t[0],r=t[1];f[e]&&f[e](r,n)}))},d}(Gt,Dt,t);Qc.unshift(e),Cs(ve)},Cs=function(t){Qc.forEach((function(e,n){var r=0===n?1:0;e.set(Object.assign({},t,{opacity:r,resize:1}),me)}))},_s=Sh(void 0,{duration:500});Ls(t,_s,(function(t){return n(53,ce=t)}));var Ms,Es=vf(!1);Ls(t,Es,(function(t){return n(337,se=t)}));var Ts=_h(void 0,{stiffness:.1,damping:.7,precision:.25});Ls(t,Ts,(function(t){return n(78,dn=t)}));var Is=_h(0,{stiffness:.1,precision:.05});Ls(t,Is,(function(t){return n(79,hn=t)}));var Ps=_h(0,{stiffness:.02,damping:.5,precision:.25});Ls(t,Ps,(function(t){return n(335,ae=t)}));var Os=_h(void 0,{stiffness:.02,damping:.5,precision:.25});Ls(t,Os,(function(t){return n(336,ue=t)}));var zs,Ds=_h(void 0,{stiffness:.02,damping:.5,precision:.25});Ls(t,Ds,(function(t){return n(334,oe=t)}));var Fs=function(){Ln("abortLoadImage")},js=function(){Ln("abortProcessImage"),Vs(Gc,re=!1,re)},Bs=function(t){return t.preventDefault()},Ns=jc?function(t){var e=t.touches?t.touches[0]:t;e.pageX>20&&e.pageX<window.innerWidth-20||Bs(t)}:Pr,Hs=vf([]);Ls(t,Hs,(function(t){return n(413,Qt=t)})),Ml("keysPressed",Hs);var Ws,Us=function(t){!t||mu(t)&&!function(t){return/^image/.test(t.type)&&!/svg/.test(t.type)}(t)||!mu(t)&&!/^http/.test(t)||Ln("loadImage",t)},Zs=function(t){t&&Us(t)},qs=void 0,Gs=[],Xs=vf();Ml("rootPortal",Xs),Ml("rootRect",eu);var Ys,Ks=function(){return{foregroundColor:[].concat(qt),lineColor:[].concat(Zt),utilVisibility:Object.assign({},_),isInteracting:Ut,isInteractingFraction:Wt,rootRect:Mo(Ht),stageRect:Mo(Vt),annotationShapesDirty:sl,decorationShapesDirty:fl,frameShapesDirty:dl,blendShapesDirty:hl}},Js=function(t,e,n){return Zc(t,vo(e.width/n,e.height/n))},Qs=function(t,e,n){var r;return t._translate=Bi((r=e).x,r.y),t._scale=n,t},tl=function(t){var e=[];return t.forEach((function(t){return e.push(el(t))})),e.filter(Boolean)},el=function(t){return fc(t)?(t.points=[Bi(t.x1,t.y1),Bi(t.x2,t.y2)],t):(!function(t){return ac(t)&&!t.text.length}(t)||t.backgroundColor&&0!==t.backgroundColor[3]||(uc(t)&&(t.width=5,t.height=t.lineHeight),t.strokeWidth=1,t.strokeColor=[1,1,1,.5],t.backgroundColor=[0,0,0,.1]),t)},nl=[],rl=[],il=[],ol=[],al=[],ul={},cl=function(t,e,n,r,i,o){var u=t.annotationShapesDirty,c=t.decorationShapesDirty,s=t.frameShapesDirty,l=t.blendShapesDirty,f=t.selectionRect,d=t.scale,h=Ys!==d,p=h||!No(ul,f);p&&(Ys=d,ul=f),(u||n!==Nt)&&(nl=n.filter(pc).map(Qu).sort((function(t,e){return t.alwaysOnTop?1:e.alwaysOnTop?-1:0})).map((function(t){return Zc(t,Dt)}))),(h||ll||u||n!==Nt)&&(rl=tl(nl.map((function(t){return a(t,{flipX:jt,flipY:Ft,rotation:Bt,scale:d,context:To(Dt)})})).flat())),l&&(il=e.filter(pc).map((function(t){return Zc(t,Dt)}))),(c||r!==zt||p)&&(ol=tl(r.filter(pc).map(Qu).sort((function(t,e){return t.alwaysOnTop?1:e.alwaysOnTop?-1:0})).map((function(t){return Js(t,f,d)})).map((function(t){return a(t,{context:f})})).flat().map((function(t){return Qs(t,f,d)})))),(s||o!==Ot||p)&&(al=o?tl([o].map(Qu).map((function(t){return Js(t,f,d)})).map(a).flat().map((function(t){return Qs(t,f,d)}))):[]);var v=tl(i.filter(pc));return{blendShapesDirty:l,blendShapes:il,annotationShapesDirty:u,annotationShapes:rl,decorationShapesDirty:c,decorationShapes:ol,frameShapesDirty:s,frameShapes:al,interfaceShapes:v}},sl=!0,ll=!0,fl=!0,dl=!0,hl=!0;Cl((function(){Ic(!1),ja(),rc(),nc(),ic(),oc(),cc(),sc(),Uc(),Yc(),ou.destroy(),au.destroy(),Oo.destroy(),Qc.clear(),nl.length=0,rl.length=0,il.length=0,ol.length=0,al.length=0;try{n(213,Rc=void 0),n(256,bs=void 0)}catch(t){}}));var pl,vl;return t.$$set=function(t){"class"in t&&n(214,zn=t.class),"layout"in t&&n(215,Fn=t.layout),"stores"in t&&n(216,jn=t.stores),"locale"in t&&n(3,Nn=t.locale),"id"in t&&n(4,Hn=t.id),"util"in t&&n(217,Un=t.util),"utils"in t&&n(218,qn=t.utils),"animations"in t&&n(219,Xn=t.animations),"disabled"in t&&n(220,Kn=t.disabled),"status"in t&&n(212,Qn=t.status),"previewUpscale"in t&&n(221,er=t.previewUpscale),"previewPad"in t&&n(222,rr=t.previewPad),"previewMaskOpacity"in t&&n(5,or=t.previewMaskOpacity),"previewImageDataMaxSize"in t&&n(223,ur=t.previewImageDataMaxSize),"previewImageTextPixelRatio"in t&&n(6,sr=t.previewImageTextPixelRatio),"markupMaskOpacity"in t&&n(7,fr=t.markupMaskOpacity),"zoomMaskOpacity"in t&&n(224,hr=t.zoomMaskOpacity),"elasticityMultiplier"in t&&n(8,vr=t.elasticityMultiplier),"willRevert"in t&&n(225,gr=t.willRevert),"willProcessImage"in t&&n(226,br=t.willProcessImage),"willRenderCanvas"in t&&n(9,xr=t.willRenderCanvas),"willRenderToolbar"in t&&n(227,kr=t.willRenderToolbar),"willSetHistoryInitialState"in t&&n(228,Cr=t.willSetHistoryInitialState),"enableButtonExport"in t&&n(229,Mr=t.enableButtonExport),"enableButtonRevert"in t&&n(230,Tr=t.enableButtonRevert),"enableNavigateHistory"in t&&n(231,Rr=t.enableNavigateHistory),"enableToolbar"in t&&n(10,Lr=t.enableToolbar),"enableUtils"in t&&n(232,zr=t.enableUtils),"enableButtonClose"in t&&n(233,Fr=t.enableButtonClose),"enableDropImage"in t&&n(234,Nr=t.enableDropImage),"enablePasteImage"in t&&n(235,Hr=t.enablePasteImage),"enableBrowseImage"in t&&n(236,Zr=t.enableBrowseImage),"enableTransparencyGrid"in t&&n(11,Yr=t.enableTransparencyGrid),"layoutDirectionPreference"in t&&n(237,Jr=t.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in t&&n(238,ti=t.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in t&&n(239,ri=t.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in t&&n(240,oi=t.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in t&&n(241,ci=t.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in t&&n(242,li=t.layoutVerticalControlTabsPreference),"markupEditorZoomLevel"in t&&n(243,di=t.markupEditorZoomLevel),"markupEditorZoomLevels"in t&&n(12,pi=t.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in t&&n(13,mi=t.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in t&&n(14,yi=t.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in t&&n(15,$i=t.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in t&&n(244,ki=t.markupEditorInteractionMode),"muteAudio"in t&&n(245,Ci=t.muteAudio),"willSetMediaInitialTimeOffset"in t&&n(246,Mi=t.willSetMediaInitialTimeOffset),"enablePan"in t&&n(16,Ti=t.enablePan),"enableZoom"in t&&n(17,Pi=t.enableZoom),"enableZoomControls"in t&&n(247,Ai=t.enableZoomControls),"enableZoomInput"in t&&n(18,Oi=t.enableZoomInput),"enablePanInput"in t&&n(248,Fi=t.enablePanInput),"enableCanvasAlpha"in t&&n(19,Vi=t.enableCanvasAlpha),"enablePanLimit"in t&&n(20,Wi=t.enablePanLimit),"panLimitGutterScalar"in t&&n(21,Zi=t.panLimitGutterScalar),"zoomPresetOptions"in t&&n(22,Gi=t.zoomPresetOptions),"zoomAdjustStep"in t&&n(23,Ki=t.zoomAdjustStep),"zoomAdjustFactor"in t&&n(24,Qi=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&n(25,eo=t.zoomAdjustWheelFactor),"zoomLevel"in t&&n(0,ro=t.zoomLevel),"imagePreviewSrc"in t&&n(249,oo=t.imagePreviewSrc),"imageOrienter"in t&&n(250,uo=t.imageOrienter),"pluginComponents"in t&&n(251,so=t.pluginComponents),"pluginOptions"in t&&n(26,fo=t.pluginOptions),"root"in t&&n(2,mo=t.root),"imageSourceToImageData"in t&&n(27,Ao=t.imageSourceToImageData),"imagePreviewCurrent"in t&&n(213,Rc=t.imagePreviewCurrent)},t.$$.update=function(){if(1&t.$$.dirty[0]|67108864&t.$$.dirty[7]&&n(0,ro=null===ro?di:ro),268435456&t.$$.dirty[7]&&go.set(Ci),256&t.$$.dirty[0]&&Vs(bo,fn=vr,fn),536870912&t.$$.dirty[6]&&n(316,r="overlay"===Fn),32768&t.$$.dirty[7]|64&t.$$.dirty[10]&&n(44,i=zr&&!r),67108866&t.$$.dirty[0]&&fo&&Object.entries(fo).forEach((function(t){var e=t[0],r=t[1];Object.entries(r).forEach((function(t){var r=t[0],i=t[1];po[e]&&n(1,po[e][r]=i,po)}))})),2&t.$$.dirty[0]|8&t.$$.dirty[8]){var e=!1;so.forEach((function(t){var r=t[0];po[r]||(n(1,po[r]={},po),e=!0)})),e&&n(253,$o=[].concat(so))}var y,Rt,Lt,Ot,zt;if(8&t.$$.dirty[7]&&xo.set(Kn?1:0),64&t.$$.dirty[7]&&(o=ur?function(t,e){return vo(Math.min(t.width,e.width),Math.min(t.height,e.height))}(ur,_o):_o),268435456&t.$$.dirty[11]&&Oo.update(cn[0]),134217728&t.$$.dirty[11]&&(a=un?function(t,e){return un(t,Object.assign({flipX:void 0,flipY:void 0,rotation:void 0},e,{isPreview:!0}))}:xi),1073741824&t.$$.dirty[7]|67108864&t.$$.dirty[11]&&qa.set(an&&Ai),134217728&t.$$.dirty[7]|1&t.$$.dirty[8]&&Ga.set("pan"===ki||Fi),524288&t.$$.dirty[1]&&te&&eu.set(Lo(te.x,te.y,te.width,te.height)),1073774656&t.$$.dirty[10]&&Ht&&r&&de&&de.complete&&(y=nn,Rt=Vo(Ht),y&&y===Rt||(Qo.set(Vo(Ht)),Wc())),8&t.$$.dirty[0]|2&t.$$.dirty[7]|32&t.$$.dirty[8]&&n(306,x=Nn&&$o.length?qn||$o.map((function(t){return t[0]})):[]),134217728&t.$$.dirty[9]&&n(45,I=x.length>1),16384&t.$$.dirty[1]&&(I||nu.set(Eo())),1024&t.$$.dirty[0]&&(Lr||ru.set(Eo())),65792&t.$$.dirty[10]&&n(319,c=!Ut&&u),33554432&t.$$.dirty[11]&&n(317,s=!en),524288&t.$$.dirty[1]&&n(263,Et=te&&te.width>0&&te.height>0),32&t.$$.dirty[8]|134217728&t.$$.dirty[9]|128&t.$$.dirty[11]&&n(307,w=$o.filter((function(t){var e=t[0];return x.includes(e)})).filter((function(t){return(0,t[1].isSupported)({duration:we})})).map((function(t){return[t[0],t[1].Component]}))),268435456&t.$$.dirty[9]&&n(262,k=w.length),8&t.$$.dirty[0]|49152&t.$$.dirty[8]&&n(40,Tt=Et&&Nn&&k),512&t.$$.dirty[1]&&setTimeout((function(){return n(254,du=Tt)}),1),4&t.$$.dirty[7]|64&t.$$.dirty[8]|640&t.$$.dirty[10]&&Vs(fu,me="always"===Xn?c:"never"!==Xn&&(c&&du&&s),me),4&t.$$.dirty[7]|384&t.$$.dirty[10]&&Vs(hu,ie="always"===Xn?u:"never"!==Xn&&(u&&s),ie),16&t.$$.dirty[7]|64&t.$$.dirty[10]&&pu.set(er||r),32&t.$$.dirty[7]&&Tu.set(rr),4&t.$$.dirty[0]|20971520&t.$$.dirty[11]&&mo&&(mo.dispatchEvent(Km("markupzoom",tn)),mo.dispatchEvent(Km("zoom",uu(tn)?tn:Xe))),4&t.$$.dirty[0]|8388608&t.$$.dirty[11]&&mo&&(mo.dispatchEvent(Km("markuppan",Ke)),mo.dispatchEvent(Km("pan",Ke))),1048576&t.$$.dirty[11]&&Ve&&Wu(),2097152&t.$$.dirty[11]&&He&&qu(),1&t.$$.dirty[7]|16384&t.$$.dirty[8]|268435456&t.$$.dirty[9]&&n(43,C=Un&&"string"==typeof Un&&w.find((function(t){return t[0]===Un}))?Un:k>0?w[0][0]:void 0),2101248&t.$$.dirty[1]&&C&&gc.set(.075,{hard:!ie}),128&t.$$.dirty[7]&&n(314,l=hr),786432&t.$$.dirty[11]&&n(315,f=je?-Math.max.apply(Math,Object.values(Fe)):0),69206016&t.$$.dirty[1]|16432&t.$$.dirty[10]&&De){var Ft=De.x-Vt.x,jt=Vt.x+Vt.width-(De.x+De.width),Bt=De.y-Vt.y,Nt=Vt.y+Vt.height-(De.y+De.height),Wt=Math.min(Ft,Bt,jt,Nt);xc.set(Wt>f?0:Math.min(l,Math.abs(Wt/64)),{hard:!ie})}if(33554432&t.$$.dirty[1]&&n(313,d=.55/ze),2097152&t.$$.dirty[1]|16392&t.$$.dirty[10]&&Vt&&wc.set({x:0,y:Vt.y,width:Vt.x<64?0:Vt.x,height:Vt.height+d},{hard:!ie}),2097152&t.$$.dirty[1]|49160&t.$$.dirty[10]&&Vt&&kc.set({x:0,y:0,width:Ht.width,height:Vt.y+d},{hard:!ie}),2097152&t.$$.dirty[1]|49160&t.$$.dirty[10]&&Vt){var Zt=Vt.x+Vt.width,qt=Ht.width-(Vt.x+Vt.width);qt<64&&(Zt+=qt,qt=0),Sc.set({x:Zt,y:Vt.y,width:qt,height:Vt.height+d},{hard:!ie})}if(2097152&t.$$.dirty[1]|49152&t.$$.dirty[10]&&Vt&&Cc.set({x:0,y:Vt.y+Vt.height,width:Ht.width,height:Ht.height-(Vt.y+Vt.height)},{hard:!ie}),16777216&t.$$.dirty[1]|147456&t.$$.dirty[11]&&n(309,h=Oe&&Object.assign({id:qg,backgroundColor:Re,opacity:Pe},Oe)),16777216&t.$$.dirty[1]|81920&t.$$.dirty[11]&&n(312,p=Le&&Object.assign({id:qg,backgroundColor:Re,opacity:Pe},Le)),16777216&t.$$.dirty[1]|49152&t.$$.dirty[11]&&n(311,v=Ae&&Object.assign({id:qg,backgroundColor:Re,opacity:Pe},Ae)),16777216&t.$$.dirty[1]|24576&t.$$.dirty[11]&&n(310,m=Ie&&Object.assign({id:qg,backgroundColor:Re,opacity:Pe},Ie)),1073741824&t.$$.dirty[9]|7&t.$$.dirty[10]&&n(308,g=[p,v,m,h].filter(Boolean)),536870912&t.$$.dirty[9]|4096&t.$$.dirty[11]&&g&&Te){var Qt=Te.filter((function(t){return t.id!==qg}));bc.set([].concat(Qt,g))}if(2&t.$$.dirty[8]|2048&t.$$.dirty[11]&&Ec.set(oo||(Ee||void 0)),131072&t.$$.dirty[10]|1024&t.$$.dirty[11]&&Gt&&(Lt=Me,we&&Gt&&(Gt.muted=Lt)),4&t.$$.dirty[0]|134217728&t.$$.dirty[6]|131072&t.$$.dirty[10]&&(n(213,Rc=Gt),Gt&&mo.dispatchEvent(Km("loadpreview",Rc))),1&t.$$.dirty[11]&&he&&(Vu.set(ji()),Fu.set(void 0),Wu(),Lc.set([])),512&t.$$.dirty[11]&&n(267,b=Se.index>0),512&t.$$.dirty[11]&&n(266,$=Se.index<Se.length-1),4&t.$$.dirty[1]&&os.set(rs),256&t.$$.dirty[11]&&as.set(ke),8&t.$$.dirty[0]|402653184&t.$$.dirty[9]&&n(46,S=x.map((function(t){var e=w.find((function(e){var n=e[0];return t===n}));if(e)return{id:t,view:e[1],tabIcon:Nn[t+"Icon"],tabLabel:Nn[t+"Label"]}})).filter(Boolean)||[]),4096&t.$$.dirty[1]&&Ba.set(C),32832&t.$$.dirty[1]&&n(37,_=S.reduce((function(t,e){return t[e.id]=_&&_[e.id]||0,t}),{})),4096&t.$$.dirty[1]&&n(75,M={name:ss,selected:C}),32768&t.$$.dirty[1]&&n(74,E=S.map((function(t){return{id:t.id,icon:t.tabIcon,label:t.tabLabel}}))),32768&t.$$.dirty[1]&&n(73,T=S.map((function(t){return t.id}))),268435456&t.$$.dirty[6]&&n(72,P=Kh(["PinturaRoot","PinturaRootComponent",zn])),32768&t.$$.dirty[10]&&n(302,R=Ht&&(Ht.width>1e3?"wide":Ht.width<600?"narrow":void 0)),32768&t.$$.dirty[10]&&n(289,A=Ht&&(Ht.width<=320||Ht.height<=460)),32768&t.$$.dirty[10]&&n(301,L=Ht&&(Ht.height>1e3?"tall":Ht.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(269,O=mo&&mo.parentNode&&mo.parentNode.classList.contains("PinturaModal")),1073741824&t.$$.dirty[0]|2097152&t.$$.dirty[8]|32768&t.$$.dirty[10]&&n(294,z=O&&Ht&&zc>Ht.width),1&t.$$.dirty[1]|2097152&t.$$.dirty[8]|32768&t.$$.dirty[10]&&n(293,D=O&&Ht&&Dc>Ht.height),49152&t.$$.dirty[9]&&n(295,F=z&&D),524288&t.$$.dirty[0]&&n(292,j=Vi),8388608&t.$$.dirty[9]&&n(264,B="narrow"===R),1048576&t.$$.dirty[7]|32768&t.$$.dirty[10]&&n(303,(Ot=Ht,zt=Jr,N=Ht?"auto"===zt?Ot.width>Ot.height?"landscape":"portrait":"horizontal"===zt?Ot.width<500?"portrait":"landscape":"vertical"===zt?Ot.height<400?"landscape":"portrait":void 0:"landscape")),16777216&t.$$.dirty[9]&&n(71,V="landscape"===N),65536&t.$$.dirty[8]|4194304&t.$$.dirty[9]&&n(291,H=B||"short"===L),1073741824&t.$$.dirty[0]|32768&t.$$.dirty[10]&&n(290,W=fs&&Ht&&zc===Ht.width&&!jc),2&t.$$.dirty[1]|64&t.$$.dirty[11]&&n(265,U=[].concat(xe||[],is).filter(Boolean)),2097152&t.$$.dirty[7]&&n(300,Z="has-navigation-preference-"+ti),4194304&t.$$.dirty[7]&&n(299,q="has-navigation-preference-"+ri),8388608&t.$$.dirty[7]&&n(296,G="has-toolbar-preference-"+oi),16777216&t.$$.dirty[7]&&n(298,X="has-controlgroups-preference-"+ci),33554432&t.$$.dirty[7]&&n(297,Y="has-controltabs-preference-"+li),32768&t.$$.dirty[10]&&n(305,K=void 0!==Ht&&Ht.width>0&&Ht.height>0),4&t.$$.dirty[0]|67108864&t.$$.dirty[9]&&n(304,J=K&&mo&&getComputedStyle(mo)),33554432&t.$$.dirty[9]&&J&&gs(),1024&t.$$.dirty[0]|2121728&t.$$.dirty[1]|536870912&t.$$.dirty[6]|8&t.$$.dirty[7]|2097152&t.$$.dirty[8]|33553408&t.$$.dirty[9]|4194304&t.$$.dirty[10]|48&t.$$.dirty[11]&&Bc.set(Object.assign({},ee,{layoutMode:Fn,orientation:N,horizontalSpace:R,verticalSpace:L,navigationHorizontalPreference:Z,navigationVerticalPreference:q,controlGroupsVerticalPreference:X,controlTabsVerticalpreference:Y,toolbarVerticalPreference:G,isModal:O,isDisabled:Kn,isCentered:F,isCenteredHorizontally:z,isCenteredVertically:D,isAnimated:ie,isTransparent:j,pointerAccuracy:$e,pointerHoverable:be,isCompact:H,hasSwipeNavigation:W,hasLimitedSpace:A,hasToolbar:Lr,hasNavigation:I&&i,isIOS:fs,browserVersion:ch()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0})),4194304&t.$$.dirty[10]&&n(70,Q=Object.entries(ee).map((function(t){var e=t[0],n=t[1];return/^is|has/.test(e)?n?Qm(e):void 0:n})).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&C&&es.set([]),12&t.$$.dirty[11]&&n(69,tt=ye&&Object.entries(ge).filter((function(t){return null!=t[1]})).reduce((function(t,e){var n=e[1];return t=Object.assign({},t,n)}),{})),1073741824&t.$$.dirty[10]&&n(286,it=de&&"any-to-file"===de.task),128&t.$$.dirty[9]&&it&&Qc&&Qc.clear(),2&t.$$.dirty[11]&&n(288,et=!!ve&&!!ve.translation),256&t.$$.dirty[8]|512&t.$$.dirty[9]|131072&t.$$.dirty[10]&&et&&Gt&&Gt!==bs&&(n(256,bs=Gt),xs()),512&t.$$.dirty[9]|2&t.$$.dirty[11]&&et&&Cs(ve),8388608&t.$$.dirty[1]&&pe&&pe.length>1){var Ce=[];Qc.forEach((function(t,e){0!==e&&t.get().opacity<=0&&Ce.push(t)})),Ce.forEach((function(t){return Qc.remove(t)}))}if(8&t.$$.dirty[0]|256&t.$$.dirty[9]&&n(39,rt=Nn&&nt.length&&Nn.labelSupportError(nt)),1073741824&t.$$.dirty[10]&&n(278,ot=de&&!!de.error),1073741824&t.$$.dirty[10]&&n(42,at=!de||!de.complete&&void 0===de.task),1073741824&t.$$.dirty[10]&&n(279,ut=de&&(de.taskLengthComputable?de.taskProgress:1/0)),128&t.$$.dirty[9]&&it&&Vs(_c,le=!1,le),2097152&t.$$.dirty[1]|512&t.$$.dirty[8]|1073741824&t.$$.dirty[10]&&de&&de.complete){var _e=ie?250:0;clearTimeout($s),n(257,$s=setTimeout((function(){Vs(_c,le=!0,le)}),_e))}(2048&t.$$.dirty[1]|1073741824&t.$$.dirty[8]|1342177280&t.$$.dirty[10]&&n(283,ct=de&&!ot&&!at&&!le),128&t.$$.dirty[8]|131072&t.$$.dirty[10]|1&t.$$.dirty[11]&&n(282,st=!(!he||Gt&&!Mc)),2097152&t.$$.dirty[1]|268435456&t.$$.dirty[10])&&(le?setTimeout((function(){return ms.set(1)}),ie?500:0):ms.set(0));if(545259520&t.$$.dirty[10]&&n(277,lt=!!(re||fe&&void 0!==fe.progress&&!fe.complete)),536870912&t.$$.dirty[8]&&lt&&Ic(!1),2048&t.$$.dirty[1]|1073741824&t.$$.dirty[10]&&n(280,ft=de&&!(de.error||at)),8&t.$$.dirty[0]|1073741824&t.$$.dirty[10]&&n(281,dt=Nn&&(de?!de.complete||de.error?Od(Nn.statusLabelLoadImage(de),de.error&&de.error.metadata,"{","}"):Nn.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Nn.statusLabelLoadImage(de))),8&t.$$.dirty[0]|536870912&t.$$.dirty[10]&&n(276,ht=fe&&Nn&&Nn.statusLabelProcessImage(fe)),536870912&t.$$.dirty[10]&&n(274,pt=fe&&(fe.taskLengthComputable?fe.taskProgress:1/0)),536870912&t.$$.dirty[10]&&n(275,vt=fe&&!fe.error),536870912&t.$$.dirty[10]&&n(273,mt=!(!fe||!fe.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|67108864&t.$$.dirty[6]|2113929216&t.$$.dirty[8]|31&t.$$.dirty[9])if(Qn){var Be,Ne,We,Ue,Ze;if(ei(Qn)&&(Be=Qn),uu(Qn))Ne=Qn;else if(Array.isArray(Qn)){var qe=Qn;Be=qe[0],Ne=qe[1],Ze=qe[2],!1===Ne&&(Ue=!0),uu(Ne)&&(We=!0)}n(34,Ms=(Be||Ne)&&{text:Be,aside:Ue||We,progressIndicator:{visible:We,progress:Ne},closeButton:Ue&&{label:Nn.statusLabelButtonClose,icon:Nn.statusIconButtonClose,onclick:Ze||function(){return n(212,Qn=void 0)}}})}else n(34,Ms=Nn&&at||ot||ct||st?{text:dt,aside:ot||ft,progressIndicator:{visible:ft,progress:ut},closeButton:ot&&{label:Nn.statusLabelButtonClose,icon:Nn.statusIconButtonClose,onclick:Fs}}:Nn&&lt&&ht?{text:ht,aside:mt||vt,progressIndicator:{visible:vt,progress:pt},closeButton:mt&&{label:Nn.statusLabelButtonClose,icon:Nn.statusIconButtonClose,onclick:js}}:void 0);if(67108864&t.$$.dirty[6]&&n(285,gt=void 0!==Qn),2097152&t.$$.dirty[1]|2097152&t.$$.dirty[8]|536870912&t.$$.dirty[10]&&O&&fe&&fe.complete&&(Es.set(!0),setTimeout((function(){return Es.set(!1)}),ie?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|268435456&t.$$.dirty[10]&&le&&mo&&mo.dispatchEvent(Km("selectutil",C)),2304&t.$$.dirty[1]|1610612736&t.$$.dirty[8]|88&t.$$.dirty[9]|134217728&t.$$.dirty[10]&&n(284,yt=se||rt||at||ot||ct||st||lt||gt),32&t.$$.dirty[9]&&Vs(_s,ce=yt?1:0,ce),2097152&t.$$.dirty[1]|32&t.$$.dirty[9]&&_s.set(yt?1:0,{duration:ie?500:1}),4194304&t.$$.dirty[1]&&n(41,bt=ce>0),8&t.$$.dirty[1]&&n(272,$t=!(!Ms||!Ms.aside)),2098184&t.$$.dirty[1]|16778240&t.$$.dirty[8]|67108864&t.$$.dirty[10]&&bt&&Ms){clearTimeout(zs);var Ge={hard:!1===ie};if($t){var Ye=!!Ms.error||!ie;Is.set(1,Ge),Ts.set(ue,{hard:Ye}),n(258,zs=setTimeout((function(){Ps.set(16,Ge)}),1))}else Is.set(0,Ge),n(258,zs=setTimeout((function(){Ps.set(0,Ge)}),1))}if(1024&t.$$.dirty[1]&&(bt||(Ds.set(void 0,{hard:!0}),Ts.set(void 0,{hard:!0}),Ps.set(0,{hard:!0}))),33554432&t.$$.dirty[10]&&n(271,xt=.5*ae),8388608&t.$$.dirty[8]|16777216&t.$$.dirty[10]&&n(68,wt="transform: translateX("+(oe-xt)+"px)"),256&t.$$.dirty[1]|131072&t.$$.dirty[10]&&n(38,At=Gt&&!rt),128&t.$$.dirty[1]|6291456&t.$$.dirty[8]&&n(268,St=kt&&(At||O)?Bs:Pr),1048576&t.$$.dirty[8]&&n(67,Ct=St),1048576&t.$$.dirty[8]&&n(66,_t=St),8&t.$$.dirty[0]|1048576&t.$$.dirty[1]|95232&t.$$.dirty[7]|983040&t.$$.dirty[8]|4194304&t.$$.dirty[10]&&n(65,Mt=Nn&&ne&&vg((function(){return kr([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Fr&&["Button","close",{label:Nn.labelClose,icon:Nn.iconButtonClose,onclick:function(){return Ln("close")},hideLabel:!0}],Tr&&["Button","revert",{label:Nn.labelButtonRevert,icon:Nn.iconButtonRevert,disabled:!b,onclick:qc,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Rr&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Nn.labelButtonUndo,icon:Nn.iconButtonUndo,disabled:!b,onclick:Hc.undo,hideLabel:!0}],["Button","redo",{label:Nn.labelButtonRedo,icon:Nn.iconButtonRedo,disabled:!$,onclick:Hc.redo,hideLabel:!0}]]],U.length&&["div","plugin-tools",{class:"PinturaNavSet"},U.filter(Boolean).map((function(t){var e=t[0],n=t[1],r=t[2];return[e,n,Object.assign({},r)]}))]]],["div","gamma",{class:"PinturaNavGroup"},[Mr&&["Button","export",{label:Nn.labelButtonExport,icon:B&&Nn.iconButtonExport,class:"PinturaButtonExport",onclick:Xc,hideLabel:B}]]]],Object.assign({},ee),(function(){return yo.set({})}))}))),262144&t.$$.dirty[10]&&n(261,It=Xt&&!!Xt.length),8192&t.$$.dirty[8]|263168&t.$$.dirty[10]&&n(260,Pt=It&&ks(Dt,Xt)),12288&t.$$.dirty[8]|3276800&t.$$.dirty[10]&&It&&function(t,e,r,i){if(e){var o={dataSizeScalar:r};i&&i[3]>0&&(o.backgroundColor=[].concat(i)),e(t,o).then((function(t){qs&&Wr(qs),n(259,qs=t)}))}}(Gt,Jt,Pt,Kt),2048&t.$$.dirty[8]|787456&t.$$.dirty[10]&&Xt&&qs&&Dt){var Je=Dt,Qe=Je.width,rn=Je.height,on=ba()?"pixelated":"auto"===Yt?"auto":"pixelated";n(35,Gs=Xt.map((function(t){var e=Lo(t.x,t.y,t.width,t.height),n=Uo(Mo(e),t.rotation).map((function(t){return Bi(t.x/Qe,t.y/rn)}));return Object.assign({},t,{id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:qs,backgroundImageRendering:on,backgroundCorners:n})})))}32&t.$$.dirty[1]&&Ws&&Xs.set(Ws),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&At&&mo.dispatchEvent(Km("ready")),262144&t.$$.dirty[1]&&n(59,sl=!0),15360&t.$$.dirty[10]&&n(60,ll=!0),131072&t.$$.dirty[1]&&n(61,fl=!0),65536&t.$$.dirty[1]&&n(62,dl=!0),16&t.$$.dirty[1]&&n(63,hl=!0)},n(318,u=!Zh()),y=1===mv()?function(t){t&&(Xi(t.origin,Math.round),Xi(t.translation,Math.round))}:xi,n(287,nt=[!cg()&&"WebGL"].filter(Boolean)),n(270,kt=Va()||Gr()&&uh()),n(64,(pl=An.pub,void 0===vl&&(vl=!0),Rt=function(t){"ping"===t.type&&(vl&&t.stopPropagation(),pl(t.detail.type,t.detail.data))})),[ro,po,mo,Nn,Hn,or,sr,fr,vr,xr,Lr,Yr,pi,mi,yi,$i,Ti,Pi,Oi,Vi,Wi,Zi,Gi,Ki,Qi,eo,fo,Ao,Tc,Hc,zc,Dc,is,rs,Ms,Gs,Ws,_,At,rt,Tt,bt,at,C,i,I,S,Ot,zt,Nt,te,ne,ie,ce,pe,Re,ze,De,ls,sl,ll,fl,dl,hl,Rt,Mt,_t,Ct,wt,tt,Q,V,P,T,E,M,_e,ln,dn,hn,pn,vn,mn,gn,yn,bn,$n,xn,wn,kn,Sn,Cn,_n,Mn,En,Tn,In,go,yo,bo,xo,jo,Ho,Wo,qo,Go,Ko,Qo,ea,na,ca,ha,pa,va,ka,Sa,Ca,_a,Ma,Pa,Ra,Aa,La,Oa,Da,Na,Ha,Wa,Ua,Za,qa,Ga,Xa,Ya,Ka,Ja,tu,eu,nu,ru,iu,ou,au,su,lu,fu,hu,pu,vu,gu,yu,$u,xu,wu,ku,Iu,Pu,Au,Ou,zu,Fu,Bu,Nu,Vu,Uu,Zu,Gu,dc,bc,$c,xc,wc,kc,Sc,Cc,_c,Ec,Ac,Lc,Oc,Bc,Vc,Gc,Qc,es,cs,hs,ps,vs,ms,function(t){var e=t.target,n=t.propertyName;e===mo&&/background|outline/.test(n)&&J&&gs()},ys,_s,Es,Ts,Is,Ps,Os,Ds,function(t){var e=!(!Ms||!Ms.closeButton)||!ie;Os.set(t.detail.width,{hard:e}),Ds.set(Math.round(.5*-t.detail.width),{hard:e})},Ns,Hs,function(t){var e=t.keyCode,n=t.metaKey,r=t.ctrlKey,i=t.shiftKey;if(9===e&&Kn)t.preventDefault();else if(t.target&&32===e&&mo.contains(t.target)&&!Jm(t.target)&&t.preventDefault(),90!==e||!n&&!r){if(89===e&&r)Hc.redo();else if(229!==e&&!n&&!r){var o=new Set([].concat(Qt,[e]));Hs.set(Array.from(o))}}else i&&n?Hc.redo():Hc.undo()},function(t){var e=t.key,n=t.keyCode;if("Meta"===e)return Hs.set([]);Hs.set(Qt.filter((function(t){return t!==n})))},function(){Hs.set([])},function(t){Jm(t.target)||t.preventDefault()},function(t){Nr&&Us(t.detail.resources[0])},function(){Zr&&pg().then(Zs)},function(t){if(Hr){var e=zf((window.innerWidth-Math.abs(Ht.x))/Ht.width,0,1),n=zf((window.innerHeight-Math.abs(Ht.y))/Ht.height,0,1);e<.75&&n<.75||Us((t.clipboardData||window.clipboardData).files[0])}},Ks,cl,function(t){Lt&&No(t.detail,Lt)||Vs(iu,Lt=t.detail,Lt)},Qn,Rc,zn,Fn,jn,Un,qn,Xn,Kn,er,rr,ur,hr,gr,br,kr,Cr,Mr,Tr,Rr,zr,Fr,Nr,Hr,Zr,Jr,ti,ri,oi,ci,li,di,ki,Ci,Mi,Ai,Fi,oo,uo,so,ho,$o,du,Mc,bs,$s,zs,qs,Pt,It,k,Et,B,U,$,b,St,O,kt,xt,$t,mt,pt,vt,ht,lt,ot,ut,ft,dt,st,ct,yt,gt,it,nt,et,A,W,H,j,D,z,F,G,Y,X,q,Z,L,R,N,J,K,x,w,g,h,m,v,p,d,l,f,r,s,u,c,Dt,Ft,jt,Bt,Vt,Ht,Ut,Gt,Xt,Yt,Kt,Jt,ee,re,oe,ae,ue,se,le,fe,de,he,ve,ge,ye,be,$e,xe,we,ke,Se,Me,Ee,Te,Ie,Pe,Ae,Le,Oe,Fe,je,Ve,He,Xe,Ke,tn,en,an,un,cn,function(){n(30,zc=Sg.innerWidth),n(31,Dc=Sg.innerHeight)},function(t){return Vs(ru,pn=t.detail,pn)},function(t){var e=t.detail;return n(43,C=e)},function(t,e){return e.id===t},function(e,r){t.$$.not_equal(po[r],e)&&(po[r]=e,n(1,po),n(26,fo),n(251,so))},function(t){return n(58,ls=ls.concat(t))},function(t){return n(58,ls=ls.filter((function(e){return e!==t})))},function(t,e){var r=e.detail;return n(37,_[t]=r,_)},function(t){return Vs(nu,_e=t.detail,_e)},function(t){return t.id===C},function(e){t.$$.not_equal(po[C],e)&&(po[C]=e,n(1,po),n(26,fo),n(251,so))},function(){return n(58,ls=ls.concat(C))},function(){return n(58,ls=ls.filter((function(t){return t!==C})))},function(t){var e=t.detail;return n(37,_[C]=e,_)},function(t){var e=Object.assign({},t,Ks()),n=xr({annotationShapes:Nt,decorationShapes:zt,interfaceShapes:wn,frameShapes:Ot},e),r=n.annotationShapes,i=n.decorationShapes,o=n.interfaceShapes,a=n.frameShapes;return cl(e,Gs,r,i,o,a)},function(){n(59,sl=!1),n(60,ll=!1),n(61,fl=!1),n(62,dl=!1),n(63,hl=!1)},function(t){Pl[t?"unshift":"push"]((function(){n(36,Ws=t)}))},function(t){n(0,ro=t),n(243,di)},function(t){n(32,is=t)},function(t){n(33,rs=t)},function(t){Pl[t?"unshift":"push"]((function(){n(2,mo=t)}))},function(t){return Vs(tu,te=t.detail,te)}]}var Yg,Kg=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Xg,Ug,Ps,{class:214,layout:215,stores:216,locale:3,id:4,util:217,utils:218,animations:219,disabled:220,status:212,previewUpscale:221,previewPad:222,previewMaskOpacity:5,previewImageDataMaxSize:223,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:224,elasticityMultiplier:8,willRevert:225,willProcessImage:226,willRenderCanvas:9,willRenderToolbar:227,willSetHistoryInitialState:228,enableButtonExport:229,enableButtonRevert:230,enableNavigateHistory:231,enableToolbar:10,enableUtils:232,enableButtonClose:233,enableDropImage:234,enablePasteImage:235,enableBrowseImage:236,enableTransparencyGrid:11,layoutDirectionPreference:237,layoutHorizontalUtilsPreference:238,layoutVerticalUtilsPreference:239,layoutVerticalToolbarPreference:240,layoutVerticalControlGroupsPreference:241,layoutVerticalControlTabsPreference:242,markupEditorZoomLevel:243,markupEditorZoomLevels:12,markupEditorZoomAdjustStep:13,markupEditorZoomAdjustFactor:14,markupEditorZoomAdjustWheelFactor:15,markupEditorInteractionMode:244,muteAudio:245,willSetMediaInitialTimeOffset:246,enablePan:16,enableZoom:17,enableZoomControls:247,enableZoomInput:18,enablePanInput:248,enableCanvasAlpha:19,enablePanLimit:20,panLimitGutterScalar:21,zoomPresetOptions:22,zoomAdjustStep:23,zoomAdjustFactor:24,zoomAdjustWheelFactor:25,zoomLevel:0,imagePreviewSrc:249,imageOrienter:250,pluginComponents:251,pluginOptions:26,sub:252,pluginInterface:1,root:2,imageSourceToImageData:27,imagePreview:28,imagePreviewCurrent:213,history:29},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"class",get:function(){return this.$$.ctx[214]},set:function(t){this.$$set({class:t}),Hl()}},{key:"layout",get:function(){return this.$$.ctx[215]},set:function(t){this.$$set({layout:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[216]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"id",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({id:t}),Hl()}},{key:"util",get:function(){return this.$$.ctx[217]},set:function(t){this.$$set({util:t}),Hl()}},{key:"utils",get:function(){return this.$$.ctx[218]},set:function(t){this.$$set({utils:t}),Hl()}},{key:"animations",get:function(){return this.$$.ctx[219]},set:function(t){this.$$set({animations:t}),Hl()}},{key:"disabled",get:function(){return this.$$.ctx[220]},set:function(t){this.$$set({disabled:t}),Hl()}},{key:"status",get:function(){return this.$$.ctx[212]},set:function(t){this.$$set({status:t}),Hl()}},{key:"previewUpscale",get:function(){return this.$$.ctx[221]},set:function(t){this.$$set({previewUpscale:t}),Hl()}},{key:"previewPad",get:function(){return this.$$.ctx[222]},set:function(t){this.$$set({previewPad:t}),Hl()}},{key:"previewMaskOpacity",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({previewMaskOpacity:t}),Hl()}},{key:"previewImageDataMaxSize",get:function(){return this.$$.ctx[223]},set:function(t){this.$$set({previewImageDataMaxSize:t}),Hl()}},{key:"previewImageTextPixelRatio",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({previewImageTextPixelRatio:t}),Hl()}},{key:"markupMaskOpacity",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({markupMaskOpacity:t}),Hl()}},{key:"zoomMaskOpacity",get:function(){return this.$$.ctx[224]},set:function(t){this.$$set({zoomMaskOpacity:t}),Hl()}},{key:"elasticityMultiplier",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({elasticityMultiplier:t}),Hl()}},{key:"willRevert",get:function(){return this.$$.ctx[225]},set:function(t){this.$$set({willRevert:t}),Hl()}},{key:"willProcessImage",get:function(){return this.$$.ctx[226]},set:function(t){this.$$set({willProcessImage:t}),Hl()}},{key:"willRenderCanvas",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({willRenderCanvas:t}),Hl()}},{key:"willRenderToolbar",get:function(){return this.$$.ctx[227]},set:function(t){this.$$set({willRenderToolbar:t}),Hl()}},{key:"willSetHistoryInitialState",get:function(){return this.$$.ctx[228]},set:function(t){this.$$set({willSetHistoryInitialState:t}),Hl()}},{key:"enableButtonExport",get:function(){return this.$$.ctx[229]},set:function(t){this.$$set({enableButtonExport:t}),Hl()}},{key:"enableButtonRevert",get:function(){return this.$$.ctx[230]},set:function(t){this.$$set({enableButtonRevert:t}),Hl()}},{key:"enableNavigateHistory",get:function(){return this.$$.ctx[231]},set:function(t){this.$$set({enableNavigateHistory:t}),Hl()}},{key:"enableToolbar",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({enableToolbar:t}),Hl()}},{key:"enableUtils",get:function(){return this.$$.ctx[232]},set:function(t){this.$$set({enableUtils:t}),Hl()}},{key:"enableButtonClose",get:function(){return this.$$.ctx[233]},set:function(t){this.$$set({enableButtonClose:t}),Hl()}},{key:"enableDropImage",get:function(){return this.$$.ctx[234]},set:function(t){this.$$set({enableDropImage:t}),Hl()}},{key:"enablePasteImage",get:function(){return this.$$.ctx[235]},set:function(t){this.$$set({enablePasteImage:t}),Hl()}},{key:"enableBrowseImage",get:function(){return this.$$.ctx[236]},set:function(t){this.$$set({enableBrowseImage:t}),Hl()}},{key:"enableTransparencyGrid",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({enableTransparencyGrid:t}),Hl()}},{key:"layoutDirectionPreference",get:function(){return this.$$.ctx[237]},set:function(t){this.$$set({layoutDirectionPreference:t}),Hl()}},{key:"layoutHorizontalUtilsPreference",get:function(){return this.$$.ctx[238]},set:function(t){this.$$set({layoutHorizontalUtilsPreference:t}),Hl()}},{key:"layoutVerticalUtilsPreference",get:function(){return this.$$.ctx[239]},set:function(t){this.$$set({layoutVerticalUtilsPreference:t}),Hl()}},{key:"layoutVerticalToolbarPreference",get:function(){return this.$$.ctx[240]},set:function(t){this.$$set({layoutVerticalToolbarPreference:t}),Hl()}},{key:"layoutVerticalControlGroupsPreference",get:function(){return this.$$.ctx[241]},set:function(t){this.$$set({layoutVerticalControlGroupsPreference:t}),Hl()}},{key:"layoutVerticalControlTabsPreference",get:function(){return this.$$.ctx[242]},set:function(t){this.$$set({layoutVerticalControlTabsPreference:t}),Hl()}},{key:"markupEditorZoomLevel",get:function(){return this.$$.ctx[243]},set:function(t){this.$$set({markupEditorZoomLevel:t}),Hl()}},{key:"markupEditorZoomLevels",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({markupEditorZoomLevels:t}),Hl()}},{key:"markupEditorZoomAdjustStep",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({markupEditorZoomAdjustStep:t}),Hl()}},{key:"markupEditorZoomAdjustFactor",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({markupEditorZoomAdjustFactor:t}),Hl()}},{key:"markupEditorZoomAdjustWheelFactor",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({markupEditorZoomAdjustWheelFactor:t}),Hl()}},{key:"markupEditorInteractionMode",get:function(){return this.$$.ctx[244]},set:function(t){this.$$set({markupEditorInteractionMode:t}),Hl()}},{key:"muteAudio",get:function(){return this.$$.ctx[245]},set:function(t){this.$$set({muteAudio:t}),Hl()}},{key:"willSetMediaInitialTimeOffset",get:function(){return this.$$.ctx[246]},set:function(t){this.$$set({willSetMediaInitialTimeOffset:t}),Hl()}},{key:"enablePan",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({enablePan:t}),Hl()}},{key:"enableZoom",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({enableZoom:t}),Hl()}},{key:"enableZoomControls",get:function(){return this.$$.ctx[247]},set:function(t){this.$$set({enableZoomControls:t}),Hl()}},{key:"enableZoomInput",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({enableZoomInput:t}),Hl()}},{key:"enablePanInput",get:function(){return this.$$.ctx[248]},set:function(t){this.$$set({enablePanInput:t}),Hl()}},{key:"enableCanvasAlpha",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({enableCanvasAlpha:t}),Hl()}},{key:"enablePanLimit",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({enablePanLimit:t}),Hl()}},{key:"panLimitGutterScalar",get:function(){return this.$$.ctx[21]},set:function(t){this.$$set({panLimitGutterScalar:t}),Hl()}},{key:"zoomPresetOptions",get:function(){return this.$$.ctx[22]},set:function(t){this.$$set({zoomPresetOptions:t}),Hl()}},{key:"zoomAdjustStep",get:function(){return this.$$.ctx[23]},set:function(t){this.$$set({zoomAdjustStep:t}),Hl()}},{key:"zoomAdjustFactor",get:function(){return this.$$.ctx[24]},set:function(t){this.$$set({zoomAdjustFactor:t}),Hl()}},{key:"zoomAdjustWheelFactor",get:function(){return this.$$.ctx[25]},set:function(t){this.$$set({zoomAdjustWheelFactor:t}),Hl()}},{key:"zoomLevel",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({zoomLevel:t}),Hl()}},{key:"imagePreviewSrc",get:function(){return this.$$.ctx[249]},set:function(t){this.$$set({imagePreviewSrc:t}),Hl()}},{key:"imageOrienter",get:function(){return this.$$.ctx[250]},set:function(t){this.$$set({imageOrienter:t}),Hl()}},{key:"pluginComponents",get:function(){return this.$$.ctx[251]},set:function(t){this.$$set({pluginComponents:t}),Hl()}},{key:"pluginOptions",get:function(){return this.$$.ctx[26]},set:function(t){this.$$set({pluginOptions:t}),Hl()}},{key:"sub",get:function(){return this.$$.ctx[252]}},{key:"pluginInterface",get:function(){return this.$$.ctx[1]}},{key:"root",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({root:t}),Hl()}},{key:"imageSourceToImageData",get:function(){return this.$$.ctx[27]},set:function(t){this.$$set({imageSourceToImageData:t}),Hl()}},{key:"imagePreview",get:function(){return this.$$.ctx[28]}},{key:"imagePreviewCurrent",get:function(){return this.$$.ctx[213]},set:function(t){this.$$set({imagePreviewCurrent:t}),Hl()}},{key:"history",get:function(){return this.$$.ctx[29]}}]),e}(df),Jg=["klass","stores","isVisible","isActive","isActiveFraction","locale"],Qg=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],ty=["locale"],ey=new Set([]),ny={},ry=new Map,iy=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.filter((function(t){return!!t.util})).forEach((function(t){var e=t.util,n=e[0],r=e[1],i=e[2],o=void 0===i?function(){return!0}:i;ry.has(n)||(ry.set(n,{Component:r,isSupported:o}),yp(r).filter((function(t){return!Jg.includes(t)})).forEach((function(t){ey.add(t),ny[t]?ny[t].push(n):ny[t]=[n]})))}))},oy=[].concat(Zf,["init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol"]),ay=function(t,e,n){void 0===n&&(n={});var r=n.prefix,i=void 0===r?"pintura:":r;return oy.map((function(n){return t.on(n,(function(t){return la(e)?function(t,e,n){return t.dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}))}(e,""+i+n,t):e(n,t)}))}))},uy=function(t){return ei(t[0])},cy=function(t){return!uy(t)},sy=function(t){return t[1]},ly=function(t){return t[3]||[]};var fy=function t(e,n){return cy(n)?n.find((function(t){return sy(t)===e}))?n:n.find((function(n){return t(e,ly(n))})):t(e,ly(n))},dy={chrome:function(){return[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0]},fade:function(){return[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0]},pastel:function(){return[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0]},cold:function(){return[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0]},warm:function(){return[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0]},monoDefault:function(){return[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0]},monoWash:function(){return[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0]},monoNoir:function(){return[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0]},monoStark:function(){return[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0]},sepiaDefault:function(){return[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0]},sepiaRust:function(){return[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0]},sepiaBlues:function(){return[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0]},sepiaColor:function(){return[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]}},hy={filterFunctions:dy,filterOptions:[["Default",[[void 0,function(t){return t.labelDefault}]]],["Classic",[["chrome",function(t){return t.filterLabelChrome}],["fade",function(t){return t.filterLabelFade}],["cold",function(t){return t.filterLabelCold}],["warm",function(t){return t.filterLabelWarm}],["pastel",function(t){return t.filterLabelPastel}]]],["Monochrome",[["monoDefault",function(t){return t.filterLabelMonoDefault}],["monoNoir",function(t){return t.filterLabelMonoNoir}],["monoStark",function(t){return t.filterLabelMonoStark}],["monoWash",function(t){return t.filterLabelMonoWash}]]],["Sepia",[["sepiaDefault",function(t){return t.filterLabelSepiaDefault}],["sepiaRust",function(t){return t.filterLabelSepiaRust}],["sepiaBlues",function(t){return t.filterLabelSepiaBlues}],["sepiaColor",function(t){return t.filterLabelSepiaColor}]]]]},py={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:function(t){return mg(t<1?(t-.15)/.85-1:(t-1)/3)},getStore:function(t){return t.imageGamma}},brightness:{base:0,min:-.25,max:.25,getLabel:function(t){return mg(t/.25)},getStore:function(t){return t.imageColorMatrix},getValue:function(t){if(t.brightness)return t.brightness[4]},setValue:function(t,e){return t.update((function(t){return Object.assign({},t,{brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]})}))}},contrast:{base:1,min:.5,max:1.5,getLabel:function(t){return mg(2*(t-.5)-1)},getStore:function(t){return t.imageColorMatrix},getValue:function(t){if(t.contrast)return t.contrast[0]},setValue:function(t,e){return t.update((function(t){return Object.assign({},t,{contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]})}))}},saturation:{base:1,min:0,max:2,getLabel:function(t){return mg(t-1)},getStore:function(t){return t.imageColorMatrix},getValue:function(t){if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:function(t,e){return t.update((function(t){return Object.assign({},t,{saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]})}))}},exposure:{base:1,min:.5,max:1.5,getLabel:function(t){return mg(2*(t-.5)-1)},getStore:function(t){return t.imageColorMatrix},getValue:function(t){if(t.exposure)return t.exposure[0]},setValue:function(t,e){return t.update((function(t){return Object.assign({},t,{exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]})}))}},temperature:{base:0,min:-1,max:1,getStore:function(t){return t.imageColorMatrix},getValue:function(t){if(t.temperature){var e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15}},setValue:function(t,e){return t.update((function(t){return Object.assign({},t,{temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]})}))}},clarity:{base:0,min:-1,max:1,getStore:function(t){return t.imageConvolutionMatrix},getValue:function(t){if(t.clarity)return 0===t.clarity[0]?t.clarity[1]/-1:t.clarity[1]/-2},setValue:function(t,e){t.update((function(t){return Object.assign({},t,{clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]})}))}},vignette:{base:0,min:-1,max:1,getStore:function(t){return t.imageVignette}}},finetuneOptions:[["brightness",function(t){return t.finetuneLabelBrightness}],["contrast",function(t){return t.finetuneLabelContrast}],["saturation",function(t){return t.finetuneLabelSaturation}],["exposure",function(t){return t.finetuneLabelExposure}],["temperature",function(t){return t.finetuneLabelTemperature}],["gamma",function(t){return t.finetuneLabelGamma}],!Zh()&&["clarity",function(t){return t.finetuneLabelClarity}],["vignette",function(t){return t.finetuneLabelVignette}]].filter(Boolean)},vy={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,function(t){return t.labelNone}],["solidSharp",function(t){return t.frameLabelMatSharp}],["solidRound",function(t){return t.frameLabelMatRound}],["lineSingle",function(t){return t.frameLabelLineSingle}],["lineMultiple",function(t){return t.frameLabelLineMultiple}],["edgeCross",function(t){return t.frameLabelEdgeCross}],["edgeSeparate",function(t){return t.frameLabelEdgeSeparate}],["edgeOverlap",function(t){return t.frameLabelEdgeOverlap}],["hook",function(t){return t.frameLabelCornerHooks}],["polaroid",function(t){return t.frameLabelPolaroid}]]},my=function(t,e,n){var r=Math.max(t,e,n),i=r-Math.min(t,e,n),o=i&&(r==t?(e-n)/i:r==e?2+(n-t)/i:4+(t-e)/i);return[60*(o<0?o+6:o)/360,r&&i/r,r]},gy=function(t,e,n){var r,i,o,a=Math.floor(6*t),u=6*t-a,c=n*(1-e),s=n*(1-u*e),l=n*(1-(1-u)*e);switch(a%6){case 0:r=n,i=l,o=c;break;case 1:r=s,i=n,o=c;break;case 2:r=c,i=n,o=l;break;case 3:r=c,i=s,o=n;break;case 4:r=l,i=c,o=n;break;case 5:r=n,i=c,o=s}return[r,i,o]};function yy(t){var e,n,r;return{c:function(){e=el("div"),n=el("span"),sl(e,"class","PinturaColorPreview"),sl(e,"title",t[0]),sl(e,"style",r="--color:"+t[1])},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,n){var i=n[0];1&i&&sl(e,"title",t[0]),2&i&&r!==(r="--color:"+t[1])&&sl(e,"style",r)},i:Ss,o:Ss,d:function(t){t&&tl(e)}}}function by(t,e,n){var r,i=e.color,o=void 0===i?void 0:i,a=e.title,u=void 0===a?void 0:a;return t.$$set=function(t){"color"in t&&n(2,o=t.color),"title"in t&&n(0,u=t.title)},t.$$.update=function(){4&t.$$.dirty&&n(1,r=o?yu(o):"transparent")},[u,r,o]}var $y=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,by,yy,Ps,{color:2,title:0}),n}return gr(e,t),e}(df);function xy(t){var e,n;return{c:function(){e=el("span"),n=rl(t[0])},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){1&e[0]&&fl(n,t[0])},d:function(t){t&&tl(e)}}}function wy(t){var e,n,r,i;n=new $y({props:{color:t[4],title:Fv(t[8],t[10])}});var o=!t[9]&&xy(t);return{c:function(){e=el("span"),cf(n.$$.fragment),r=il(),o&&o.c(),sl(e,"slot","label"),sl(e,"class","PinturaButtonLabel")},m:function(t,a){Qs(t,e,a),sf(n,e,null),Ys(e,r),o&&o.m(e,null),i=!0},p:function(t,r){var i={};16&r[0]&&(i.color=t[4]),1280&r[0]&&(i.title=Fv(t[8],t[10])),n.$set(i),t[9]?o&&(o.d(1),o=null):o?o.p(t,r):((o=xy(t)).c(),o.m(e,null))},i:function(t){i||(Yl(n.$$.fragment,t),i=!0)},o:function(t){Kl(n.$$.fragment,t),i=!1},d:function(t){t&&tl(e),lf(n),o&&o.d()}}}function ky(t){var e,n,r,i,o,a,u,c,s,l,f,d,h;s=new Pp({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[19],onchange:t[24],value:t[14],min:0,max:1,step:.01}});var p=t[11]&&Sy(t);return{c:function(){e=el("div"),n=el("div"),r=el("div"),i=el("div"),c=il(),cf(s.$$.fragment),l=il(),p&&p.c(),sl(i,"role","button"),sl(i,"aria-label","Saturation slider"),sl(i,"class","PinturaPickerKnob"),sl(i,"tabindex","0"),sl(i,"style",o="background-color:"+t[18]+";"),sl(r,"class","PinturaPickerKnobController"),sl(r,"style",a="transform:translate("+t[22]+"%,"+t[21]+"%)"),sl(n,"class","PinturaSaturationPicker"),sl(n,"style",u="background-color: "+t[19]),sl(e,"class","PinturaPicker")},m:function(o,a){Qs(o,e,a),Ys(e,n),Ys(n,r),Ys(r,i),t[32](n),Ys(e,c),sf(s,e,null),Ys(e,l),p&&p.m(e,null),f=!0,d||(h=[al(i,"nudge",t[27]),Hs(wp.call(null,i,{preventDefault:!0})),al(n,"pointerdown",t[26])],d=!0)},p:function(t,c){(!f||262144&c[0]&&o!==(o="background-color:"+t[18]+";"))&&sl(i,"style",o),(!f||6291456&c[0]&&a!==(a="transform:translate("+t[22]+"%,"+t[21]+"%)"))&&sl(r,"style",a),(!f||524288&c[0]&&u!==(u="background-color: "+t[19]))&&sl(n,"style",u);var l={};524288&c[0]&&(l.knobStyle="background-color:"+t[19]),16384&c[0]&&(l.value=t[14]),s.$set(l),t[11]?p?(p.p(t,c),2048&c[0]&&Yl(p,1)):((p=Sy(t)).c(),Yl(p,1),p.m(e,null)):p&&(Gl(),Kl(p,1,1,(function(){p=null})),Xl())},i:function(t){f||(Yl(s.$$.fragment,t),Yl(p),f=!0)},o:function(t){Kl(s.$$.fragment,t),Kl(p),f=!1},d:function(n){n&&tl(e),t[32](null),lf(s),p&&p.d(),d=!1,Ts(h)}}}function Sy(t){var e,n;return e=new Pp({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[16],trackStyle:"background-image:linear-gradient(to right,"+t[17]+","+t[18]+")",onchange:t[25],value:t[15],min:0,max:1,step:.01}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};65536&n[0]&&(r.knobStyle="background-color:"+t[16]),393216&n[0]&&(r.trackStyle="background-image:linear-gradient(to right,"+t[17]+","+t[18]+")"),32768&n[0]&&(r.value=t[15]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Cy(t){var e,n;return e=new dm({props:{label:Fv(t[10].labelColorPalette,t[10]),class:Kh(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[33]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[34],$$slots:{option:[Ey,function(t){return{45:t.option}},function(t){return[0,t.option?16384:0]}],group:[_y,function(t){return{45:t.option}},function(t){return[0,t.option?16384:0]}]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};1024&n[0]&&(r.label=Fv(t[10].labelColorPalette,t[10])),512&n[0]&&(r.class=Kh(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&n[0]&&(r.name=t[1]),16&n[0]&&(r.value=t[4]),1028&n[0]&&(r.options=t[2].map(t[33])),8&n[0]&&(r.selectedIndex=t[3]),128&n[0]&&(r.optionMapper=t[7]),64&n[0]&&(r.optionLabelClass=t[6]),512&n[0]|49152&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function _y(t){var e,n,r=t[45].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"slot","group")},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){16384&e[1]&&r!==(r=t[45].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function My(t){var e,n,r=t[45].label+"";return{c:function(){e=el("span"),n=rl(r),sl(e,"class","PinturaButtonLabel")},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){16384&e[1]&&r!==(r=t[45].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function Ey(t){var e,n,r,i;n=new $y({props:{title:t[45].label,color:t[45].value}});var o=!t[9]&&My(t);return{c:function(){e=el("span"),cf(n.$$.fragment),r=il(),o&&o.c(),sl(e,"slot","option")},m:function(t,a){Qs(t,e,a),sf(n,e,null),Ys(e,r),o&&o.m(e,null),i=!0},p:function(t,r){var i={};16384&r[1]&&(i.title=t[45].label),16384&r[1]&&(i.color=t[45].value),n.$set(i),t[9]?o&&(o.d(1),o=null):o?o.p(t,r):((o=My(t)).c(),o.m(e,null))},i:function(t){i||(Yl(n.$$.fragment,t),i=!0)},o:function(t){Kl(n.$$.fragment,t),i=!1},d:function(t){t&&tl(e),lf(n),o&&o.d()}}}function Ty(t){var e,n,r,i=t[13]&&ky(t),o=t[12]&&Cy(t);return{c:function(){e=el("div"),i&&i.c(),n=il(),o&&o.c(),sl(e,"slot","details"),sl(e,"class","PinturaColorPickerPanel")},m:function(t,a){Qs(t,e,a),i&&i.m(e,null),Ys(e,n),o&&o.m(e,null),r=!0},p:function(t,r){t[13]?i?(i.p(t,r),8192&r[0]&&Yl(i,1)):((i=ky(t)).c(),Yl(i,1),i.m(e,n)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[12]?o?(o.p(t,r),4096&r[0]&&Yl(o,1)):((o=Cy(t)).c(),Yl(o,1),o.m(e,null)):o&&(Gl(),Kl(o,1,1,(function(){o=null})),Xl())},i:function(t){r||(Yl(i),Yl(o),r=!0)},o:function(t){Kl(i),Kl(o),r=!1},d:function(t){t&&tl(e),i&&i.d(),o&&o.d()}}}function Iy(t){var e,n;return e=new Pv({props:{buttonClass:Kh(["PinturaColorPickerButton",t[5]]),$$slots:{details:[Ty],label:[wy]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};32&n[0]&&(r.buttonClass=Kh(["PinturaColorPickerButton",t[5]])),8388575&n[0]|32768&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Py(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b=e.label,$=void 0===b?void 0:b,x=e.name,w=void 0===x?void 0:x,k=e.options,S=void 0===k?[]:k,C=e.selectedIndex,_=void 0===C?-1:C,M=e.value,E=void 0===M?void 0:M,T=e.buttonClass,I=void 0===T?void 0:T,P=e.optionLabelClass,R=void 0===P?void 0:P,A=e.optionMapper,L=void 0===A?void 0:A,O=e.onchange,z=void 0===O?void 0:O,D=e.title,F=void 0===D?void 0:D,j=e.hidePresetLabel,B=void 0===j||j,N=e.locale,V=void 0===N?void 0:N,H=e.enableOpacity,W=void 0===H||H,U=e.enablePresets,Z=void 0===U||U,q=e.enablePicker,G=void 0===q||q,X=function(t,e){if(s=[t[0],t[1],t[2]],e){var r=my.apply(void 0,s);n(14,o=r[0]),n(29,a=r[1]),n(30,u=r[2]),n(15,c=uu(t[3])?t[3]:1)}n(16,l=yu(t)),n(17,f=yu([].concat(s,[0]))),n(18,d=yu([].concat(s,[1]))),n(19,h=yu(gy(o,1,1)))},Y=function(){var t=gy(o,a,u),e=[].concat(t,[c]);X(e),z(e)},K=function(t){var e=3===t.length?[].concat(t,[1]):t;X(e,!0),z(e)},J=function(t,e){var r,i=zf(t.x/e.width,0,1),o=zf(t.y/e.height,0,1);r=1-o,n(29,a=i),n(30,u=r),0===c&&n(15,c=1),Y()},Q=function(t){var e=Ki(Ni(t),y);J(Yi(Vi(g),e),m)},tt=function t(e){m=void 0,document.documentElement.removeEventListener("pointermove",Q),document.documentElement.removeEventListener("pointerup",t)};return t.$$set=function(t){"label"in t&&n(0,$=t.label),"name"in t&&n(1,w=t.name),"options"in t&&n(2,S=t.options),"selectedIndex"in t&&n(3,_=t.selectedIndex),"value"in t&&n(4,E=t.value),"buttonClass"in t&&n(5,I=t.buttonClass),"optionLabelClass"in t&&n(6,R=t.optionLabelClass),"optionMapper"in t&&n(7,L=t.optionMapper),"onchange"in t&&n(28,z=t.onchange),"title"in t&&n(8,F=t.title),"hidePresetLabel"in t&&n(9,B=t.hidePresetLabel),"locale"in t&&n(10,V=t.locale),"enableOpacity"in t&&n(11,W=t.enableOpacity),"enablePresets"in t&&n(12,Z=t.enablePresets),"enablePicker"in t&&n(13,G=t.enablePicker)},t.$$.update=function(){16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(!E||p&&Bf(E,p)||(n(31,p=[].concat(E)),X(E,!0))),536870912&t.$$.dirty[0]&&n(22,r=100*a),1073741824&t.$$.dirty[0]&&n(21,i=100-100*u)},[$,w,S,_,E,I,R,L,F,B,V,W,Z,G,o,c,l,f,d,h,v,i,r,K,function(t){n(14,o=t),0===c&&n(15,c=1),Y()},function(t){n(15,c=t),Y()},function(t){t.stopPropagation(),m=vo(v.offsetWidth,v.offsetHeight),g=function(t){return Bi(t.offsetX,t.offsetY)}(t),y=Ni(t),J(g,m),document.documentElement.addEventListener("pointermove",Q),document.documentElement.addEventListener("pointerup",tt)},function(t){m=vo(v.offsetWidth,v.offsetHeight);var e=r/100*m.width,n=i/100*m.height;J({x:e+t.detail.x,y:n+t.detail.y},m)},z,a,u,p,function(t){Pl[t?"unshift":"push"]((function(){n(20,v=t)}))},function(t){var e=t[0],n=t[1];return[e,ni(n)?n(V):n]},function(t){return K(t.value)}]}var Ry=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Py,Iy,Ps,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:28,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13},null,[-1,-1]),n}return gr(e,t),e}(df),Ay=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Ly=null,Oy=function(){if(null===Ly)if(Dr())try{Ly=!1===document.fonts.check("16px TestNonExistingFont")}catch(t){Ly=!1}else Ly=!1;return Ly},zy=function(t,e){return function(n){return n[e?""+e+Ay(t):t]}},Dy=function(t){return[t,""+t]},Fy=function(t,e){return function(n){return[t[n],zy(n,e)]}},jy=[1,.2549,.2118],By="0.5%",Ny=[1,1,1,0],Vy={eraser:function(){return{eraseRadius:0}},path:function(){return{points:[]}},line:function(){return{x1:0,y1:0,x2:0,y2:0,disableErase:!1}},rectangle:function(){return{x:0,y:0,width:0,height:0}},ellipse:function(){return{x:0,y:0,rx:0,ry:0}},text:function(){return{x:0,y:0,text:"Text"}}},Hy=function(t,e,n){if(void 0===e&&(e={}),Vy[t]){var r=n||{},i=r.position,o=void 0===i?"relative":i,a=r.inputMode,u=void 0===a?"drag":a;return[Object.assign({},Vy[t](),e),{position:o,inputMode:u}]}},Wy=function(t){return Object.assign({sharpie:Hy("path",{strokeWidth:By,strokeColor:[].concat(jy),disableErase:!1,disableResize:!0,disableMove:!0}),eraser:Hy("eraser"),path:Hy("path",{pathClose:void 0,strokeWidth:By,strokeColor:[].concat(jy),backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:Hy("line",{strokeColor:[].concat(jy),strokeWidth:By}),arrow:Hy("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[].concat(jy),strokeWidth:By}),rectangle:Hy("rectangle",{strokeColor:[].concat(Ny),backgroundColor:[].concat(jy)}),ellipse:Hy("ellipse",{strokeColor:[].concat(Ny),backgroundColor:[].concat(jy)}),text:Hy("text",{color:[].concat(jy),fontSize:"2%"})},t)},Uy=function(t,e,n){return[t,e||zy(t,"shapeLabelTool"),Object.assign({icon:zy(t,"shapeIconTool")},n)]},Zy=function(t){return void 0===t&&(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"]),t.map((function(t){return ei(t)?Uy(t):Array.isArray(t)?Jr(t[1])?Uy(t[0],void 0,t[1]):Uy(t[0],t[1],t[2]):void 0})).filter(Boolean)},qy=function(t,e){var n=e||{},r=n.defaultKey,i=n.defaultValue,o=n.defaultOptions,a=[];return r&&(a[0]=[i,function(t){return t[r]},Object.assign({},o)]),[].concat(a,t)},Gy=function(t){return t.split(",").map((function(t){return t.trim()})).some((function(t){return document.fonts.check("16px "+t)}))},Xy=function(t,e){return void 0===e&&(e={}),[Ry,Object.assign({title:function(t){return t.labelColor},options:qy(t)},e)]},Yy=function(t){return void 0===t&&(t={}),[Dm,Object.assign({},t)]},Ky="PinturaFontTest",Jy=function(t,e){return void 0===e&&(e={defaultKey:"labelDefault"}),[_m,{title:function(t){return t.shapeTitleFontFamily},onload:function(t){var e=t.options,n=void 0===e?[]:e;Oy()&&n.map((function(t){return t[0]})).filter(Boolean).filter((function(t){return!Gy(t)})).forEach((function(t){var e=Ky+"-"+t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(e)||document.body.append(Nr("span",{textContent:" ",id:e,class:Ky,style:"font-family:"+t+";font-size:0;color:transparent;"}))}))},ondestroy:function(){Oy()&&document.querySelectorAll(".PinturaFontTest").forEach((function(t){return t.remove()}))},optionLabelStyle:function(t){return"font-family: "+t},options:qy(t,e),optionFilter:function(t){if(!Oy())return!0;var e=t[0];return!e||Gy(e)}}]},Qy=function(t,e){return void 0===e&&(e={}),[Ry,Object.assign({title:function(t){return t.shapeTitleBackgroundColor},options:qy(t)},e)]},tb=function(t,e){return void 0===e&&(e={}),[Ry,Object.assign({title:function(t){return t.shapeTitleStrokeColor},options:qy(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:function(t,n){var r=n.strokeWidth;(uu(r)||ei(r)?parseFloat(r):0)>0||(n.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")}},e)]},eb=function(t,e,n){return[_m,{title:function(t){return t[e]},options:qy(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}]},nb=function(t){return eb(t,"shapeTitleLineStart","transform: scaleX(-1)")},rb=function(t){return eb(t,"shapeTitleLineEnd")},ib=function(t){return[Ry,{title:function(t){return t.shapeTitleTextColor},options:qy(t)}]},ob=function(t){return[_m,{title:function(t){return t.shapeTitleFontStyle},optionLabelStyle:function(t){return t&&"font-style:"+t[0]+";font-weight:"+t[1]},options:qy(t,{defaultKey:"shapeLabelFontStyleNormal"})}]},ab=function(t,e){return e||t.find((function(t){return"4%"===t[0]}))||(e={defaultKey:"labelAuto",defaultValue:"4%"}),[_m,{title:function(t){return t.shapeTitleFontSize},options:qy(t,e)}]},ub=function(t){return[dm,{title:function(t){return t.shapeTitleTextAlign},options:qy(t)}]},cb=function(t,e){return e||t.find((function(t){return"120%"===t[0]}))||(e={defaultKey:"labelAuto",defaultValue:"120%"}),[_m,{title:function(t){return t.shapeTitleLineHeight},options:qy(t,e)}]},sb=function(t){void 0===t&&(t={});var e,n,r=t,i=r.colorOptions,o=void 0===i?(e={transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]},Object.keys(e).map(Fy(e,"shapeTitleColor"))):i,a=r.lineEndStyleOptions,u=void 0===a?function(t){return t.map((function(t){return[Qm(t),function(e){return e["shapeTitleLineDecoration"+Ay(t)]},{icon:function(e){return e["shapeIconLineDecoration"+Ay(t)]}}]}))}(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]):a,c=r.fontFamilyOptions,s=void 0===c?[].concat([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]):c,l=r.fontStyleOptions,f=void 0===l?function(t){return t.map((function(t){return[t,function(e){return e["shapeLabelFontStyle"+t.filter((function(t){return"normal"!==t})).map(Ay).join("")]}]}))}([["normal","bold"],["italic","normal"],["italic","bold"]]):l,d=r.textAlignOptions,h=void 0===d?function(t){return t.map((function(t){return[t,function(e){return e["shapeTitleTextAlign"+Ay(t)]},{hideLabel:!0,icon:function(e){return e["shapeIconTextAlign"+Ay(t)]}}]}))}(["left","center","right"]):d,p=t,v=p.strokeWidthOptions,m=void 0===v?(n={extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"},Object.keys(n).map(Fy(n,"labelSize"))):v,g=p.fontSizeOptions,y=void 0===g?function(t){return Object.keys(t).map(Fy(t,"labelSize"))}({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}):g,b=p.lineHeightOptions,$=void 0===b?function(t){return Object.keys(t).map(Fy(t,"labelSize"))}({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}):b,x=[y,$,m].map((function(t){return Array.isArray(t)&&t.every(uu)?t.map(Dy):t}));y=x[0],$=x[1],m=x[2];var w,k={defaultColor:o&&Xy(o),defaultNumber:Yy(),defaultPercentage:Yy({getValue:function(t){return parseFloat(t)},setValue:function(t){return t+"%"},step:.05,label:function(t,e,n){return Math.round(t/n*100)+"%"},labelClass:"PinturaPercentageLabel"}),backgroundColor:o&&Qy(o),strokeColor:o&&tb(o),strokeWidth:m&&(w=m,[_m,{title:function(t){return t.shapeTitleStrokeWidth},options:function(t){return su(t,"backgroundColor")?qy(w,{defaultKey:"shapeLabelStrokeNone"}):qy(w)},onchange:function(t,e){if(t){var n=e.strokeColor||[];if(!n[3]){var r=[].concat(n);r[3]=1,e.strokeColor=r}}}}]),lineStart:u&&nb(u),lineEnd:u&&rb(u),color:o&&ib(o),fontFamily:s&&Jy(s),fontStyle_fontWeight:f&&ob(f),fontSize:y&&ab(y),lineHeight:$&&cb($),textAlign:h&&ub(h),cornerRadius:["defaultPercentage",{min:0,max:50,title:function(t){return t.shapeTitleCornerRadius}}],frameColor:["defaultColor"],frameSize:["defaultPercentage",{min:.2,max:10,title:function(t){return t.labelSize}}],frameInset:["defaultPercentage",{min:.5,max:10,title:function(t){return t.labelInset}}],frameOffset:["defaultPercentage",{min:.5,max:10,title:function(t){return t.labelOffset}}],frameRadius:["defaultPercentage",{min:.5,max:10,title:function(t){return t.labelRadius}}],frameAmount:["defaultNumber",{min:1,max:5,step:1,title:function(t){return t.labelAmount}}]};return Object.entries(t).forEach((function(t){var e=t[0],n=t[1];k[e]||(k[e]=n)})),k};function lb(t){var e,n,r,i,o=t[4].default,a=Os(o,t,t[3],null);return{c:function(){e=el("div"),a&&a.c(),sl(e,"class",t[0])},m:function(o,u){Qs(o,e,u),a&&a.m(e,null),n=!0,r||(i=[al(e,"measure",(function(){Is(t[1]&&t[2])&&(t[1]&&t[2]).apply(this,arguments)})),Hs(Bh.call(null,e))],r=!0)},p:function(r,i){var u=i[0];t=r,a&&a.p&&(!n||8&u)&&Fs(a,o,t,t[3],n?Ds(o,t[3],u,null):js(t[3]),null),(!n||1&u)&&sl(e,"class",t[0])},i:function(t){n||(Yl(a,t),n=!0)},o:function(t){Kl(a,t),n=!1},d:function(t){t&&tl(e),a&&a.d(t),r=!1,Ts(i)}}}function fb(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,o=e.$$scope,a=_l(),u=e.class,c=void 0===u?null:u,s=!1;return kl((function(){return n(1,s=!0)})),t.$$set=function(t){"class"in t&&n(0,c=t.class),"$$scope"in t&&n(3,o=t.$$scope)},[c,s,function(t){var e=t.detail;return a("measure",e)},o,i]}var db=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,fb,lb,Ps,{class:0}),n}return gr(e,t),e}(df),hb=function(t){return{}},pb=function(t){return{}},vb=function(t){return{}},mb=function(t){return{}},gb=function(t){return{}},yb=function(t){return{}};function bb(t){var e,n,r=t[4].header,i=Os(r,t,t[3],yb);return{c:function(){e=el("div"),i&&i.c(),sl(e,"class","PinturaUtilHeader")},m:function(t,r){Qs(t,e,r),i&&i.m(e,null),n=!0},p:function(t,e){i&&i.p&&(!n||8&e)&&Fs(i,r,t,t[3],n?Ds(r,t[3],e,gb):js(t[3]),yb)},i:function(t){n||(Yl(i,t),n=!0)},o:function(t){Kl(i,t),n=!1},d:function(t){t&&tl(e),i&&i.d(t)}}}function $b(t){var e,n,r=t[4].footer,i=Os(r,t,t[3],pb);return{c:function(){e=el("div"),i&&i.c(),sl(e,"class","PinturaUtilFooter")},m:function(t,r){Qs(t,e,r),i&&i.m(e,null),n=!0},p:function(t,e){i&&i.p&&(!n||8&e)&&Fs(i,r,t,t[3],n?Ds(r,t[3],e,hb):js(t[3]),pb)},i:function(t){n||(Yl(i,t),n=!0)},o:function(t){Kl(i,t),n=!1},d:function(t){t&&tl(e),i&&i.d(t)}}}function xb(t){var e,n,r,i,o,a,u=t[1]&&bb(t),c=t[4].main,s=Os(c,t,t[3],mb),l=s||function(t){var e,n;return(e=new db({props:{class:"PinturaStage"}})).$on("measure",t[5]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:Ss,i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}(t),f=t[2]&&$b(t);return{c:function(){u&&u.c(),e=il(),n=el("div"),l&&l.c(),r=il(),f&&f.c(),i=il(),o=ol(),sl(n,"class","PinturaUtilMain")},m:function(c,s){u&&u.m(c,s),Qs(c,e,s),Qs(c,n,s),l&&l.m(n,null),t[6](n),Qs(c,r,s),f&&f.m(c,s),Qs(c,i,s),Qs(c,o,s),a=!0},p:function(t,n){var r=n[0];t[1]?u?(u.p(t,r),2&r&&Yl(u,1)):((u=bb(t)).c(),Yl(u,1),u.m(e.parentNode,e)):u&&(Gl(),Kl(u,1,1,(function(){u=null})),Xl()),s&&s.p&&(!a||8&r)&&Fs(s,c,t,t[3],a?Ds(c,t[3],r,vb):js(t[3]),mb),t[2]?f?(f.p(t,r),4&r&&Yl(f,1)):((f=$b(t)).c(),Yl(f,1),f.m(i.parentNode,i)):f&&(Gl(),Kl(f,1,1,(function(){f=null})),Xl())},i:function(t){a||(Yl(u),Yl(l,t),Yl(f),Yl(false),a=!0)},o:function(t){Kl(u),Kl(l,t),Kl(f),Kl(false),a=!1},d:function(a){u&&u.d(a),a&&tl(e),a&&tl(n),l&&l.d(a),t[6](null),a&&tl(r),f&&f.d(a),a&&tl(i),a&&tl(o)}}}function wb(t,e,n){var r=e,i=r.$$slots,o=void 0===i?{}:i,a=r.$$scope,u=e.hasHeader,c=void 0===u?!!e.$$slots.header:u,s=e.hasFooter,l=void 0===s?!!e.$$slots.footer:s,f=e.root,d=void 0===f?void 0:f;return t.$$set=function(t){n(7,e=_s(_s({},e),Bs(t))),"hasHeader"in t&&n(1,c=t.hasHeader),"hasFooter"in t&&n(2,l=t.hasFooter),"root"in t&&n(0,d=t.root),"$$scope"in t&&n(3,a=t.$$scope)},e=Bs(e),[d,c,l,a,o,function(e){Tl.call(this,t,e)},function(t){Pl[t?"unshift":"push"]((function(){n(0,d=t)}))}]}var kb=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,wb,xb,Ps,{hasHeader:1,hasFooter:2,root:0}),n}return gr(e,t),e}(df);function Sb(t){var e,n;return{c:function(){sl(e=el("div"),"class","PinturaRangeInputMeter"),sl(e,"style",n="transform: translateX("+(t[9].x-t[11].x)+"px) translateY("+(t[9].y-t[11].y)+"px)")},m:function(n,r){Qs(n,e,r),e.innerHTML=t[7]},p:function(t,r){128&r[0]&&(e.innerHTML=t[7]),512&r[0]&&n!==(n="transform: translateX("+(t[9].x-t[11].x)+"px) translateY("+(t[9].y-t[11].y)+"px)")&&sl(e,"style",n)},d:function(t){t&&tl(e)}}}function Cb(t){var e,n,r,i,o,a,u,c,s,l,f,d=t[9]&&Sb(t);return{c:function(){e=el("div"),n=el("span"),r=il(),i=el("button"),o=rl(t[1]),u=il(),c=el("div"),d&&d.c(),sl(n,"class","PinturaRangeInputValue"),sl(i,"class","PinturaRangeInputReset"),sl(i,"type","button"),i.disabled=a=t[0]===t[2],sl(c,"class","PinturaRangeInputInner"),sl(c,"style",t[8]),sl(c,"data-value-limited",t[5]),sl(e,"class","PinturaRangeInput"),sl(e,"tabindex","0")},m:function(a,h){Qs(a,e,h),Ys(e,n),n.innerHTML=t[3],Ys(e,r),Ys(e,i),Ys(i,o),Ys(e,u),Ys(e,c),d&&d.m(c,null),l||(f=[al(i,"click",t[16]),al(c,"interactionstart",t[12]),al(c,"interactionupdate",t[14]),al(c,"interactionend",t[15]),al(c,"interactionrelease",t[13]),Hs(s=Up.call(null,c,{inertia:t[6]})),al(c,"measure",t[36]),Hs(Bh.call(null,c)),al(e,"wheel",t[18],{passive:!1}),al(e,"nudge",t[19]),Hs(wp.call(null,e,{direction:"horizontal",preventDefault:!0}))],l=!0)},p:function(t,e){8&e[0]&&(n.innerHTML=t[3]),2&e[0]&&fl(o,t[1]),5&e[0]&&a!==(a=t[0]===t[2])&&(i.disabled=a),t[9]?d?d.p(t,e):((d=Sb(t)).c(),d.m(c,null)):d&&(d.d(1),d=null),256&e[0]&&sl(c,"style",t[8]),32&e[0]&&sl(c,"data-value-limited",t[5]),s&&Is(s.update)&&64&e[0]&&s.update.call(null,{inertia:t[6]})},i:Ss,o:Ss,d:function(t){t&&tl(e),d&&d.d(),l=!1,Ts(f)}}}function _b(t,e,n){var r,i,o,a,u,c,s,l,f,d=e.labelReset,h=void 0===d?"Reset":d,p=e.direction,v=void 0===p?"x":p,m=e.min,g=void 0===m?0:m,y=e.max,b=void 0===y?1:y,$=e.base,x=void 0===$?g:$,w=e.value,k=void 0===w?0:w,S=e.valueLabel,C=void 0===S?0:S,_=e.valueMin,M=void 0===_?void 0:_,E=e.valueMax,T=void 0===E?void 0:E,I=e.oninputstart,P=void 0===I?Pr:I,R=e.oninputmove,A=void 0===R?Pr:R,L=e.oninputend,O=void 0===L?Pr:L,z=e.elasticity,D=void 0===z?0:z,F=e.nudgeMultiplier,j=void 0===F?void 0:F,B=e.step,N=void 0===B?8:B,V=El("isAnimated");Ls(t,V,(function(t){return n(6,l=t)}));var H,W,U,Z=function(t,e,n){return Math.ceil((t-n)/e)*e+n},q={x:2,y:0},G=function(t,e,n){return"M "+(t-n)+" "+e+" a "+n+" "+n+" 0 1 0 0 -1"};var X,Y=void 0,K=!1,J={snap:!1,elastic:!1},Q=function(t,e,n){var r=t[v]+e[v],i=zf(r,X[1][v],X[0][v]),o=D?i+Zp(r-i,D):i,a=n.elastic?o:i,u=Bi(0,0);return u[v]=a,tt.set(u,{hard:n.snap}),zf(nt(u,v),g,b)},tt=_h();Ls(t,tt,(function(t){return n(9,f=t)}));var et=function(t,e){var n=.5*(H[e]-a[e])-(kp(t,g,b)*a[e]-.5*a[e]);return{x:"x"===e?n:0,y:"y"===e?n:0}},nt=function(t,e){var n=-(t[e]-.5*H[e])/a[e];return g+n*r},rt=tt.subscribe((function(t){t&&Y&&A(zf(nt(t,v),g,b))})),it=function(t){var e,n=[et(null!=M?M:g,v),et(null!=T?T:b,v)],r={x:"x"===v?f.x+t:0,y:"y"===v?f.y+t:0},i=zf(r[v],n[1][v],n[0][v]),o=Object.assign({},f,((e={})[v]=i,e));Vs(tt,f=o,f);var a=zf(nt(o,v),g,b);P(),A(a),O(a)};Cl((function(){rt()}));return t.$$set=function(t){"labelReset"in t&&n(1,h=t.labelReset),"direction"in t&&n(20,v=t.direction),"min"in t&&n(21,g=t.min),"max"in t&&n(22,b=t.max),"base"in t&&n(2,x=t.base),"value"in t&&n(0,k=t.value),"valueLabel"in t&&n(3,C=t.valueLabel),"valueMin"in t&&n(23,M=t.valueMin),"valueMax"in t&&n(24,T=t.valueMax),"oninputstart"in t&&n(25,P=t.oninputstart),"oninputmove"in t&&n(26,A=t.oninputmove),"oninputend"in t&&n(27,O=t.oninputend),"elasticity"in t&&n(28,D=t.elasticity),"nudgeMultiplier"in t&&n(29,j=t.nudgeMultiplier),"step"in t&&n(30,N=t.step)},t.$$.update=function(){if(6291456&t.$$.dirty[0]&&n(32,r=b-g),10485760&t.$$.dirty[0]&&n(34,i=null!=M?Math.max(M,g):g),20971520&t.$$.dirty[0]&&n(33,o=null!=T?Math.min(T,b):b),6291460&t.$$.dirty[0]&&n(35,u=kp(x,g,b)),16&t.$$.dirty[0]|16&t.$$.dirty[1]&&H){for(var e,f=.5*H.y,d=40*u,h="",p=H.y,m="",y=0;y<=40;y++){var $=q.x+10*y,w=f;h+=G($,w,y%5==0?2:.75)+" ",e=$+q.x,y===d&&(m='<path d="M'+$+" "+(w-4)+' l2 3 l-2 -1 l-2 1 z"/>')}n(7,W='<svg width="'+e+'" height="'+p+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+e+" "+p+'" aria-hidden="true" focusable="false">\n        '+m+'\n        <rect rx="4" ry="4" y="'+(f-4)+'"" height="8"/>\n        <path fill-rule="evenodd" d="'+h.trim()+'"/></svg>'),n(31,U={x:e-2*q.x,y:p})}16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(a=H&&U),6291456&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(5,c=i!==g||o!==b),32&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(8,s=c?function(t,e){var n=1/40,r=kp(t,g,b),i=kp(e,g,b);return"--range-mask-from:"+100*zi(Z(r,n,0)-.0125)+"%;--range-mask-to:"+100*zi(Z(i,n,0)-.0125)+"%"}(i,o):""),1048657&t.$$.dirty[0]|2&t.$$.dirty[1]&&r&&H&&H.x&&H.y&&tt.set(et(k,v),{hard:!1===l})},[k,h,x,C,H,c,l,W,s,f,V,q,function(){K=!1,Y=As(tt),X=[et(null!=M?M:g,v),et(null!=T?T:b,v)],P()},function(){K=!0},function(t){var e=t.detail;J.snap=!K,J.elastic=!K,Q(Y,e.translation,J)},function(t){var e=t.detail;J.snap=!1,J.elastic=!1;var n=Q(Y,e.translation,J);if(Y=void 0,X=void 0,Math.abs(n-x)<.01)return O(x);O(n)},function(){n(0,k=zf(x,i,o)),P(),O(k)},tt,function(t){t.preventDefault(),t.stopPropagation();var e=Yp(t)*N;it(e)},function(t){var e=t.detail;it(e[v]*Math.abs(j||8))},v,g,b,M,T,P,A,O,D,j,N,U,r,o,i,u,function(t){return n(4,H=function(t){return Bi(t.width,t.height)}(t.detail))}]}var Mb=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,_b,Cb,Ps,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1]),n}return gr(e,t),e}(df);function Eb(t){var e,n,r,i,o,a=t[7].default,u=Os(a,t,t[6],null);return{c:function(){e=el("div"),n=el("div"),u&&u.c(),sl(n,"class","PinturaToolbarInner"),sl(e,"class","PinturaToolbar"),sl(e,"data-layout",t[1]),sl(e,"data-overflow",t[0])},m:function(a,c){Qs(a,e,c),Ys(e,n),u&&u.m(n,null),r=!0,i||(o=[al(n,"measure",t[3]),Hs(Bh.call(null,n)),al(e,"measure",t[2]),Hs(Bh.call(null,e))],i=!0)},p:function(t,n){var i=n[0];u&&u.p&&(!r||64&i)&&Fs(u,a,t,t[6],r?Ds(a,t[6],i,null):js(t[6]),null),(!r||2&i)&&sl(e,"data-layout",t[1]),(!r||1&i)&&sl(e,"data-overflow",t[0])},i:function(t){r||(Yl(u,t),r=!0)},o:function(t){Kl(u,t),r=!1},d:function(t){t&&tl(e),u&&u.d(t),i=!1,Ts(o)}}}function Tb(t,e,n){var r,i,o=e.$$slots,a=void 0===o?{}:o,u=e.$$scope,c=0,s=0,l=0,f=function(){n(0,i="compact"===r&&c>l?"overflow":void 0)};return t.$$set=function(t){"$$scope"in t&&n(6,u=t.$$scope)},t.$$.update=function(){48&t.$$.dirty&&n(1,r=s>l?"compact":"default")},[i,r,function(t){var e=t.detail.width;n(5,l=e),f()},function(t){var e=t.detail.width;e>s&&n(4,s=e),c=e,i||f()},s,l,u,a]}var Ib=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Tb,Eb,Ps,{}),n}return gr(e,t),e}(df),Pb=((Hn={})[Mi]=function(t){return{x:t.x,y:t.y}},Hn[Ri]=function(t){return{x:t.x+t.width,y:t.y}},Hn[Ei]=function(t){return{x:t.x+t.width,y:t.y}},Hn[Ai]=function(t){return{x:t.x+t.width,y:t.y+t.height}},Hn[Ti]=function(t){return{x:t.x,y:t.y+t.height}},Hn[Li]=function(t){return{x:t.x,y:t.y+t.height}},Hn[Ii]=function(t){return{x:t.x,y:t.y}},Hn[Pi]=function(t){return{x:t.x,y:t.y}},Hn);function Rb(t,e,n){var r=t.slice();return r[14]=e[n].key,r[15]=e[n].translate,r[16]=e[n].scale,r[17]=e[n].type,r[18]=e[n].opacity,r}function Ab(t,e){var n,r,i,o,a,u,c,s;return{key:t,first:null,c:function(){sl(n=el("div"),"role","button"),sl(n,"aria-label",r="Drag "+e[17]+" "+e[14]),sl(n,"tabindex",i="edge"===e[17]?-1:0),sl(n,"class","PinturaRectManipulator"),sl(n,"data-direction",o=e[14]),sl(n,"data-shape",a="edge"===e[17]?"edge":""+e[0]),sl(n,"style",u="--tx:"+e[15].x+";--ty:"+e[15].y+";--sx:"+e[16].x+";--sy:"+e[16].y+";opacity:"+e[18]),this.first=n},m:function(t,r){Qs(t,n,r),c||(s=[al(n,"nudge",(function(){Is(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)})),Hs(wp.call(null,n,{preventDefault:!0})),al(n,"interactionstart",(function(){Is(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)})),al(n,"interactionupdate",(function(){Is(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)})),al(n,"interactionend",(function(){Is(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)})),Hs(Up.call(null,n))],c=!0)},p:function(t,c){e=t,2&c&&r!==(r="Drag "+e[17]+" "+e[14])&&sl(n,"aria-label",r),2&c&&i!==(i="edge"===e[17]?-1:0)&&sl(n,"tabindex",i),2&c&&o!==(o=e[14])&&sl(n,"data-direction",o),3&c&&a!==(a="edge"===e[17]?"edge":""+e[0])&&sl(n,"data-shape",a),2&c&&u!==(u="--tx:"+e[15].x+";--ty:"+e[15].y+";--sx:"+e[16].x+";--sy:"+e[16].y+";opacity:"+e[18])&&sl(n,"style",u)},d:function(t){t&&tl(n),c=!1,Ts(s)}}}function Lb(t){for(var e,n=[],r=new Map,i=t[1],o=function(t){return t[14]},a=0;a<i.length;a+=1){var u=Rb(t,i,a),c=o(u);r.set(c,n[a]=Ab(c,u))}return{c:function(){for(var t=0;t<n.length;t+=1)n[t].c();e=ol()},m:function(t,r){for(var i=0;i<n.length;i+=1)n[i].m(t,r);Qs(t,e,r)},p:function(t,a){var u=a[0];99&u&&(i=t[1],n=rf(n,u,o,1,t,i,r,e.parentNode,ef,Ab,e,Rb))},i:Ss,o:Ss,d:function(t){for(var r=0;r<n.length;r+=1)n[r].d(t);t&&tl(e)}}}function Ob(t,e,n){var r,i,o,a,u=e.rect,c=void 0===u?null:u,s=e.visible,l=void 0!==s&&s,f=e.style,d=void 0===f?void 0:f,h=El("isAnimated");Ls(t,h,(function(t){return n(11,a=t)}));var p=_h(void 0,{precision:1e-4,stiffness:.2,damping:.4});Ls(t,p,(function(t){return n(10,o=t)}));var v,m=_h(0,{precision:.001});Ls(t,m,(function(t){return n(9,i=t)}));var g=_l();return t.$$set=function(t){"rect"in t&&n(7,c=t.rect),"visible"in t&&n(8,l=t.visible),"style"in t&&n(0,d=t.style)},t.$$.update=function(){2304&t.$$.dirty&&p.set(l?1:.5,{hard:!1===a}),2304&t.$$.dirty&&m.set(l?1:0,{hard:!1===a}),1664&t.$$.dirty&&n(1,r=Object.keys(_i).map((function(t,e){var n=_i[t],r=Pb[n](c),a=1===n.length?"edge":"corner",u="corner"===a;return{key:n,type:a,scale:{x:/^(t|b)$/.test(n)?c.width:u?zf(o,.5,1.25):1,y:/^(r|l)$/.test(n)?c.height:u?zf(o,.5,1.25):1},translate:{x:r.x,y:r.y},opacity:i}})))},[d,r,h,p,m,function(t,e){return function(n){var r=n.detail;v&&e!==v||"resizestart"!==t&&void 0===v||("resizestart"===t&&(v=e),"resizeend"===t&&(v=void 0),g(t,{direction:e,translation:r&&r.translation}))}},function(t){return function(e){var n=e.detail;g("resizestart",{direction:t,translation:{x:0,y:0}}),g("resizemove",{direction:t,translation:n}),g("resizeend",{direction:t,translation:{x:0,y:0}})}},c,l,i,o,a]}var zb=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Ob,Lb,Ps,{rect:7,visible:8,style:0}),n}return gr(e,t),e}(df),Db=function(t){function e(e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}var n=function(n){n.preventDefault(),t.addEventListener("gesturechange",r),t.addEventListener("gestureend",i),e("gesturedown")},r=function(t){t.preventDefault(),e("gestureupdate",t.scale)},i=function(t){e("gestureup",t.scale),t.preventDefault(),o()},o=function(){t.removeEventListener("gesturechange",r),t.removeEventListener("gestureend",i)};return t.addEventListener("gesturestart",n),{destroy:function(){o(),t.removeEventListener("gesturestart",n)}}},Fb=((Wn={})[Mi]=Ti,Wn[Ei]=Ii,Wn[Ti]=Mi,Wn[Ii]=Ei,Wn[Pi]=Ai,Wn[Ri]=Li,Wn[Ai]=Pi,Wn[Li]=Ri,Wn),jb=function(t){var e=t===Ii||t===Ei,n=t===Mi||t===Ti;return[t===Ei||t===Ri||t===Ai,t===Ii||t===Li||t===Pi,t===Mi||t===Ri||t===Pi,t===Ti||t===Ai||t===Li,e,n,e||n]},Bb=function(t,e,n,r){void 0===r&&(r={});var i=e.target,o=e.translate,a=r,u=a.aspectRatio,c=a.minSize,s=a.maxSize,l=Fb[i],f=Oi[l],d=Yi(Bi(t.x,t.y),Bi(f[0]*t.width,f[1]*t.height)),h=Oi[i],p=Yi(Mo(t),Bi(h[0]*t.width,h[1]*t.height)),v=jb(i),m=v[0],g=v[1],y=v[2],b=v[3],$=v[4],x=v[5],w=v[6],k=o.x,S=o.y;$?S=0:x&&(k=0);var C=Nb(d,i,n,{aspectRatio:u,minSize:c,maxSize:s}),_=C.inner,M=C.outer,E=Yo(t),T=E[0],I=E[1],P=E[2],R=E[3];if(m?R=d.x:g&&(I=d.x),b?T=d.y:y&&(P=d.y),m){var A=_.x+_.width,L=M.x+M.width;I=zf(p.x+k,A,L)}else if(g){var O=M.x,z=_.x;R=zf(p.x+k,O,z)}if(b){var D=_.y+_.height,F=M.y+M.height;P=zf(p.y+S,D,F)}else if(y){var j=M.y,B=_.y;T=zf(p.y+S,j,B)}if(R>_.x&&(R=_.x),I<_.x+_.width&&(I=_.x+_.width),T>_.y&&(T=_.y),P<_.y+_.height&&(P=_.y+_.height),R<M.x){var N=M.x-R;R=M.x,I+=N}if(I>M.x+M.width){var V=I-(M.x+M.width);I=M.x+M.width,R-=V}if(T<M.y){var H=M.y-T;T=M.y,P+=H}if(P>M.y+M.height){var W=P-(M.y+M.height);P=M.y+M.height,T-=W}if(u)if(w){var U=I-R,Z=P-T;$?(Z=U/u,T=d.y-.5*Z,P=d.y+.5*Z):x&&(U=Z*u,R=d.x-.5*U,I=d.x+.5*U)}else{var q=Bi(p.x+k-d.x,p.y+S-d.y);i===Ri?(q.x=Math.max(0,q.x),q.y=Math.min(0,q.y)):i===Ai?(q.x=Math.max(0,q.x),q.y=Math.max(0,q.y)):i===Li?(q.x=Math.min(0,q.x),q.y=Math.max(0,q.y)):i===Pi&&(q.x=Math.min(0,q.x),q.y=Math.min(0,q.y));var G=Ui(q),X=Ui(Bi(_.width,_.height)),Y=Ui(Bi(M.width,M.height)),K=zf(G,X,Y),J=Bi(u,1),Q=Qi(Zi(J),K);i===Ri?(I=d.x+Q.x,T=d.y-Q.y):i===Ai?(I=d.x+Q.x,P=d.y+Q.y):i===Li?(R=d.x-Q.x,P=d.y+Q.y):i===Pi&&(R=d.x-Q.x,T=d.y-Q.y)}return Lo(R,T,I-R,P-T)},Nb=function(t,e,n,r){var i=r.aspectRatio,o=r.minSize,a=r.maxSize,u=e===Ei||e===Ri||e===Ai,c=e===Ii||e===Li||e===Pi,s=e===Mi||e===Ri||e===Pi,l=e===Ti||e===Ai||e===Li,f=e===Ii||e===Ei,d=e===Mi||e===Ti,h=Mo(n);u?(h.x=t.x,h.width-=t.x):c&&(h.width=t.x),l?(h.y=t.y,h.height-=t.y):s&&(h.height=t.y);var p=function(t,e){return _o(0,0,t,e)}(Math.min(h.width,a.width),Math.min(h.height,a.height));if(i)if(f){var v=Math.min(t.y,n.height-t.y);p.height=Math.min(2*v,p.height)}else if(d){var m=Math.min(t.x,n.width-t.x);p.width=Math.min(2*m,p.width)}var g,y,b,$,x=i?fo(Go(To(o),i)):o,w=i?fo(Xo(p,i)):p;u?g=t.x:c&&(y=t.x),l?b=t.y:s&&($=t.y),u?y=g+x.width:c&&(g=y-x.width),l?$=b+x.height:s&&(b=$-x.height),f?(b=t.y-.5*x.height,$=t.y+.5*x.height):d&&(g=t.x-.5*x.width,y=t.x+.5*x.width);var k=Po([Bi(g,b),Bi(y,$)]);return u?y=g+w.width:c&&(g=y-w.width),l?$=b+w.height:s&&(b=$-w.height),f?(b=t.y-.5*w.height,$=t.y+.5*w.height):d&&(g=t.x-.5*w.width,y=t.x+.5*w.width),g=Math.max(n.x,g),y=Math.min(n.x+n.width,y),b=Math.max(n.y,b),$=Math.min(n.y+n.height,$),{inner:k,outer:Po([Bi(g,b),Bi(y,$)])}},Vb=function(t){return 180*t/Math.PI};function Hb(t){var e,n,r;return n=new Mb({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(Vb(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaImageRotator")},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,e){var r=e[0],i={};32&r&&(i.elasticity=t[5]),512&r&&(i.min=t[9]),1024&r&&(i.max=t[10]),2048&r&&(i.value=t[11]),513&r&&(i.valueMin=Math.max(t[9],t[0])),1026&r&&(i.valueMax=Math.min(t[10],t[1])),64&r&&(i.labelReset=t[6]),4096&r&&(i.base=t[12]),2048&r&&(i.valueLabel=Math.round(Vb(t[11]))+"&deg;"),4&r&&(i.oninputstart=t[2]),392&r&&(i.oninputmove=t[17]),400&r&&(i.oninputend=t[18]),n.$set(i)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function Wb(t,e,n){var r,i,o,a,u,c,s,l=e.rotation,f=e.valueMin,d=e.valueMax,h=e.oninputstart,p=void 0===h?Pr:h,v=e.oninputmove,m=void 0===v?Pr:v,g=e.oninputend,y=void 0===g?Pr:g,b=e.elasticity,$=void 0===b?0:b,x=e.labelReset,w=void 0===x?void 0:x,k=e.rotationMin,S=void 0===k?void 0:k,C=e.rotationMax,_=void 0===C?void 0:C;return t.$$set=function(t){"rotation"in t&&n(13,l=t.rotation),"valueMin"in t&&n(0,f=t.valueMin),"valueMax"in t&&n(1,d=t.valueMax),"oninputstart"in t&&n(2,p=t.oninputstart),"oninputmove"in t&&n(3,m=t.oninputmove),"oninputend"in t&&n(4,y=t.oninputend),"elasticity"in t&&n(5,$=t.elasticity),"labelReset"in t&&n(6,w=t.labelReset),"rotationMin"in t&&n(14,S=t.rotationMin),"rotationMax"in t&&n(15,_=t.rotationMax)},t.$$.update=function(){16384&t.$$.dirty&&n(9,r=S+1e-9),32768&t.$$.dirty&&n(10,i=_-1e-9),1536&t.$$.dirty&&n(12,o=r+.5*(i-r)),32768&t.$$.dirty&&n(16,a=2*_),8192&t.$$.dirty&&n(8,u=Math.sign(l)),73728&t.$$.dirty&&n(7,c=Math.round(Math.abs(l)/a)*a),8576&t.$$.dirty&&n(11,s=l-u*c)},[f,d,p,m,y,$,w,c,u,r,i,s,o,l,S,_,a,function(t){return m(u*c+t)},function(t){return y(u*c+t)}]}var Ub=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Wb,Hb,Ps,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15}),n}return gr(e,t),e}(df);function Zb(t){var e,n,r,i,o;return{c:function(){e=el("div"),n=el("p"),r=rl(t[0]),i=rl(" Ã— "),o=rl(t[1]),sl(e,"class","PinturaImageInfo")},m:function(t,a){Qs(t,e,a),Ys(e,n),Ys(n,r),Ys(n,i),Ys(n,o)},p:function(t,e){var n=e[0];1&n&&fl(r,t[0]),2&n&&fl(o,t[1])},i:Ss,o:Ss,d:function(t){t&&tl(e)}}}function qb(t,e,n){var r=e.width,i=e.height;return t.$$set=function(t){"width"in t&&n(0,r=t.width),"height"in t&&n(1,i=t.height)},[r,i]}var Gb=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,qb,Zb,Ps,{width:0,height:1}),n}return gr(e,t),e}(df);function Xb(t){var e,n;return e=new dm({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};256&n&&(r.options=t[8]),128&n&&(r.selectedIndex=t[7]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Yb(t){var e,n;return e=new _m({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[Xb]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r=n[0],i={};1&r&&(i.icon=t[0]),2&r&&(i.label=t[1]),4&r&&(i.labelClass=t[2]),8&r&&(i.hideLabel=t[3]),512&r&&(i.options=t[9]),16&r&&(i.selectedIndex=t[4]),32&r&&(i.onchange=t[5]),64&r&&(i.optionMapper=t[6]),262528&r&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}var Kb='fill="none" stroke="currentColor"';function Jb(t,e,n){var r,i,o,a=e.icon,u=e.label,c=e.labelClass,s=e.hideLabel,l=e.options,f=e.selectedIndex,d=e.onchange,h=e.optionMapper,p=e.filter,v=void 0===p?"landscape":p,m=e.onfilterchange,g=void 0===m?Pr:m,y=function(t,e,n,r,i){return"\n    <rect "+Kb+' x="'+t+'" y="'+e+'" width="'+n+'" height="'+r+'" rx="'+i+'"/>'},b=function(t,e){return"<path "+Kb+' d="M'+t+" "+e+' l2 2 l3 -4"/>'};return t.$$set=function(t){"icon"in t&&n(0,a=t.icon),"label"in t&&n(1,u=t.label),"labelClass"in t&&n(2,c=t.labelClass),"hideLabel"in t&&n(3,s=t.hideLabel),"options"in t&&n(12,l=t.options),"selectedIndex"in t&&n(4,f=t.selectedIndex),"onchange"in t&&n(5,d=t.onchange),"optionMapper"in t&&n(6,h=t.optionMapper),"filter"in t&&n(11,v=t.filter),"onfilterchange"in t&&n(13,g=t.onfilterchange)},t.$$.update=function(){6144&t.$$.dirty&&n(9,r=function(t,e){return(t||[]).map((function(t){return ei(t[0])?(t[1]=t[1].map(e),t):e(t)}))}(l,function(t){return function(e){var n=e[0],r=e[1],i=e[2],o=void 0===i?{}:i;return uu(n)&&(o.hidden="landscape"===t?n<1:n>1),[n,r,o]}}(v))),2048&t.$$.dirty&&n(7,i="landscape"===v?0:1),128&t.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:y(2,6,19,12,2)+(0===i?b(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:y(5,3,13,18,2)+(1===i?b(9,12):"")}]])},[a,u,c,s,f,d,h,i,o,r,function(t){n(11,v=t.value),g(t.value)},v,l,g]}var Qb=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Jb,Yb,Ps,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13}),n}return gr(e,t),e}(df),t$=function(t){return Xi(t,(function(t){return zi(t,6)}))},e$=function(t){return Jo(t,(function(t){return zi(t,6)}))},n$=function(t,e,n){return void 0===n&&(n=1e-4),Math.abs(t-e)<n},r$=function(t,e,n,r,i){void 0===i&&(i={});var o=i.aspectRatio;t=e$(t),r=r.map(t$);var a=jo(t,Fb[n.target]),u=Xi(a,(function(t){return zi(t,6)})),c=o?Go(i.minSize,o):i.minSize,s=o?Xo(i.maxSize,o):i.maxSize,l=jo(e,n.target);if(ro(l,a)<1){e=Mo(t);var f=Math.min(c.width/t.width,c.height/t.height);Do(e,f,a)}e=Fo(Mo(e),c,s,a);var d=Mo(e);e=e$(e);var h,p=ua(r,1),v=Ko(t),m=Ko(e),g=v.findIndex((function(t){return Gi(Xi(t,(function(t){return zi(t,6)})),u)})),y=function(t){return p.map((function(e){return na(e,t)})).filter(Boolean).pop()};if(o){var b=m.map((function(t,e){if(e!==g){var n=Bi(a.x-t.x,a.y-t.y);Zi(n),Qi(n,.5);var r=Bi(a.x-n.x,a.y-n.y),i=wo(r,t$(t)),o=y(i);if(o){var u=v[e];return{intersection:o,cornerDist:ro(a,u),intersectionDist:ro(a,o)}}}})).filter(Boolean);if(b.length){var $=b.reduce((function(t,e){var n=e.intersectionDist/e.cornerDist;return n<t?n:t}),Number.MAX_SAFE_INTEGER);d=Mo(t),Do(d,$,a)}}else{var x=1===n.target.length,w=!(r[0].y===r[1].y||r[0].x===r[1].x),k=v.map((function(t,e){if(e!==g){var n=m[e],r=!n$(n.x,u.x)&&!n$(n.y,u.y);if((x||w||!r)&&(!x||!n$(n.x,u.x)&&!n$(n.y,u.y))){var i=Vi(x?t:a),o=Ki(Vi(i),n);Zi(o),Qi(o,.5),x?Yi(i,o):Ki(i,o);var c=wo(i,n),s=y(c);if(s)return s}}})).filter(Boolean);if(k.length){var S=jb(n.target),C=S[0],_=S[1],M=S[2],E=S[3],T=Yo(e),I=T[0],P=T[1],R=T[2],A=T[3];k.forEach((function(t){var e=t.x,n=t.y,r=zi(e,6),i=zi(n,6);M&&!n$(i,u.y)&&(I=Math.max(I,n)),C&&!n$(r,u.x)&&(P=Math.min(P,e)),E&&!n$(i,u.y)&&(R=Math.min(R,n)),_&&!n$(r,u.x)&&(A=Math.max(A,e))})),d=_o((h=[I,P,R,A])[3],h[0],h[1]-h[3],h[2]-h[0]),Do(d,.9999,a)}}return Fo(d,c,s,a),d};function i$(t){var e,n;return e=new Gm({props:{items:t[11]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};2048&n[0]&&(r.items=t[11]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function o$(t){var e,n,r;return n=new Ib({props:{$$slots:{default:[i$]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"slot","header")},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,e){var r={};2048&e[0]|2&e[7]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function a$(t){var e,n;return e=new jp({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:"opacity: "+t[29]+"; transform: translate3d("+t[30].x+"px, "+t[30].y+"px, 0)"}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16&n[0]&&(r.label=t[4].cropLabelButtonRecenter),16&n[0]&&(r.icon=t[4].cropIconButtonRecenter),512&n[0]&&(r.disabled=!t[9]),1610612736&n[0]&&(r.style="opacity: "+t[29]+"; transform: translate3d("+t[30].x+"px, "+t[30].y+"px, 0)"),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function u$(t){var e,n;return(e=new zb({props:{rect:t[8],visible:t[12],style:t[1]}})).$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};256&n[0]&&(r.rect=t[8]),4096&n[0]&&(r.visible=t[12]),2&n[0]&&(r.style=t[1]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function c$(t){var e,n;return e=new Gb({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8192&n[0]&&(r.width=Math.round(t[13].width)),8192&n[0]&&(r.height=Math.round(t[13].height)),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function s$(t){var e,n,r,i,o,a,u,c,s=t[21]&&t[10]&&a$(t),l=t[21]&&u$(t),f=t[22]&&c$(t);return{c:function(){e=el("div"),n=el("div"),s&&s.c(),r=il(),l&&l.c(),o=il(),f&&f.c(),sl(n,"class","PinturaStage"),sl(e,"slot","main")},m:function(d,h){Qs(d,e,h),Ys(e,n),s&&s.m(n,null),Ys(n,r),l&&l.m(n,null),t[162](n),Ys(e,o),f&&f.m(e,null),a=!0,u||(c=[Hs(Bh.call(null,n)),al(n,"measure",t[160]),al(n,"wheel",(function(){Is(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)}),{passive:!1}),al(n,"interactionstart",t[74]),al(n,"interactionupdate",t[75]),al(n,"interactionrelease",t[77]),al(n,"interactionend",t[76]),Hs(i=Up.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:b$,getEventPosition:t[163]})),al(n,"gesturedown",t[84]),al(n,"gestureupdate",t[85]),al(n,"gestureup",t[86]),Hs(Db.call(null,n))],u=!0)},p:function(o,a){(t=o)[21]&&t[10]?s?(s.p(t,a),2098176&a[0]&&Yl(s,1)):((s=a$(t)).c(),Yl(s,1),s.m(n,r)):s&&(Gl(),Kl(s,1,1,(function(){s=null})),Xl()),t[21]?l?(l.p(t,a),2097152&a[0]&&Yl(l,1)):((l=u$(t)).c(),Yl(l,1),l.m(n,null)):l&&(Gl(),Kl(l,1,1,(function(){l=null})),Xl()),i&&Is(i.update)&&16777220&a[0]&&i.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:b$,getEventPosition:t[163]}),t[22]?f?(f.p(t,a),4194304&a[0]&&Yl(f,1)):((f=c$(t)).c(),Yl(f,1),f.m(e,null)):f&&(Gl(),Kl(f,1,1,(function(){f=null})),Xl())},i:function(t){a||(Yl(s),Yl(l),Yl(f),a=!0)},o:function(t){Kl(s),Kl(l),Kl(f),a=!1},d:function(n){n&&tl(e),s&&s.d(),l&&l.d(),t[162](null),f&&f.d(),u=!1,Ts(c)}}}function l$(t){for(var e,n,r,i,o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]],a={$$slots:{default:[f$,function(t){return{217:t.tab}},function(t){return[0,0,0,0,0,0,0,t.tab?1:0]}]},$$scope:{ctx:t}},u=0;u<o.length;u+=1)a=_s(a,o[u]);(e=new op({props:a})).$on("select",t[161]);for(var c=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]],s={$$slots:{default:[p$,function(t){return{216:t.panel}},function(t){return[0,0,0,0,0,0,t.panel?1073741824:0]}]},$$scope:{ctx:t}},l=0;l<c.length;l+=1)s=_s(s,c[l]);return r=new gp({props:s}),{c:function(){cf(e.$$.fragment),n=il(),cf(r.$$.fragment)},m:function(t,o){sf(e,t,o),Qs(t,n,o),sf(r,t,o),i=!0},p:function(t,n){var i=262272&n[0]?of(o,[o[0],128&n[0]&&{tabs:t[7]},262144&n[0]&&af(t[18])]):{};3&n[7]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);var a=393216&n[0]?of(c,[c[0],c[1],131072&n[0]&&{panels:t[17]},262144&n[0]&&af(t[18])]):{};511721496&n[0]|1073741824&n[6]|2&n[7]&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i:function(t){i||(Yl(e.$$.fragment,t),Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(e.$$.fragment,t),Kl(r.$$.fragment,t),i=!1},d:function(t){lf(e,t),t&&tl(n),lf(r,t)}}}function f$(t){var e,n,r=t[217].label+"";return{c:function(){e=el("span"),n=rl(r)},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){1&e[7]&&r!==(r=t[217].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function d$(t){var e,n;return e=new Mb({props:{elasticity:t[25]*t[43],base:y$,min:t[23],max:g$,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};33554432&n[0]&&(r.elasticity=t[25]*t[43]),8388608&n[0]&&(r.min=t[23]),134217728&n[0]&&(r.valueMin=t[27][0]),134217728&n[0]&&(r.valueMax=t[27][1]),268435456&n[0]&&(r.value=t[28]),16&n[0]&&(r.labelReset=t[4].labelReset),268435456&n[0]&&(r.valueLabel=Math.round(100*t[28])+"%"),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function h$(t){var e,n;return e=new Ub({props:{elasticity:t[25]*t[43],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};33554432&n[0]&&(r.elasticity=t[25]*t[43]),16384&n[0]&&(r.rotation=t[14]),16&n[0]&&(r.labelReset=t[4].labelReset),67108864&n[0]&&(r.valueMin=t[26][0]),67108864&n[0]&&(r.valueMax=t[26][1]),8&n[0]&&(r.rotationMin=-t[3]),8&n[0]&&(r.rotationMax=t[3]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function p$(t){var e,n,r,i,o=[h$,d$],a=[];function u(t,e){return t[216]===t[93]+"-rotation"?0:t[216]===t[93]+"-zoom"?1:-1}return~(e=u(t))&&(n=a[e]=o[e](t)),{c:function(){n&&n.c(),r=ol()},m:function(t,n){~e&&a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=e;(e=u(t))===c?~e&&a[e].p(t,i):(n&&(Gl(),Kl(a[c],1,1,(function(){a[c]=null})),Xl()),~e?((n=a[e])?n.p(t,i):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r)):n=null)},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){~e&&a[e].d(t),t&&tl(r)}}}function v$(t){var e,n,r=t[19]&&l$(t);return{c:function(){e=el("div"),r&&r.c(),sl(e,"slot","footer"),sl(e,"style",t[16])},m:function(t,i){Qs(t,e,i),r&&r.m(e,null),n=!0},p:function(t,i){t[19]?r?(r.p(t,i),524288&i[0]&&Yl(r,1)):((r=l$(t)).c(),Yl(r,1),r.m(e,null)):r&&(Gl(),Kl(r,1,1,(function(){r=null})),Xl()),(!n||65536&i[0])&&sl(e,"style",t[16])},i:function(t){n||(Yl(r),n=!0)},o:function(t){Kl(r),n=!1},d:function(t){t&&tl(e),r&&r.d()}}}function m$(t){var e,n,r;function i(e){t[164](e)}var o={hasHeader:t[20],$$slots:{footer:[v$],main:[s$],header:[o$]},$$scope:{ctx:t}};return void 0!==t[15]&&(o.root=t[15]),e=new kb({props:o}),Pl.push((function(){return uf(e,"root",i)})),e.$on("measure",t[165]),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i={};1048576&r[0]&&(i.hasHeader=t[20]),2146402302&r[0]|2&r[7]&&(i.$$scope={dirty:r,ctx:t}),!n&&32768&r[0]&&(n=!0,i.root=t[15],jl((function(){return n=!1}))),e.$set(i)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}var g$=1,y$=0,b$=function(t,e){return t.target===e};function $$(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P,R,A,L,O,z,D,F,j,B,N,V,H,W,U,Z,q,G,X,Y,K,J,Q,tt,et,nt,rt,it,ot,at,ut,ct,st,lt,ft,dt,ht,pt,vt,mt,gt,yt,bt,$t,xt=Ss,wt=function(){return xt(),xt=Rs(kt,(function(t){return n(12,P=t)})),kt};t.$$.on_destroy.push((function(){return xt()}));var kt=e.isActive;wt();var St=e.stores,Ct=e.cropImageSelectionCornerStyle,_t=void 0===Ct?"circle":Ct,Mt=e.cropWillRenderImageSelectionGuides,Et=void 0===Mt?function(t,e){var n="rotate"==t;return{rows:n?5:3,cols:n?5:3,opacity:.25*e}}:Mt,Tt=e.cropAutoCenterImageSelectionTimeout,It=void 0===Tt?void 0:Tt,Pt=e.cropEnableZoomMatchImageAspectRatio,Rt=void 0===Pt||Pt,At=e.cropEnableRotateMatchImageAspectRatio,Lt=void 0===At?"never":At,Ot=e.cropEnableRotationInput,zt=void 0===Ot||Ot,Dt=e.cropEnableZoom,Ft=void 0===Dt||Dt,jt=e.cropEnableZoomInput,Bt=void 0===jt||jt,Nt=e.cropEnableZoomAutoHide,Vt=void 0===Nt||Nt,Ht=e.cropEnableImageSelection,Wt=void 0===Ht||Ht,Ut=e.cropEnableInfoIndicator,Zt=void 0!==Ut&&Ut,qt=e.cropEnableZoomTowardsWheelPosition,Gt=void 0===qt||qt,Xt=e.cropEnableLimitWheelInputToCropSelection,Yt=void 0===Xt||Xt,Kt=e.cropEnableCenterImageSelection,Jt=void 0===Kt||Kt,Qt=e.cropEnableButtonRotateLeft,te=void 0===Qt||Qt,ee=e.cropEnableButtonRotateRight,ne=void 0!==ee&&ee,re=e.cropEnableButtonFlipHorizontal,ie=void 0===re||re,oe=e.cropEnableButtonFlipVertical,ae=void 0!==oe&&oe,ue=e.cropSelectPresetOptions,ce=void 0===ue?void 0:ue,se=e.cropEnableSelectPreset,le=void 0===se||se,fe=e.cropEnableFilterMatchAspectRatio,de=void 0===fe||fe,he=e.cropSelectPresetFilter,pe=void 0!==he&&he,ve=e.cropEnableButtonToggleCropLimit,me=void 0!==ve&&ve,ge=e.cropWillRenderTools,ye=void 0===ge?xi:ge,be=e.cropActiveTransformTool,$e=void 0===be?"rotation":be,xe=e.cropMinimizeToolbar,we=void 0===xe?"auto":xe,ke=e.cropInteractionFocus,Se=void 0===ke?"image":ke,Ce=e.cropRotationRange,_e=void 0===Ce?Si:Ce,Me=e.cropMaskOpacity,Ee=void 0===Me?.85:Me,Te=e.locale,Ie=void 0===Te?{}:Te,Pe=El("isAnimated");Ls(t,Pe,(function(t){return n(139,R=t)}));var Re=El("elasticityMultiplier");Ls(t,Re,(function(t){return n(25,vt=t)}));var Ae=El("redrawTrigger");Ls(t,Ae,(function(t){return n(159,pt=t)}));var Le=El("imageIsStatic");Ls(t,Le,(function(t){return n(145,B=t)}));var Oe=El("imageStaticVisualCorners");Ls(t,Oe,(function(t){return n(181,at=t)}));var ze="idle",De=vf();Ls(t,De,(function(t){return n(156,ft=t)}));var Fe,je=function(){return void 0===it},Be=function(t){return 1/t},Ne=function(t){de&&pe!==t&&(n(95,pe=t),it&&1!==it&&Ve()&&Vs(Cn,it=Be(it),it))},Ve=function(){if(1===it||!r)return!1;var t=Be(it);return!!zv(ft).find((function(e){return e[0]===t}))},He=function(t,e,n){return Ci(n)?e.width===Math.round(t.height)||e.height===Math.round(t.width):e.width===Math.round(t.width)||e.height===Math.round(t.height)},We=function(){return(je()||"always"===Lt&&Ve())&&function(t,e,n){var r=xo(bo(so(e),n),(function(t){return Math.abs(Math.round(t))})),i=yo(r),o=Oo(t);return Gi(i,o)}(N,Y,K)&&He(N,Y,K)},Ue=function(t){if("never"!==Lt&&We()){Vs(dn,K+=t,K);var e=Ci(K),n=e?Y.height:Y.width,r=e?Y.width:Y.height;Vs(xn,N=Lo(0,0,n,r),N),je()||Vs(Cn,it=$i(n,r),it)}else Vs(dn,K+=t,K)},Ze=St,qe=Ze.history,Ge=Ze.env,Xe=Ze.isInteracting,Ye=Ze.isInteractingFraction,Ke=Ze.isTransformingImage,Je=Ze.rootRect,Qe=Ze.stageRect,tn=(Ze.utilRect,Ze.utilRectPadded),en=Ze.rootLineColor,nn=Ze.allowPan,rn=Ze.allowZoom,on=Ze.rangeInputElasticity,an=Ze.presentationScalar,un=Ze.utilTools,cn=Ze.imagePreviewModifiers,sn=Ze.imageOutlineOpacity,ln=Ze.imageFlipX,fn=Ze.imageFlipY,dn=Ze.imageRotation,hn=Ze.imageRotationRange,pn=Ze.imageOutputSize,vn=Ze.imageSelectionRect,mn=Ze.imageSelectionRectSnapshot,gn=Ze.imageSelectionRectIntent,yn=Ze.imageSelectionRectPresentation,bn=Ze.imageCropRectIntent,$n=Ze.imageCropRectOrigin,xn=Ze.imageCropRect,wn=Ze.imageCropMinSize,kn=Ze.imageCropMaxSize,Sn=Ze.imageCropRange,Cn=Ze.imageCropAspectRatio,_n=Ze.imageCropLimitToImage,Mn=Ze.imageSize,En=Ze.imageScalar,Tn=Ze.imageOverlayMarkup,In=Ze.stagePadded,Pn=Ze.stageRecenter;Ls(t,Ge,(function(t){return n(140,A=t)})),Ls(t,Xe,(function(t){return n(144,j=t)})),Ls(t,Ke,(function(t){return n(174,G=t)})),Ls(t,Je,(function(t){return n(24,tt=t)})),Ls(t,Qe,(function(t){return n(151,q=t)})),Ls(t,tn,(function(t){return n(148,W=t)})),Ls(t,an,(function(t){return n(147,H=t)})),Ls(t,un,(function(t){return n(183,ct=t)})),Ls(t,cn,(function(t){return n(173,D=t)})),Ls(t,ln,(function(t){return n(158,ht=t)})),Ls(t,fn,(function(t){return n(157,dt=t)})),Ls(t,dn,(function(t){return n(14,K=t)})),Ls(t,hn,(function(t){return n(26,mt=t)})),Ls(t,pn,(function(t){return n(184,st=t)})),Ls(t,vn,(function(t){return n(150,Z=t)})),Ls(t,mn,(function(t){return n(149,U=t)})),Ls(t,gn,(function(t){return n(182,ut=t)})),Ls(t,yn,(function(t){return n(143,F=t)})),Ls(t,bn,(function(t){return n(176,et=t)})),Ls(t,$n,(function(t){return n(178,rt=t)})),Ls(t,xn,(function(t){return n(13,N=t)})),Ls(t,wn,(function(t){return n(154,Q=t)})),Ls(t,kn,(function(t){return n(180,ot=t)})),Ls(t,Sn,(function(t){return n(177,nt=t)})),Ls(t,Cn,(function(t){return n(179,it=t)})),Ls(t,_n,(function(t){return n(153,J=t)})),Ls(t,Mn,(function(t){return n(152,Y=t)})),Ls(t,En,(function(t){return n(146,V=t)})),Ls(t,Tn,(function(t){return n(172,O=t)})),Ls(t,In,(function(t){return n(142,z=t)}));var Rn=function(t,e){var n={target:t,translate:e},r=go(so(Q),H),i=go(so(ot),H),o=Bb(U,n,Object.assign({},W,{x:0,y:0}),{aspectRatio:it,minSize:r,maxSize:i});if(o=function(t,e,n){var r=Yo(t),i=r[0],o=r[1],a=r[2],u=r[3],c=Object.assign({},t);if(i<e.y&&(t.height=t.height-(e.y-i),t.y=e.y),o>e.x+e.width&&(t.width=e.x+e.width-t.x),a>e.y+e.height&&(t.height=e.y+e.height-t.y),u<e.x&&(t.width=t.width-(e.x-u),t.x=e.x),n){var s=Math.min(1,c.width/t.width,c.height/t.height);return Bo(c,s)}return t}(o,Object.assign({},W,{x:0,y:0}),it),!J)return{boundsLimited:o,boundsIntent:o};var a=r$(U,o,n,at,{aspectRatio:it,minSize:r,maxSize:i});return{boundsLimited:a,boundsIntent:a}},An=function(t,e){var n={target:t,translate:e},r=go(so(Q),H),i=go(so(ot),H),o=function(t,e,n){void 0===n&&(n={});var r=e.target,i=e.translate,o=n,a=o.aspectRatio,u=o.minSize,c=Fb[r],s=Oi[c],l=Yi(Mo(t),Bi(s[0]*t.width,s[1]*t.height)),f=Oi[r],d=Yi(Mo(t),Bi(f[0]*t.width,f[1]*t.height)),h=jb(r),p=h[0],v=h[1],m=h[2],g=h[3],y=h[4],b=h[5],$=h[6],x=i.x,w=i.y;y?w=0:b&&(x=0);var k=Yo(t),S=k[0],C=k[1],_=k[2],M=k[3];if(p?M=l.x:v&&(C=l.x),g?S=l.y:m&&(_=l.y),p?C=d.x+x:v&&(M=d.x+x),g?_=d.y+w:m&&(S=d.y+w),u&&y&&_-S<u.height){var E=u.height-(_-S);S-=.5*E,_+=.5*E}if(u&&b&&C-M<u.width){var T=u.width-(C-M);M-=.5*T,C+=.5*T}if(a)if($){var I=C-M,P=_-S;y?(P=I/a,S=l.y-.5*P,_=l.y+.5*P):b&&(I=P*a,M=l.x-.5*I,C=l.x+.5*I)}else{var R=Bi(d.x+x-l.x,d.y+w-l.y);r===Ri?(R.x=Math.max(0,R.x),R.y=Math.min(0,R.y)):r===Ai?(R.x=Math.max(0,R.x),R.y=Math.max(0,R.y)):r===Li?(R.x=Math.min(0,R.x),R.y=Math.max(0,R.y)):r===Pi&&(R.x=Math.min(0,R.x),R.y=Math.min(0,R.y));var A=Ui(R),L=Bi(a,1),O=Qi(Zi(L),A);r===Ri?(C=l.x+O.x,S=l.y-O.y):r===Ai?(C=l.x+O.x,_=l.y+O.y):r===Li?(M=l.x-O.x,_=l.y+O.y):r===Pi&&(M=l.x-O.x,S=l.y-O.y)}return Lo(M,S,C-M,_-S)}(U,n,{aspectRatio:it,minSize:r});return{boundsLimited:Bb(U,n,Object.assign({},W,{x:0,y:0}),{aspectRatio:it,minSize:r,maxSize:i}),boundsIntent:o}},Ln=void 0,On=void 0,zn=function(t){var e=t.translation,n=t.scalar;B&&(n=1,e=Hi(Vi(e)));var r,i=Math.min(Z.width/N.width,Z.height/N.height),o=Qi(Vi(e),1/i);if(On){var a=Ki(Vi(On),e);On=e,r=zo(Mo(N),a)}else r=zo(Mo(Ln),Hi(Vi(o))),void 0!==n&&Do(r,1/n);Vs(bn,et=r,et),Vs(xn,N=r,N)},Dn=mf([Sn,xn],(function(t,e){var n=t[0],r=t[1];if(r){var i=n[0],o=n[1],a=Vo(r);e([fo(Jo(Go(i,a),zi)),fo(Jo(Xo(o,a),zi))])}}));Ls(t,Dn,(function(t){return n(175,X=t)}));var Fn=mf([Mn,_n,wn,kn,Sn,dn],(function(t,e){var n=t[0],r=t[1],i=t[2],o=(t[3],t[4]),a=t[5];if(n){var u,c,s=o[0],l=o[1];r?(u=function(t,e,n){return Ci(n)?1-1/Math.min(t.height/e.width,t.width/e.height):1-1/Math.min(t.width/e.width,t.height/e.height)}(n,l,a),c=Math.min(s.width/i.width,s.height/i.height)):(u=-1,c=1),e([u,c].map((function(t){return zi(t)})))}}));Ls(t,Fn,(function(t){return n(27,gt=t)}));var jn=mf([Mn,xn,Sn,dn],(function(t,e){var n,r=t[0],i=t[1],o=t[2],a=t[3];if(!r||!i)return e(0);var u=o[0],c=o[1],s=i.width,l=i.height,f=Vo(i),d=Ci(a)?vo(r.height,r.width):r,h=Xo(d,f);if(s<=h.width||l<=h.height){var p=h.width-u.width,v=h.height-u.height;n=0===p||0===v?1:1-Math.min((s-u.width)/p,(l-u.height)/v)}else{var m=c.width-h.width,g=c.height-h.height,y=Xo({width:m,height:g},f);n=-Math.min((s-h.width)/y.width,(l-h.height)/y.height)}e(n)}));Ls(t,jn,(function(t){return n(28,yt=t)}));var Bn,Nn,Vn=function(t){var e,n,r,i=Vo(Ln),o=Ci(K)?vo(Y.height,Y.width):Y,a=Xo(o,i);if(t>=0){var u=a.width-nt[0].width,c=a.height-nt[0].height;e=a.width-u*t,n=a.height-c*t,r=Go({width:e,height:n},i)}else{var s=nt[1].width-a.width,l=nt[1].height-a.height;e=a.width+s*-t,n=a.height+l*-t,r=Xo({width:e,height:n},i)}e=r.width,n=r.height;var f=Ln.x+.5*Ln.width-.5*e,d=Ln.y+.5*Ln.height-.5*n;Vs(xn,N={x:f,y:d,width:e,height:n},N)},Hn=function(t){var e=Do(Mo(Bn),1/t);Vs(bn,et=e,et),Vs(xn,N=e,N)};_l();var Wn,Un=function(){Pn.set({})},Zn=_h(0,{precision:1e-4});Ls(t,Zn,(function(t){return n(29,bt=t)}));var qn=_h();Ls(t,qn,(function(t){return n(30,$t=t)}));var Gn=mf([Cn,pn,De],(function(t,e){var n=t[0],i=t[1],o=t[2];if(r){var a=zv(o),u=[].concat(a).map((function(t){return t[0]})).sort((function(t,e){return lu(t[0])&&!lu(e[0])?1:-1})).find((function(t){if(lu(t)&&i){var e=t[0],r=t[1],o=i.width===e&&i.height===r,a=n===$i(e,r);return o&&a}return t===n}));if(!u)return e(void 0);e(a.map((function(t){return t[0]})).findIndex((function(t){return lu(t)?Bf(t,u):t===u})))}}));Ls(t,Gn,(function(t){return n(155,lt=t)}));var Xn=function(t,e){if(r&&-1!==t&&void 0!==t){var n=zv(e)[t][0];return n?lu(n)?$i(n[0],n[1]):n:void 0}},Yn=mf([en,yn,Ye],(function(t,e){var n=t[0],r=t[1],i=t[2],o=Et(ze,i),a=o.rows,u=o.cols,c=o.opacity;if(!r||c<=0)return e([]);for(var s=r.x,l=r.y,f=r.width,d=r.height,h=f/u,p=d/a,v=[],m=1;m<=a-1;m++){var g=l+p*m;v.push({id:"image-selection-guide-row-"+m,points:[Bi(s,g),Bi(s+f,g)],opacity:c,strokeWidth:1,strokeColor:n})}for(var y=1;y<=u-1;y++){var b=s+h*y;v.push({id:"image-selection-guide-col-"+y,points:[Bi(b,l),Bi(b,l+d)],opacity:c,strokeWidth:1,strokeColor:n})}e(v)}));Ls(t,Yn,(function(t){return n(141,L=t)}));var Kn,Jn="crop-"+ui(),Qn=Jn+"-"+(zt?$e:"zoom"),tr=Qn,er=void 0,nr=_h(R?20:0);Ls(t,nr,(function(t){return n(138,I=t)}));return t.$$set=function(t){"isActive"in t&&wt(n(0,kt=t.isActive)),"stores"in t&&n(97,St=t.stores),"cropImageSelectionCornerStyle"in t&&n(1,_t=t.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in t&&n(98,Et=t.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in t&&n(99,It=t.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in t&&n(100,Rt=t.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in t&&n(101,Lt=t.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in t&&n(102,zt=t.cropEnableRotationInput),"cropEnableZoom"in t&&n(2,Ft=t.cropEnableZoom),"cropEnableZoomInput"in t&&n(103,Bt=t.cropEnableZoomInput),"cropEnableZoomAutoHide"in t&&n(104,Vt=t.cropEnableZoomAutoHide),"cropEnableImageSelection"in t&&n(105,Wt=t.cropEnableImageSelection),"cropEnableInfoIndicator"in t&&n(106,Zt=t.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in t&&n(107,Gt=t.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in t&&n(108,Yt=t.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in t&&n(109,Jt=t.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in t&&n(110,te=t.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in t&&n(111,ne=t.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in t&&n(112,ie=t.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in t&&n(113,ae=t.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in t&&n(114,ce=t.cropSelectPresetOptions),"cropEnableSelectPreset"in t&&n(115,le=t.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in t&&n(116,de=t.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in t&&n(95,pe=t.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in t&&n(117,me=t.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in t&&n(118,ye=t.cropWillRenderTools),"cropActiveTransformTool"in t&&n(119,$e=t.cropActiveTransformTool),"cropMinimizeToolbar"in t&&n(120,we=t.cropMinimizeToolbar),"cropInteractionFocus"in t&&n(121,Se=t.cropInteractionFocus),"cropRotationRange"in t&&n(3,_e=t.cropRotationRange),"cropMaskOpacity"in t&&n(122,Ee=t.cropMaskOpacity),"locale"in t&&n(4,Ie=t.locale)},t.$$.update=function(){var e;4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&Le.set("selection"===Se&&P),2097152&t.$$.dirty[3]&&n(129,r=ce&&Array.isArray(ce)&&ce.length),2097152&t.$$.dirty[3]|32&t.$$.dirty[4]&&De.set(r?ce:[]),4096&t.$$.dirty[0]&&P&&sn.set(1),4096&t.$$.dirty[0]&&nn.set(!P),4096&t.$$.dirty[0]&&rn.set(!P),65536&t.$$.dirty[4]&&n(124,h="overlay"===A.layoutMode),4194304&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(128,x=le&&!h),83886080&t.$$.dirty[4]&&n(137,c=W&&Z&&Zo(W,Z)),67117056&t.$$.dirty[4]&&n(135,s=!(!Z||!c)),67119104&t.$$.dirty[4]&&n(133,l=s&&No(Z,c,(function(t){return zi(t,5)}))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1879114288&t.$$.dirty[4]|31&t.$$.dirty[5]&&n(11,i=pt&&ye([te&&["Button","rotate-left",{label:Ie.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ie.cropIconButtonRotateLeft,onclick:function(){Ue(-Math.PI/2),qe.write()}}],ne&&["Button","rotate-right",{label:Ie.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ie.cropIconButtonRotateRight,onclick:function(){Ue(Math.PI/2),qe.write()}}],ie&&["Button","flip-horizontal",{label:Ie.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ie.cropIconButtonFlipHorizontal,onclick:function(){Ci(K)?Vs(fn,dt=!dt,dt):Vs(ln,ht=!ht,ht),qe.write()}}],ae&&["Button","flip-vertical",{label:Ie.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ie.cropIconButtonFlipVertical,onclick:function(){Ci(K)?Vs(ln,ht=!ht,ht):Vs(fn,dt=!dt,dt),qe.write()}}],x&&r&&[!1===pe?"Dropdown":Qb,"select-preset",{icon:Fv(Ie.cropIconSelectPreset,Ie,Xn(lt,ft)),label:Fv(Ie.cropLabelSelectPreset,Ie,Xn(lt,ft)),labelClass:"PinturaToolbarContentWide",options:ft,filter:pe,onfilterchange:Ne,selectedIndex:lt,onchange:function(t){var e=t.value;lu(e)?(Vs(Cn,it=$i(e[0],e[1]),it),Vs(pn,st=ho(e),st)):Vs(Cn,it=e,it),l&&Un(),qe.write()},optionMapper:function(t){var e=!1,n=lu(t.value)?t.value[0]/t.value[1]:t.value;if(n){var r=Af(Y,K,n);e=r.width<Q.width||r.height<Q.height}return t.icon=function(t,e){void 0===e&&(e={});var n,r,i,o,a=e,u=a.width,c=void 0===u?24:u,s=a.height,l=void 0===s?24:s,f=a.bounds,d=void 0===f?16:f,h=a.radius,p=void 0===h?3:h,v=lu(t)?$i(t[0],t[1]):t,m=!!v;return o=(i=(v=m?v:1)>1?d:v*d)/v,n=Math.round(.5*(c-i)),r=Math.round(.5*(l-o)),'<rect fill="'+(m?"currentColor":"none")+'" stroke="'+(m?"none":"currentColor")+'" stroke-width="'+c/16+'" stroke-dasharray="'+[c/12,c/6].join(" ")+'" x="'+n+'" y="'+r+'" width="'+i+'" height="'+o+'" rx="'+p+'"/>'}(t.value,{bounds:14}),Object.assign({},t,{disabled:e})}}],me&&["Dropdown","select-crop-limit",{icon:Fv(Ie.cropIconCropBoundary,Ie,J),label:Ie.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:function(t){var e=t.value;Vs(_n,J=e,J),qe.write()},options:[[!0,Ie.cropLabelCropBoundaryEdge,{icon:Fv(Ie.cropIconCropBoundary,Ie,!0)}],[!1,Ie.cropLabelCropBoundaryNone,{icon:Fv(Ie.cropIconCropBoundary,Ie,!1)}]]}]].filter(Boolean),A,(function(){return Ae.set({})})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|65537&t.$$.dirty[4]&&Vs(un,ct=P&&"never"!==we&&("always"===we||"short"===A.verticalSpace||h)?i.map((function(t){var e=t[0],n=t[1],r=t[2];return Array.isArray(r)?[e,n,r]:[e,n,Object.assign({},r,{hideLabel:!0})]})):[],ct),536870912&t.$$.dirty[4]&&n(23,o=J?0:-1),150994944&t.$$.dirty[4]&&n(130,a=W&&Bi(-(q.x-W.x),-(q.y-W.y))),524352&t.$$.dirty[4]&&n(131,u=F&&Bi(yv(F.x+.5*F.width+a.x),yv(F.y+.5*F.height+a.y))),33554432&t.$$.dirty[4]&&n(134,f=null!=U),16785408&t.$$.dirty[4]&&n(136,d=W&&c&&(c.height===W.height||c.width===W.width)),12587008&t.$$.dirty[4]&&n(132,p=!d&&H<1&&V<1),3840&t.$$.dirty[4]&&n(9,v=s&&!f&&(!l||p)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(22,m=Zt&&!!N&&!h),524352&t.$$.dirty[4]&&n(8,b=F&&a&&{x:F.x+a.x,y:F.y+a.y,width:F.width,height:F.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(21,g=Wt&&!!b&&!h),65600&t.$$.dirty[3]|2097280&t.$$.dirty[4]&&n(10,y=Jt&&!!u&&!It&&!B),512&t.$$.dirty[0]|1073741888&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&v&&It&&!j&&(clearTimeout(Wn),n(123,Wn=setTimeout(Un,It))),1073741824&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&j&&clearTimeout(Wn),1536&t.$$.dirty[0]|32768&t.$$.dirty[4]&&Zn.set(y&&v?1:0,{hard:!1===R}),32896&t.$$.dirty[4]&&qn.set(u,{hard:!1===R}),4096&t.$$.dirty[0]|262144&t.$$.dirty[4]&&(P&&!z?(Vs(cn,D.crop={maskOpacity:Ee,maskMarkupOpacity:Ee},D),cn.set(D)):(delete D.crop,cn.set(D))),131072&t.$$.dirty[4]&&L&&(e=O.filter((function(t){return!/^image\-selection\-guide/.test(t.id)})),Vs(Tn,O=P?[].concat(e,L):e,O)),65536&t.$$.dirty[4]&&n(127,$="short"!==A.verticalSpace),134217728&t.$$.dirty[3]|9&t.$$.dirty[4]&&n(20,w="never"===we&&!h||$&&"always"!==we),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&n(126,k=Ft&&Bt),2048&t.$$.dirty[3]|12&t.$$.dirty[4]&&n(125,S=Vt?$&&k:k),512&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(19,C=zt||S),2&t.$$.dirty[4]&&(S||n(5,tr=Qn)),32&t.$$.dirty[0]&&n(18,_={name:Jn,selected:tr}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(7,M=[zt&&{id:Jn+"-rotation",label:Ie.cropLabelTabRotation},S&&{id:Jn+"-zoom",label:Ie.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(17,E=M.map((function(t){return t.id}))),64&t.$$.dirty[0]|1&t.$$.dirty[4]&&Kn&&!Kn.children.length&&h&&Kn.dispatchEvent(new CustomEvent("measure",{detail:Kn.rect})),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&R&&nr.set(P?0:20),16384&t.$$.dirty[4]&&n(16,T=I?"transform: translateY("+I+"px)":void 0)},[kt,_t,Ft,_e,Ie,tr,Kn,M,b,v,y,i,P,N,K,er,T,E,_,C,w,g,m,o,tt,vt,mt,gt,yt,bt,$t,Pe,Re,Ae,Le,Oe,De,Ge,Xe,Ke,Je,Qe,tn,on,an,un,cn,ln,fn,dn,hn,pn,vn,mn,gn,yn,bn,$n,xn,wn,kn,Sn,Cn,_n,Mn,En,Tn,In,function(){ze="select",Vs(Xe,j=!0,j),Vs(mn,U=Mo(Z),U),Fe=B?Rn:An},function(t){var e=t.detail,n=Fe(e.direction,e.translation),r=n.boundsLimited,i=n.boundsIntent;Vs(Ke,G=!0,G),Vs(gn,ut=i,ut),Vs(vn,Z=r,Z)},function(t){var e=t.detail,n=Fe(e.direction,e.translation).boundsLimited;Vs(Ke,G=!1,G),Vs(Xe,j=!1,j),Vs(gn,ut=void 0,ut),Ui(e.translation)&&(Vs(vn,Z=n,Z),qe.write()),Vs(mn,U=void 0,U),ze=void 0},function(){ze="rotate",Vs(Xe,j=!0,j),Vs($n,rt=Mo(N),rt)},function(t){Vs(Ke,G=!0,G),Vs(dn,K=t,K)},function(t){Vs(Ke,G=!1,G),Vs(Xe,j=!1,j),Vs(dn,K=t,K),qe.write(),Vs($n,rt=void 0,rt)},function(){ze="pan",On=void 0,Vs(Xe,j=!0,j),Ln=Mo(N)},function(t){var e=t.detail;Vs(Ke,G=!0,G),zn(e)},function(t){var e=t.detail;Vs(Ke,G=!1,G),Vs(Xe,j=!1,j),(Ui(e.translation)>0||0!==e.scalar)&&(zn(e),qe.write()),Vs(bn,et=void 0,et),Ln=void 0},function(t){var e=t.detail.translation;B&&(e=Hi(Vi(e))),On=e,Vs(Xe,j=!1,j)},Dn,Fn,jn,function(){ze="zoom",Vs(Xe,j=!0,j),Ln=Mo(N)},function(t){Vs(Ke,G=!1,G),Vn(t)},function(t){Vn(t),qe.write(),Vs(Ke,G=!1,G),Vs(Xe,j=!1,j),Ln=void 0},function(){ze="zoom",Ln||(Bn=Mo(N),Vs(Xe,j=!0,j))},function(t){var e=t.detail;Bn&&(Vs(Ke,G=!0,G),Hn(e))},function(t){var e=t.detail;Bn&&(Vs(Ke,G=!1,G),Vs(Xe,j=!1,j),Hn(e),Vs(bn,et=void 0,et),Bn=void 0,qe.write())},function(t){var e=yg(t,tt,q);if(!Yt||qo(Z,e)){ze="zoom",Vs(Xe,j=!0,j),Vs(Ke,G=!0,G),t.preventDefault(),t.stopPropagation();var n=Yp(t),r=1+n/100,i=Mo(N),o=1===Math.min(N.width/Q.width,N.height/Q.height);if(Rt&&J){var a=He(N,Y,K);if(je()&&a&&n>0&&l){Vs(Xe,j=!1,j),Vs(Ke,G=!1,G);var u=Ci(K)?To({height:Y.width,width:Y.height}):To(Y);if(No(i,u))return;if(clearTimeout(Nn),No(qe.state.crop,u))return;return Vs(xn,N=u,N),void qe.write()}}var c=Oo(N);if(Gt&&"selection"!==Se&&n<0&&!o){var s=Ki(Vi(e),Z),f=Math.min(Z.width/N.width,Z.height/N.height),d=Do(Mo(Z),1.1);c=qo(d,e)?Yi(Mo(N),Qi(s,1/f)):c}var h=Do(Mo(N),r,c);if($o(X[1],h)||(h=Ao(Oo(h),X[1])),$o(h,X[0])||(h=Ao(Oo(h),X[0])),No(i,h,zi))return Vs(Xe,j=!1,j),void Vs(Ke,G=!1,G);Vs(xn,N=Jo(h,(function(t){return zi(t,5)})),N),Vs(Xe,j=!1,j),Vs(Ke,G=!1,G),clearTimeout(Nn),Nn=setTimeout((function(){qe.write()}),500)}},Un,Zn,qn,Gn,Yn,Jn,nr,pe,"crop",St,Et,It,Rt,Lt,zt,Bt,Vt,Wt,Zt,Gt,Yt,Jt,te,ne,ie,ae,ce,le,de,me,ye,$e,we,Se,Ee,Wn,h,S,k,$,x,r,a,u,p,l,f,s,d,c,I,R,A,L,z,F,j,B,V,H,W,U,Z,q,Y,J,Q,lt,ft,dt,ht,pt,function(e){Tl.call(this,t,e)},function(t){var e=t.detail;return n(5,tr=e)},function(t){Pl[t?"unshift":"push"]((function(){n(6,Kn=t)}))},function(t){return gg(t)},function(t){n(15,er=t)},function(e){Tl.call(this,t,e)}]}var x$={util:["crop",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,$$,m$,Ps,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[96]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[97]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"cropImageSelectionCornerStyle",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({cropImageSelectionCornerStyle:t}),Hl()}},{key:"cropWillRenderImageSelectionGuides",get:function(){return this.$$.ctx[98]},set:function(t){this.$$set({cropWillRenderImageSelectionGuides:t}),Hl()}},{key:"cropAutoCenterImageSelectionTimeout",get:function(){return this.$$.ctx[99]},set:function(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),Hl()}},{key:"cropEnableZoomMatchImageAspectRatio",get:function(){return this.$$.ctx[100]},set:function(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),Hl()}},{key:"cropEnableRotateMatchImageAspectRatio",get:function(){return this.$$.ctx[101]},set:function(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),Hl()}},{key:"cropEnableRotationInput",get:function(){return this.$$.ctx[102]},set:function(t){this.$$set({cropEnableRotationInput:t}),Hl()}},{key:"cropEnableZoom",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({cropEnableZoom:t}),Hl()}},{key:"cropEnableZoomInput",get:function(){return this.$$.ctx[103]},set:function(t){this.$$set({cropEnableZoomInput:t}),Hl()}},{key:"cropEnableZoomAutoHide",get:function(){return this.$$.ctx[104]},set:function(t){this.$$set({cropEnableZoomAutoHide:t}),Hl()}},{key:"cropEnableImageSelection",get:function(){return this.$$.ctx[105]},set:function(t){this.$$set({cropEnableImageSelection:t}),Hl()}},{key:"cropEnableInfoIndicator",get:function(){return this.$$.ctx[106]},set:function(t){this.$$set({cropEnableInfoIndicator:t}),Hl()}},{key:"cropEnableZoomTowardsWheelPosition",get:function(){return this.$$.ctx[107]},set:function(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),Hl()}},{key:"cropEnableLimitWheelInputToCropSelection",get:function(){return this.$$.ctx[108]},set:function(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),Hl()}},{key:"cropEnableCenterImageSelection",get:function(){return this.$$.ctx[109]},set:function(t){this.$$set({cropEnableCenterImageSelection:t}),Hl()}},{key:"cropEnableButtonRotateLeft",get:function(){return this.$$.ctx[110]},set:function(t){this.$$set({cropEnableButtonRotateLeft:t}),Hl()}},{key:"cropEnableButtonRotateRight",get:function(){return this.$$.ctx[111]},set:function(t){this.$$set({cropEnableButtonRotateRight:t}),Hl()}},{key:"cropEnableButtonFlipHorizontal",get:function(){return this.$$.ctx[112]},set:function(t){this.$$set({cropEnableButtonFlipHorizontal:t}),Hl()}},{key:"cropEnableButtonFlipVertical",get:function(){return this.$$.ctx[113]},set:function(t){this.$$set({cropEnableButtonFlipVertical:t}),Hl()}},{key:"cropSelectPresetOptions",get:function(){return this.$$.ctx[114]},set:function(t){this.$$set({cropSelectPresetOptions:t}),Hl()}},{key:"cropEnableSelectPreset",get:function(){return this.$$.ctx[115]},set:function(t){this.$$set({cropEnableSelectPreset:t}),Hl()}},{key:"cropEnableFilterMatchAspectRatio",get:function(){return this.$$.ctx[116]},set:function(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),Hl()}},{key:"cropSelectPresetFilter",get:function(){return this.$$.ctx[95]},set:function(t){this.$$set({cropSelectPresetFilter:t}),Hl()}},{key:"cropEnableButtonToggleCropLimit",get:function(){return this.$$.ctx[117]},set:function(t){this.$$set({cropEnableButtonToggleCropLimit:t}),Hl()}},{key:"cropWillRenderTools",get:function(){return this.$$.ctx[118]},set:function(t){this.$$set({cropWillRenderTools:t}),Hl()}},{key:"cropActiveTransformTool",get:function(){return this.$$.ctx[119]},set:function(t){this.$$set({cropActiveTransformTool:t}),Hl()}},{key:"cropMinimizeToolbar",get:function(){return this.$$.ctx[120]},set:function(t){this.$$set({cropMinimizeToolbar:t}),Hl()}},{key:"cropInteractionFocus",get:function(){return this.$$.ctx[121]},set:function(t){this.$$set({cropInteractionFocus:t}),Hl()}},{key:"cropRotationRange",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({cropRotationRange:t}),Hl()}},{key:"cropMaskOpacity",get:function(){return this.$$.ctx[122]},set:function(t){this.$$set({cropMaskOpacity:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({locale:t}),Hl()}}]),e}(df)]};function w$(t){var e,n,r,i,o,a,u,c=t[76],s=(ni(t[76].label)?t[76].label(t[2]):t[76].label)+"";function l(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[51].apply(e,[t[76]].concat(r))}var f=function(){return t[52](n,c)},d=function(){return t[52](null,c)};return{c:function(){e=el("div"),n=el("div"),r=il(),i=el("span"),o=rl(s),sl(n,"class",_$),sl(e,"slot","option"),sl(e,"class","PinturaFilterOption")},m:function(t,c){Qs(t,e,c),Ys(e,n),f(),Ys(e,r),Ys(e,i),Ys(i,o),a||(u=[al(n,"measure",l),Hs(Bh.call(null,n))],a=!0)},p:function(e,n){c!==(t=e)[76]&&(d(),c=t[76],f()),4&n[0]|16384&n[2]&&s!==(s=(ni(t[76].label)?t[76].label(t[2]):t[76].label)+"")&&fl(o,s)},d:function(t){t&&tl(e),d(),a=!1,Ts(u)}}}function k$(t){var e,n;return e=new dm({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[w$,function(t){return{76:t.option}},function(t){return[0,0,t.option?16384:0]}]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};4&n[0]&&(r.locale=t[2]),8&n[0]&&(r.options=t[3]),4096&n[0]&&(r.selectedIndex=t[12]),1028&n[0]|49152&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function S$(t){var e,n,r,i,o,a,u,c;function s(e){t[54](e)}function l(e){t[55](e)}function f(e){t[56](e)}var d={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[k$]},$$scope:{ctx:t}};return void 0!==t[4]&&(d.maskFeatherStartOpacity=t[4]),void 0!==t[5]&&(d.maskFeatherEndOpacity=t[5]),void 0!==t[6]&&(d.maskFeatherSize=t[6]),n=new Qp({props:d}),Pl.push((function(){return uf(n,"maskFeatherStartOpacity",s)})),Pl.push((function(){return uf(n,"maskFeatherEndOpacity",l)})),Pl.push((function(){return uf(n,"maskFeatherSize",f)})),n.$on("measure",t[57]),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"slot","footer"),sl(e,"style",t[11])},m:function(r,i){Qs(r,e,i),sf(n,e,null),a=!0,u||(c=[al(e,"transitionend",t[30]),al(e,"measure",t[58]),Hs(Bh.call(null,e,{observePosition:!0}))],u=!0)},p:function(t,u){var c={};8192&u[0]&&(c.elasticity=t[13]*t[19]),128&u[0]&&(c.onscroll=t[53]),5132&u[0]|32768&u[2]&&(c.$$scope={dirty:u,ctx:t}),!r&&16&u[0]&&(r=!0,c.maskFeatherStartOpacity=t[4],jl((function(){return r=!1}))),!i&&32&u[0]&&(i=!0,c.maskFeatherEndOpacity=t[5],jl((function(){return i=!1}))),!o&&64&u[0]&&(o=!0,c.maskFeatherSize=t[6],jl((function(){return o=!1}))),n.$set(c),(!a||2048&u[0])&&sl(e,"style",t[11])},i:function(t){a||(Yl(n.$$.fragment,t),a=!0)},o:function(t){Kl(n.$$.fragment,t),a=!1},d:function(t){t&&tl(e),lf(n),u=!1,Ts(c)}}}function C$(t){var e,n;return(e=new kb({props:{$$slots:{footer:[S$]},$$scope:{ctx:t}}})).$on("measure",t[59]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16380&n[0]|32768&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}var _$="PinturaFilterPreview";function M$(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k=Ss,S=function(){return k(),k=Rs(E,(function(t){return n(43,l=t)})),E},C=Ss,_=function(){return C(),C=Rs(M,(function(t){return n(49,b=t)})),M};t.$$.on_destroy.push((function(){return k()})),t.$$.on_destroy.push((function(){return C()}));var M=e.isActive;_();var E=e.isActiveFraction;S();var T=e.stores,I=e.locale,P=e.filterFunctions,R=e.filterOptions,A=El("elasticityMultiplier");Ls(t,A,(function(t){return n(13,w=t)}));var L=T,O=L.history,z=L.interfaceImages,D=L.stageRectBase,F=L.utilRect,j=L.animation,B=L.scrollElasticity,N=L.imageSize,V=L.imagePreview,H=L.imageCropRect,W=L.imageRotation,U=L.imageFlipX,Z=L.imageFlipY,q=L.imageBackgroundColor,G=L.imageGamma,X=L.imageColorMatrix,Y=L.allowPan,K=L.allowZoom,J=L.allowZoomControls;Ls(t,z,(function(t){return n(60,f=t)})),Ls(t,D,(function(t){return n(48,y=t)})),Ls(t,F,(function(t){return n(47,g=t)})),Ls(t,j,(function(t){return n(50,$=t)})),Ls(t,N,(function(t){return n(62,h=t)})),Ls(t,V,(function(t){return n(42,s=t)})),Ls(t,q,(function(t){return n(61,d=t)})),Ls(t,G,(function(t){return n(44,p=t)})),Ls(t,X,(function(t){return n(40,u=t)}));var Q=vf({});Ls(t,Q,(function(t){return n(46,m=t)}));var tt=function(t,e){return Vs(Q,m[t.value]=e,m)},et=mf(Q,(function(t){if(t[void 0]){var e=t[void 0];return x&&mo(x,e)?x:so(e)}}));Ls(t,et,(function(t){return n(63,x=t)}));var nt=mf([M,et,H,N,W,U,Z],(function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6];if(!n||!r||!o)return v;var s=To(o),l=Oo(s),f=Of(o,i,a),d=Oo(f),h=Ki(Vi(l),d),p=Hi(Vi(h)),m=Math.max(r.width/i.width,r.height/i.height);e({origin:p,translation:h,rotation:{x:c?Math.PI:0,y:u?Math.PI:0,z:a},scale:m})}));Ls(t,nt,(function(t){return n(45,v=t)}));var rt,it=_h($?20:0);Ls(t,it,(function(t){return n(39,a=t)}));var ot,at,ut,ct,st,lt,ft={},dt={x:0,y:0},ht=vf([]);Ls(t,ht,(function(t){return n(41,c=t)}));var pt=function(t){var e=Object.assign({},t,{data:s,size:h,offset:Object.assign({},t.offset),mask:Object.assign({},t.mask),backgroundColor:d});return e.opacity=l,e.offset.y+=a,e.mask.y+=a,e.id="filter",e},vt=function(){return f.filter((function(t){return"filter"!==t.id}))};Cl((function(){z.set([])}));return t.$$set=function(t){"isActive"in t&&_(n(0,M=t.isActive)),"isActiveFraction"in t&&S(n(1,E=t.isActiveFraction)),"stores"in t&&n(34,T=t.stores),"locale"in t&&n(2,I=t.locale),"filterFunctions"in t&&n(35,P=t.filterFunctions),"filterOptions"in t&&n(3,R=t.filterOptions)},t.$$.update=function(){if(262144&t.$$.dirty[1]&&Y.set(b),262144&t.$$.dirty[1]&&K.set(b),262144&t.$$.dirty[1]&&J.set(b),8&t.$$.dirty[0]&&n(38,r=zv(R)),640&t.$$.dirty[1]&&n(12,i=function(t,e){if(!t||!t.filter||!e)return 0;var n=t.filter;return e.findIndex((function(t){var e=t[0];if(!P[e])return!1;var r=P[e]();return Bf(r,n)}))}(u,r)),786432&t.$$.dirty[1]&&$&&it.set(b?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&b&&g&&y&&lt&&n(37,st={x:y.x-g.x,y:y.y-g.y+lt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&v&&st&&dt&&ct&&rt){var e=st.x+ct.x+dt.x,s=st.y,f=ct.x+st.x,d=f+ct.width;ht.set(r.map((function(t,n){var r=t[0],i=m[r],o=dt.x+i.x,a=o+i.width;if(a<0||o>ct.width)return!1;var c=e+i.x,l=s+i.y,h=function(t){return{origin:Vi(t.origin),translation:Vi(t.translation),rotation:Object.assign({},t.rotation),scale:t.scale}}(v);h.offset=Bi(.5*i.width+c,.5*i.height+l);h.maskOpacity=1,h.mask=Lo(c+0,l,i.width+0,i.height),h.maskFeather=[1,0,1,0,1,d,1,d],o<ut&&ot<1&&(h.maskFeather[0]=ot,h.maskFeather[1]=f,h.maskFeather[2]=1,h.maskFeather[3]=f+ut),a>ct.width-ut&&at<1&&(h.maskFeather[4]=at,h.maskFeather[5]=d-ut,h.maskFeather[6]=1,h.maskFeather[7]=d),h.maskCornerRadius=rt[r];var g=u&&Object.keys(u).filter((function(t){return"filter"!=t})).map((function(t){return u[t]}))||[];return ni(P[r])&&g.push(P[r]()),h.colorMatrix=g.length?ws(g):void 0,h.gamma=p,h})).filter(Boolean))}if(7424&t.$$.dirty[1])if(l>0&&c){var h=[].concat(vt(),c.map(pt));z.set(h)}else z.set(vt());256&t.$$.dirty[1]&&n(11,o=a?"transform: translateY("+a+"px)":void 0)},[M,E,I,R,ot,at,ut,dt,ct,lt,ft,o,i,w,A,z,D,F,j,B,N,V,q,G,X,Q,tt,et,nt,it,function(t){t.target.className===_$&&n(36,rt=Object.keys(ft).reduce((function(t,e){var n=ft[e],r=getComputedStyle(n),i=["top-left","top-right","bottom-left","bottom-right"].map((function(t){return r.getPropertyValue("border-"+t+"-radius")})).map(Xp).map((function(t){return 1.25*t}));return t[e]=i,t}),{}))},ht,function(t){var e=t.value;Vs(X,u=Object.assign({},u,{filter:ni(P[e])?P[e]():void 0}),u),O.write()},"filter",T,P,rt,st,r,a,u,c,s,l,p,v,m,g,y,b,$,function(t,e){return tt(t,e.detail)},function(t,e){Pl[t?"unshift":"push"]((function(){ft[e.value]=t,n(10,ft)}))},function(t){return n(7,dt=t)},function(t){n(4,ot=t)},function(t){n(5,at=t)},function(t){n(6,ut=t)},function(t){return n(8,ct=t.detail)},function(t){return n(9,lt=t.detail)},function(e){Tl.call(this,t,e)}]}var E$={util:["filter",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,M$,C$,Ps,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[33]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[34]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"filterFunctions",get:function(){return this.$$.ctx[35]},set:function(t){this.$$set({filterFunctions:t}),Hl()}},{key:"filterOptions",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({filterOptions:t}),Hl()}}]),e}(df)]};function T$(t){var e,n,r=t[42].label+"";return{c:function(){e=el("span"),n=rl(r)},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){2048&e[1]&&r!==(r=t[42].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function I$(t){for(var e,n,r=[{class:"PinturaControlList"},{tabs:t[1]},t[5]],i={$$slots:{default:[T$,function(t){return{42:t.tab}},function(t){return[0,t.tab?2048:0]}]},$$scope:{ctx:t}},o=0;o<r.length;o+=1)i=_s(i,r[o]);return(e=new op({props:i})).$on("select",t[24]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=34&n[0]?of(r,[r[0],2&n[0]&&{tabs:t[1]},32&n[0]&&af(t[5])]):{};6144&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function P$(t){for(var e,n,r=[t[7][t[41]]],i={},o=0;o<r.length;o+=1)i=_s(i,r[o]);return e=new Mb({props:i}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var i=128&n[0]|1024&n[1]?of(r,[af(t[7][t[41]])]):{};e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function R$(t){var e,n,r,i,o;n=new Qp({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[I$]},$$scope:{ctx:t}}});for(var a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]],u={$$slots:{default:[P$,function(t){return{41:t.panel}},function(t){return[0,t.panel?1024:0]}]},$$scope:{ctx:t}},c=0;c<a.length;c+=1)u=_s(u,a[c]);return i=new gp({props:u}),{c:function(){e=el("div"),cf(n.$$.fragment),r=il(),cf(i.$$.fragment),sl(e,"slot","footer"),sl(e,"style",t[3])},m:function(t,a){Qs(t,e,a),sf(n,e,null),Ys(e,r),sf(i,e,null),o=!0},p:function(t,r){var u={};64&r[0]&&(u.elasticity=t[6]*t[9]),38&r[0]|4096&r[1]&&(u.$$scope={dirty:r,ctx:t}),n.$set(u);var c=48&r[0]?of(a,[a[0],a[1],16&r[0]&&{panels:t[4]},32&r[0]&&af(t[5])]):{};128&r[0]|5120&r[1]&&(c.$$scope={dirty:r,ctx:t}),i.$set(c),(!o||8&r[0])&&sl(e,"style",t[3])},i:function(t){o||(Yl(n.$$.fragment,t),Yl(i.$$.fragment,t),o=!0)},o:function(t){Kl(n.$$.fragment,t),Kl(i.$$.fragment,t),o=!1},d:function(t){t&&tl(e),lf(n),lf(i)}}}function A$(t){var e,n;return(e=new kb({props:{$$slots:{footer:[R$]},$$scope:{ctx:t}}})).$on("measure",t[25]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};254&n[0]|4096&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function L$(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p=Ss,v=function(){return p(),p=Rs(g,(function(t){return n(21,s=t)})),g};t.$$.on_destroy.push((function(){return p()}));var m=e.stores,g=e.isActive;v();var y=e.locale,b=void 0===y?{}:y,$=e.finetuneControlConfiguration,x=e.finetuneOptions,w=e.finetuneNudgePrecision,k=void 0===w?void 0:w,S=m,C=S.history,_=S.animation,M=S.scrollElasticity,E=S.rangeInputElasticity,T=S.imageColorMatrix,I=S.imageConvolutionMatrix,P=S.imageGamma,R=S.imageVignette,A=S.imageNoise,L=S.allowPan,O=S.allowZoom,z=S.allowZoomControls;Ls(t,_,(function(t){return n(22,l=t)}));var D={imageColorMatrix:T,imageConvolutionMatrix:I,imageGamma:P,imageVignette:R,imageNoise:A},F=El("elasticityMultiplier");Ls(t,F,(function(t){return n(6,d=t)}));var j="finetune-"+ui(),B=vf({});Ls(t,B,(function(t){return n(23,f=t)}));var N=vf({});Ls(t,N,(function(t){return n(7,h=t)}));var V=[],H=_h(l?20:0);Ls(t,H,(function(t){return n(20,c=t)}));return t.$$set=function(t){"stores"in t&&n(15,m=t.stores),"isActive"in t&&v(n(0,g=t.isActive)),"locale"in t&&n(16,b=t.locale),"finetuneControlConfiguration"in t&&n(17,$=t.finetuneControlConfiguration),"finetuneOptions"in t&&n(18,x=t.finetuneOptions),"finetuneNudgePrecision"in t&&n(19,k=t.finetuneNudgePrecision)},t.$$.update=function(){var e;2097152&t.$$.dirty[0]&&L.set(s),2097152&t.$$.dirty[0]&&O.set(s),2097152&t.$$.dirty[0]&&z.set(s),327680&t.$$.dirty[0]&&n(1,r=x?x.map((function(t){var e=t[0],n=t[1];return{id:e,label:ni(n)?n(b):n}})):[]),2&t.$$.dirty[0]&&n(2,i=r.length&&r[0].id),4&t.$$.dirty[0]&&n(5,o={name:j,selected:i}),2&t.$$.dirty[0]&&n(4,a=r.map((function(t){return t.id}))),131072&t.$$.dirty[0]&&$&&(e=$,V&&V.forEach((function(t){return t()})),V=a.map((function(t){var n=e[t],r=n.getStore,i=n.getValue,o=void 0===i?xi:i;return r(D).subscribe((function(e){var n,r=null!=e?o(e):e;Vs(B,f=Object.assign({},f,((n={})[t]=r,n)),f)}))}))),8519680&t.$$.dirty[0]&&$&&f&&Vs(N,h=Object.keys(f).reduce((function(t,e){var n=$[e],r=n.base,i=n.min,o=n.max,a=n.getLabel,u=n.getStore,c=n.setValue,s=void 0===c?function(t,e){return t.set(e)}:c,l=u(D),h=null!=f[e]?f[e]:r;return t[e]={base:r,min:i,max:o,value:h,valueLabel:a?a(h,i,o,o-i):Math.round(100*h),oninputmove:function(t){s(l,t)},oninputend:function(t){s(l,t),C.write()},elasticity:d*E,labelReset:b.labelReset,nudgeMultiplier:k},t}),{}),h),6291456&t.$$.dirty[0]&&l&&H.set(s?0:20),1048576&t.$$.dirty[0]&&n(3,u=c?"transform: translateY("+c+"px)":void 0)},[g,r,i,u,a,o,d,h,_,M,F,B,N,H,"finetune",m,b,$,x,k,c,s,l,f,function(t){var e=t.detail;return n(2,i=e)},function(e){Tl.call(this,t,e)}]}var O$={util:["finetune",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,L$,A$,Ps,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[14]}},{key:"stores",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"finetuneControlConfiguration",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({finetuneControlConfiguration:t}),Hl()}},{key:"finetuneOptions",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({finetuneOptions:t}),Hl()}},{key:"finetuneNudgePrecision",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({finetuneNudgePrecision:t}),Hl()}}]),e}(df)]},z$=function(t,e){var n=e.length;return t<0?t%n+n:t>=n?t%n:t};function D$(t,e,n){var r=t.slice();return r[48]=e[n].key,r[49]=e[n].index,r[50]=e[n].translate,r[51]=e[n].scale,r[14]=e[n].rotate,r[52]=e[n].dir,r[53]=e[n].center,r[54]=e[n].type,r[2]=e[n].visible,r}function F$(t){var e,n;return{c:function(){sl(e=el("div"),"class","PinturaShapeManipulator"),sl(e,"data-control","point"),sl(e,"style",n="pointer-events:none;transform: translate3d("+t[53].x+"px, "+t[53].y+"px, 0) scale("+t[5]+", "+t[5]+"); opacity: "+t[4])},m:function(t,n){Qs(t,e,n)},p:function(t,r){56&r[0]&&n!==(n="pointer-events:none;transform: translate3d("+t[53].x+"px, "+t[53].y+"px, 0) scale("+t[5]+", "+t[5]+"); opacity: "+t[4])&&sl(e,"style",n)},d:function(t){t&&tl(e)}}}function j$(t,e){var n,r,i,o,a,u,c,s,l;function f(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[19].apply(t,[e[49]].concat(r))}var d="edge"===e[54]&&e[2]&&F$(e);return{key:t,first:null,c:function(){n=el("div"),u=il(),d&&d.c(),c=ol(),sl(n,"role","button"),sl(n,"aria-label",r="Drag "+e[54]+" "+e[48]),sl(n,"tabindex",i="edge"===e[54]?-1:0),sl(n,"class","PinturaShapeManipulator"),sl(n,"data-control",o=e[54]),sl(n,"style",a="cursor:"+(e[52]?e[52]+"-resize":"move")+";opacity:"+e[4]+";--tx:"+e[50].x+";--ty:"+e[50].y+";--r:"+("edge"===e[54]?e[14]:0)+"rad;--sx:"+("point"===e[54]?e[5]:e[51].x)+";--sy:"+("point"===e[54]?e[5]:e[51].y)+";"),this.first=n},m:function(t,r){Qs(t,n,r),Qs(t,u,r),d&&d.m(t,r),Qs(t,c,r),s||(l=[al(n,"keydown",e[7]),al(n,"keyup",e[8]),al(n,"nudge",f),Hs(wp.call(null,n,{preventDefault:!0})),al(n,"interactionstart",(function(){Is(e[11]("start",e[49]))&&e[11]("start",e[49]).apply(this,arguments)})),al(n,"interactionupdate",(function(){Is(e[11]("move",e[49]))&&e[11]("move",e[49]).apply(this,arguments)})),al(n,"interactionend",(function(){Is(e[11]("end",e[49]))&&e[11]("end",e[49]).apply(this,arguments)})),Hs(Up.call(null,n))],s=!0)},p:function(t,u){e=t,8&u[0]&&r!==(r="Drag "+e[54]+" "+e[48])&&sl(n,"aria-label",r),8&u[0]&&i!==(i="edge"===e[54]?-1:0)&&sl(n,"tabindex",i),8&u[0]&&o!==(o=e[54])&&sl(n,"data-control",o),56&u[0]&&a!==(a="cursor:"+(e[52]?e[52]+"-resize":"move")+";opacity:"+e[4]+";--tx:"+e[50].x+";--ty:"+e[50].y+";--r:"+("edge"===e[54]?e[14]:0)+"rad;--sx:"+("point"===e[54]?e[5]:e[51].x)+";--sy:"+("point"===e[54]?e[5]:e[51].y)+";")&&sl(n,"style",a),"edge"===e[54]&&e[2]?d?d.p(e,u):((d=F$(e)).c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d:function(t){t&&tl(n),t&&tl(u),d&&d.d(t),t&&tl(c),s=!1,Ts(l)}}}function B$(t){var e,n,r,i;return{c:function(){sl(e=el("div"),"role","button"),sl(e,"aria-label","Drag rotator"),sl(e,"tabindex","0"),sl(e,"class","PinturaShapeManipulator"),sl(e,"data-control","rotate"),sl(e,"style",n="transform: translate3d("+t[0].x+"px, "+t[0].y+"px, 0) scale("+t[5]+", "+t[5]+"); opacity: "+t[4])},m:function(n,o){Qs(n,e,o),r||(i=[al(e,"keydown",t[7]),al(e,"keyup",t[8]),al(e,"nudge",t[13]),Hs(wp.call(null,e,{preventDefault:!0})),al(e,"interactionstart",t[14]("start")),al(e,"interactionupdate",t[14]("move")),al(e,"interactionend",t[14]("end")),Hs(Up.call(null,e))],r=!0)},p:function(t,r){49&r[0]&&n!==(n="transform: translate3d("+t[0].x+"px, "+t[0].y+"px, 0) scale("+t[5]+", "+t[5]+"); opacity: "+t[4])&&sl(e,"style",n)},d:function(t){t&&tl(e),r=!1,Ts(i)}}}function N$(t){for(var e,n,r=[],i=new Map,o=t[3],a=function(t){return t[48]},u=0;u<o.length;u+=1){var c=D$(t,o,u),s=a(c);i.set(s,r[u]=j$(s,c))}var l=t[1]&&B$(t);return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=il(),l&&l.c(),n=ol()},m:function(t,i){for(var o=0;o<r.length;o+=1)r[o].m(t,i);Qs(t,e,i),l&&l.m(t,i),Qs(t,n,i)},p:function(t,u){6584&u[0]&&(o=t[3],r=rf(r,u,a,1,t,o,i,e.parentNode,ef,j$,e,D$)),t[1]?l?l.p(t,u):((l=B$(t)).c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:Ss,o:Ss,d:function(t){for(var i=0;i<r.length;i+=1)r[i].d(t);t&&tl(e),l&&l.d(t),t&&tl(n)}}}function V$(t,e,n){var r,i,o,a,u=_l(),c=.5*Si,s=ki-c,l=ki+c,f=-ki,d=f-c,h=f+c,p=wi-c,v=-wi+c,m=c,g=-c,y=ki-Si,b=y-c,$=y+c,x=wi-Si,w=x-c,k=x+c,S=f-Si,C=S+c,_=S-c,M=f+Si,E=M+c,T=M-c,I=e.visible,P=void 0!==I&&I,R=e.points,A=void 0===R?[]:R,L=e.rotatorPoint,O=void 0===L?void 0:L,z=e.enableDragEdges,D=void 0===z||z,F=e.enableDragPoints,j=void 0===F||F,B=e.enableRotatePoints,N=void 0===B||B,V=El("isAnimated");Ls(t,V,(function(t){return n(18,i=t)}));var H=!1,W=_h(.5,{precision:1e-4,stiffness:.3,damping:.7});Ls(t,W,(function(t){return n(5,a=t)}));var U=_h(0,{precision:.001,stiffness:.3,damping:.7});Ls(t,U,(function(t){return n(4,o=t)}));var Z=function(t){var e="";return(t<=l&&t>=s||t>=d&&t<=h)&&(e="ns"),(t<=v||t>=p||t>=g&&t<=m)&&(e="ew"),(t>=w&&t<=k||t<=E&&t>=T)&&(e="nesw"),(t>=b&&t<=$||t<=C&&t>=_)&&(e="nwse"),e},q=function(t,e){u("resizestart",{indexes:t,translation:ji()}),u("resizemove",{indexes:t,translation:e}),u("resizeend",{indexes:t,translation:ji()})};return t.$$set=function(t){"visible"in t&&n(2,P=t.visible),"points"in t&&n(15,A=t.points),"rotatorPoint"in t&&n(0,O=t.rotatorPoint),"enableDragEdges"in t&&n(16,D=t.enableDragEdges),"enableDragPoints"in t&&n(17,j=t.enableDragPoints),"enableRotatePoints"in t&&n(1,N=t.enableRotatePoints)},t.$$.update=function(){262148&t.$$.dirty[0]&&W.set(P?1:.5,{hard:!1===i}),262148&t.$$.dirty[0]&&U.set(P?1:0,{hard:!1===i}),32768&t.$$.dirty[0]&&n(3,r=function(t,e){for(var n=0,r=oo(t),i=[],o=t.length,a=function(){var e=z$(n-1,t),o=z$(n+1,t),a=t[e],u=t[n],c=t[o],s=Math.atan2(c.y-u.y,c.x-u.x);if(j){var l=Zi(Bi(a.x-u.x,a.y-u.y)),f=Zi(Bi(c.x-u.x,c.y-u.y)),d=Bi(l.x+f.x,l.y+f.y),h=D?j&&Z(Math.atan2(d.y,d.x)):void 0;i.push({index:[n],key:"point-"+n,type:"point",scale:{x:1,y:1},translate:{x:u.x,y:u.y},angle:void 0,rotate:N,center:u,dir:h})}if(!D)return"continue";if(Array.isArray(D)&&!D.some((function(t){var e=t[0],r=t[1];return n===e&&o===r})))return"continue";var p=Bi(u.x+.5*(c.x-u.x),u.y+.5*(c.y-u.y));i.push({index:[n,o],key:"edge-"+n,type:"edge",scale:{x:ro(u,c),y:1},translate:{x:u.x,y:u.y},angle:s,rotate:s,center:p,visible:Array.isArray(D),dir:Z(Math.atan2(r.y-p.y,r.x-p.x))})};n<o;n++)a();return i}(A))},[O,N,P,r,o,a,V,function(t){return H=t.shiftKey},function(t){return H=!1},W,U,function(t,e){return function(n){var r=n.detail,i=r&&r.translation?r.translation:Bi(0,0);u("resize"+t,Object.assign({},r,{indexes:e,translation:i,shiftKey:H}))}},q,function(t){var e=t.detail;u("rotatestart",{translation:ji()}),u("rotatemove",{translation:e}),u("rotateend",{translation:ji()})},function(t){return function(e){var n=e.detail,r=n&&n.translation?n.translation:Bi(0,0);u("rotate"+t,{translation:r,shiftKey:H})}},A,D,j,i,function(t,e){var n=e.detail;return q(t,n)}]}var H$=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,V$,N$,Ps,{visible:2,points:15,rotatorPoint:0,enableDragEdges:16,enableDragPoints:17,enableRotatePoints:1},null,[-1,-1]),n}return gr(e,t),e}(df),W$=function(t,e){var n=gg(t);return Ki(n,e)},U$=null,Z$=function(t){if(null===U$&&(U$=Dr()&&"visualViewport"in window),!U$)return!1;var e=visualViewport.height,n=function(){t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),function(){return visualViewport.removeEventListener("resize",n)}};function q$(t){var e,n,r,i,o,a,u,c,s,l;r=new jp({props:{onclick:t[1],label:t[5],icon:t[7],hideLabel:!t[6]}});var f=t[20].default,d=Os(f,t,t[19],null);return u=new jp({props:{onclick:t[0],label:t[2],icon:t[4],hideLabel:!t[3],class:"PinturaInputFormButtonConfirm"}}),{c:function(){e=el("div"),n=el("div"),cf(r.$$.fragment),i=il(),o=el("div"),d&&d.c(),a=il(),cf(u.$$.fragment),sl(o,"class","PinturaInputFormFields"),sl(n,"class","PinturaInputFormInner"),sl(e,"class","PinturaInputForm"),sl(e,"style",t[9])},m:function(f,h){Qs(f,e,h),Ys(e,n),sf(r,n,null),Ys(n,i),Ys(n,o),d&&d.m(o,null),Ys(n,a),sf(u,n,null),t[21](e),c=!0,s||(l=[al(e,"focusin",t[10]),al(e,"focusout",t[11]),al(e,"measure",t[12]),Hs(Bh.call(null,e))],s=!0)},p:function(t,n){var i={};2&n[0]&&(i.onclick=t[1]),32&n[0]&&(i.label=t[5]),128&n[0]&&(i.icon=t[7]),64&n[0]&&(i.hideLabel=!t[6]),r.$set(i),d&&d.p&&(!c||524288&n[0])&&Fs(d,f,t,t[19],c?Ds(f,t[19],n,null):js(t[19]),null);var o={};1&n[0]&&(o.onclick=t[0]),4&n[0]&&(o.label=t[2]),16&n[0]&&(o.icon=t[4]),8&n[0]&&(o.hideLabel=!t[3]),u.$set(o),(!c||512&n[0])&&sl(e,"style",t[9])},i:function(t){c||(Yl(r.$$.fragment,t),Yl(d,t),Yl(u.$$.fragment,t),c=!0)},o:function(t){Kl(r.$$.fragment,t),Kl(d,t),Kl(u.$$.fragment,t),c=!1},d:function(n){n&&tl(e),lf(r),d&&d.d(n),lf(u),t[21](null),s=!1,Ts(l)}}}function G$(t,e,n){var r,i,o,a,u,c=e.$$slots,s=void 0===c?{}:c,l=e.$$scope,f=e.onconfirm,d=e.oncancel,h=e.autoFocus,p=void 0===h||h,v=e.autoPositionCursor,m=void 0===v||v,g=e.labelConfirm,y=e.labelConfirmShow,b=void 0===y||y,$=e.iconConfirm,x=e.labelCancel,w=e.labelCancelShow,k=void 0!==w&&w,S=e.iconCancel,C=e.panelOffset,_=void 0===C?ji():C,M=!1,E=void 0,T=void 0,I="",P=0,R=function(){var t=a.querySelector("input, textarea");t.focus(),P>=1||t.select()},A=function(){var t,e,r,i;M=!0,L||!Va()&&!Gr()||n(16,I="top:1em;bottom:auto;"),Va()&&(r=function(t){return e=t.touches[0].screenY},i=function(t){var n=t.touches[0].screenY,r=t.target;/textarea/i.test(r.nodeName)?(n>e?0==r.scrollTop&&t.preventDefault():n<e?r.scrollTop+r.offsetHeight==r.scrollHeight&&t.preventDefault():t.preventDefault(),e=n):t.preventDefault()},(t=a).addEventListener("touchstart",r),t.addEventListener("touchmove",i)),n(17,P=1)},L=Z$((function(t){i?"hidden"!==t||M?(clearTimeout(T),T=void 0,n(16,I="top:"+(visualViewport.height-E-_.y)+"px"),"visible"===t?(n(8,a.dataset.layout="stick",a),R(),A()):(M=!1,n(17,P=0))):R():n(16,I="top: 4.5em; bottom: auto")}));return kl((function(){p&&R()})),Cl((function(){L&&L()})),t.$$set=function(t){"onconfirm"in t&&n(0,f=t.onconfirm),"oncancel"in t&&n(1,d=t.oncancel),"autoFocus"in t&&n(13,p=t.autoFocus),"autoPositionCursor"in t&&n(14,m=t.autoPositionCursor),"labelConfirm"in t&&n(2,g=t.labelConfirm),"labelConfirmShow"in t&&n(3,b=t.labelConfirmShow),"iconConfirm"in t&&n(4,$=t.iconConfirm),"labelCancel"in t&&n(5,x=t.labelCancel),"labelCancelShow"in t&&n(6,k=t.labelCancelShow),"iconCancel"in t&&n(7,S=t.iconCancel),"panelOffset"in t&&n(15,_=t.panelOffset),"$$scope"in t&&n(19,l=t.$$scope)},t.$$.update=function(){256&t.$$.dirty[0]&&n(18,r=a&&getComputedStyle(a)),262144&t.$$.dirty[0]&&(i=r&&"1"===r.getPropertyValue("--editor-modal")),196608&t.$$.dirty[0]&&n(9,o="opacity:"+P+";"+I)},[f,d,g,b,$,x,k,S,a,o,function(t){var e,n;(e=t.target,/textarea/i.test(e))&&(u=Date.now(),m&&((n=t.target).selectionStart=n.selectionEnd=n.value.length),clearTimeout(T),T=setTimeout(A,200))},function(t){Date.now()-u>50||(t.stopPropagation(),R())},function(t){var e=t.detail;E=e.height},p,m,_,I,P,r,l,s,function(t){Pl[t?"unshift":"push"]((function(){n(8,a=t)}))}]}var X$=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,G$,q$,Ps,{onconfirm:0,oncancel:1,autoFocus:13,autoPositionCursor:14,labelConfirm:2,labelConfirmShow:3,iconConfirm:4,labelCancel:5,labelCancelShow:6,iconCancel:7,panelOffset:15},null,[-1,-1]),n}return gr(e,t),e}(df),Y$=function(t){return document.createTextNode(t)},K$=function(t){return(ba()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>")};function J$(t){var e,n,r,i;return{c:function(){sl(e=el("pre"),"class","PinturaContentEditable"),sl(e,"data-wrap-content",n=t[3]||t[4]?"wrap":"nowrap"),sl(e,"contenteditable",""),sl(e,"spellcheck",t[0]),sl(e,"autocorrect",t[1]),sl(e,"autocapitalize",t[2]),sl(e,"style",t[6])},m:function(n,o){Qs(n,e,o),t[24](e),r||(i=[al(e,"input",t[11]),al(e,"compositionend",t[10]),al(e,"paste",t[12]),al(e,"keydown",t[8]),al(e,"keyup",t[9]),al(e,"blur",t[7])],r=!0)},p:function(t,r){24&r[0]&&n!==(n=t[3]||t[4]?"wrap":"nowrap")&&sl(e,"data-wrap-content",n),1&r[0]&&sl(e,"spellcheck",t[0]),2&r[0]&&sl(e,"autocorrect",t[1]),4&r[0]&&sl(e,"autocapitalize",t[2]),64&r[0]&&sl(e,"style",t[6])},i:Ss,o:Ss,d:function(n){n&&tl(e),t[24](null),r=!1,Ts(i)}}}function Q$(t,e,n){var r,i,o=e.spellcheck,a=void 0===o?"false":o,u=e.autocorrect,c=void 0===u?"off":u,s=e.autocapitalize,l=void 0===s?"off":s,f=e.wrapLines,d=void 0===f||f,h=e.allowNewline,p=void 0===h||h,v=e.textFormat,m=void 0===v?"text":v,g=e.formatInput,y=void 0===g?xi:g,b=e.formatPaste,$=void 0===b?xi:b,x=e.style,w=void 0===x?void 0:x,k=e.innerHTML,S=void 0===k?void 0:k,C=e.oninput,_=void 0===C?Pr:C,M=e.enableTextStyleShortcuts,E=void 0!==M&&M,T=function(){if(i){var t=document.createRange();t.selectNodeContents(i);var e=F();e.removeAllRanges(),e.addRange(t)}},I=_l();document.execCommand("defaultParagraphSeparator",!1,"br");var P,R=function(t){return t.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>")},A=function(){n(13,S=i.innerHTML);var t=K$(S);I("input",t),_(t),requestAnimationFrame((function(){return i&&i.scrollTo(0,0)}))},L=function(){j(i);var t="html"===m?i.innerHTML:R(i.innerHTML);n(5,i.innerHTML=y(t),i),B(i),A()},O={b:"bold",i:"italic",u:"underline",s:"strikethrough"},z=function(t){var e=Nr("span");return e.dataset.bookmark=t,e},D=function(t,e,n){var r=z(n);if(t.nodeType===Node.TEXT_NODE){var i=t.textContent;if("start"===n){var o=Y$(i.substr(0,e)),a=Y$(i.substr(e));t.replaceWith(o,r,a)}else{var u=Y$(i.substr(0,e)),c=Y$(i.substr(e));t.replaceWith(u,r,c)}}else t.nodeType===Node.ELEMENT_NODE&&t.insertBefore(r,t.childNodes[e])},F=function(){var t=i.getRootNode();return"getSelection"in t?t.getSelection():document.getSelection()},j=function(t){var e=F();if(e.getRangeAt&&e.rangeCount){var n=e.getRangeAt(0),r=n.startOffset,i=n.endOffset,o=n.startContainer,a=n.endContainer;if(t.contains(n.startContainer)&&t.contains(n.endContainer))if(o.nodeType===Node.TEXT_NODE&&o===a){var u=o.textContent,c=u.substr(0,r),s=z("start"),l=i-r>0?u.substr(r,i):"",f=z("end"),d=u.substr(i);o.replaceWith(c,s,l,f,d)}else D(o,r,"start"),D(a,i+(o===a?1:0),"end")}},B=function(t){var e=N(t,"start"),n=N(t,"end");if(e&&n){var r=document.createRange();r.setStart(e,0),r.setEnd(n,0);var i=F();i.removeAllRanges(),i.addRange(r),e.remove(),n.remove()}},N=function t(e,n){for(var r=e.children,i=0;i<r.length;i++){var o=r[i];if(o.dataset.bookmark===n)return o;if(o.children.length){var a=t(o,n);if(a)return a}}};return t.$$set=function(t){"spellcheck"in t&&n(0,a=t.spellcheck),"autocorrect"in t&&n(1,c=t.autocorrect),"autocapitalize"in t&&n(2,l=t.autocapitalize),"wrapLines"in t&&n(3,d=t.wrapLines),"allowNewline"in t&&n(4,p=t.allowNewline),"textFormat"in t&&n(14,m=t.textFormat),"formatInput"in t&&n(15,y=t.formatInput),"formatPaste"in t&&n(16,$=t.formatPaste),"style"in t&&n(17,w=t.style),"innerHTML"in t&&n(13,S=t.innerHTML),"oninput"in t&&n(18,_=t.oninput),"enableTextStyleShortcuts"in t&&n(19,E=t.enableTextStyleShortcuts)},t.$$.update=function(){var e;if(32&t.$$.dirty[0]&&n(23,r=!!i),8396800&t.$$.dirty[0]&&r&&S&&(e=S)!==i.innerHTML&&(n(5,i.innerHTML=e,i),i===document.activeElement&&T()),131096&t.$$.dirty[0])if(!d&&p){var o=w.includes(":right")?"text-indent:-100px!important":w.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(6,P=w+";overflow:visible;"+o)}else n(6,P=w)},[a,c,l,d,p,i,P,function(){I("blur")},function(t){if(/escape/i.test(t.code))return t.stopPropagation(),void I("cancel");var e,n,r=t.ctrlKey||t.metaKey;if("html"===m&&r&&/b|i|u|s/.test(t.key))return E&&(e=t.key,(n=O[e])&&document.execCommand(n)),void t.preventDefault();/enter/i.test(t.code)&&(t.stopPropagation(),r?I("confirm"):(p||t.preventDefault(),document.execCommand("insertLineBreak"),t.preventDefault()))},function(){},function(t){""!==t.data&&L()},function(t){var e=t.inputType;"insertCompositionText"!==e&&"deleteCompositionText"!==e&&L()},function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain"),n="html"===m?e:R(e),r=$(n);if(r.length){var i=F().getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(r)),A()}},S,m,y,$,w,_,E,function(){return L()},function(){return i&&i.focus()},T,r,function(t){Pl[t?"unshift":"push"]((function(){n(5,i=t)}))}]}var tx=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Q$,J$,Ps,{spellcheck:0,autocorrect:1,autocapitalize:2,wrapLines:3,allowNewline:4,textFormat:14,formatInput:15,formatPaste:16,style:17,innerHTML:13,oninput:18,enableTextStyleShortcuts:19,confirm:20,focus:21,select:22},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"spellcheck",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({spellcheck:t}),Hl()}},{key:"autocorrect",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({autocorrect:t}),Hl()}},{key:"autocapitalize",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({autocapitalize:t}),Hl()}},{key:"wrapLines",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({wrapLines:t}),Hl()}},{key:"allowNewline",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({allowNewline:t}),Hl()}},{key:"textFormat",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({textFormat:t}),Hl()}},{key:"formatInput",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({formatInput:t}),Hl()}},{key:"formatPaste",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({formatPaste:t}),Hl()}},{key:"style",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({style:t}),Hl()}},{key:"innerHTML",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({innerHTML:t}),Hl()}},{key:"oninput",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({oninput:t}),Hl()}},{key:"enableTextStyleShortcuts",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({enableTextStyleShortcuts:t}),Hl()}},{key:"confirm",get:function(){return this.$$.ctx[20]}},{key:"focus",get:function(){return this.$$.ctx[21]}},{key:"select",get:function(){return this.$$.ctx[22]}}]),e}(df),ex=["i","b","u","strike"].map((function(t){return{tag:t,tagOpen:new RegExp("<"+t+">","g"),tagClose:new RegExp("</"+t+">","g"),placeholderOpen:new RegExp("___"+t+"O___","g"),placeholderClose:new RegExp("___"+t+"C___","g")}})),nx=function(t){var e,n;return e=t,void 0===n&&(n=ex),n.forEach((function(t){var n=t.tag,r=t.tagOpen,i=t.tagClose;e=e.replace(r,"___"+n+"O___").replace(i,"___"+n+"C___")})),t=function(t,e){return void 0===e&&(e=ex),e.forEach((function(e){var n=e.tag,r=e.placeholderOpen,i=e.placeholderClose;t=t.replace(r,"<"+n+">").replace(i,"</"+n+">")})),t}(t=(t=e).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")),t},rx=function(t,e){return ei(t)?parseFloat(t)/100*e:t},ix=function(t,e){return{x:gu(t.x,e.width),y:gu(t.y,e.height)}};function ox(t,e,n){var r=t.slice();return r[224]=e[n],r[226]=n,r}function ax(t,e){var n,r,i,o,a,u,c,s,l,f,d,h=e[224].name+"";function p(){return e[152](e[226])}return i=new $y({props:{color:e[224].color}}),{key:t,first:null,c:function(){n=el("li"),r=el("button"),cf(i.$$.fragment),o=il(),a=el("span"),u=rl(h),s=il(),sl(r,"class","PinturaShapeListItem"),sl(r,"type","button"),sl(r,"aria-label",c="Select shape "+e[224].name),this.first=n},m:function(t,e){Qs(t,n,e),Ys(n,r),sf(i,r,null),Ys(r,o),Ys(r,a),Ys(a,u),Ys(n,s),l=!0,f||(d=al(r,"click",p),f=!0)},p:function(t,n){e=t;var o={};1048576&n[0]&&(o.color=e[224].color),i.$set(o),(!l||1048576&n[0])&&h!==(h=e[224].name+"")&&fl(u,h),(!l||1048576&n[0]&&c!==(c="Select shape "+e[224].name))&&sl(r,"aria-label",c)},i:function(t){l||(Yl(i.$$.fragment,t),l=!0)},o:function(t){Kl(i.$$.fragment,t),l=!1},d:function(t){t&&tl(n),lf(i),f=!1,d()}}}function ux(t){var e,n;return(e=new H$({props:{visible:!0,points:t[12],rotatorPoint:t[26],enableDragEdges:t[16],enableDragPoints:t[28],enableRotatePoints:t[14]}})).$on("resizestart",t[36]),e.$on("resizemove",t[37]),e.$on("resizeend",t[38]),e.$on("rotatestart",t[39]),e.$on("rotatemove",t[40]),e.$on("rotateend",t[41]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};4096&n[0]&&(r.points=t[12]),67108864&n[0]&&(r.rotatorPoint=t[26]),65536&n[0]&&(r.enableDragEdges=t[16]),268435456&n[0]&&(r.enableDragPoints=t[28]),16384&n[0]&&(r.enableRotatePoints=t[14]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function cx(t){var e,n,r,i,o=[lx,sx],a=[];function u(t,e){return"modal"===t[4]?0:"inline"===t[4]?1:-1}return~(e=u(t))&&(n=a[e]=o[e](t)),{c:function(){n&&n.c(),r=ol()},m:function(t,n){~e&&a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=e;(e=u(t))===c?~e&&a[e].p(t,i):(n&&(Gl(),Kl(a[c],1,1,(function(){a[c]=null})),Xl()),~e?((n=a[e])?n.p(t,i):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r)):n=null)},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){~e&&a[e].d(t),t&&tl(r)}}}function sx(t){var e,n,r,i,o,a={formatInput:t[43],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[27],style:t[25]};return n=new tx({props:a}),t[155](n),n.$on("input",t[44]),n.$on("keyup",t[47]),n.$on("cancel",t[49]),n.$on("confirm",t[48]),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaInlineInput"),sl(e,"style",t[24])},m:function(a,u){Qs(a,e,u),sf(n,e,null),r=!0,i||(o=al(e,"focusout",t[156]),i=!0)},p:function(t,i){var o={};8192&i[0]&&(o.wrapLines=!!t[13].width),8192&i[0]&&(o.textFormat=t[13].format),32&i[0]&&(o.enableTextStyleShortcuts=t[5]),134217728&i[0]&&(o.allowNewline=t[27]),33554432&i[0]&&(o.style=t[25]),n.$set(o),(!r||16777216&i[0])&&sl(e,"style",t[24])},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(r){r&&tl(e),t[155](null),lf(n),i=!1,o()}}}function lx(t){var e,n;return e=new X$({props:{panelOffset:t[2],onconfirm:t[48],oncancel:t[49],labelCancel:t[6].shapeLabelInputCancel,iconCancel:t[6].shapeIconInputCancel,labelConfirm:t[6].shapeLabelInputConfirm,iconConfirm:t[6].shapeIconInputConfirm,$$slots:{default:[fx]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};4&n[0]&&(r.panelOffset=t[2]),64&n[0]&&(r.labelCancel=t[6].shapeLabelInputCancel),64&n[0]&&(r.iconCancel=t[6].shapeIconInputCancel),64&n[0]&&(r.labelConfirm=t[6].shapeLabelInputConfirm),64&n[0]&&(r.iconConfirm=t[6].shapeIconInputConfirm),41943296&n[0]|1024&n[7]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function fx(t){var e,n,r;return{c:function(){sl(e=el("textarea"),"spellcheck","false"),sl(e,"autocorrect","off"),sl(e,"autocapitalize","off"),sl(e,"style",t[25])},m:function(i,o){Qs(i,e,o),t[153](e),dl(e,t[23]),n||(r=[al(e,"keydown",t[46]),al(e,"keypress",t[45]),al(e,"keyup",t[47]),al(e,"input",t[44]),al(e,"input",t[154])],n=!0)},p:function(t,n){33554432&n[0]&&sl(e,"style",t[25]),8388608&n[0]&&dl(e,t[23])},d:function(i){i&&tl(e),t[153](null),n=!1,Ts(r)}}}function dx(t){var e,n,r,i,o;return n=new Gm({props:{items:t[21],key:t[10]}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaShapeControls"),sl(e,"style",t[22])},m:function(a,u){Qs(a,e,u),sf(n,e,null),r=!0,i||(o=[al(e,"measure",t[157]),Hs(Bh.call(null,e))],i=!0)},p:function(t,i){var o={};2097152&i[0]&&(o.items=t[21]),1024&i[0]&&(o.key=t[10]),n.$set(o),(!r||4194304&i[0])&&sl(e,"style",t[22])},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n),i=!1,Ts(o)}}}function hx(t){for(var e,n,r,i,o,a,u,c,s,l,f=[],d=new Map,h=t[20],p=function(t){return t[224].id},v=0;v<h.length;v+=1){var m=ox(t,h,v),g=p(m);d.set(g,f[v]=ax(g,m))}var y=t[15]&&ux(t),b=t[11]&&cx(t),$=t[17]>0&&dx(t);return{c:function(){e=el("div"),n=el("nav"),r=el("ul");for(var u=0;u<f.length;u+=1)f[u].c();i=il(),y&&y.c(),o=il(),b&&b.c(),a=il(),$&&$.c(),sl(n,"class","PinturaShapeList"),sl(n,"data-visible",t[18]),sl(e,"class","PinturaShapeEditor"),sl(e,"tabindex","0")},m:function(d,h){Qs(d,e,h),Ys(e,n),Ys(n,r);for(var p=0;p<f.length;p+=1)f[p].m(r,null);Ys(e,i),y&&y.m(e,null),Ys(e,o),b&&b.m(e,null),Ys(e,a),$&&$.m(e,null),t[158](e),c=!0,s||(l=[al(n,"focusin",t[52]),al(n,"focusout",t[53]),al(e,"keydown",(function(){Is(t[1]?Pr:t[42])&&(t[1]?Pr:t[42]).apply(this,arguments)})),al(e,"nudge",(function(){Is(t[1]?Pr:t[51])&&(t[1]?Pr:t[51]).apply(this,arguments)})),al(e,"measure",t[151]),al(e,"pointermove",(function(){Is(t[1]?Pr:t[54])&&(t[1]?Pr:t[54]).apply(this,arguments)})),al(e,"interactionstart",(function(){Is(t[1]?Pr:t[31])&&(t[1]?Pr:t[31]).apply(this,arguments)})),al(e,"interactionupdate",(function(){Is(t[1]?Pr:t[33])&&(t[1]?Pr:t[33]).apply(this,arguments)})),al(e,"interactioncancel",(function(){Is(t[1]?Pr:t[32])&&(t[1]?Pr:t[32]).apply(this,arguments)})),al(e,"interactionrelease",(function(){Is(t[1]?Pr:t[34])&&(t[1]?Pr:t[34]).apply(this,arguments)})),al(e,"interactionend",(function(){Is(t[1]?Pr:t[35])&&(t[1]?Pr:t[35]).apply(this,arguments)})),Hs(Bh.call(null,e)),Hs(wp.call(null,e)),Hs(u=Up.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:mx,getEventPosition:t[159]}))],s=!0)},p:function(i,s){t=i,1048705&s[0]&&(h=t[20],Gl(),f=rf(f,s,p,1,t,h,d,r,nf,ax,null,ox),Xl()),(!c||262144&s[0])&&sl(n,"data-visible",t[18]),t[15]?y?(y.p(t,s),32768&s[0]&&Yl(y,1)):((y=ux(t)).c(),Yl(y,1),y.m(e,o)):y&&(Gl(),Kl(y,1,1,(function(){y=null})),Xl()),t[11]?b?(b.p(t,s),2048&s[0]&&Yl(b,1)):((b=cx(t)).c(),Yl(b,1),b.m(e,a)):b&&(Gl(),Kl(b,1,1,(function(){b=null})),Xl()),t[17]>0?$?($.p(t,s),131072&s[0]&&Yl($,1)):(($=dx(t)).c(),Yl($,1),$.m(e,null)):$&&(Gl(),Kl($,1,1,(function(){$=null})),Xl()),u&&Is(u.update)&&8&s[0]&&u.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:mx,getEventPosition:t[159]})},i:function(t){if(!c){for(var e=0;e<h.length;e+=1)Yl(f[e]);Yl(y),Yl(b),Yl($),c=!0}},o:function(t){for(var e=0;e<f.length;e+=1)Kl(f[e]);Kl(y),Kl(b),Kl($),c=!1},d:function(n){n&&tl(e);for(var r=0;r<f.length;r+=1)f[r].d();y&&y.d(),b&&b.d(),$&&$.d(),t[158](null),s=!1,Ts(l)}}}var px=256,vx="markup-hover",mx=function(t,e){return t.target===e};function gx(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P,R,A,L,O,z,D,F,j,B,N,V,H,W,U,Z,q,G,X,Y=e.uid,K=void 0===Y?ui():Y,J=e.ui,Q=e.disabled,tt=void 0!==Q&&Q,et=e.markup,nt=e.offset,rt=e.contextRotation,it=void 0===rt?0:rt,ot=e.contextFlipX,at=void 0!==ot&&ot,ut=e.contextFlipY,ct=void 0!==ut&&ut,st=e.contextZoom,lt=void 0===st?1:st,ft=e.active,dt=void 0!==ft&&ft,ht=e.opacity,pt=void 0===ht?1:ht,vt=e.parentRect,mt=e.rootRect,gt=e.utilRect,yt=e.hoverColor,bt=e.textInputMode,$t=void 0===bt?"inline":bt,xt=e.oninteractionstart,wt=void 0===xt?Pr:xt,kt=e.oninteractionupdate,St=void 0===kt?Pr:kt,Ct=e.oninteractionrelease,_t=void 0===Ct?Pr:Ct,Mt=e.oninteractionend,Et=void 0===Mt?Pr:Mt,Tt=e.oninteractioncancel,It=void 0===Tt?Pr:Tt,Pt=e.onaddshape,Rt=void 0===Pt?Pr:Pt,At=e.onupdateshape,Lt=void 0===At?Pr:At,Ot=e.onselectshape,zt=void 0===Ot?Pr:Ot,Dt=e.onremoveshape,Ft=void 0===Dt?Pr:Dt,jt=e.ontapshape,Bt=void 0===jt?Pr:jt,Nt=e.onhovershape,Vt=void 0===Nt?Pr:Nt,Ht=e.onhovercanvas,Wt=void 0===Ht?Pr:Ht,Ut=e.ontapcanvas,Zt=void 0===Ut?Pr:Ut,qt=e.beforeSelectShape,Gt=void 0===qt?function(){return!0}:qt,Xt=e.beforeDeselectShape,Yt=void 0===Xt?function(){return!0}:Xt,Kt=e.beforeRemoveShape,Jt=void 0===Kt?function(){return!0}:Kt,Qt=e.beforeUpdateShape,te=void 0===Qt?function(t,e){return e}:Qt,ee=e.willRenderShapeControls,ne=void 0===ee?xi:ee,re=e.willRenderShapeTextControls,ie=void 0===re?xi:re,oe=e.willStartInteraction,ae=void 0===oe?function(t,e){return!0}:oe,ue=e.mapEditorPointToImagePoint,ce=e.mapImagePointToEditorPoint,se=e.eraseRadius,le=void 0===se?void 0:se,fe=e.selectRadius,de=void 0===fe?void 0:fe,he=e.enableButtonFlipVertical,pe=void 0!==he&&he,ve=e.enableTapToAddText,me=void 0===ve||ve,ge=e.enableTextStyleControls,ye=void 0===ge||ge,be=e.locale,$e=El("isAnimated");Ls(t,$e,(function(t){return n(150,G=t)}));var xe=function(t,e,n){var r=te(Object.assign({},t),e,Object.assign({},n));Yc(t,r,n)},we=function(t,e){var n=ro(t,e),r=qi(t,e),i=Math.PI/8,o=i*Math.round(r/i)-it%i;e.x=t.x+n*Math.cos(o),e.y=t.y+n*Math.sin(o)},ke=function(t,e,n,r){var i=Bi(t.x-n.x,t.y-n.y),o=Bi(r.x-n.x,r.y-n.y),a=to(o,o),u=to(i,o)/a;u=(u=u<0?0:u)>1?1:u;var c=Bi(o.x*u+n.x-t.x,o.y*u+n.y-t.y);return to(c,c)<=e*e},Se=function(t,e,n){for(var r=n.length,i=0;i<r-1;i++)if(ke(t,e,n[i],n[i+1]))return!0;return!1},Ce=function(t,e,n){return!!oa(t,n)||(!!Se(t,e,n)||ke(t,e,n[0],n[n.length-1]))},_e=function(t,e,n,r,i){return Ce(t,e,Uo(n,r,i||Oo(n)))},Me=El("keysPressed");Ls(t,Me,(function(t){return n(172,X=t)}));var Ee,Te,Ie,Pe,Re=function(t,e,n){return 0===t||e&&n?t:e||n?-t:t},Ae=function(t,e){var n=ce(t);return ue(Yi(n,e))},Le=function(t,e,n){if(fc(t)){var r=Ae(ic(e),n),i=Ae(oc(e),n);xe(t,{x1:r.x,y1:r.y,x2:i.x,y2:i.y},vt)}else if(t.points)xe(t,{points:e.points.map((function(t){return Ae(t,n)}))},vt);else if(sc(t)||ac(t)||lc(t)){var o=Ae(e,n);xe(t,o,vt)}Ve()},Oe={0:1,1:0,2:3,3:2},ze={0:3,1:2,2:1,3:0},De=function(){if(et.length)return et.find(gc)},Fe=function(){if(et.length)return et.findIndex(gc)},je=function(t,e){if(void 0===e&&(e=!0),!De())return wc(t),He(t,e)},Be=function(){var t=De();if(t)return t._isDraft=!1,Ve(),t},Ne=function(){De()&&(et.splice(Fe(),1),Ve())},Ve=function(){return n(0,et)},He=function(t,e){return void 0===e&&(e=!0),et.push(t),e&&Ve(),t},We=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!0),e.filter(Boolean).forEach((function(e){return delete t[e]})),n&&Ve()},Ue=function(t,e,n){void 0===n&&(n=!0),t=Object.assign(t,e),n&&Ve()},Ze=function(t,e,n,r){void 0===r&&(r=!0),t[e]=n,r&&Ve()},qe=function(t,e){void 0===e&&(e=!0),et.forEach((function(e){return Ue(e,t,!1)})),e&&Ve()},Ge=function(){return[].concat(et).reverse().find(vc)},Xe=function(){return!!Ge()},Ye=function(t){if(!Jt(t))return!1;n(0,et=et.filter((function(e){return e!==t}))),Ft(t)},Ke=function(){var t=Ge();if(t){var e=et.filter((function(t){return Cc(t)&&Sc(t)})),n=e.findIndex((function(e){return e===t}));if(!1!==Ye(t)){if(Je=t,e.length-1<=0)return Qe();var r=n-1<0?e.length-1:n-1;en(e[r])}}},Je=void 0,Qe=function(t){void 0===t&&(t={});var e=t.storePrevious,n=void 0===e||e;Object.keys(An).forEach((function(t){return An[t]={}})),n&&(Je=tn()),qe({isSelected:!1,isEditing:!1,_prerender:!1})},tn=function(){return et.find(vc)},en=function(t,e){if(void 0===e&&(e=!0),!gc(t)){var n=tn()||Je,r=vc(t);Je=void 0,Gt(n,t)&&(Qe(),function(t){t.isSelected=!0}(t),!r&&zt(t),e&&Ve())}},nn=function(t){Ie&&Ie.confirm&&t.isEditing&&Ie.confirm(),Ue(t,{isSelected:!1,isEditing:!1,_prerender:!1})},rn=function(t){Ue(t,{isSelected:!0,isEditing:!0,_prerender:"inline"===$t})},on=function(t){Ue(t,{isSelected:!0,isEditing:!1,_prerender:!1})},an=function(t){if(!t.length)return[];var e=t.filter(Jt);return n(0,et=et.filter((function(t){return!e.includes(t)}))),e},un=function(t){var e=Ou(t.text,t);return Lo(t.x,t.y,t.width?Math.min(t.width,e.width):e.width,t.height?Math.min(t.height,e.height):e.height)},cn=function(t){if(yc(t))return Io(t);if(lc(t))return Ro(t);var e=un(t);return e.width=Math.max(10,t.width||e.width),e},sn=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=function(){return!0}),[].concat(et).reverse().filter(n).map((function(t){return{shape:t,priority:1}})).filter((function(n){var r=n.shape,i=Zc(Qu(r),vt),o=e+(i.strokeWidth||0);if(sc(i))return _e(t,o,i,r.rotation);if(ac(i)){var a=cn(i),u=_e(t,o,a,r.rotation);if(u&&!vc(r)){var c=un(i);"right"!==r.textAlign||r.flipX||(c.x=a.x+a.width-c.width),"center"===r.textAlign&&(c.x=a.x+.5*a.width-.5*c.width),_e(t,o,c,r.rotation,Oo(a))||(n.priority=-1)}return u}return lc(i)?function(t,e,n,r,i,o){var a=ca(Bi(n.x,n.y),n.rx,n.ry,r,i,o,12);return Ce(t,e,a)}(t,o,i,r.rotation,r.flipX,r.flipY):fc(i)?ke(t,Math.max(16,o),ic(i),oc(i)):dc(i)&&i.pathClose?Ce(t,o,i.points):!!dc(i)&&Se(t,Math.max(16,o),i.points)})).sort((function(t,e){return t.priority<e.priority?1:t.priority>e.priority?-1:0})).map((function(t){return t.shape}))},ln=function(t,e,n,r){void 0===r&&(r=0);var i=Math.abs(r),o=wo(e,n),a=So(o,i),u=function(t,e){var n=t.start,r=t.end;if(0===e)return[Bi(n.x,n.y),Bi(n.x,n.y),Bi(r.x,r.y),Bi(r.x,r.y)];var i=Math.atan2(r.y-n.y,r.x-n.x),o=Math.sin(i)*e,a=Math.cos(i)*e;return[Bi(o+n.x,-a+n.y),Bi(-o+n.x,a+n.y),Bi(-o+r.x,a+r.y),Bi(o+r.x,-a+r.y)]}(a,i),c=t.filter((function(t){var e=Zc(Qu(t),vt);if(fc(e)||dc(e)){var n=e.points?[].concat(e.points):[ic(e),oc(e)];return!!ia(a,n)}return function(t,e){return!!t.find((function(t){return oa(t,e)}))||!!e.find((function(e){return oa(e,t)}))}(u,function(t,e){if(void 0===e&&(e=12),sc(t))return Uo(t,t.rotation,Oo(t));if(ac(t)){var n=cn(t);return Uo(n,t.rotation,Oo(n))}return lc(t)?ca(Bi(t.x,t.y),t.rx,t.ry,t.rotation,t.flipX,t.flipY,e):[]}(e))}));return c},fn=void 0,dn=void 0,hn=void 0,pn=void 0,vn=void 0,mn=void 0,gn=!1,yn=!1,bn=function(){clearTimeout(dn),dn=void 0,n(120,yn=!1)},$n=function(t){if(sc(t)){if(t.width<1&&t.height<1)return;var e=Oo(t),n=Ko(t);return(t.flipX||t.flipY)&&ao(n,t.flipX,t.flipY,e.x,e.y),uo(n,t.rotation,e.x,e.y)}if(lc(t)){if(t.rx<1&&t.ry<1)return;var r=t,i=Ko(Ro(t));return(t.flipX||t.flipY)&&ao(i,t.flipX,t.flipY,r.x,r.y),uo(i,t.rotation,r.x,r.y)}if(fc(t))return[ic(t),oc(t)];if(dc(t))return[].concat(t.points);if(ac(t)){if(t.width<5&&t.height<5)return;var o=cn(t);o.width=Math.max(10,o.width);var a=Oo(o),u=Ko(o);return(t.flipX||t.flipY)&&ao(u,t.flipX,t.flipY,a.x,a.y),uo(u,t.rotation,a.x,a.y)}return[]},xn=function(t){var e,n,r=$n(t);return t.flipY?(e=oo([r[0],r[1]]),n=Zi(Bi(r[1].x-r[2].x,r[1].y-r[2].y))):(e=oo([r[2],r[3]]),n=Zi(Bi(r[2].x-r[1].x,r[2].y-r[1].y))),Qi(n,20/lt),{origin:e,dir:n}},wn=function(){var t=J.filter((function(t){return t.id!==vx}));t.length!==J.length&&n(55,J=t)},kn="markup-manipulator-segment-"+K,Sn=function(){n(55,J=J.filter((function(t){return t.id!==kn})))},Cn=function(t){return t.isContentEditable||/input|textarea/i.test(t.nodeName)},_n=function(t){n(8,Ie.innerHTML=nx(t),Ie)},Mn=function(t){var e,n=void 0===t.value?t.innerHTML:t.value,i="text"===r.format?K$(n).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"):n;return uc(r)&&!1!==r.disableNewline?(e=i.split(/[\n\r]/g)).length>1?e.map((function(t){return t.trim()})).filter((function(t){return t.length})).join(" "):e[0]:i},En=function(){var t=Mn(Ie),e=Mc(r,t),n=!0===e?t:e,i=S.x,o=S.y;if(!r.height){var a=Uo(Object.assign({},_),r.rotation),c=Ou(n,u),s=Uo(Object.assign({x:i,y:o},c),r.rotation),l=a[0],f=a[2],d=s[0],h=s[2],p=l,v=d;r.flipX&&(p=f,v=h);var m=Ki(Vi(p),v);i+=m.x,o+=m.y}Ue(r,{x:ei(k.x)?gu(i,vt.width):i,y:ei(k.y)?gu(o,vt.height):o,text:n})},Tn=function(){var t=o;o&&Be(),Ie&&Ie.confirm&&Ie.confirm(),En(),on(r),t?Rt(r):Lt(r)},In=function(){o?Ne():(Ue(r,{text:k.text,x:k.x,y:k.y}),on(r))},Pn=function(t,e,n,r){var i,o,a=n.flipX,u=n.flipY,c=n.rotation;void 0===r&&(r="top left");var s=Uo(t,c),l=s[0],f=s[1],d=s[2],h=s[3],p=Uo(e,c),v=p[0],m=p[1],g=p[2],y=p[3];"top center"===r?(i=oo(u?[h,d]:[l,f]),o=oo(u?[y,g]:[v,m])):"top right"===r&&!a||"top left"===r&&a?(i=u?d:f,o=u?g:m):(i=u?h:l,o=u?y:v);return Ki(Vi(i),o)},Rn=function(t,e,n){return Bi(ei(t.x)?gu(e.x+n.x,vt.width):e.x+n.x,ei(t.y)?gu(e.y+n.y,vt.height):e.y+n.y)},An={},Ln=function(){return rn(r)},On=function(){var t=xo(Ou(r.text,u),(function(t){return Math.ceil(t)})),e=su(r,"height"),n=!e&&su(r,"width"),i=r.id,o=An[i];o||(An[i]={},o=An[i]);var a=function(t){var e=u,n=(e.width,fr(e,sr)),i=Ou(r.text,n),o=Pn(Lo(u.x,u.y,t.width,t.height),Lo(u.x,u.y,i.width,i.height),u,"top "+r.textAlign),a=!1!==u.disableNewline;We(r,["width","height",a&&"textAlign"]),Ue(r,Object.assign({},Rn(r,u,o)))},c=function(e){var n=vo(o.width||u.width||t.width,t.height),i=o.textAlign||"left",a=Pn(Lo(u.x,u.y,e.width,e.height),Lo(u.x,u.y,n.width,n.height),u,"top "+i);We(r,["height"]),Ue(r,Object.assign({},Rn(r,u,a),{width:ei(r.width)?gu(n.width,vt.width):n.width,textAlign:i}))},s=function(e){var n=vo(o.width||t.width,o.height||t.height),i=o.textAlign||"left",a=Pn(Lo(u.x,u.y,e.width,e.height),Lo(u.x,u.y,n.width,n.height),u,"top "+i);Ue(r,Object.assign({},Rn(r,u,a),{width:ei(r.width)?gu(n.width,vt.width):n.width,height:ei(r.width)?gu(n.height,vt.height):n.height,textAlign:i}))};if(e){o.textAlign=r.textAlign,o.width=u.width,o.height=u.height;var l=vo(u.width,u.height);Ec(r,"auto-height")?c(l):Ec(r,"auto-width")&&a(l)}else if(n){o.textAlign=r.textAlign,o.width=u.width;var f=vo(u.width,t.height);Ec(r,"auto-width")?a(f):Ec(r,"fixed-size")&&s(f)}else{o.textAlign=r.textAlign;var d=vo(Math.ceil(t.width),Math.ceil(t.height));Ec(r,"fixed-size")?s(d):Ec(r,"auto-height")&&c(d)}},zn=function(t){t.stopPropagation();var e=r.flipX||!1;Ze(r,"flipX",!e),Lt(r)},Dn=function(t){t.stopPropagation();var e=r.flipY||!1;Ze(r,"flipY",!e),Lt(r)},Fn=function(t){Ze(r,"opacity",t)},jn=function(t){Fn(t),Lt(r)},Bn=function(t){t.stopPropagation(),t.target.blur(),Ke()},Nn=function(t){t.stopPropagation(),et.findIndex((function(t){return t===r}))!==et.length-1&&(n(0,et=et.filter((function(t){return t!==r})).concat([r])),Lt(r))},Vn=function(t){t.stopPropagation(),Hn()},Hn=function(){var t=Qu(r);t.id=ui();var e=Bi(50,-50);if(su(t,"points")){var n=Xc(t,["points"],vt);n.points.forEach((function(t){t.x+=e.x,t.y+=e.y})),Yc(t,n,vt)}else if(fc(t)){var i=Xc(t,["x1","y1","x2","y2"],vt);i.x1+=e.x,i.y1+=e.y,i.x2+=e.x,i.y2+=e.y,Yc(t,i,vt)}else{var o=Xc(t,["x","y"],vt);o.x+=50,o.y-=50,Yc(t,o,vt)}et.push(t),Rt(t),en(t)},Wn=_h(0,{stiffness:.2,damping:.7});Ls(t,Wn,(function(t){return n(17,q=t)}));var Un,Zn=function(t,e){var n=e.disableTextLayout,r=void 0===n?[]:n;return"height"in e?r.includes("auto-height")?t.shapeIconButtonTextLayoutAutoWidth:t.shapeIconButtonTextLayoutAutoHeight:"width"in e?r.includes("auto-width")?t.shapeIconButtonTextLayoutFixedSize:t.shapeIconButtonTextLayoutAutoWidth:r.includes("fixed-size")?t.shapeIconButtonTextLayoutAutoHeight:t.shapeIconButtonTextLayoutFixedSize},qn=function(t,e){var n=e.disableTextLayout,r=void 0===n?[]:n;return"height"in e?r.includes("auto-height")?t.shapeTitleButtonTextLayoutAutoWidth:t.shapeTitleButtonTextLayoutAutoHeight:"width"in e?r.includes("auto-width")?t.shapeTitleButtonTextLayoutFixedSize:t.shapeTitleButtonTextLayoutAutoWidth:r.includes("fixed-size")?t.shapeTitleButtonTextLayoutAutoHeight:t.shapeTitleButtonTextLayoutFixedSize},Gn=!1,Xn=ji(),Yn=void 0,Kn=function(t){Vt(t),n(121,Te=t)};Cl((function(){Sn(),wn()}));return t.$$set=function(t){"uid"in t&&n(56,K=t.uid),"ui"in t&&n(55,J=t.ui),"disabled"in t&&n(1,tt=t.disabled),"markup"in t&&n(0,et=t.markup),"offset"in t&&n(2,nt=t.offset),"contextRotation"in t&&n(57,it=t.contextRotation),"contextFlipX"in t&&n(58,at=t.contextFlipX),"contextFlipY"in t&&n(59,ct=t.contextFlipY),"contextZoom"in t&&n(60,lt=t.contextZoom),"active"in t&&n(61,dt=t.active),"opacity"in t&&n(62,pt=t.opacity),"parentRect"in t&&n(63,vt=t.parentRect),"rootRect"in t&&n(3,mt=t.rootRect),"utilRect"in t&&n(64,gt=t.utilRect),"hoverColor"in t&&n(65,yt=t.hoverColor),"textInputMode"in t&&n(4,$t=t.textInputMode),"oninteractionstart"in t&&n(66,wt=t.oninteractionstart),"oninteractionupdate"in t&&n(67,St=t.oninteractionupdate),"oninteractionrelease"in t&&n(68,_t=t.oninteractionrelease),"oninteractionend"in t&&n(69,Et=t.oninteractionend),"oninteractioncancel"in t&&n(70,It=t.oninteractioncancel),"onaddshape"in t&&n(71,Rt=t.onaddshape),"onupdateshape"in t&&n(72,Lt=t.onupdateshape),"onselectshape"in t&&n(73,zt=t.onselectshape),"onremoveshape"in t&&n(74,Ft=t.onremoveshape),"ontapshape"in t&&n(75,Bt=t.ontapshape),"onhovershape"in t&&n(76,Vt=t.onhovershape),"onhovercanvas"in t&&n(77,Wt=t.onhovercanvas),"ontapcanvas"in t&&n(78,Zt=t.ontapcanvas),"beforeSelectShape"in t&&n(79,Gt=t.beforeSelectShape),"beforeDeselectShape"in t&&n(80,Yt=t.beforeDeselectShape),"beforeRemoveShape"in t&&n(81,Jt=t.beforeRemoveShape),"beforeUpdateShape"in t&&n(82,te=t.beforeUpdateShape),"willRenderShapeControls"in t&&n(83,ne=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(84,ie=t.willRenderShapeTextControls),"willStartInteraction"in t&&n(85,ae=t.willStartInteraction),"mapEditorPointToImagePoint"in t&&n(86,ue=t.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in t&&n(87,ce=t.mapImagePointToEditorPoint),"eraseRadius"in t&&n(88,le=t.eraseRadius),"selectRadius"in t&&n(89,de=t.selectRadius),"enableButtonFlipVertical"in t&&n(90,pe=t.enableButtonFlipVertical),"enableTapToAddText"in t&&n(91,me=t.enableTapToAddText),"enableTextStyleControls"in t&&n(5,ye=t.enableTextStyleControls),"locale"in t&&n(6,be=t.locale)},t.$$.update=function(){var e,Y;3&t.$$.dirty[0]&&n(125,r=!tt&&et&&(De()||Ge())),2&t.$$.dirty[4]&&n(148,i=!!r),2&t.$$.dirty[4]&&n(139,o=r&&gc(r)),32770&t.$$.dirty[4]&&n(10,a=r&&!o?r.id:void 0),8&t.$$.dirty[0]|2&t.$$.dirty[2]|2&t.$$.dirty[4]&&n(13,u=mt&&r&&Zc(Qu(r),vt)),32770&t.$$.dirty[4]&&n(123,c=!(!r||!o)),8192&t.$$.dirty[0]|1&t.$$.dirty[2]|2&t.$$.dirty[4]&&n(147,s=r&&pt&&$n(u)||[]),2&t.$$.dirty[4]&&n(149,l=r&&(Tc(e=r)&&Ic(e)&&!0!==e.disableResize&&(yc(e)||cc(e)||lc(e)||fc(e)||dc(e)&&su(e,"pathClose")))&&!hc(r)),2&t.$$.dirty[4]&&n(14,f=r&&function(t){return Tc(t)&&!0!==t.disableRotate&&(yc(t)||su(t,"text")||lc(t))}(r)&&!hc(r)),33554434&t.$$.dirty[4]&&n(16,d=l&&su(r,"text")&&!r.height?[[1,2],[3,0]]:(!r||!fc(r)&&!dc(r))&&l),65536&t.$$.dirty[0]|33554434&t.$$.dirty[4]&&n(28,h=!!r&&(!Array.isArray(d)&&l)),8388610&t.$$.dirty[4]&&n(15,p=r&&s.length>1),33554432&t.$$.dirty[2]|8388608&t.$$.dirty[4]&&n(145,v=s.map(ce)),4&t.$$.dirty[0]|2097152&t.$$.dirty[4]&&n(12,m=v.map((function(t){return Bi(t.x-nt.x,t.y-nt.y)}))),16777218&t.$$.dirty[4]&&n(27,g=i&&(cc(r)?!su(r,"disableNewline")||!r.disableNewline:!1===r.disableNewline)),33554432&t.$$.dirty[2]|268435456&t.$$.dirty[3]&&(Te&&ce&&!vc(Te)&&Sc(Te)?function(t){var e=$n(Zc(Qu(t),vt));if(e){var r=e.map(ce),i=!!t.pathClose||!dc(t)&&!fc(t),o={id:vx,points:r.map((function(t){return Bi(t.x+1,t.y+1)})),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:i},a={id:vx,points:r,strokeColor:yt,strokeWidth:2,pathClose:i},u=J.filter((function(t){return t.id!==vx}));n(55,J=[].concat(u,[o,a]))}}(Te):wn()),61440&t.$$.dirty[0]|1&t.$$.dirty[2]&&n(146,y=p&&f&&pt&&m&&function(t){var e=xn(t),n=ce({x:e.origin.x+e.dir.x,y:e.origin.y+e.dir.y});return{origin:ce(e.origin),position:n}}(u)),4&t.$$.dirty[0]|4194304&t.$$.dirty[4]&&n(26,b=y&&Bi(y.position.x-nt.x,y.position.y-nt.y)),536870912&t.$$.dirty[3]|32770&t.$$.dirty[4]&&n(144,$=o&&dc(r)&&Yn),1&t.$$.dirty[2]|3145730&t.$$.dirty[4]&&r&&v&&pt>0&&function(t,e,r){var i=dc(e),o=i&&su(e,"pathClose"),a=o&&function(t){return t.strokeWidth&&function(t,e){var n=t.strokeColor;return!!n&&(3===n.length||n[3]>0)}(t)}(e),u=gc(e),c=hc(e);if(!u||!i||o){var l=[],f=[].concat(v),d=f[f.length-1],h=f[0],p=(c?.05:.1)*t,m=(c?.5:1)*t,g=[0,0,0],b=[1,1,1],$=c?1:1.5;X.includes(16)&&d&&r&&we(d,r);var x=f.length&&o&&u&&r?no(h,r):1/0,w=f.length&&o&&u&&r?no(d,r):1/0,k=x<=px,S=w<=px;!k&&r&&f.push(r);var C=f.length>1,_=!!e.pathClose||!dc(e)&&!fc(e)||f.length>2&&k;C&&l.push({id:kn,points:f.map((function(t){return Bi(t.x+1,t.y+1)})),pathClose:_,strokeColor:g,strokeWidth:2,opacity:p}),o&&l.push.apply(l,f.map((function(t){return Object.assign({id:kn},t,{rx:2*$,ry:2*$,backgroundColor:g,opacity:p})}))),y&&l.push({id:kn,points:[Bi(y.origin.x+1,y.origin.y+1),Bi(y.position.x+1,y.position.y+1)],strokeColor:g,strokeWidth:2,opacity:p}),C&&l.push({id:kn,points:f,pathClose:_,strokeColor:b,strokeWidth:$,backgroundColor:u&&o&&e.backgroundColor&&e.backgroundColor[3]>0?e.backgroundColor:[0,0,0,0],opacity:m}),o&&l.push.apply(l,f.map((function(t){return Object.assign({id:kn},t,{rx:3*$,ry:3*$,backgroundColor:[.5,.5,.5],strokeWidth:$,strokeColor:b})}))),o&&u&&v.length>=3&&l.push(Object.assign({},h,{id:kn,rx:$*(k?5:4),ry:$*(k?5:4),backgroundColor:k?yt:[.5,.5,.5],strokeWidth:$,strokeColor:b})),o&&u&&a&&!k&&s.length>=2&&l.push(Object.assign({},d,{id:kn,rx:$*(S?5:4),ry:$*(S?5:4),backgroundColor:S?yt:[.5,.5,.5],strokeWidth:$,strokeColor:b})),y&&l.push({id:kn,points:[{x:y.origin.x,y:y.origin.y},{x:y.position.x,y:y.position.y}],strokeColor:b,strokeWidth:$,opacity:m}),n(55,J=J.filter((function(t){return t.id!==kn})).concat(l))}}(pt,r,$),2&t.$$.dirty[4]&&(r||Sn()),1073741824&t.$$.dirty[1]&&function(t){if(!t)return qe({_prerender:!1});var e=et.find((function(t){return t.isEditing}));e&&Ue(e,{_prerender:"inline"===$t})}(dt),272&t.$$.dirty[0]&&Ie&&"inline"===$t&&Ie.focus(),2&t.$$.dirty[4]&&n(143,x=r&&ac(r)),524290&t.$$.dirty[4]&&n(11,w=x&&!1!==Mc(r)&&hc(r)),2048&t.$$.dirty[0]&&n(138,k=w?Object.assign({},r):void 0),2&t.$$.dirty[2]|16384&t.$$.dirty[4]&&n(140,S=k&&Zc(Object.assign({},k),vt)),65536&t.$$.dirty[4]&&n(142,C=S&&Ou(S.text,S)),327680&t.$$.dirty[4]&&(_=S&&Lo(S.x,S.y,C.width,C.height)),2048&t.$$.dirty[0]|2&t.$$.dirty[4]&&n(23,M=w?r.text:""),2056&t.$$.dirty[0]|2&t.$$.dirty[2]|2&t.$$.dirty[4]&&n(141,E=mt&&r&&w&&Zc(Object.assign({},Qu(r),{width:uu(r.width)?Math.floor(r.width):void 0,height:uu(r.height)?Math.floor(r.height):void 0}),vt)),2064&t.$$.dirty[0]|131072&t.$$.dirty[4]&&n(25,T=w&&function(t,e){var n=t.textAlign,r=void 0===n?"left":n,i=t.fontFamily,o=void 0===i?"sans-serif":i,a=t.fontWeight,u=void 0===a?"normal":a,c=t.fontStyle,s=void 0===c?"normal":c,l=t.fontSize,f="!important",d="text-align:"+r+f+";font-family:"+o+f+";font-weight:"+u+f+";font-style:"+s+f+";";if("modal"===e)return d;var h=yu(t.color),p=t.lineHeight,v=.5*Math.max(0,l-p);return"--bottom-inset:"+v+"px;padding:"+v+"px 0 0"+f+";color:"+h+f+";font-size:"+l+"px"+f+";line-height:"+p+"px"+f+";"+d}(E,$t)),2052&t.$$.dirty[0]|603979776&t.$$.dirty[1]|131072&t.$$.dirty[4]&&n(24,I=w&&function(t,e,n,i){var o,a;t.width&&t.height?(o=Oo(t),a=lo(t)):((a=Ou(r.text,u)).width=u.width||a.width,o=Bi(t.x+.5*a.width,t.y+.5*a.height));var c=Math.max(0,t.fontSize-t.lineHeight)+t.lineHeight,s=ce(o),l=s.x-e.x-.5*a.width,f=s.y-e.y-.5*a.height,d=t.flipX,h=t.flipY,p=t.rotation;at&&ct?(d=!d,h=!h):at?(d=!d,p=-p):ct&&(h=!h,p=-p),p+=i;var v=n*(d?-1:1),m=n*(h?-1:1);return"--line-height:"+c+"px;width:"+a.width+"px;height:"+a.height+"px;transform:translate("+l+"px,"+f+"px) rotate("+p+"rad) scale("+v+", "+m+")"}(E,nt,lt,it)),2320&t.$$.dirty[0]&&w&&Ie&&"inline"===$t&&_n(M),1073741824&t.$$.dirty[3]|34&t.$$.dirty[4]&&n(129,P=r&&!c?r:P),32&t.$$.dirty[4]&&n(131,R=P&&_c(P)),32&t.$$.dirty[4]&&n(126,A=P&&Ec(P)),32&t.$$.dirty[4]&&n(128,L=P&&function(t){return!0!==t.disableDuplicate&&Ic(t)}(P)),32&t.$$.dirty[4]&&n(127,O=P&&Cc(P)),32&t.$$.dirty[4]&&n(130,z=P&&function(t){return!0!==t.disableReorder}(P)),32&t.$$.dirty[4]&&n(124,D=P&&!1!==Mc(P)),32&t.$$.dirty[4]&&n(132,F=P&&su(P,"backgroundImage")&&kc(P,"opacity")),2&t.$$.dirty[4]&&n(134,j=r&&"html"===r.format),1073741824&t.$$.dirty[3]|1026&t.$$.dirty[4]&&n(137,B=r&&(!c||j)),134217728&t.$$.dirty[3]|67117056&t.$$.dirty[4]&&Wn.set(B&&!yn?1:0,{hard:!1===G}),4096&t.$$.dirty[0]|12288&t.$$.dirty[4]&&n(136,N=B&&m.length?(Y=Po(m),Xi(Bi(Y.x+.5*Y.width,Y.y),yv)):N),512&t.$$.dirty[0]|4&t.$$.dirty[2]|4096&t.$$.dirty[4]&&n(135,V=N&&Pe&&gt&&function(t){var e=gt.x,n=gt.y,r=e+gt.width,i=Math.max(t.x-.5*Pe.width,e),o=Math.max(t.y-Pe.height-16,n);return i+Pe.width>r&&(i=r-Pe.width),Bi(i,o)}(N)),131072&t.$$.dirty[0]|2048&t.$$.dirty[4]&&n(22,H=V&&"transform: translate("+V.x+"px, "+V.y+"px);opacity:"+q),2048&t.$$.dirty[0]&&n(133,W=w?"text":"shape"),1089&t.$$.dirty[0]|274726912&t.$$.dirty[2]|2047&t.$$.dirty[4]&&n(21,U="text"===W&&ie&&j?vg((function(){return ie([["div","text-styles",{class:"PinturaShapeControlsGroup"},[].concat([["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map((function(t){var e=t[0],n=t[1];return["Button","style-"+e,Object.assign({onclick:function(){return document.execCommand(e)}},n,{style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+n.style})]})))],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:function(){return document.execCommand("removeFormat")},style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],a)})):"shape"===W&&ne&&a?vg((function(){return ne([F&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["Slider","adjust-opacity",{onrelease:jn,onchange:Fn,step:.01,value:su(r,"opacity")?r.opacity:1,label:function(t,e,n){return Math.round(t/n*100)+"%"},min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[R&&["Button","flip-horizontal",{onclick:zn,label:be.shapeTitleButtonFlipHorizontal,icon:be.shapeIconButtonFlipHorizontal,hideLabel:!0}],R&&pe&&["Button","flip-vertical",{onclick:Dn,label:be.shapeTitleButtonFlipVertical,icon:be.shapeIconButtonFlipVertical,hideLabel:!0}],z&&["Button","to-front",{onclick:Nn,label:be.shapeTitleButtonMoveToFront,icon:be.shapeIconButtonMoveToFront,hideLabel:!0,disabled:et[et.length-1]===P}],L&&["Button","duplicate",{onclick:Vn,label:be.shapeTitleButtonDuplicate,icon:be.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],O&&["Button","remove",{onclick:Bn,label:be.shapeTitleButtonRemove,icon:be.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],D&&A&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:On,label:Fv(qn,be,r),icon:Fv(Zn,be,r),hideLabel:!0}]]],D&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:be.shapeLabelInputText,onclick:Ln}]]]].filter(Boolean),a)})):[]),65&t.$$.dirty[0]&&n(20,Z=et.filter(Sc).filter((function(t){return!gc(t)})).map((function(t){return{id:t.id,color:ac(t)?t.color:fc(t)?t.strokeColor:t.backgroundColor,name:t.name||be["shapeLabelTool"+_f(Bc(t))]}})))},[et,tt,nt,mt,$t,ye,be,en,Ie,Pe,a,w,m,u,f,p,d,q,Gn,Un,Z,U,H,M,I,T,b,g,h,$e,Me,function(t){var e=t.detail.origin;pn=void 0,vn=void 0,mn=void 0,gn=!1,hn=void 0,clearTimeout(dn),dn=setTimeout((function(){return n(120,yn=!0)}),250);var i=De();!i||dc(i)&&su(i,"pathClose")||Be(),fn=ue(Vi(e));var o=sn(fn,de,(function(t){return Sc(t)})),a=o.length&&o.shift();if(r&&hc(r)&&Tn(),!a&&r&&hc(r)&&nn(r),ae(e)){if(a&&vc(a))return gn=!0,vn=Qu(pn=a),void(mn=Zc(Qu(pn),vt));hn=a||void 0,!wt(t)&&a&&(en(a),vn=Qu(pn=a),mn=Zc(Qu(pn),vt))}},function(t){bn(),It(t)},function(t){var e=t.detail.translation;if(pn){if(!Ic(pn))return;if(hc(pn))return;return Le(pn,mn,e)}St(t)},function(t){bn(),pn?hc(pn)?In():t.detail.isTap&&gn&&ac(pn)&&!1!==Mc(pn)&&rn(pn):_t(t)},function(t){var e,n,r=hn&&t.detail.isTap;if(t.detail.isTap&&Zt({target:pn||hn,position:fn}),pn)return Bt(pn),e=pn,n=vn,JSON.stringify(e)!==JSON.stringify(n)&&Lt(pn),void(pn=void 0);var i=tn(),o=!i||Yt(i,hn||void 0);o&&Qe({storePrevious:!1}),Et(t),o&&r&&en(hn)},function(t){n(120,yn=!0),pn=r,mn=u},function(t){if(pn){var e=t.detail,r=e.translation,i=e.indexes,o=e.shiftKey;!function(t,e,n,r,i){if(fc(t)||dc(t)&&su(t,"pathClose")){var o,a,u,c=n[0],s=X.includes(16)?we:function(t,e){return e};if(fc(t))0===c?(o=function(){return ic(e)},a=function(t){return s(oc(e),t)},u=function(t,e){t.x1=e.x,t.y1=e.y}):1===c&&(o=function(){return oc(e)},a=function(t){return s(ic(e),t)},u=function(t,e){t.x2=e.x,t.y2=e.y});else{var l=e.points;o=function(){return l[c]},a=function(t){var e=l[z$(c-1,l)],n=l[z$(c+1,l)];s(e,t),s(n,t)},u=function(t,e){return t.points[c]=e}}var f=Ae(o(),r);a(f),u(t,f)}else if(yc(t)||lc(t)||cc(t)){var d,h,p=!1;if(lc(t))d=Ro(e);else if(yc(t))d=Io(e);else{p=!0,d=Io(e);var v=Ou(e.text,e);d.height=v.height}t.aspectRatio?h=t.aspectRatio:i.shiftKey&&!p&&(h=d.width/d.height);var m=Io(d),g=Oo(m),y=t.rotation,b=Ko(m),$=Uo(m,y);if(1===n.length){var x=n[0];t.flipX&&(x=Oe[x]),t.flipY&&(x=ze[x]);var w=b[0],k=b[1],S=b[2],C=b[3],_=ce($[x]);Yi(_,r);var M,E=ue(_),T=Bi(E.x-$[x].x,E.y-$[x].y),I=Wi(Vi(T),-y),P=Bi(b[x].x+I.x,b[x].y+I.y);0===x&&(M=S),1===x&&(M=C),2===x&&(M=w),3===x&&(M=k);var R=Po([M,P]);if(h){var A=Xo(R,h),L=A.width,O=A.height,z=Yo(R),D=(z[0],z[1]),F=z[2];z[3],R.width=L,R.height=O,P.y<M.y&&(R.y=F-O),P.x<M.x&&(R.x=D-L)}var j=Uo(R,y,g),B=oo(j),N=Wi(j[0],-y,B),V=Wi(j[2],-y,B),H=Po([N,V]);xe(t,lc(t)?Fi(H):H,vt)}else{var W=(n=n.map((function(e){return t.flipX&&(e=Oe[e]),t.flipY&&(e=ze[e]),e}))).map((function(t){return $[t]})),U=W[0],Z=W[1],q={x:U.x+.5*(Z.x-U.x),y:U.y+.5*(Z.y-U.y)},G=n.map((function(t){return b[t]})),Y=G[0],K=G[1],J=n.map((function(t){var e=t+2;return e<4?b[e]:b[e-4]})),Q=J[0],tt=J[1],et={x:Q.x+.5*(tt.x-Q.x),y:Q.y+.5*(tt.y-Q.y)},nt=ce(q);Yi(nt,r);var rt=ue(nt),it=Bi(rt.x-q.x,rt.y-q.y),ot=Wi(Vi(it),-y),at=Ki(Vi(Y),K),ut=Xi(at,(function(t){return 1-Math.abs(Math.sign(t))})),ct=Bi(ot.x*ut.x,ot.y*ut.y);Yi(Y,ct),Yi(K,ct);var st=Po(b);if(h){var lt=st.width,ft=st.height;0===ut.y?ft=lt/h:lt=ft*h,st.width=lt,st.height=ft,0===ut.y?st.y=et.y-.5*ft:st.x=et.x-.5*lt}var dt,ht=Uo(st,y,g),pt=oo(ht),mt=Wi(ht[0],-y,pt),gt=Wi(ht[2],-y,pt),yt=Po([mt,gt]);lc(t)?dt=Fi(yt):yc(t)?dt=yt:p&&(dt={x:yt.x,y:yt.y,width:yt.width}),xe(t,dt,vt)}}Ve()}(pn,mn,i,r,{shiftKey:o})}else n(120,yn=!1)},function(t){pn?(en(pn),t.detail.isTap&&Bt(pn),pn=void 0,n(120,yn=!1),Lt(r)):n(120,yn=!1)},function(t){Ee=xn(u).origin,n(120,yn=!0),pn=r,mn=u},function(t){if(pn){var e=t.detail,r=e.translation,i=e.shiftKey;!function(t,e,n,r){var i=cn(Zc(Qu(t),vt)),o=Oo(i),a=Ae(Ee,n),u=qi(a,o)+Math.PI/2;if(r.shiftKey){var c=Math.PI/16;u=c*Math.round(u/c)-it%c}xe(t,{rotation:u},vt),Ve()}(pn,0,r,{shiftKey:i})}else n(120,yn=!1)},function(){pn?(en(pn),pn=void 0,n(120,yn=!1),Lt(r)):n(120,yn=!1)},function(t){var e=t.key,n=/escape/i.test(e);if(Xe()){if(n)return t.preventDefault(),t.stopPropagation(),nn(r);/backspace|delete/i.test(e)&&!Cn(t.target)&&(t.preventDefault(),Ke()),L&&"d"===e&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),t.stopPropagation(),Hn())}},function(t){var e=Mc(r,t);return!0===e?t:e},En,function(t){var e=t.target,n=t.key,i=e.value||e.innerText,o=e.selectionStart||0,a=e.selectionEnd||i.length,u=i.substring(0,o)+n+i.substring(a);if(Mc(r,u)!==u)return t.preventDefault()},function(t){return uc(r)&&/enter/i.test(t.code)&&!1!==r.disableNewline?t.preventDefault():/arrow/i.test(t.code)?t.stopPropagation():/escape/i.test(t.key)?In():void 0},function(t){var e=t.key,n=t.ctrlKey,r=t.altKey;if(/enter/i.test(e)&&(n||r))return Tn()},Tn,In,Wn,function(t){var e=Ge();e&&(hc(e)||Ic(e)&&(mn=Zc(Qu(pn=e),vt),Le(pn,mn,t.detail)))},function(t){n(18,Gn=!0)},function(t){var e=t.relatedTarget;e&&e.classList.contains("shape-selector__button")||n(18,Gn=!1)},function(t){if("touch"!==t.pointerType){(yn||dn)&&Kn(void 0);var e=W$(t,mt),r=Xi(ue(e),(function(t){return Math.round(t)}));if(!(Gi(r,Xn)||(Xn=Vi(r),n(122,Yn=e),yn||dn||(Wt(e,r),c)))){var i=sn(r,0,Sc)[0];i&&gc(i)||Kn(i)}}},J,K,it,at,ct,lt,dt,pt,vt,gt,yt,wt,St,_t,Et,It,Rt,Lt,zt,Ft,Bt,Vt,Wt,Zt,Gt,Yt,Jt,te,ne,ie,ae,ue,ce,le,de,pe,me,function(t,e){var n,r,i;void 0===e&&(e={});var o=lc(t),a=ac(t),u="relative"===e.position,c="step"===e.inputMode;if(dc(t)){if(c){var s=!1,l=function(t,e){var n=De(),r=t&&Bi(rx(t.x,vt.width),rx(t.y,vt.height)),i=r&&ce(r);X.includes(16)&&i&&we(i,e);var o=ue(e),a=n.points.length?n.points[0]:o,c=Bi(rx(a.x,vt.width),rx(a.y,vt.height)),l=ce(c),f=no(l,e);if(!s&&1===n.points.length&&f<36)return Ne();if(n.points.length>2&&f<=px){n.pathClose=!0,en(n);var d=Be();Rt(d)}else{var h=n.strokeWidth&&n.strokeColor&&(void 0===n.strokeColor[3]||n.strokeColor[3]>0),p=no(i,e);if(h&&n.points.length>1&&p<px){n.pathClose=!1,n.backgroundColor=[0,0,0,0],en(n);var v=Be();Rt(v)}else if(!(n.points.length>0&&p<100))return u?ix(o,vt):o}};return{start:function(t){var e=t.detail.origin;r=4,n=Vi(e),i=Vi(e);var o=De();if(o){var a=o.points[o.points.length-1],u=l(a,n);return u&&(o.points=[].concat(o.points,[u])),Ve()}s=!0},update:function(t){if(s){var e=De();if(e){var r=e.points[0],i=l(r,Bi(n.x+t.detail.translation.x,n.y+t.detail.translation.y));i&&(e.points[1]=i,Ve())}}},release:function(t){return t.detail.preventInertia()},cancel:function(t){return Ne()},end:function(e){if(s){var r=ue(n),i=u?ix(r,vt):r;if(e.detail.isTap)if(sn(r,0,Sc).length)return Ne();je(Object.assign({},t,{points:[i]}))}}}}return{start:function(e){var o=e.detail.origin;r=4,n=Vi(o),i=Vi(o);var a=ue(o),c=u?ix(a,vt):a;je(Object.assign({},t,{points:[c]}))},update:function(t){var e=De(),o=t.detail.translation,a=Bi(n.x+o.x,n.y+o.y),c=ro(i,a);if(!(zi(c,5)<=r)){var s=qi(a,i),l=r-c;i.x+=l*Math.cos(s),i.y+=l*Math.sin(s);var f=ue(i),d=u?ix(f,vt):f;e.points=e.points.concat(d),Ve()}},release:function(t){return t.detail.preventInertia()},cancel:function(){Ne()},end:function(t){if(t.detail.isTap)return Ne();var e=Be();Rt(e)}}}return o||a||sc(t)?{start:function(e){var r=e.detail.origin;n=Vi(r);var i=ue(n),a=u?ix(i,vt):i,c=-1*Re(it,at,ct),s=Object.assign({},t,{rotation:c},a);s.flipX=at,s.flipY=ct,delete s.position,s.opacity=0,(o?["rx","ry"]:["width","height"]).forEach((function(t){s[t]=u?"0%":0})),je(s)},update:function(t){var e=De();e.opacity=1;var r=e.aspectRatio,i=t.detail.translation;if(r){var a=Math.abs(i.x)*r;i.x=i.x,i.y=a*Math.sign(i.y)}var u=Bi(n.x+i.x,n.y+i.y),c=ue(n),s=ue(u),l={x:c.x+.5*(s.x-c.x),y:c.y+.5*(s.y-c.y)},f=Re(it,at,ct);Wi(c,f,l),Wi(s,f,l);var d=Math.min(c.x,s.x),h=Math.min(c.y,s.y),p=Math.max(c.x,s.x)-d,v=Math.max(c.y,s.y)-h,m={};o?(m.x=d+.5*p,m.y=h+.5*v,m.rx=.5*p,m.ry=.5*v):(m.x=d,m.y=h,m.width=p,m.height=v),xe(e,m,vt),Ve()},release:function(t){t.detail.preventInertia()},cancel:function(t){Ne()},end:function(t){var e=De();if(t.detail.isTap){if(!ac(e)||!me||hn)return Ne();delete e.width,delete e.height,!1!==e.disableNewline&&delete e.textAlign;var r=Zc(Object.assign({},e),vt),i=Ou(e.text,r),o=ue({x:n.x,y:n.y-.5*i.height}),a=ue({x:n.x+i.width,y:n.y+.5*i.height}),u={x:o.x+.5*(a.x-o.x),y:o.y+.5*(a.y-o.y)},c=Re(it,at,ct);Wi(o,c,u),Wi(a,c,u);var s=Math.min(o.x,a.x),l=Math.min(o.y,a.y);s<0&&(s=0),l<0&&(l=0),s+i.width>vt.width&&(s=vt.width-i.width),l+i.height>vt.height&&(l=vt.height-i.height),e.x=ei(e.x)?gu(s,vt.width):s,e.y=ei(e.y)?gu(l,vt.height):l}if(e.opacity=1,!ac(e)){var f=Be();Rt(f)}en(e),ac(e)&&rn(e)}}:fc(t)?{start:function(e){var r=e.detail.origin,i=ue(r),o=Xi(i,yv);n=Vi(r),je(Object.assign({},t,{x1:u?gu(o.x,vt.width):o.x,y1:u?gu(o.y,vt.height):o.y,x2:u?gu(o.x,vt.width):o.x,y2:u?gu(o.y,vt.height):o.y,opacity:0}))},update:function(t){var e=De(),r=t.detail.translation,i=Yi(Vi(n),r);if(X.includes(16)){var o=ro(n,i),a=qi(n,i),c=Math.PI/4,s=c*Math.round(a/c);i.x=n.x+o*Math.cos(s),i.y=n.y+o*Math.sin(s)}var l=ue(i);Ue(e,{x2:u?gu(l.x,vt.width):l.x,y2:u?gu(l.y,vt.height):l.y,opacity:1}),Ve()},release:function(t){return t.detail.preventInertia()},cancel:function(t){Ne()},end:function(t){var e=De();if(t.detail.isTap)return Ne();e.opacity=1;var n=Be();Rt(n),en(n)}}:void 0},function(){var t,e,n=le*le,r=function(t,e,r){void 0===r&&(r=!1);var i=no(t,e);if(!r&&i<2)return!1;var o,a=et.filter((function(t){return!t.disableErase}));return o=i<n?sn(ue(e),le):ln(a,ue(t),ue(e),le),an(o).forEach(Ft),!0};return{start:function(n){t=Bi(Math.round(n.detail.origin.x),Math.round(n.detail.origin.y)),r(t,t,!0),e=t},update:function(n){var i=n.detail.translation,o=Bi(Math.round(t.x+i.x),Math.round(t.y+i.y));r(e,o)&&(e=Vi(o))},release:function(t){return t.detail.preventInertia()},end:function(){}}},De,Fe,je,Be,Ne,function(t){return void 0===t&&(t={}),Object.assign({id:ui()},t)},Ve,He,We,Ue,Ze,function(t,e,n){void 0===n&&(n=!0),et.forEach((function(n){return Ze(n,t,e,!1)})),n&&Ve()},qe,Ge,Xe,Ye,Ke,Qe,nn,rn,on,an,un,cn,sn,ln,yn,Te,Yn,c,D,r,A,O,L,P,z,R,F,W,j,V,N,B,k,o,S,E,C,x,$,v,y,s,i,l,G,function(e){Tl.call(this,t,e)},function(t){return en(et[t])},function(t){Pl[t?"unshift":"push"]((function(){n(8,Ie=t)}))},function(){M=this.value,n(23,M),n(11,w),n(125,r),n(143,x),n(1,tt),n(0,et)},function(t){Pl[t?"unshift":"push"]((function(){n(8,Ie=t)}))},function(){Un&&Un.focus()},function(t){return n(9,Pe=t.detail)},function(t){Pl[t?"unshift":"push"]((function(){n(19,Un=t)}))},function(t){return W$(t,mt)}]}var yx=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,gx,hx,Ps,{uid:56,ui:55,disabled:1,markup:0,offset:2,contextRotation:57,contextFlipX:58,contextFlipY:59,contextZoom:60,active:61,opacity:62,parentRect:63,rootRect:3,utilRect:64,hoverColor:65,textInputMode:4,oninteractionstart:66,oninteractionupdate:67,oninteractionrelease:68,oninteractionend:69,oninteractioncancel:70,onaddshape:71,onupdateshape:72,onselectshape:73,onremoveshape:74,ontapshape:75,onhovershape:76,onhovercanvas:77,ontapcanvas:78,beforeSelectShape:79,beforeDeselectShape:80,beforeRemoveShape:81,beforeUpdateShape:82,willRenderShapeControls:83,willRenderShapeTextControls:84,willStartInteraction:85,mapEditorPointToImagePoint:86,mapImagePointToEditorPoint:87,eraseRadius:88,selectRadius:89,enableButtonFlipVertical:90,enableTapToAddText:91,enableTextStyleControls:5,locale:6,createShape:92,eraseShape:93,getMarkupItemDraft:94,getMarkupItemDraftIndex:95,addMarkupItemDraft:96,confirmMarkupItemDraft:97,discardMarkupItemDraft:98,createMarkupItem:99,syncShapes:100,addShape:101,removeMarkupShapeProps:102,updateMarkupShape:103,updateMarkupShapeProperty:104,updateMarkupItemsShapeProperty:105,updateMarkupShapeItems:106,getActiveMarkupItem:107,hasActiveMarkupItem:108,removeShape:109,removeActiveMarkupItem:110,blurShapes:111,selectShape:7,deselectMarkupItem:112,editMarkupItem:113,finishEditMarkupItem:114,removeMarkupItems:115,getTextShapeRect:116,getMarkupShapeRect:117,getShapesNearPosition:118,getShapesBetweenPoints:119},null,[-1,-1,-1,-1,-1,-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"createShape",get:function(){return this.$$.ctx[92]}},{key:"eraseShape",get:function(){return this.$$.ctx[93]}},{key:"getMarkupItemDraft",get:function(){return this.$$.ctx[94]}},{key:"getMarkupItemDraftIndex",get:function(){return this.$$.ctx[95]}},{key:"addMarkupItemDraft",get:function(){return this.$$.ctx[96]}},{key:"confirmMarkupItemDraft",get:function(){return this.$$.ctx[97]}},{key:"discardMarkupItemDraft",get:function(){return this.$$.ctx[98]}},{key:"createMarkupItem",get:function(){return this.$$.ctx[99]}},{key:"syncShapes",get:function(){return this.$$.ctx[100]}},{key:"addShape",get:function(){return this.$$.ctx[101]}},{key:"removeMarkupShapeProps",get:function(){return this.$$.ctx[102]}},{key:"updateMarkupShape",get:function(){return this.$$.ctx[103]}},{key:"updateMarkupShapeProperty",get:function(){return this.$$.ctx[104]}},{key:"updateMarkupItemsShapeProperty",get:function(){return this.$$.ctx[105]}},{key:"updateMarkupShapeItems",get:function(){return this.$$.ctx[106]}},{key:"getActiveMarkupItem",get:function(){return this.$$.ctx[107]}},{key:"hasActiveMarkupItem",get:function(){return this.$$.ctx[108]}},{key:"removeShape",get:function(){return this.$$.ctx[109]}},{key:"removeActiveMarkupItem",get:function(){return this.$$.ctx[110]}},{key:"blurShapes",get:function(){return this.$$.ctx[111]}},{key:"selectShape",get:function(){return this.$$.ctx[7]}},{key:"deselectMarkupItem",get:function(){return this.$$.ctx[112]}},{key:"editMarkupItem",get:function(){return this.$$.ctx[113]}},{key:"finishEditMarkupItem",get:function(){return this.$$.ctx[114]}},{key:"removeMarkupItems",get:function(){return this.$$.ctx[115]}},{key:"getTextShapeRect",get:function(){return this.$$.ctx[116]}},{key:"getMarkupShapeRect",get:function(){return this.$$.ctx[117]}},{key:"getShapesNearPosition",get:function(){return this.$$.ctx[118]}},{key:"getShapesBetweenPoints",get:function(){return this.$$.ctx[119]}}]),e}(df);function bx(t,e,n){var r=t.slice();return r[9]=e[n],r}function $x(t,e){var n,r,i,o,a,u,c,s=Fv(e[9].componentProps.title,e[1])+"",l=[e[9].componentProps],f=e[9].component;function d(t){for(var e={},n=0;n<l.length;n+=1)e=_s(e,l[n]);return{props:e}}return f&&(a=vl(f,d())),{key:t,first:null,c:function(){n=el("li"),r=el("span"),i=rl(s),o=il(),a&&cf(a.$$.fragment),u=il(),sl(r,"class","PinturaShapeStyleLabel"),sl(n,"class","PinturaShapeStyle"),this.first=n},m:function(t,e){Qs(t,n,e),Ys(n,r),Ys(r,i),Ys(n,o),a&&sf(a,n,null),Ys(n,u),c=!0},p:function(t,r){e=t,(!c||3&r)&&s!==(s=Fv(e[9].componentProps.title,e[1])+"")&&fl(i,s);var o=1&r?of(l,[af(e[9].componentProps)]):{};if(f!==(f=e[9].component)){if(a){Gl();var h=a;Kl(h.$$.fragment,1,0,(function(){lf(h,1)})),Xl()}f?(cf((a=vl(f,d())).$$.fragment),Yl(a.$$.fragment,1),sf(a,n,u)):a=null}else f&&a.$set(o)},i:function(t){c||(a&&Yl(a.$$.fragment,t),c=!0)},o:function(t){a&&Kl(a.$$.fragment,t),c=!1},d:function(t){t&&tl(n),a&&lf(a)}}}function xx(t){for(var e,n,r=[],i=new Map,o=t[0],a=function(t){return t[9].id},u=0;u<o.length;u+=1){var c=bx(t,o,u),s=a(c);i.set(s,r[u]=$x(s,c))}return{c:function(){e=el("ul");for(var t=0;t<r.length;t+=1)r[t].c();sl(e,"class","PinturaShapeStyleList")},m:function(t,i){Qs(t,e,i);for(var o=0;o<r.length;o+=1)r[o].m(e,null);n=!0},p:function(t,n){3&n&&(o=t[0],Gl(),r=rf(r,n,a,1,t,o,i,e,nf,$x,null,bx),Xl())},i:function(t){if(!n){for(var e=0;e<o.length;e+=1)Yl(r[e]);n=!0}},o:function(t){for(var e=0;e<r.length;e+=1)Kl(r[e]);n=!1},d:function(t){t&&tl(e);for(var n=0;n<r.length;n+=1)r[n].d()}}}function wx(t){var e,n,r;return n=new Qp({props:{class:"PinturaShapeStyles",elasticity:t[2],$$slots:{default:[xx]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"style",t[3])},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,i){var o=i[0],a={};4&o&&(a.elasticity=t[2]),4099&o&&(a.$$scope={dirty:o,ctx:t}),n.$set(a),(!r||8&o)&&sl(e,"style",t[3])},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function kx(t,e,n){var r,i,o,a=e.isActive,u=void 0!==a&&a,c=e.controls,s=void 0===c?[]:c,l=e.locale,f=e.scrollElasticity,d=El("isAnimated");Ls(t,d,(function(t){return n(8,o=t)}));var h=_h(0,{stiffness:.25,damping:.9});return Ls(t,h,(function(t){return n(7,i=t)})),t.$$set=function(t){"isActive"in t&&n(6,u=t.isActive),"controls"in t&&n(0,s=t.controls),"locale"in t&&n(1,l=t.locale),"scrollElasticity"in t&&n(2,f=t.scrollElasticity)},t.$$.update=function(){320&t.$$.dirty&&h.set(u?1:0,{hard:!1===o}),192&t.$$.dirty&&n(3,r="opacity:"+i+";"+(u?"":"pointer-events:none;")+(i<=0?"visibility:hidden":""))},[s,l,f,r,d,h,u,i,o]}var Sx=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,kx,wx,Ps,{isActive:6,controls:0,locale:1,scrollElasticity:2}),n}return gr(e,t),e}(df);function Cx(t,e,n){var r=t.slice();return r[12]=e[n].key,r[3]=e[n].controls,r[13]=e[n].isActive,r}function _x(t,e){var n,r,i;return r=new Sx({props:{isActive:e[13],controls:e[3],locale:e[1],scrollElasticity:e[2]}}),{key:t,first:null,c:function(){n=ol(),cf(r.$$.fragment),this.first=n},m:function(t,e){Qs(t,n,e),sf(r,t,e),i=!0},p:function(t,n){e=t;var i={};16&n&&(i.isActive=e[13]),16&n&&(i.controls=e[3]),2&n&&(i.locale=e[1]),4&n&&(i.scrollElasticity=e[2]),r.$set(i)},i:function(t){i||(Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(r.$$.fragment,t),i=!1},d:function(t){t&&tl(n),lf(r,t)}}}function Mx(t){for(var e,n,r,i=[],o=new Map,a=t[4],u=function(t){return t[12]},c=0;c<a.length;c+=1){var s=Cx(t,a,c),l=u(s);o.set(l,i[c]=_x(l,s))}return{c:function(){e=el("div");for(var r=0;r<i.length;r+=1)i[r].c();sl(e,"class",n=Kh(["PinturaShapeStyleEditor",t[0]]))},m:function(t,n){Qs(t,e,n);for(var o=0;o<i.length;o+=1)i[o].m(e,null);r=!0},p:function(t,c){var s=c[0];22&s&&(a=t[4],Gl(),i=rf(i,s,u,1,t,a,o,e,nf,_x,null,Cx),Xl()),(!r||1&s&&n!==(n=Kh(["PinturaShapeStyleEditor",t[0]])))&&sl(e,"class",n)},i:function(t){if(!r){for(var e=0;e<a.length;e+=1)Yl(i[e]);r=!0}},o:function(t){for(var e=0;e<i.length;e+=1)Kl(i[e]);r=!1},d:function(t){t&&tl(e);for(var n=0;n<i.length;n+=1)i[n].d()}}}function Ex(t,e,n){var r,i,o,a=e.class,u=void 0===a?void 0:a,c=e.controls,s=void 0===c?{}:c,l=e.shape,f=void 0===l?void 0:l,d=e.onchange,h=e.locale,p=e.scrollElasticity,v=[];return t.$$set=function(t){"class"in t&&n(0,u=t.class),"controls"in t&&n(3,s=t.controls),"shape"in t&&n(5,f=t.shape),"onchange"in t&&n(6,d=t.onchange),"locale"in t&&n(1,h=t.locale),"scrollElasticity"in t&&n(2,p=t.scrollElasticity)},t.$$.update=function(){8&t.$$.dirty&&n(8,r=Object.keys(s).filter((function(t){return s[t]}))),288&t.$$.dirty&&n(7,i=f&&Object.keys(f).length&&r&&kc(f)?function(t){var e=r.filter((function(e){return e.split("_").every((function(e){return su(t,e)&&kc(t,e)}))})).map((function(e){var n=e.split("_"),r=n.length>1?n.map((function(e){return t[e]})):t[e],i=s[e],o=i[0],a=i[1];if(ei(o))if(s[o]){var u=Object.assign({},a),c=s[o];o=c[0],a=c[1],a=Object.assign({},a,u)}else{if("Dropdown"!==o)return;o=_m}var l=ni(a.options)?a.options(t):a.options;return{id:e,component:o,componentProps:Object.assign({},a,{options:l,locale:h,value:r,optionLabelClass:"PinturaButtonLabel",onchange:function(r){var i,o=Jr(r)&&!lu(r)?r.value:r;a.onchange&&a.onchange(o,t);var u=n.length>1?n.reduce((function(t,e,n){var r;return Object.assign({},t,((r={})[e]=Array.isArray(o)?o[n]:o,r))}),{}):((i={})[e]=o,i);d(u)}})}})).filter(Boolean);return e}(f):[]),160&t.$$.dirty&&n(4,o=function(t,e){var n=v.find((function(e){return e.key===t}));return n||(n={key:t,controls:e},v.push(n)),v.forEach((function(t){return t.isActive=!1})),n.controls=e,n.isActive=!0,v}(f&&Object.keys(f).length?Object.keys(f).join("_"):"none",i||[]))},[u,h,p,s,o,f,d,i,r]}var Tx=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Ex,Mx,Ps,{class:0,controls:3,shape:5,onchange:6,locale:1,scrollElasticity:2}),n}return gr(e,t),e}(df),Ix=tf.document;function Px(t){var e,n,r,i;return{c:function(){e=il(),sl(n=el("button"),"class","PinturaDragButton"),sl(n,"type","button"),sl(n,"title",t[1]),n.disabled=t[2]},m:function(o,a){Qs(o,e,a),Qs(o,n,a),n.innerHTML=t[0],t[11](n),r||(i=[al(Ix.body,"load",t[5],!0),al(Ix.body,"error",t[6],!0),al(n,"pointerdown",t[4])],r=!0)},p:function(t,e){var r=e[0];1&r&&(n.innerHTML=t[0]),2&r&&sl(n,"title",t[1]),4&r&&(n.disabled=t[2])},i:Ss,o:Ss,d:function(o){o&&tl(e),o&&tl(n),t[11](null),r=!1,Ts(i)}}}function Rx(t,e,n){var r,i,o=e.html,a=e.title,u=e.onclick,c=e.disabled,s=void 0!==c&&c,l=e.ongrab,f=void 0===l?Pr:l,d=e.ondrag,h=void 0===d?Pr:d,p=e.ondrop,v=void 0===p?Pr:p,m=function(t){return no(i,Bi(t.pageX,t.pageY))<256},g=function t(e){document.documentElement.removeEventListener("pointermove",y),document.documentElement.removeEventListener("pointerup",t);var n=Bi(e.pageX,e.pageY);if(no(i,n)<32)return u(e);m(e)||v(e)},y=function(t){m(t)||h(t)},b=function(t){return r&&r.contains(t)&&"IMG"===t.nodeName};return t.$$set=function(t){"html"in t&&n(0,o=t.html),"title"in t&&n(1,a=t.title),"onclick"in t&&n(7,u=t.onclick),"disabled"in t&&n(2,s=t.disabled),"ongrab"in t&&n(8,f=t.ongrab),"ondrag"in t&&n(9,h=t.ondrag),"ondrop"in t&&n(10,v=t.ondrop)},t.$$.update=function(){8&t.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[o,a,s,r,function(t){i=Bi(t.pageX,t.pageY),f(t),document.documentElement.addEventListener("pointermove",y),document.documentElement.addEventListener("pointerup",g)},function(t){var e=t.target;b(e)&&n(3,r.dataset.load=!0,r)},function(t){var e=t.target;b(e)&&n(3,r.dataset.error=!0,r)},u,f,h,v,function(t){Pl[t?"unshift":"push"]((function(){n(3,r=t)}))}]}var Ax=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Rx,Px,Ps,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10}),n}return gr(e,t),e}(df);function Lx(t,e,n){var r=t.slice();return r[14]=e[n],r}function Ox(t,e){var n,r,i,o,a,u,c;function s(){return e[10](e[14])}function l(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[11].apply(t,[e[14]].concat(r))}function f(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[12].apply(t,[e[14]].concat(r))}function d(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[13].apply(t,[e[14]].concat(r))}return r=new Ax({props:{onclick:s,ongrab:l,ondrag:f,ondrop:d,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c:function(){n=el("li"),cf(r.$$.fragment),i=il(),sl(n,"class","PinturaShapePreset"),sl(n,"style",e[6]),this.first=n},m:function(t,s){Qs(t,n,s),sf(r,n,null),Ys(n,i),a=!0,u||(c=Hs(o=e[8].call(null,n,e[14])),u=!0)},p:function(t,i){e=t;var u={};5&i&&(u.onclick=s),9&i&&(u.ongrab=l),17&i&&(u.ondrag=f),33&i&&(u.ondrop=d),3&i&&(u.disabled=e[1]||e[14].disabled),1&i&&(u.title=e[14].title),1&i&&(u.html=e[14].thumb),r.$set(u),(!a||64&i)&&sl(n,"style",e[6]),o&&Is(o.update)&&1&i&&o.update.call(null,e[14])},i:function(t){a||(Yl(r.$$.fragment,t),a=!0)},o:function(t){Kl(r.$$.fragment,t),a=!1},d:function(t){t&&tl(n),lf(r),u=!1,c()}}}function zx(t){for(var e,n,r=[],i=new Map,o=t[0],a=function(t){return t[14].id},u=0;u<o.length;u+=1){var c=Lx(t,o,u),s=a(c);i.set(s,r[u]=Ox(s,c))}return{c:function(){e=el("ul");for(var t=0;t<r.length;t+=1)r[t].c();sl(e,"class","PinturaShapePresetsList")},m:function(t,i){Qs(t,e,i);for(var o=0;o<r.length;o+=1)r[o].m(e,null);n=!0},p:function(t,n){var u=n[0];127&u&&(o=t[0],Gl(),r=rf(r,u,a,1,t,o,i,e,nf,Ox,null,Lx),Xl())},i:function(t){if(!n){for(var e=0;e<o.length;e+=1)Yl(r[e]);n=!0}},o:function(t){for(var e=0;e<r.length;e+=1)Kl(r[e]);n=!1},d:function(t){t&&tl(e);for(var n=0;n<r.length;n+=1)r[n].d()}}}function Dx(t,e,n){var r,i,o=e.presets,a=e.disabled,u=void 0===a?void 0:a,c=e.onclickpreset,s=e.ongrabpreset,l=void 0===s?void 0:s,f=e.ondragpreset,d=void 0===f?void 0:f,h=e.ondroppreset,p=void 0===h?void 0:h,v=_h(0,{stiffness:.25,damping:.9});Ls(t,v,(function(t){return n(9,i=t)}));kl((function(){return v.set(1)}));return t.$$set=function(t){"presets"in t&&n(0,o=t.presets),"disabled"in t&&n(1,u=t.disabled),"onclickpreset"in t&&n(2,c=t.onclickpreset),"ongrabpreset"in t&&n(3,l=t.ongrabpreset),"ondragpreset"in t&&n(4,d=t.ondragpreset),"ondroppreset"in t&&n(5,p=t.ondroppreset)},t.$$.update=function(){512&t.$$.dirty&&n(6,r="opacity:"+i)},[o,u,c,l,d,p,r,v,function(t,e){return e.mount&&e.mount(t.firstChild,e)},i,function(t){return c(t.id)},function(t,e){return l&&l(t.id,e)},function(t,e){return d&&d(t.id,e)},function(t,e){return p&&p(t.id,e)}]}var Fx=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Dx,zx,Ps,{presets:0,disabled:1,onclickpreset:2,ongrabpreset:3,ondragpreset:4,ondroppreset:5}),n}return gr(e,t),e}(df),jx=function(t){return/<svg /.test(t)};function Bx(t){var e,n;return e=new Gm({props:{items:t[10]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};1024&n&&(r.items=t[10]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Nx(t){var e,n,r,i,o=[Hx,Vx],a=[];function u(t,e){return t[8]?0:1}return e=u(t),n=a[e]=o[e](t),{c:function(){n.c(),r=ol()},m:function(t,n){a[e].m(t,n),Qs(t,r,n),i=!0},p:function(t,i){var c=e;(e=u(t))===c?a[e].p(t,i):(Gl(),Kl(a[c],1,1,(function(){a[c]=null})),Xl(),(n=a[e])?n.p(t,i):(n=a[e]=o[e](t)).c(),Yl(n,1),n.m(r.parentNode,r))},i:function(t){i||(Yl(n),i=!0)},o:function(t){Kl(n),i=!1},d:function(t){a[e].d(t),t&&tl(r)}}}function Vx(t){var e,n,r,i,o=t[10]&&Wx(t);return r=new Qp({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[Ux]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),o&&o.c(),n=il(),cf(r.$$.fragment),sl(e,"class","PinturaShapePresetsFlat")},m:function(t,a){Qs(t,e,a),o&&o.m(e,null),Ys(e,n),sf(r,e,null),i=!0},p:function(t,i){t[10]?o?(o.p(t,i),1024&i&&Yl(o,1)):((o=Wx(t)).c(),Yl(o,1),o.m(e,n)):o&&(Gl(),Kl(o,1,1,(function(){o=null})),Xl());var a={};512&i&&(a.scrollAutoCancel=t[9]),1&i&&(a.elasticity=t[0]),536871070&i&&(a.$$scope={dirty:i,ctx:t}),r.$set(a)},i:function(t){i||(Yl(o),Yl(r.$$.fragment,t),i=!0)},o:function(t){Kl(o),Kl(r.$$.fragment,t),i=!1},d:function(t){t&&tl(e),o&&o.d(),lf(r)}}}function Hx(t){var e,n,r,i,o;n=new Qp({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[Kx]},$$scope:{ctx:t}}});for(var a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]],u={$$slots:{default:[Qx,function(t){return{26:t.panel,27:t.panelIsActive}},function(t){return(t.panel?67108864:0)|(t.panelIsActive?134217728:0)}]},$$scope:{ctx:t}},c=0;c<a.length;c+=1)u=_s(u,a[c]);return i=new gp({props:u}),{c:function(){e=el("div"),cf(n.$$.fragment),r=il(),cf(i.$$.fragment),sl(e,"class","PinturaShapePresetsGrouped")},m:function(t,a){Qs(t,e,a),sf(n,e,null),Ys(e,r),sf(i,e,null),o=!0},p:function(t,e){var r={};1&e&&(r.elasticity=t[0]),536876128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);var o=6144&e?of(a,[a[0],a[1],2048&e&&{panels:t[11]},4096&e&&af(t[12])]):{};738206239&e&&(o.$$scope={dirty:e,ctx:t}),i.$set(o)},i:function(t){o||(Yl(n.$$.fragment,t),Yl(i.$$.fragment,t),o=!0)},o:function(t){Kl(n.$$.fragment,t),Kl(i.$$.fragment,t),o=!1},d:function(t){t&&tl(e),lf(n),lf(i)}}}function Wx(t){var e,n;return e=new Gm({props:{items:t[10]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};1024&n&&(r.items=t[10]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Ux(t){var e,n;return e=new Fx({props:{presets:t[7],onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};128&n&&(r.presets=t[7]),2&n&&(r.onclickpreset=t[1]),4&n&&(r.ongrabpreset=t[2]),8&n&&(r.ondragpreset=t[3]),16&n&&(r.ondroppreset=t[4]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Zx(t){var e,n;return e=new Gm({props:{items:t[10]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};1024&n&&(r.items=t[10]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function qx(t){var e,n;return e=new xp({props:{$$slots:{default:[Gx]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};805306368&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Gx(t){var e,n=t[28].icon+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){268435456&r&&n!==(n=t[28].icon+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function Xx(t){var e,n,r=t[28].label+"";return{c:function(){e=el("span"),n=rl(r)},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){268435456&e&&r!==(r=t[28].label+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function Yx(t){var e,n,r,i=t[28].icon&&qx(t),o=!t[28].hideLabel&&Xx(t);return{c:function(){i&&i.c(),e=il(),o&&o.c(),n=ol()},m:function(t,a){i&&i.m(t,a),Qs(t,e,a),o&&o.m(t,a),Qs(t,n,a),r=!0},p:function(t,r){t[28].icon?i?(i.p(t,r),268435456&r&&Yl(i,1)):((i=qx(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl()),t[28].hideLabel?o&&(o.d(1),o=null):o?o.p(t,r):((o=Xx(t)).c(),o.m(n.parentNode,n))},i:function(t){r||(Yl(i),r=!0)},o:function(t){Kl(i),r=!1},d:function(t){i&&i.d(t),t&&tl(e),o&&o.d(t),t&&tl(n)}}}function Kx(t){for(var e,n,r,i=t[10]&&Zx(t),o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}],a={$$slots:{default:[Yx,function(t){return{28:t.tab}},function(t){return t.tab?268435456:0}]},$$scope:{ctx:t}},u=0;u<o.length;u+=1)a=_s(a,o[u]);return(n=new op({props:a})).$on("select",t[18]),{c:function(){i&&i.c(),e=il(),cf(n.$$.fragment)},m:function(t,o){i&&i.m(t,o),Qs(t,e,o),sf(n,t,o),r=!0},p:function(t,r){t[10]?i?(i.p(t,r),1024&r&&Yl(i,1)):((i=Zx(t)).c(),Yl(i,1),i.m(e.parentNode,e)):i&&(Gl(),Kl(i,1,1,(function(){i=null})),Xl());var a=4128&r?of(o,[o[0],32&r&&{tabs:t[5]},4096&r&&af(t[12]),o[3]]):{};805306368&r&&(a.$$scope={dirty:r,ctx:t}),n.$set(a)},i:function(t){r||(Yl(i),Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(i),Kl(n.$$.fragment,t),r=!1},d:function(t){i&&i.d(t),t&&tl(e),lf(n,t)}}}function Jx(t){var e,n;return e=new Fx({props:{presets:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};67117056&n&&(r.presets=t[13][t[26]].items),67117056&n&&(r.disabled=t[13][t[26]].disabled),2&n&&(r.onclickpreset=t[1]),4&n&&(r.ongrabpreset=t[2]),8&n&&(r.ondragpreset=t[3]),16&n&&(r.ondroppreset=t[4]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Qx(t){var e,n;return e=new Qp({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[Jx]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};134217728&n&&(r.scroll=t[27]?{scrollOffset:0,animate:!1}:void 0),512&n&&(r.scrollAutoCancel=t[9]),1&n&&(r.elasticity=t[0]),603987998&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function tw(t){var e,n,r,i,o=[Nx,Bx],a=[];function u(t,e){return t[9]?0:t[10]?1:-1}return~(n=u(t))&&(r=a[n]=o[n](t)),{c:function(){e=el("div"),r&&r.c(),sl(e,"class","PinturaShapePresetsPalette")},m:function(t,r){Qs(t,e,r),~n&&a[n].m(e,null),i=!0},p:function(t,i){var c=i[0],s=n;(n=u(t))===s?~n&&a[n].p(t,c):(r&&(Gl(),Kl(a[s],1,1,(function(){a[s]=null})),Xl()),~n?((r=a[n])?r.p(t,c):(r=a[n]=o[n](t)).c(),Yl(r,1),r.m(e,null)):r=null)},i:function(t){i||(Yl(r),i=!0)},o:function(t){Kl(r),i=!1},d:function(t){t&&tl(e),~n&&a[n].d()}}}function ew(t,e,n){var r,i,o,a,u,c,s,l,f,d=e.locale,h=e.presets,p=e.scrollElasticity,v=e.enableSelectImage,m=void 0===v||v,g=e.willRenderPresetToolbar,y=void 0===g?xi:g,b=e.onaddpreset,$=void 0===b?Pr:b,x=e.ongrabpreset,w=void 0===x?void 0:x,k=e.ondragpreset,S=void 0===k?void 0:k,C=e.ondroppreset,_=void 0===C?void 0:C,M="presets-"+ui(),E=function(t,e){return void 0===e&&(e=""),jx(t)?t:cu(t)?vu(t,e):'<img src="'+t+'" alt="'+e+'"/>'},T=function(t){return mi(ha(t))},I=["src","alt","thumb","shape","id","mount","disabled"],P=function t(e){return e.map((function(e){return function(t){return lu(t)&&ei(t[0])&&lu(t[1])}(e)?Object.assign({},e[2],{id:M+"-"+e[0].toLowerCase(),label:e[0],items:t(e[1])}):function(t){var e,n,r,i,o,a,u,c=t;return ei(t)?cu(t)?i=E(e=t,o=t):(o=T(e=t),i=E(e,o)):(e=t.src,o=t.alt||(ei(e)?T(e):ei(t.thumb)?T(t.thumb):void 0),i=E(t.thumb||e,o),n=t.shape,a=t.mount,u=t.disabled,r=Object.keys(t).reduce((function(e,n){return I.includes(n)||(e[n]=t[n]),e}),{})),{id:c,src:e,thumb:i,shape:n,shapeProps:r,alt:o,title:o,mount:a,disabled:u}}(e)}))};return t.$$set=function(t){"locale"in t&&n(14,d=t.locale),"presets"in t&&n(15,h=t.presets),"scrollElasticity"in t&&n(0,p=t.scrollElasticity),"enableSelectImage"in t&&n(16,m=t.enableSelectImage),"willRenderPresetToolbar"in t&&n(17,y=t.willRenderPresetToolbar),"onaddpreset"in t&&n(1,$=t.onaddpreset),"ongrabpreset"in t&&n(2,w=t.ongrabpreset),"ondragpreset"in t&&n(3,S=t.ondragpreset),"ondroppreset"in t&&n(4,_=t.ondroppreset)},t.$$.update=function(){32768&t.$$.dirty&&n(7,r=P(h)),128&t.$$.dirty&&n(9,i=r.length),640&t.$$.dirty&&n(8,o=i&&r.some((function(t){return!!t.items}))),384&t.$$.dirty&&n(5,a=o&&r),384&t.$$.dirty&&n(13,u=o&&r.reduce((function(t,e){return t[e.id]=e,t}),{})),96&t.$$.dirty&&n(6,c=c||a&&(a.find((function(t){return!t.disabled}))||{}).id),64&t.$$.dirty&&n(12,s={name:M,selected:c}),32&t.$$.dirty&&n(11,l=a&&a.map((function(t){return t.id}))),212994&t.$$.dirty&&n(10,f=d&&y([m&&["Button","browse",{label:d.shapeLabelButtonSelectSticker,icon:d.shapeIconButtonSelectSticker,onclick:function(){pg().then((function(t){t&&$(t)}))}}]]))},[p,$,w,S,_,a,c,r,o,i,f,l,s,u,d,h,m,y,function(t){var e=t.detail;return n(6,c=e)}]}var nw=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,ew,tw,Ps,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4}),n}return gr(e,t),e}(df);function rw(t){var e,n,r,i,o=[{locale:t[4]},{uid:t[14]},{parentRect:t[29]},{rootRect:t[43]},{utilRect:t[30]},{offset:t[38]},{disabled:t[28]},{contextRotation:t[17]},{contextFlipX:t[18]},{contextFlipY:t[19]},{contextZoom:t[42]},{active:t[26]},{opacity:t[45]},{hoverColor:t[46]},{eraseRadius:t[37]},{selectRadius:t[6]},{enableButtonFlipVertical:t[9]},{mapEditorPointToImagePoint:t[15]},{mapImagePointToEditorPoint:t[16]},{enableTapToAddText:t[12]},{textInputMode:t[7]},{willStartInteraction:t[80]},{oninteractionstart:t[66]},{oninteractionupdate:t[67]},{oninteractionrelease:t[68]},{oninteractionend:t[70]},{oninteractioncancel:t[69]},{onhovershape:t[74]},{ontapcanvas:t[73]},{onaddshape:t[123]},{onselectshape:t[124]},{ontapshape:t[125]},{onupdateshape:t[126]},{onremoveshape:t[127]},t[32]];function a(e){t[129](e)}function u(e){t[130](e)}for(var c={},s=0;s<o.length;s+=1)c=_s(c,o[s]);return void 0!==t[27]&&(c.markup=t[27]),void 0!==t[44]&&(c.ui=t[44]),e=new yx({props:c}),t[128](e),Pl.push((function(){return uf(e,"markup",a)})),Pl.push((function(){return uf(e,"ui",u)})),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),i=!0},p:function(t,i){var a=1955582672&i[0]|55490&i[1]|793072&i[2]?of(o,[16&i[0]&&{locale:t[4]},16384&i[0]&&{uid:t[14]},536870912&i[0]&&{parentRect:t[29]},4096&i[1]&&{rootRect:t[43]},1073741824&i[0]&&{utilRect:t[30]},128&i[1]&&{offset:t[38]},268435456&i[0]&&{disabled:t[28]},131072&i[0]&&{contextRotation:t[17]},262144&i[0]&&{contextFlipX:t[18]},524288&i[0]&&{contextFlipY:t[19]},2048&i[1]&&{contextZoom:t[42]},67108864&i[0]&&{active:t[26]},16384&i[1]&&{opacity:t[45]},32768&i[1]&&{hoverColor:t[46]},64&i[1]&&{eraseRadius:t[37]},64&i[0]&&{selectRadius:t[6]},512&i[0]&&{enableButtonFlipVertical:t[9]},32768&i[0]&&{mapEditorPointToImagePoint:t[15]},65536&i[0]&&{mapImagePointToEditorPoint:t[16]},4096&i[0]&&{enableTapToAddText:t[12]},128&i[0]&&{textInputMode:t[7]},262144&i[2]&&{willStartInteraction:t[80]},16&i[2]&&{oninteractionstart:t[66]},32&i[2]&&{oninteractionupdate:t[67]},64&i[2]&&{oninteractionrelease:t[68]},256&i[2]&&{oninteractionend:t[70]},128&i[2]&&{oninteractioncancel:t[69]},4096&i[2]&&{onhovershape:t[74]},2048&i[2]&&{ontapcanvas:t[73]},8388608&i[0]|524288&i[2]&&{onaddshape:t[123]},8388608&i[0]&&{onselectshape:t[124]},8388608&i[0]&&{ontapshape:t[125]},8388608&i[0]|524288&i[2]&&{onupdateshape:t[126]},8388608&i[0]|524288&i[2]&&{onremoveshape:t[127]},2&i[1]&&af(t[32])]):{};!n&&134217728&i[0]&&(n=!0,a.markup=t[27],jl((function(){return n=!1}))),!r&&8192&i[1]&&(r=!0,a.ui=t[44],jl((function(){return r=!1}))),e.$set(a)},i:function(t){i||(Yl(e.$$.fragment,t),i=!0)},o:function(t){Kl(e.$$.fragment,t),i=!1},d:function(n){t[128](null),lf(e,n)}}}function iw(t){var e,n,r,i,o,a=t[39]&&rw(t);return{c:function(){e=el("div"),a&&a.c(),sl(e,"slot","main"),sl(e,"style",n="cursor:"+t[35])},m:function(n,u){Qs(n,e,u),a&&a.m(e,null),t[131](e),r=!0,i||(o=[al(e,"keydown",t[71]),Hs(Wh.call(null,e)),al(e,"dropfiles",(function(){Is(t[11]?t[79]:Pr)&&(t[11]?t[79]:Pr).apply(this,arguments)})),Hs(Bh.call(null,e)),al(e,"measure",t[121])],i=!0)},p:function(i,o){(t=i)[39]?a?(a.p(t,o),256&o[1]&&Yl(a,1)):((a=rw(t)).c(),Yl(a,1),a.m(e,null)):a&&(Gl(),Kl(a,1,1,(function(){a=null})),Xl()),(!r||16&o[1]&&n!==(n="cursor:"+t[35]))&&sl(e,"style",n)},i:function(t){r||(Yl(a),r=!0)},o:function(t){Kl(a),r=!1},d:function(n){n&&tl(e),a&&a.d(),t[131](null),i=!1,Ts(o)}}}function ow(t){var e,n;return e=new nw({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[33],onaddpreset:t[78],ongrabpreset:t[75],ondragpreset:t[76],ondroppreset:t[77],scrollElasticity:t[34]}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16&n[0]&&(r.locale=t[4]),8192&n[0]&&(r.presets=t[13]),1024&n[0]&&(r.enableSelectImage=t[10]),4&n[1]&&(r.willRenderPresetToolbar=t[33]),8&n[1]&&(r.scrollElasticity=t[34]),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function aw(t){var e,n,r,i,o,a,u=[cw,uw],c=[];function s(t,e){return t[36]?0:1}n=s(t),r=c[n]=u[n](t);var l=t[41]&&sw(t);return{c:function(){e=el("div"),r.c(),i=il(),l&&l.c(),o=ol(),sl(e,"class","PinturaControlPanels")},m:function(t,r){Qs(t,e,r),c[n].m(e,null),Qs(t,i,r),l&&l.m(t,r),Qs(t,o,r),a=!0},p:function(t,i){var a=n;(n=s(t))===a?c[n].p(t,i):(Gl(),Kl(c[a],1,1,(function(){c[a]=null})),Xl(),(r=c[n])?r.p(t,i):(r=c[n]=u[n](t)).c(),Yl(r,1),r.m(e,null)),t[41]?l?(l.p(t,i),1024&i[1]&&Yl(l,1)):((l=sw(t)).c(),Yl(l,1),l.m(o.parentNode,o)):l&&(Gl(),Kl(l,1,1,(function(){l=null})),Xl())},i:function(t){a||(Yl(r),Yl(l),a=!0)},o:function(t){Kl(r),Kl(l),a=!1},d:function(t){t&&tl(e),c[n].d(),t&&tl(i),l&&l.d(t),t&&tl(o)}}}function uw(t){var e,n,r;return n=new Tx({props:{locale:t[4],shape:t[24],onchange:t[72],controls:t[8],scrollElasticity:t[34]}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaControlPanel")},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,e){var r={};16&e[0]&&(r.locale=t[4]),16777216&e[0]&&(r.shape=t[24]),256&e[0]&&(r.controls=t[8]),8&e[1]&&(r.scrollElasticity=t[34]),n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function cw(t){var e,n,r;return n=new nw({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[33],onaddpreset:t[78],ongrabpreset:t[75],ondragpreset:t[76],ondroppreset:t[77],scrollElasticity:t[34]}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"class","PinturaControlPanel")},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,e){var r={};16&e[0]&&(r.locale=t[4]),8192&e[0]&&(r.presets=t[13]),1024&e[0]&&(r.enableSelectImage=t[10]),4&e[1]&&(r.willRenderPresetToolbar=t[33]),8&e[1]&&(r.scrollElasticity=t[34]),n.$set(r)},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function sw(t){var e,n;return e=new Qp({props:{class:"PinturaControlListScroller",elasticity:t[34],$$slots:{default:[hw]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8&n[1]&&(r.elasticity=t[34]),33554449&n[0]|1024&n[5]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function lw(t){var e,n;return e=new xp({props:{$$slots:{default:[fw]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16&n[0]|1536&n[5]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function fw(t){var e,n=(ni(t[164].icon)?t[164].icon(t[4]):t[164].icon)+"";return{c:function(){e=nl("g")},m:function(t,r){Qs(t,e,r),e.innerHTML=n},p:function(t,r){16&r[0]|512&r[5]&&n!==(n=(ni(t[164].icon)?t[164].icon(t[4]):t[164].icon)+"")&&(e.innerHTML=n)},d:function(t){t&&tl(e)}}}function dw(t){var e,n,r,i,o,a=(ni(t[164].label)?t[164].label(t[4]):t[164].label)+"",u=t[164].icon&&lw(t);return{c:function(){e=el("div"),u&&u.c(),n=il(),r=el("span"),i=rl(a),sl(e,"slot","option")},m:function(t,a){Qs(t,e,a),u&&u.m(e,null),Ys(e,n),Ys(e,r),Ys(r,i),o=!0},p:function(t,r){t[164].icon?u?(u.p(t,r),512&r[5]&&Yl(u,1)):((u=lw(t)).c(),Yl(u,1),u.m(e,n)):u&&(Gl(),Kl(u,1,1,(function(){u=null})),Xl()),(!o||16&r[0]|512&r[5])&&a!==(a=(ni(t[164].label)?t[164].label(t[4]):t[164].label)+"")&&fl(i,a)},i:function(t){o||(Yl(u),o=!0)},o:function(t){Kl(u),o=!1},d:function(t){t&&tl(e),u&&u.d()}}}function hw(t){var e,n;return e=new dm({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[25],selectedIndex:t[25].findIndex(t[122]),onchange:t[65],$$slots:{option:[dw,function(t){return{164:t.option}},function(t){return[0,0,0,0,0,t.option?512:0]}]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};16&n[0]&&(r.locale=t[4]),33554432&n[0]&&(r.options=t[25]),33554433&n[0]&&(r.selectedIndex=t[25].findIndex(t[122])),16&n[0]|1536&n[5]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function pw(t){var e,n,r,i,o=[aw,ow],a=[];function u(t,e){return t[40]?0:t[36]?1:-1}return~(n=u(t))&&(r=a[n]=o[n](t)),{c:function(){e=el("div"),r&&r.c(),sl(e,"slot","footer"),sl(e,"style",t[31])},m:function(t,r){Qs(t,e,r),~n&&a[n].m(e,null),i=!0},p:function(t,c){var s=n;(n=u(t))===s?~n&&a[n].p(t,c):(r&&(Gl(),Kl(a[s],1,1,(function(){a[s]=null})),Xl()),~n?((r=a[n])?r.p(t,c):(r=a[n]=o[n](t)).c(),Yl(r,1),r.m(e,null)):r=null),(!i||1&c[1])&&sl(e,"style",t[31])},i:function(t){i||(Yl(r),i=!0)},o:function(t){Kl(r),i=!1},d:function(t){t&&tl(e),~n&&a[n].d()}}}function vw(t){var e,n;return(e=new kb({props:{$$slots:{footer:[pw],main:[iw]},$$scope:{ctx:t}}})).$on("measure",t[132]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};2146435025&n[0]|65535&n[1]|1024&n[5]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function mw(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P,R,A,L,O,z,D,F,j,B,N,V,H,W,U,Z,q,G,X,Y,K,J,Q,tt,et=Ss,nt=function(){return et(),et=Rs(ft,(function(t){return n(26,P=t)})),ft},rt=Ss,it=function(){return rt(),rt=Rs(gt,(function(t){return n(27,A=t)})),gt},ot=Ss,at=function(){return ot(),ot=Rs(fe,(function(t){return n(29,W=t)})),fe},ut=Ss,ct=function(){return ut(),ut=Rs(ht,(function(t){return n(119,X=t)})),ht},st=Ss,lt=function(){return st(),st=Rs(dt,(function(t){return n(45,Q=t)})),dt};t.$$.on_destroy.push((function(){return et()})),t.$$.on_destroy.push((function(){return rt()})),t.$$.on_destroy.push((function(){return ot()})),t.$$.on_destroy.push((function(){return ut()})),t.$$.on_destroy.push((function(){return st()}));var ft=e.isActive;nt();var dt=e.isActiveFraction;lt();var ht=e.isVisible;ct();var pt=e.stores,vt=e.locale,mt=void 0===vt?{}:vt,gt=e.shapes;it();var yt=e.toolbar,bt=void 0===yt?[]:yt,$t=e.toolShapes,xt=void 0===$t?{}:$t,wt=e.toolActive,kt=void 0===wt?void 0:wt,St=e.toolSelectRadius,Ct=void 0===St?void 0:St,_t=e.toolRetainStyles,Mt=void 0!==_t&&_t,Et=e.textInputMode,Tt=void 0===Et?void 0:Et,It=e.shapeControls,Pt=void 0===It?{}:It,Rt=e.enableButtonFlipVertical,At=void 0!==Rt&&Rt,Lt=e.enablePresetSelectImage,Ot=void 0===Lt||Lt,zt=e.enablePresetDropImage,Dt=void 0===zt||zt,Ft=e.enableSelectToolToAddShape,jt=void 0!==Ft&&Ft,Bt=e.enableAutoSelectMoveTool,Nt=void 0===Bt?["line","arrow","path","rectangle","ellipse","text"]:Bt,Vt=e.enableTapToAddText,Ht=void 0!==Vt&&Vt,Wt=e.enableMoveTool,Ut=void 0!==Wt&&Wt,Zt=e.enableViewTool,qt=void 0!==Zt&&Zt,Gt=e.enableToolShareStyles,Xt=void 0===Gt||Gt,Yt=e.willRenderPresetToolbar,Kt=void 0===Yt?void 0:Yt,Jt=e.willStartInteraction,Qt=void 0===Jt?void 0:Jt,te=e.shapePresets,ee=void 0===te?[]:te,ne=e.utilKey,re=e.mapScreenPointToImagePoint,ie=e.mapImagePointToScreenPoint,oe=e.imageRotation,ae=void 0===oe?0:oe,ue=e.imageFlipX,ce=void 0!==ue&&ue,se=e.imageFlipY,le=void 0!==se&&se,fe=e.parentRect;at();var de=e.hooks,he=void 0===de?{}:de,pe=El("isAnimated");Ls(t,pe,(function(t){return n(112,R=t)}));var ve=El("elasticityMultiplier");Ls(t,ve,(function(t){return n(115,z=t)}));var me,ge=El("ui");Ls(t,ge,(function(t){return n(141,q=t)}));var ye=pt,be=ye.env,$e=ye.history,xe=ye.rootRect,we=ye.rootColorSecondary,ke=ye.enablePanInput,Se=ye.enablePanInputStatus,Ce=ye.enableZoomInput,_e=ye.stageRect,Me=ye.utilRectPadded,Ee=ye.scrollElasticity,Te=ye.imageOverlayMarkup,Ie=ye.imagePreviewModifiers,Pe=ye.imageCropRect,Re=ye.shapePreprocessor,Ae=ye.stageScalar,Le=ye.imageSelectionRect,Oe=ye.imageSelectionZoomCurrent,ze=ye.imageSelectionPan,De=ye.allowPan,Fe=ye.allowZoom,je=ye.allowZoomControls;Ls(t,be,(function(t){return n(113,L=t)})),Ls(t,xe,(function(t){return n(43,K=t)})),Ls(t,we,(function(t){return n(46,tt=t)})),Ls(t,Se,(function(t){return n(28,V=t)})),Ls(t,_e,(function(t){return n(116,D=t)})),Ls(t,Me,(function(t){return n(30,G=t)})),Ls(t,Te,(function(t){return n(44,J=t)})),Ls(t,Ie,(function(t){return n(120,Y=t)})),Ls(t,Pe,(function(t){return n(140,U=t)})),Ls(t,Re,(function(t){return n(118,Z=t)})),Ls(t,Ae,(function(t){return n(138,B=t)})),Ls(t,Le,(function(t){return n(139,N=t)})),Ls(t,Oe,(function(t){return n(42,F=t)})),Ls(t,ze,(function(t){return n(137,j=t)}));var Be=El("keysPressed");Ls(t,Be,(function(t){return n(117,H=t)}));var Ne,Ve,He,We,Ue=function(t){var e,n,r=me[t],i=r[0],o="relative"===r[1].position,a=o?"0%":0,u=o?"0%":0;sc(i)||ac(i)?(n=o?"20%":.2*W.width,(e=Qu(i)).x=a,e.y=u,Yc(e,{width:n,height:n},W)):lc(i)?(n=o?"10%":.1*W.width,(e=Qu(i)).x=a,e.y=u,Yc(e,{rx:n,ry:n},W)):fc(i)&&(n=o?"10%":.1*W.width,(e=Qu(i)).x1=a,e.y1=u,e.x2=a,e.y2=u),e&&Promise.resolve().then((function(){Je(Ye(e,void 0,n))}))},Ze=function(t){return re(W$(t,K))},qe={},Ge=function(t){if(dc(t)&&su(t,"pathClose")){var e=[].concat(t.strokeColor);e[3]=1,Ne.updateMarkupShape(t,{pathClose:!1,strokeColor:e},!1),Ne.removeMarkupShapeProps(t,["backgroundColor"],!1),Ne.confirmMarkupItemDraft(),Ne.selectShape(t)}};var Xe,Ye=function(t,e,n){var r=!1;e||(r=!0,e=b?re(Oo(D)):Oo(U)),e.x-=W.x||0,e.y-=W.y||0,(ce||le)&&(t.flipX=ce,t.flipY=le);var i=Ne.getShapesNearPosition(e);if(r&&i.length){var o=.1*Math.min(U.width,U.height);e.x+=Math.round(-o+Math.random()*o*2),e.y+=Math.round(-o+Math.random()*o*2)}if(0!==ae&&(t.rotation=ce&&le?-ae:ce||le?ae:-ae),su(t,"width")&&su(t,"height")){var a=Xc(t,["width","height"],W),u=a.width,c=a.height;Yc(t,{x:e.x-.5*u,y:e.y-.5*c},W)}else if(lc(t))Yc(t,{x:e.x,y:e.y},W);else if(fc(t)){var s=Xc(t,["x1","y1","x2","y2"],W),l=s.x1,f=s.y1,d=s.x2,h=s.y2,p=ro(Bi(l,f),Bi(d,h)),v=ei(n)?Nc(n,W.width):p;Yc(t,{x1:e.x-v,y1:e.y+v,x2:e.x+v,y2:e.y-v},W)}else if(dc(t)){var m=Xc(t,["points"],W).points,g=oo(m);Yc(t,{points:m.map((function(t){return{x:t.x+e.x-g.x,y:t.y+e.y-g.y}}))},W)}return t},Ke=function(t,e){var n=Ye(rc(t,U),e);return t.shape&&(su(t.shape,"x")&&(n.x=t.shape.x),su(t.shape,"y")&&(n.y=t.shape.y)),Je(n)},Je=function(t){var e=he.beforeAddShape;if((void 0===e?function(){return!0}:e)(t))return Ne.addShape(t),Ne.selectShape(t),$e.write(),C("addshape",t),t},Qe=!1,tn=function(){$e.write()},en=El("redrawTrigger");Ls(t,en,(function(t){return n(114,O=t)}));var nn=_h(R?20:0);Ls(t,nn,(function(t){return n(111,I=t)}));return t.$$set=function(t){"isActive"in t&&nt(n(1,ft=t.isActive)),"isActiveFraction"in t&&lt(n(2,dt=t.isActiveFraction)),"isVisible"in t&&ct(n(3,ht=t.isVisible)),"stores"in t&&n(84,pt=t.stores),"locale"in t&&n(4,mt=t.locale),"shapes"in t&&it(n(5,gt=t.shapes)),"toolbar"in t&&n(85,bt=t.toolbar),"toolShapes"in t&&n(86,xt=t.toolShapes),"toolActive"in t&&n(0,kt=t.toolActive),"toolSelectRadius"in t&&n(6,Ct=t.toolSelectRadius),"toolRetainStyles"in t&&n(87,Mt=t.toolRetainStyles),"textInputMode"in t&&n(7,Tt=t.textInputMode),"shapeControls"in t&&n(8,Pt=t.shapeControls),"enableButtonFlipVertical"in t&&n(9,At=t.enableButtonFlipVertical),"enablePresetSelectImage"in t&&n(10,Ot=t.enablePresetSelectImage),"enablePresetDropImage"in t&&n(11,Dt=t.enablePresetDropImage),"enableSelectToolToAddShape"in t&&n(88,jt=t.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in t&&n(89,Nt=t.enableAutoSelectMoveTool),"enableTapToAddText"in t&&n(12,Ht=t.enableTapToAddText),"enableMoveTool"in t&&n(90,Ut=t.enableMoveTool),"enableViewTool"in t&&n(91,qt=t.enableViewTool),"enableToolShareStyles"in t&&n(92,Xt=t.enableToolShareStyles),"willRenderPresetToolbar"in t&&n(93,Kt=t.willRenderPresetToolbar),"willStartInteraction"in t&&n(94,Qt=t.willStartInteraction),"shapePresets"in t&&n(13,ee=t.shapePresets),"utilKey"in t&&n(14,ne=t.utilKey),"mapScreenPointToImagePoint"in t&&n(15,re=t.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in t&&n(16,ie=t.mapImagePointToScreenPoint),"imageRotation"in t&&n(17,ae=t.imageRotation),"imageFlipX"in t&&n(18,ce=t.imageFlipX),"imageFlipY"in t&&n(19,le=t.imageFlipY),"parentRect"in t&&at(n(20,fe=t.parentRect)),"hooks"in t&&n(95,he=t.hooks)},t.$$.update=function(){var e,F,j,B,N,U,Z,K;if(16777216&t.$$.dirty[2]|8&t.$$.dirty[3]&&(me&&xt===me||n(96,me=xt)),67108864&t.$$.dirty[0]&&De.set(P),67108864&t.$$.dirty[0]&&Fe.set(P),67108864&t.$$.dirty[0]&&je.set(P),8192&t.$$.dirty[0]|813694976&t.$$.dirty[2]|1&t.$$.dirty[3]&&n(25,r=function(t,e){var n=e.willRenderPresetToolbar,r=e.shapePresets,i=e.enableViewTool,o=e.enableMoveTool,a=0!==r.length||n?t:t.filter((function(t){return"preset"!==t[0]}));return a=o?a:a.filter((function(t){return"move"!==t[0]})),i?a:a.filter((function(t){return"view"!==t[0]}))}(bt,{willRenderPresetToolbar:Kt,shapePresets:ee,enableMoveTool:Ut,enableViewTool:qt})),256&t.$$.dirty[0]&&n(108,i=Object.keys(Pt).length),33554432&t.$$.dirty[0]&&n(41,o=r.length>1),33554432&t.$$.dirty[0]&&n(109,a=!!r.length),33554433&t.$$.dirty[0]|65536&t.$$.dirty[3]&&a&&void 0===kt&&n(0,kt=r[0][0]),1&t.$$.dirty[0]&&n(110,u=void 0!==kt),229376&t.$$.dirty[3]&&n(40,c=(!u||a)&&i),4194304&t.$$.dirty[0]&&n(23,C=Xe&&(e=Xe,function(t,n){e.dispatchEvent(Km(t,n))})),75497473&t.$$.dirty[0]&&P&&C&&C("selectcontrol",kt),67125248&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&(P?Vs(Ie,Y[ne]={maskMarkupOpacity:.85},Y):delete Y[ne]),2097153&t.$$.dirty[0]&&kt&&Ne){var J=Ne.getMarkupItemDraft();J&&Ge(J)}1&t.$$.dirty[0]&&kt&&Ne&&"move"!==kt&&Ne.blurShapes(),67108864&t.$$.dirty[0]|67108864&t.$$.dirty[3]&&n(39,s=P&&X),1073741824&t.$$.dirty[0]|8388608&t.$$.dirty[3]&&n(38,l=G&&Bi(D.x-G.x,D.y-G.y)),256&t.$$.dirty[0]&&n(107,f=Object.keys(Pt)),201326592&t.$$.dirty[0]&&n(99,d=P&&A.filter(vc)[0]),201326592&t.$$.dirty[0]&&n(102,h=P&&A.find((function(t){return mc(t)}))),67108865&t.$$.dirty[0]|8&t.$$.dirty[3]&&n(105,p=P&&me[kt]?jc(Qu(Object.assign({},me[kt][0],q[ne]?q[ne][kt]:{}))):{}),8&t.$$.dirty[3]&&me&&n(97,qe={}),1&t.$$.dirty[0]|1073741824&t.$$.dirty[2]|20496&t.$$.dirty[3]&&n(106,v=p&&Object.keys(p).reduce((function(t,e){var n="disableStyle"===e,r=f.find((function(t){return t.split("_").includes(e)}));if(!n&&!r)return t;if(void 0===p[e])return t;if(!0===p.disableStyle)return t;if(p.disableStyle&&p.disableStyle.includes(e))return t;var i=Xt?qe:qe[kt]||{};return t[e]=su(i,e)?i[e]:p[e],t}),{})),16385&t.$$.dirty[0]|33554432&t.$$.dirty[2]|8192&t.$$.dirty[3]&&(Mt?(j=kt,B=v,Z=q[F=ne],K=Z?Z[j]:{},ge.set(Object.assign({},q,((U={})[F]=Object.assign({},Z,((N={})[j]=Object.assign({},K,B),N)),U)))):function(t){var e;ge.set(((e={})[t]={},e))}(ne)),67108864&t.$$.dirty[0]|8256&t.$$.dirty[3]&&n(24,m=P?d||v:void 0),16777216&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&m&&m.lineEnd,12288&t.$$.dirty[3]&&n(37,g=p&&uu(p.eraseRadius)?(v||p).eraseRadius:void 0),9217&t.$$.dirty[0]|1&t.$$.dirty[3]&&n(36,y="preset"===kt&&(ee.length>0||Ot||Kt)),536870912&t.$$.dirty[0]&&(b=!su(W,"x")&&!su(W,"y")),67108864&t.$$.dirty[0]|16777216&t.$$.dirty[3]&&n(103,$=P&&H&&32===H[0]),67108865&t.$$.dirty[0]&&n(104,x=P&&"view"===kt),3072&t.$$.dirty[3]&&n(101,w=x||$),512&t.$$.dirty[3]&&n(100,k=!!h),67108864&t.$$.dirty[0]|384&t.$$.dirty[3]&&ke.set(!P||w&&!k),67108864&t.$$.dirty[0]|128&t.$$.dirty[3]&&Ce.set(!P||!k),268435457&t.$$.dirty[0]|96&t.$$.dirty[3]&&n(35,S=function(t,e,n,r,i){if(n)return r?"grabbing":"grab";if(!t)return"move"===i?"default":"crosshair";var o=t||e;return vc(o)?mc(o)?"modal"===Tt?"default":"text":Ic(o)?"move":"default":"default"}(We,d,V,false,kt)),4194304&t.$$.dirty[3]&&n(34,_=z*Ee),3145729&t.$$.dirty[3]&&n(33,M=O&&Kt?function(t){return vg((function(){return Kt(t,Ke,Object.assign({},L),(function(){return en.set({})}))}))}:xi),4&t.$$.dirty[3]&&n(32,E=Object.keys(he).reduce((function(t,e){return"beforeAddShape"===e||void 0===he[e]||(t[e]=he[e]),t}),{})),67108864&t.$$.dirty[0]&&function(t){gt&&gt.set(A.map((function(e){return e._prerender=!!t&&mc(e),e})))}(P),67108864&t.$$.dirty[0]|524288&t.$$.dirty[3]&&R&&nn.set(P?0:20),262144&t.$$.dirty[3]&&n(31,T=I?"transform: translateY("+I+"px)":void 0)},[kt,ft,dt,ht,mt,gt,Ct,Tt,Pt,At,Ot,Dt,Ht,ee,ne,re,ie,ae,ce,le,fe,Ne,Xe,C,m,r,P,A,V,W,G,T,E,M,_,S,y,g,l,s,c,o,F,K,J,Q,tt,pe,ve,ge,be,xe,we,Se,_e,Me,Te,Ie,Pe,Re,Ae,Le,Oe,ze,Be,function(t,e){var r=t.value;n(0,kt=r),(jt||/enter/i.test(e.key))&&Ue(r)},function(t){if("eraser"===kt)Ve=Ne.eraseShape();else if(kt&&me[kt]){var e=me[kt],n=e[0],r=e[1];Ve=Ne.createShape(Object.assign({},n,v),r)}else Ve=void 0;return!!Ve&&(Ve.start(t),!0)},function(t){return!!Ve&&(Ve.update(t),!0)},function(t){return!!Ve&&(Ve.release(t),!0)},function(t){return!!Ve&&(Ve.cancel(t),Ve=void 0,!0)},function(t){if(!Ve)return!1;Ve.end(t),Ve=void 0;var e=Ne.getMarkupItemDraft(),r=Ut&&(!0===Nt||Array.isArray(Nt)&&Nt.includes(kt));return e&&!e.isEditing||!r||n(0,kt="move"),!0},function(t){var e=t.key,n=Ne.getMarkupItemDraft();/escape/i.test(e)&&n&&(t.preventDefault(),t.stopPropagation(),Ne.discardMarkupItemDraft(),Ve=void 0),/enter/i.test(e)&&n&&(t.preventDefault(),t.stopPropagation(),Ge(n),Ve=void 0)},function(t){Object.keys(t).forEach((function(e){Xt?n(97,qe[e]=t[e],qe):(qe[kt]||n(97,qe[kt]={},qe),n(97,qe[kt][e]=t[e],qe))})),C("selectstyle",t),d&&(Ne.updateMarkupShape(d,t),clearTimeout(He),He=setTimeout((function(){tn()}),200))},function(t){return C("markuptap",t)},function(t){return n(98,We=t)},function(){Qe=!1},function(t,e){if(!Qe){var n=he.beforeAddShape,r=void 0===n?function(){return!0}:n,i=Ze(e),o=Ne.getMarkupItemDraft(),a=qo(U,{x:i.x+(W.x||0),y:i.y+(W.y||0)});if(o&&!a&&Ne.discardMarkupItemDraft(),a){if(!o){var u=rc(t,U),c=Ye(u,i);return r(c)?(wc(c),void Ne.addShape(c)):(Qe=!0,void e.preventDefault())}sc(o)&&(i.x-=.5*o.width,i.y-=.5*o.height),t.shape&&(su(t.shape,"x")&&(i.x=t.shape.x),su(t.shape,"y")&&(i.y=t.shape.y)),Ne.updateMarkupShape(o,i)}}},function(t,e){if(!Qe){var n=Ze(e);if(qo(U,{x:n.x+(W.x||0),y:n.y+(W.y||0)})){var r=Ne.confirmMarkupItemDraft();Ne.selectShape(r),C("addshape",r),$e.write()}else Ne.discardMarkupItemDraft()}},function(t){return Ke(t)},function(t){return e=t.detail.resources,n=Ze(t.detail.event),e.forEach((function(t){return Ke(t,n)}));var e,n},function(t){if(!Qt)return!0;var e=rectClone(N);return rectScale(e,1/B),rectTranslate(e,j),rectScale(e,F),Qt(t,Object.assign({},e,{x:e.x+D.x,y:e.y+D.y}))},tn,en,nn,pt,bt,xt,Mt,jt,Nt,Ut,qt,Xt,Kt,Qt,he,me,qe,We,d,k,w,h,$,x,p,v,f,i,a,u,I,R,L,O,z,D,H,Z,X,Y,function(e){Tl.call(this,t,e)},function(t){return t[0]===kt},function(t){C("addshape",t),tn()},function(t){C("selectshape",t)},function(t){C("tapshape",t)},function(t){C("updateshape",t),tn()},function(t){C("removeshape",t),tn()},function(t){Pl[t?"unshift":"push"]((function(){n(21,Ne=t)}))},function(t){A=t,gt.set(A)},function(t){J=t,Te.set(J)},function(t){Pl[t?"unshift":"push"]((function(){n(22,Xe=t)}))},function(e){Tl.call(this,t,e)}]}var gw=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,mw,vw,Ps,{isActive:1,isActiveFraction:2,isVisible:3,stores:84,locale:4,shapes:5,toolbar:85,toolShapes:86,toolActive:0,toolSelectRadius:6,toolRetainStyles:87,textInputMode:7,shapeControls:8,enableButtonFlipVertical:9,enablePresetSelectImage:10,enablePresetDropImage:11,enableSelectToolToAddShape:88,enableAutoSelectMoveTool:89,enableTapToAddText:12,enableMoveTool:90,enableViewTool:91,enableToolShareStyles:92,willRenderPresetToolbar:93,willStartInteraction:94,shapePresets:13,utilKey:14,mapScreenPointToImagePoint:15,mapImagePointToScreenPoint:16,imageRotation:17,imageFlipX:18,imageFlipY:19,parentRect:20,hooks:95},null,[-1,-1,-1,-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"isActive",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"isVisible",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({isVisible:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[84]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"shapes",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({shapes:t}),Hl()}},{key:"toolbar",get:function(){return this.$$.ctx[85]},set:function(t){this.$$set({toolbar:t}),Hl()}},{key:"toolShapes",get:function(){return this.$$.ctx[86]},set:function(t){this.$$set({toolShapes:t}),Hl()}},{key:"toolActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({toolActive:t}),Hl()}},{key:"toolSelectRadius",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({toolSelectRadius:t}),Hl()}},{key:"toolRetainStyles",get:function(){return this.$$.ctx[87]},set:function(t){this.$$set({toolRetainStyles:t}),Hl()}},{key:"textInputMode",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({textInputMode:t}),Hl()}},{key:"shapeControls",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({shapeControls:t}),Hl()}},{key:"enableButtonFlipVertical",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({enableButtonFlipVertical:t}),Hl()}},{key:"enablePresetSelectImage",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({enablePresetSelectImage:t}),Hl()}},{key:"enablePresetDropImage",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({enablePresetDropImage:t}),Hl()}},{key:"enableSelectToolToAddShape",get:function(){return this.$$.ctx[88]},set:function(t){this.$$set({enableSelectToolToAddShape:t}),Hl()}},{key:"enableAutoSelectMoveTool",get:function(){return this.$$.ctx[89]},set:function(t){this.$$set({enableAutoSelectMoveTool:t}),Hl()}},{key:"enableTapToAddText",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({enableTapToAddText:t}),Hl()}},{key:"enableMoveTool",get:function(){return this.$$.ctx[90]},set:function(t){this.$$set({enableMoveTool:t}),Hl()}},{key:"enableViewTool",get:function(){return this.$$.ctx[91]},set:function(t){this.$$set({enableViewTool:t}),Hl()}},{key:"enableToolShareStyles",get:function(){return this.$$.ctx[92]},set:function(t){this.$$set({enableToolShareStyles:t}),Hl()}},{key:"willRenderPresetToolbar",get:function(){return this.$$.ctx[93]},set:function(t){this.$$set({willRenderPresetToolbar:t}),Hl()}},{key:"willStartInteraction",get:function(){return this.$$.ctx[94]},set:function(t){this.$$set({willStartInteraction:t}),Hl()}},{key:"shapePresets",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({shapePresets:t}),Hl()}},{key:"utilKey",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({utilKey:t}),Hl()}},{key:"mapScreenPointToImagePoint",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({mapScreenPointToImagePoint:t}),Hl()}},{key:"mapImagePointToScreenPoint",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({mapImagePointToScreenPoint:t}),Hl()}},{key:"imageRotation",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({imageRotation:t}),Hl()}},{key:"imageFlipX",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({imageFlipX:t}),Hl()}},{key:"imageFlipY",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({imageFlipY:t}),Hl()}},{key:"parentRect",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({parentRect:t}),Hl()}},{key:"hooks",get:function(){return this.$$.ctx[95]},set:function(t){this.$$set({hooks:t}),Hl()}}]),e}(df),yw=function(t,e,n,r,i,o,a,u,c){var s=Vi(t),l=.5*n.width,f=.5*n.height,d=.5*e.width,h=.5*e.height,p=i.x+r.x,v=i.y+r.y;u&&(s.x=n.width-s.x),c&&(s.y=n.height-s.y);var m=Math.cos(o),g=Math.sin(o);s.x-=l,s.y-=f;var y=s.x*m-s.y*g,b=s.x*g+s.y*m;s.x=l+y,s.y=f+b,s.x*=a,s.y*=a,s.x+=d,s.y+=h,s.x+=p,s.y+=v,s.x-=l*a,s.y-=f*a;var $=(i.x-p)*a,x=(i.y-v)*a,w=$*m-x*g,k=$*g+x*m;return s.x+=w,s.y+=k,s},bw=function(t,e,n,r,i,o,a,u,c){var s=Vi(t),l=yo(n),f=yo(e),d=Bi(i.x+r.x,i.y+r.y),h=Math.cos(o),p=Math.sin(o);s.x-=f.x,s.y-=f.y;var v=(i.x-d.x)*a,m=(i.y-d.y)*a,g=v*h-m*p,y=v*p+m*h;s.x-=g,s.y-=y,s.x-=d.x,s.y-=d.y,s.x/=a,s.y/=a;var b=s.x*h+s.y*p,$=s.x*p-s.y*h;return s.x=b,s.y=-$,s.x+=l.x,s.y+=l.y,u&&(s.x=n.width-s.x),c&&(s.y=n.height-s.y),s};function $w(t){var e,n,r;function i(e){t[53](e)}var o={utilKey:"annotate",stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[38],mapImagePointToScreenPoint:t[37],imageRotation:t[39],imageFlipX:t[36],imageFlipY:t[35],shapes:t[41],toolbar:t[14]||t[6],toolShapes:t[15]||t[7],toolRetainStyles:t[8],enableSelectToolToAddShape:t[24],enableTapToAddText:t[25],enableViewTool:t[23],enableMoveTool:t[27],enableAutoSelectMoveTool:t[26],enableToolShareStyles:t[12],shapeControls:t[16]||t[9],shapePresets:t[20],enableButtonFlipVertical:t[17],parentRect:t[42],enablePresetDropImage:t[19],enablePresetSelectImage:t[18],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[22],willRenderPresetToolbar:t[21]||t[13],hooks:{willRenderShapeControls:t[28],willRenderShapeTextControls:t[29],beforeAddShape:t[30],beforeRemoveShape:t[31],beforeDeselectShape:t[32],beforeSelectShape:t[33],beforeUpdateShape:t[34]}};return void 0!==t[0]&&(o.toolActive=t[0]),e=new gw({props:o}),Pl.push((function(){return uf(e,"toolActive",i)})),e.$on("measure",t[54]),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i={};16&r[0]&&(i.stores=t[4]),32&r[0]&&(i.locale=t[5]),2&r[0]&&(i.isActive=t[1]),4&r[0]&&(i.isActiveFraction=t[2]),8&r[0]&&(i.isVisible=t[3]),128&r[1]&&(i.mapScreenPointToImagePoint=t[38]),64&r[1]&&(i.mapImagePointToScreenPoint=t[37]),256&r[1]&&(i.imageRotation=t[39]),32&r[1]&&(i.imageFlipX=t[36]),16&r[1]&&(i.imageFlipY=t[35]),16448&r[0]&&(i.toolbar=t[14]||t[6]),32896&r[0]&&(i.toolShapes=t[15]||t[7]),256&r[0]&&(i.toolRetainStyles=t[8]),16777216&r[0]&&(i.enableSelectToolToAddShape=t[24]),33554432&r[0]&&(i.enableTapToAddText=t[25]),8388608&r[0]&&(i.enableViewTool=t[23]),134217728&r[0]&&(i.enableMoveTool=t[27]),67108864&r[0]&&(i.enableAutoSelectMoveTool=t[26]),4096&r[0]&&(i.enableToolShareStyles=t[12]),66048&r[0]&&(i.shapeControls=t[16]||t[9]),1048576&r[0]&&(i.shapePresets=t[20]),131072&r[0]&&(i.enableButtonFlipVertical=t[17]),524288&r[0]&&(i.enablePresetDropImage=t[19]),262144&r[0]&&(i.enablePresetSelectImage=t[18]),1024&r[0]&&(i.toolSelectRadius=t[10]),2048&r[0]&&(i.textInputMode=t[11]),4194304&r[0]&&(i.willStartInteraction=t[22]),2105344&r[0]&&(i.willRenderPresetToolbar=t[21]||t[13]),1879048192&r[0]|15&r[1]&&(i.hooks={willRenderShapeControls:t[28],willRenderShapeTextControls:t[29],beforeAddShape:t[30],beforeRemoveShape:t[31],beforeDeselectShape:t[32],beforeSelectShape:t[33],beforeUpdateShape:t[34]}),!n&&1&r[0]&&(n=!0,i.toolActive=t[0],jl((function(){return n=!1}))),e.$set(i)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function xw(t,e,n){var r,i,o,a,u,c,s,l,f,d=e.isActive,h=e.isActiveFraction,p=e.isVisible,v=e.stores,m=e.locale,g=void 0===m?{}:m,y=e.markupEditorToolbar,b=void 0===y?void 0:y,$=e.markupEditorToolStyles,x=void 0===$?void 0:$,w=e.markupEditorToolRetainStyles,k=void 0===w?void 0:w,S=e.markupEditorShapeStyleControls,C=void 0===S?void 0:S,_=e.markupEditorToolSelectRadius,M=void 0===_?void 0:_,E=e.markupEditorTextInputMode,T=void 0===E?void 0:E,I=e.markupEditorToolShareStyles,P=void 0===I?void 0:I,R=e.willRenderShapePresetToolbar,A=void 0===R?void 0:R,L=e.annotateTools,O=void 0===L?void 0:L,z=e.annotateToolShapes,D=void 0===z?void 0:z,F=e.annotateShapeControls,j=void 0===F?void 0:F,B=e.annotateActiveTool,N=void 0===B?void 0:B,V=e.annotateEnableButtonFlipVertical,H=void 0!==V&&V,W=e.annotateEnableSelectImagePreset,U=void 0!==W&&W,Z=e.annotateEnableDropImagePreset,q=void 0===Z||Z,G=e.annotatePresets,X=void 0===G?[]:G,Y=e.annotateWillRenderShapePresetToolbar,K=void 0===Y?void 0:Y,J=e.markupEditorWillStartInteraction,Q=void 0===J?void 0:J,tt=e.enableViewTool,et=void 0===tt?void 0:tt,nt=e.enableSelectToolToAddShape,rt=void 0===nt?void 0:nt,it=e.enableTapToAddText,ot=void 0===it?void 0:it,at=e.enableAutoSelectMoveTool,ut=void 0===at?void 0:at,ct=e.enableMoveTool,st=void 0===ct?void 0:ct,lt=e.willRenderShapeControls,ft=void 0===lt?void 0:lt,dt=e.willRenderShapeTextControls,ht=void 0===dt?void 0:dt,pt=e.beforeAddShape,vt=void 0===pt?void 0:pt,mt=e.beforeRemoveShape,gt=void 0===mt?void 0:mt,yt=e.beforeDeselectShape,bt=void 0===yt?void 0:yt,$t=e.beforeSelectShape,xt=void 0===$t?void 0:$t,wt=e.beforeUpdateShape,kt=void 0===wt?void 0:wt,St=v,Ct=St.rootRect,_t=St.imageAnnotation,Mt=St.imageSize,Et=St.imageRotation,Tt=St.imageFlipX,It=St.imageFlipY,Pt=St.imageTransforms,Rt=St.imageTransformsInterpolated;return Ls(t,Ct,(function(t){return n(52,l=t)})),Ls(t,Mt,(function(t){return n(51,s=t)})),Ls(t,Et,(function(t){return n(39,f=t)})),Ls(t,Tt,(function(t){return n(36,a=t)})),Ls(t,It,(function(t){return n(35,o=t)})),Ls(t,Pt,(function(t){return n(50,c=t)})),Ls(t,Rt,(function(t){return n(49,u=t)})),t.$$set=function(t){"isActive"in t&&n(1,d=t.isActive),"isActiveFraction"in t&&n(2,h=t.isActiveFraction),"isVisible"in t&&n(3,p=t.isVisible),"stores"in t&&n(4,v=t.stores),"locale"in t&&n(5,g=t.locale),"markupEditorToolbar"in t&&n(6,b=t.markupEditorToolbar),"markupEditorToolStyles"in t&&n(7,x=t.markupEditorToolStyles),"markupEditorToolRetainStyles"in t&&n(8,k=t.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in t&&n(9,C=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&n(10,M=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&n(11,T=t.markupEditorTextInputMode),"markupEditorToolShareStyles"in t&&n(12,P=t.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in t&&n(13,A=t.willRenderShapePresetToolbar),"annotateTools"in t&&n(14,O=t.annotateTools),"annotateToolShapes"in t&&n(15,D=t.annotateToolShapes),"annotateShapeControls"in t&&n(16,j=t.annotateShapeControls),"annotateActiveTool"in t&&n(0,N=t.annotateActiveTool),"annotateEnableButtonFlipVertical"in t&&n(17,H=t.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in t&&n(18,U=t.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in t&&n(19,q=t.annotateEnableDropImagePreset),"annotatePresets"in t&&n(20,X=t.annotatePresets),"annotateWillRenderShapePresetToolbar"in t&&n(21,K=t.annotateWillRenderShapePresetToolbar),"markupEditorWillStartInteraction"in t&&n(22,Q=t.markupEditorWillStartInteraction),"enableViewTool"in t&&n(23,et=t.enableViewTool),"enableSelectToolToAddShape"in t&&n(24,rt=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&n(25,ot=t.enableTapToAddText),"enableAutoSelectMoveTool"in t&&n(26,ut=t.enableAutoSelectMoveTool),"enableMoveTool"in t&&n(27,st=t.enableMoveTool),"willRenderShapeControls"in t&&n(28,ft=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(29,ht=t.willRenderShapeTextControls),"beforeAddShape"in t&&n(30,vt=t.beforeAddShape),"beforeRemoveShape"in t&&n(31,gt=t.beforeRemoveShape),"beforeDeselectShape"in t&&n(32,bt=t.beforeDeselectShape),"beforeSelectShape"in t&&n(33,xt=t.beforeSelectShape),"beforeUpdateShape"in t&&n(34,kt=t.beforeUpdateShape)},t.$$.update=function(){3932208&t.$$.dirty[1]&&n(38,r=function(t){return bw(t,l,s,u.origin,u.translation,c.rotation.z,u.scale,a,o)}),3932208&t.$$.dirty[1]&&n(37,i=function(t){return yw(t,l,s,u.origin,u.translation,c.rotation.z,u.scale,a,o)})},[N,d,h,p,v,g,b,x,k,C,M,T,P,A,O,D,j,H,U,q,X,K,Q,et,rt,ot,ut,st,ft,ht,vt,gt,bt,xt,kt,o,a,i,r,f,Ct,_t,Mt,Et,Tt,It,Pt,Rt,"annotate",u,c,s,l,function(t){n(0,N=t)},function(e){Tl.call(this,t,e)}]}var ww={util:["annotate",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,xw,$w,Ps,{name:48,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,annotateTools:14,annotateToolShapes:15,annotateShapeControls:16,annotateActiveTool:0,annotateEnableButtonFlipVertical:17,annotateEnableSelectImagePreset:18,annotateEnableDropImagePreset:19,annotatePresets:20,annotateWillRenderShapePresetToolbar:21,markupEditorWillStartInteraction:22,enableViewTool:23,enableSelectToolToAddShape:24,enableTapToAddText:25,enableAutoSelectMoveTool:26,enableMoveTool:27,willRenderShapeControls:28,willRenderShapeTextControls:29,beforeAddShape:30,beforeRemoveShape:31,beforeDeselectShape:32,beforeSelectShape:33,beforeUpdateShape:34},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[48]}},{key:"isActive",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"isVisible",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({isVisible:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"markupEditorToolbar",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({markupEditorToolbar:t}),Hl()}},{key:"markupEditorToolStyles",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({markupEditorToolStyles:t}),Hl()}},{key:"markupEditorToolRetainStyles",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({markupEditorToolRetainStyles:t}),Hl()}},{key:"markupEditorShapeStyleControls",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({markupEditorShapeStyleControls:t}),Hl()}},{key:"markupEditorToolSelectRadius",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({markupEditorToolSelectRadius:t}),Hl()}},{key:"markupEditorTextInputMode",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({markupEditorTextInputMode:t}),Hl()}},{key:"markupEditorToolShareStyles",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({markupEditorToolShareStyles:t}),Hl()}},{key:"willRenderShapePresetToolbar",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({willRenderShapePresetToolbar:t}),Hl()}},{key:"annotateTools",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({annotateTools:t}),Hl()}},{key:"annotateToolShapes",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({annotateToolShapes:t}),Hl()}},{key:"annotateShapeControls",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({annotateShapeControls:t}),Hl()}},{key:"annotateActiveTool",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({annotateActiveTool:t}),Hl()}},{key:"annotateEnableButtonFlipVertical",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({annotateEnableButtonFlipVertical:t}),Hl()}},{key:"annotateEnableSelectImagePreset",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({annotateEnableSelectImagePreset:t}),Hl()}},{key:"annotateEnableDropImagePreset",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({annotateEnableDropImagePreset:t}),Hl()}},{key:"annotatePresets",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({annotatePresets:t}),Hl()}},{key:"annotateWillRenderShapePresetToolbar",get:function(){return this.$$.ctx[21]},set:function(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),Hl()}},{key:"markupEditorWillStartInteraction",get:function(){return this.$$.ctx[22]},set:function(t){this.$$set({markupEditorWillStartInteraction:t}),Hl()}},{key:"enableViewTool",get:function(){return this.$$.ctx[23]},set:function(t){this.$$set({enableViewTool:t}),Hl()}},{key:"enableSelectToolToAddShape",get:function(){return this.$$.ctx[24]},set:function(t){this.$$set({enableSelectToolToAddShape:t}),Hl()}},{key:"enableTapToAddText",get:function(){return this.$$.ctx[25]},set:function(t){this.$$set({enableTapToAddText:t}),Hl()}},{key:"enableAutoSelectMoveTool",get:function(){return this.$$.ctx[26]},set:function(t){this.$$set({enableAutoSelectMoveTool:t}),Hl()}},{key:"enableMoveTool",get:function(){return this.$$.ctx[27]},set:function(t){this.$$set({enableMoveTool:t}),Hl()}},{key:"willRenderShapeControls",get:function(){return this.$$.ctx[28]},set:function(t){this.$$set({willRenderShapeControls:t}),Hl()}},{key:"willRenderShapeTextControls",get:function(){return this.$$.ctx[29]},set:function(t){this.$$set({willRenderShapeTextControls:t}),Hl()}},{key:"beforeAddShape",get:function(){return this.$$.ctx[30]},set:function(t){this.$$set({beforeAddShape:t}),Hl()}},{key:"beforeRemoveShape",get:function(){return this.$$.ctx[31]},set:function(t){this.$$set({beforeRemoveShape:t}),Hl()}},{key:"beforeDeselectShape",get:function(){return this.$$.ctx[32]},set:function(t){this.$$set({beforeDeselectShape:t}),Hl()}},{key:"beforeSelectShape",get:function(){return this.$$.ctx[33]},set:function(t){this.$$set({beforeSelectShape:t}),Hl()}},{key:"beforeUpdateShape",get:function(){return this.$$.ctx[34]},set:function(t){this.$$set({beforeUpdateShape:t}),Hl()}}]),e}(df)]};function kw(t){var e,n,r;function i(e){t[45](e)}var o={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[36],mapImagePointToScreenPoint:t[35],utilKey:"decorate",shapes:t[38],toolbar:t[14]||t[6],toolShapes:t[15]||t[7],toolRetainStyles:t[8],shapeControls:t[16]||t[9],shapePresets:t[20],enableSelectToolToAddShape:t[22],enableTapToAddText:t[23],enableViewTool:t[24],enableMoveTool:t[25],enableAutoSelectMoveTool:t[26],enableToolShareStyles:t[12],enablePresetSelectImage:t[18],enablePresetDropImage:t[19],enableButtonFlipVertical:t[17],parentRect:t[37],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[34],willRenderPresetToolbar:t[21]||t[13],hooks:{willRenderShapeControls:t[27],willRenderShapeTextControls:t[28],beforeAddShape:t[29],beforeRemoveShape:t[30],beforeDeselectShape:t[31],beforeSelectShape:t[32],beforeUpdateShape:t[33]}};return void 0!==t[0]&&(o.toolActive=t[0]),e=new gw({props:o}),Pl.push((function(){return uf(e,"toolActive",i)})),e.$on("measure",t[46]),{c:function(){cf(e.$$.fragment)},m:function(t,n){sf(e,t,n),r=!0},p:function(t,r){var i={};16&r[0]&&(i.stores=t[4]),32&r[0]&&(i.locale=t[5]),2&r[0]&&(i.isActive=t[1]),4&r[0]&&(i.isActiveFraction=t[2]),8&r[0]&&(i.isVisible=t[3]),32&r[1]&&(i.mapScreenPointToImagePoint=t[36]),16&r[1]&&(i.mapImagePointToScreenPoint=t[35]),16448&r[0]&&(i.toolbar=t[14]||t[6]),32896&r[0]&&(i.toolShapes=t[15]||t[7]),256&r[0]&&(i.toolRetainStyles=t[8]),66048&r[0]&&(i.shapeControls=t[16]||t[9]),1048576&r[0]&&(i.shapePresets=t[20]),4194304&r[0]&&(i.enableSelectToolToAddShape=t[22]),8388608&r[0]&&(i.enableTapToAddText=t[23]),16777216&r[0]&&(i.enableViewTool=t[24]),33554432&r[0]&&(i.enableMoveTool=t[25]),67108864&r[0]&&(i.enableAutoSelectMoveTool=t[26]),4096&r[0]&&(i.enableToolShareStyles=t[12]),262144&r[0]&&(i.enablePresetSelectImage=t[18]),524288&r[0]&&(i.enablePresetDropImage=t[19]),131072&r[0]&&(i.enableButtonFlipVertical=t[17]),1024&r[0]&&(i.toolSelectRadius=t[10]),2048&r[0]&&(i.textInputMode=t[11]),8&r[1]&&(i.willStartInteraction=t[34]),2105344&r[0]&&(i.willRenderPresetToolbar=t[21]||t[13]),2013265920&r[0]|7&r[1]&&(i.hooks={willRenderShapeControls:t[27],willRenderShapeTextControls:t[28],beforeAddShape:t[29],beforeRemoveShape:t[30],beforeDeselectShape:t[31],beforeSelectShape:t[32],beforeUpdateShape:t[33]}),!n&&1&r[0]&&(n=!0,i.toolActive=t[0],jl((function(){return n=!1}))),e.$set(i)},i:function(t){r||(Yl(e.$$.fragment,t),r=!0)},o:function(t){Kl(e.$$.fragment,t),r=!1},d:function(t){lf(e,t)}}}function Sw(t,e,n){var r,i,o,a,u,c=e.isActive,s=e.isActiveFraction,l=e.isVisible,f=e.stores,d=e.locale,h=void 0===d?{}:d,p=e.markupEditorToolbar,v=void 0===p?void 0:p,m=e.markupEditorToolStyles,g=void 0===m?void 0:m,y=e.markupEditorToolRetainStyles,b=void 0===y?void 0:y,$=e.markupEditorShapeStyleControls,x=void 0===$?void 0:$,w=e.markupEditorToolSelectRadius,k=void 0===w?void 0:w,S=e.markupEditorTextInputMode,C=void 0===S?void 0:S,_=e.markupEditorToolShareStyles,M=void 0===_?void 0:_,E=e.willRenderShapePresetToolbar,T=void 0===E?void 0:E,I=e.decorateTools,P=void 0===I?void 0:I,R=e.decorateToolShapes,A=void 0===R?void 0:R,L=e.decorateShapeControls,O=void 0===L?void 0:L,z=e.decorateActiveTool,D=void 0===z?void 0:z,F=e.decorateEnableButtonFlipVertical,j=void 0!==F&&F,B=e.decorateEnableSelectImagePreset,N=void 0!==B&&B,V=e.decorateEnableDropImagePreset,H=void 0===V||V,W=e.decoratePresets,U=void 0===W?[]:W,Z=e.decorateWillRenderShapePresetToolbar,q=void 0===Z?void 0:Z,G=e.enableSelectToolToAddShape,X=void 0===G?void 0:G,Y=e.enableTapToAddText,K=void 0===Y?void 0:Y,J=e.enableViewTool,Q=void 0===J?void 0:J,tt=e.enableMoveTool,et=void 0===tt?void 0:tt,nt=e.enableAutoSelectMoveTool,rt=void 0===nt?void 0:nt,it=e.willRenderShapeControls,ot=void 0===it?void 0:it,at=e.willRenderShapeTextControls,ut=void 0===at?void 0:at,ct=e.beforeAddShape,st=void 0===ct?void 0:ct,lt=e.beforeRemoveShape,ft=void 0===lt?void 0:lt,dt=e.beforeDeselectShape,ht=void 0===dt?void 0:dt,pt=e.beforeSelectShape,vt=void 0===pt?void 0:pt,mt=e.beforeUpdateShape,gt=void 0===mt?void 0:mt,yt=e.markupEditorWillStartInteraction,bt=void 0===yt?void 0:yt,$t=f,xt=$t.imageCropRect,wt=$t.imageDecoration,kt=$t.imageSelectionRectPresentation,St=$t.imageTransformsInterpolated;return Ls(t,kt,(function(t){return n(43,a=t)})),Ls(t,St,(function(t){return n(44,u=t)})),t.$$set=function(t){"isActive"in t&&n(1,c=t.isActive),"isActiveFraction"in t&&n(2,s=t.isActiveFraction),"isVisible"in t&&n(3,l=t.isVisible),"stores"in t&&n(4,f=t.stores),"locale"in t&&n(5,h=t.locale),"markupEditorToolbar"in t&&n(6,v=t.markupEditorToolbar),"markupEditorToolStyles"in t&&n(7,g=t.markupEditorToolStyles),"markupEditorToolRetainStyles"in t&&n(8,b=t.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in t&&n(9,x=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&n(10,k=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&n(11,C=t.markupEditorTextInputMode),"markupEditorToolShareStyles"in t&&n(12,M=t.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in t&&n(13,T=t.willRenderShapePresetToolbar),"decorateTools"in t&&n(14,P=t.decorateTools),"decorateToolShapes"in t&&n(15,A=t.decorateToolShapes),"decorateShapeControls"in t&&n(16,O=t.decorateShapeControls),"decorateActiveTool"in t&&n(0,D=t.decorateActiveTool),"decorateEnableButtonFlipVertical"in t&&n(17,j=t.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in t&&n(18,N=t.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in t&&n(19,H=t.decorateEnableDropImagePreset),"decoratePresets"in t&&n(20,U=t.decoratePresets),"decorateWillRenderShapePresetToolbar"in t&&n(21,q=t.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in t&&n(22,X=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&n(23,K=t.enableTapToAddText),"enableViewTool"in t&&n(24,Q=t.enableViewTool),"enableMoveTool"in t&&n(25,et=t.enableMoveTool),"enableAutoSelectMoveTool"in t&&n(26,rt=t.enableAutoSelectMoveTool),"willRenderShapeControls"in t&&n(27,ot=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(28,ut=t.willRenderShapeTextControls),"beforeAddShape"in t&&n(29,st=t.beforeAddShape),"beforeRemoveShape"in t&&n(30,ft=t.beforeRemoveShape),"beforeDeselectShape"in t&&n(31,ht=t.beforeDeselectShape),"beforeSelectShape"in t&&n(32,vt=t.beforeSelectShape),"beforeUpdateShape"in t&&n(33,gt=t.beforeUpdateShape),"markupEditorWillStartInteraction"in t&&n(34,bt=t.markupEditorWillStartInteraction)},t.$$.update=function(){8192&t.$$.dirty[1]&&n(42,r=u?u.scale:1),6144&t.$$.dirty[1]&&n(36,i=function(t){var e=Vi(t);return e.x-=a.x,e.y-=a.y,e.x/=r,e.y/=r,e}),6144&t.$$.dirty[1]&&n(35,o=function(t){var e=Vi(t);return e.x*=r,e.y*=r,e.x+=a.x,e.y+=a.y,e})},[D,c,s,l,f,h,v,g,b,x,k,C,M,T,P,A,O,j,N,H,U,q,X,K,Q,et,rt,ot,ut,st,ft,ht,vt,gt,bt,o,i,xt,wt,kt,St,"decorate",r,a,u,function(t){n(0,D=t)},function(e){Tl.call(this,t,e)}]}var Cw={util:["decorate",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Sw,kw,Ps,{name:41,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,decorateTools:14,decorateToolShapes:15,decorateShapeControls:16,decorateActiveTool:0,decorateEnableButtonFlipVertical:17,decorateEnableSelectImagePreset:18,decorateEnableDropImagePreset:19,decoratePresets:20,decorateWillRenderShapePresetToolbar:21,enableSelectToolToAddShape:22,enableTapToAddText:23,enableViewTool:24,enableMoveTool:25,enableAutoSelectMoveTool:26,willRenderShapeControls:27,willRenderShapeTextControls:28,beforeAddShape:29,beforeRemoveShape:30,beforeDeselectShape:31,beforeSelectShape:32,beforeUpdateShape:33,markupEditorWillStartInteraction:34},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[41]}},{key:"isActive",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"isVisible",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({isVisible:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"markupEditorToolbar",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({markupEditorToolbar:t}),Hl()}},{key:"markupEditorToolStyles",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({markupEditorToolStyles:t}),Hl()}},{key:"markupEditorToolRetainStyles",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({markupEditorToolRetainStyles:t}),Hl()}},{key:"markupEditorShapeStyleControls",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({markupEditorShapeStyleControls:t}),Hl()}},{key:"markupEditorToolSelectRadius",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({markupEditorToolSelectRadius:t}),Hl()}},{key:"markupEditorTextInputMode",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({markupEditorTextInputMode:t}),Hl()}},{key:"markupEditorToolShareStyles",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({markupEditorToolShareStyles:t}),Hl()}},{key:"willRenderShapePresetToolbar",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({willRenderShapePresetToolbar:t}),Hl()}},{key:"decorateTools",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({decorateTools:t}),Hl()}},{key:"decorateToolShapes",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({decorateToolShapes:t}),Hl()}},{key:"decorateShapeControls",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({decorateShapeControls:t}),Hl()}},{key:"decorateActiveTool",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({decorateActiveTool:t}),Hl()}},{key:"decorateEnableButtonFlipVertical",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({decorateEnableButtonFlipVertical:t}),Hl()}},{key:"decorateEnableSelectImagePreset",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({decorateEnableSelectImagePreset:t}),Hl()}},{key:"decorateEnableDropImagePreset",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({decorateEnableDropImagePreset:t}),Hl()}},{key:"decoratePresets",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({decoratePresets:t}),Hl()}},{key:"decorateWillRenderShapePresetToolbar",get:function(){return this.$$.ctx[21]},set:function(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),Hl()}},{key:"enableSelectToolToAddShape",get:function(){return this.$$.ctx[22]},set:function(t){this.$$set({enableSelectToolToAddShape:t}),Hl()}},{key:"enableTapToAddText",get:function(){return this.$$.ctx[23]},set:function(t){this.$$set({enableTapToAddText:t}),Hl()}},{key:"enableViewTool",get:function(){return this.$$.ctx[24]},set:function(t){this.$$set({enableViewTool:t}),Hl()}},{key:"enableMoveTool",get:function(){return this.$$.ctx[25]},set:function(t){this.$$set({enableMoveTool:t}),Hl()}},{key:"enableAutoSelectMoveTool",get:function(){return this.$$.ctx[26]},set:function(t){this.$$set({enableAutoSelectMoveTool:t}),Hl()}},{key:"willRenderShapeControls",get:function(){return this.$$.ctx[27]},set:function(t){this.$$set({willRenderShapeControls:t}),Hl()}},{key:"willRenderShapeTextControls",get:function(){return this.$$.ctx[28]},set:function(t){this.$$set({willRenderShapeTextControls:t}),Hl()}},{key:"beforeAddShape",get:function(){return this.$$.ctx[29]},set:function(t){this.$$set({beforeAddShape:t}),Hl()}},{key:"beforeRemoveShape",get:function(){return this.$$.ctx[30]},set:function(t){this.$$set({beforeRemoveShape:t}),Hl()}},{key:"beforeDeselectShape",get:function(){return this.$$.ctx[31]},set:function(t){this.$$set({beforeDeselectShape:t}),Hl()}},{key:"beforeSelectShape",get:function(){return this.$$.ctx[32]},set:function(t){this.$$set({beforeSelectShape:t}),Hl()}},{key:"beforeUpdateShape",get:function(){return this.$$.ctx[33]},set:function(t){this.$$set({beforeUpdateShape:t}),Hl()}},{key:"markupEditorWillStartInteraction",get:function(){return this.$$.ctx[34]},set:function(t){this.$$set({markupEditorWillStartInteraction:t}),Hl()}}]),e}(df)]};function _w(t){var e,n;return(e=new gw({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[25],mapImagePointToScreenPoint:t[24],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[31]:t[32],toolActive:"preset",imageFlipX:!!t[6]&&t[23],imageFlipY:!!t[6]&&t[22],imageRotation:t[6]?t[27]:0,parentRect:t[6]?t[33]:t[29],enablePresetDropImage:t[7],enablePresetSelectImage:t[26],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[14],willStartInteraction:t[21],willRenderPresetToolbar:t[11]||t[9]||t[15],hooks:{willRenderShapeControls:t[12],willRenderShapeTextControls:t[13],beforeAddShape:t[16],beforeRemoveShape:t[17],beforeDeselectShape:t[18],beforeSelectShape:t[19],beforeUpdateShape:t[20]}}})).$on("measure",t[48]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};8&n[0]&&(r.stores=t[3]),16&n[0]&&(r.locale=t[4]),1&n[0]&&(r.isActive=t[0]),2&n[0]&&(r.isActiveFraction=t[1]),4&n[0]&&(r.isVisible=t[2]),33554432&n[0]&&(r.mapScreenPointToImagePoint=t[25]),16777216&n[0]&&(r.mapImagePointToScreenPoint=t[24]),32&n[0]&&(r.shapePresets=t[5]),64&n[0]&&(r.shapes=t[6]?t[31]:t[32]),8388672&n[0]&&(r.imageFlipX=!!t[6]&&t[23]),4194368&n[0]&&(r.imageFlipY=!!t[6]&&t[22]),134217792&n[0]&&(r.imageRotation=t[6]?t[27]:0),64&n[0]&&(r.parentRect=t[6]?t[33]:t[29]),128&n[0]&&(r.enablePresetDropImage=t[7]),67108864&n[0]&&(r.enablePresetSelectImage=t[26]),1280&n[0]&&(r.enableButtonFlipVertical=t[10]||t[8]),16384&n[0]&&(r.toolSelectRadius=t[14]),2097152&n[0]&&(r.willStartInteraction=t[21]),35328&n[0]&&(r.willRenderPresetToolbar=t[11]||t[9]||t[15]),2043904&n[0]&&(r.hooks={willRenderShapeControls:t[12],willRenderShapeTextControls:t[13],beforeAddShape:t[16],beforeRemoveShape:t[17],beforeDeselectShape:t[18],beforeSelectShape:t[19],beforeUpdateShape:t[20]}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Mw(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v=e.isActive,m=e.isActiveFraction,g=e.isVisible,y=e.stores,b=e.locale,$=void 0===b?{}:b,x=e.stickers,w=void 0===x?[]:x,k=e.stickerStickToImage,S=void 0!==k&&k,C=e.stickerEnableSelectImagePreset,_=void 0===C||C,M=e.stickerEnableDropImagePreset,E=void 0===M||M,T=e.stickerEnableButtonFlipVertical,I=void 0!==T&&T,P=e.stickerWillRenderShapePresetToolbar,R=void 0===P?void 0:P,A=e.stickerEnableSelectImage,L=void 0===A||A,O=e.stickersEnableButtonFlipVertical,z=void 0!==O&&O,D=e.stickersWillRenderShapePresetToolbar,F=void 0===D?void 0:D,j=e.willRenderShapeControls,B=void 0===j?void 0:j,N=e.willRenderShapeTextControls,V=void 0===N?void 0:N,H=e.markupEditorToolSelectRadius,W=void 0===H?void 0:H,U=e.willRenderShapePresetToolbar,Z=void 0===U?void 0:U,q=e.beforeAddShape,G=void 0===q?void 0:q,X=e.beforeRemoveShape,Y=void 0===X?void 0:X,K=e.beforeDeselectShape,J=void 0===K?void 0:K,Q=e.beforeSelectShape,tt=void 0===Q?void 0:Q,et=e.beforeUpdateShape,nt=void 0===et?void 0:et,rt=e.markupEditorWillStartInteraction,it=void 0===rt?void 0:rt,ot=y,at=ot.rootRect,ut=ot.imageCropRect,ct=ot.imageSelectionRectPresentation,st=ot.imageAnnotation,lt=ot.imageDecoration,ft=ot.imageSize,dt=ot.imageTransforms,ht=ot.imageTransformsInterpolated,pt=ot.imageRotation,vt=ot.imageFlipX,mt=ot.imageFlipY;return Ls(t,at,(function(t){return n(47,h=t)})),Ls(t,ct,(function(t){return n(43,u=t)})),Ls(t,ft,(function(t){return n(46,d=t)})),Ls(t,dt,(function(t){return n(45,f=t)})),Ls(t,ht,(function(t){return n(44,l=t)})),Ls(t,pt,(function(t){return n(27,p=t)})),Ls(t,vt,(function(t){return n(23,s=t)})),Ls(t,mt,(function(t){return n(22,c=t)})),t.$$set=function(t){"isActive"in t&&n(0,v=t.isActive),"isActiveFraction"in t&&n(1,m=t.isActiveFraction),"isVisible"in t&&n(2,g=t.isVisible),"stores"in t&&n(3,y=t.stores),"locale"in t&&n(4,$=t.locale),"stickers"in t&&n(5,w=t.stickers),"stickerStickToImage"in t&&n(6,S=t.stickerStickToImage),"stickerEnableSelectImagePreset"in t&&n(40,_=t.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in t&&n(7,E=t.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in t&&n(8,I=t.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in t&&n(9,R=t.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in t&&n(41,L=t.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in t&&n(10,z=t.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in t&&n(11,F=t.stickersWillRenderShapePresetToolbar),"willRenderShapeControls"in t&&n(12,B=t.willRenderShapeControls),"willRenderShapeTextControls"in t&&n(13,V=t.willRenderShapeTextControls),"markupEditorToolSelectRadius"in t&&n(14,W=t.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in t&&n(15,Z=t.willRenderShapePresetToolbar),"beforeAddShape"in t&&n(16,G=t.beforeAddShape),"beforeRemoveShape"in t&&n(17,Y=t.beforeRemoveShape),"beforeDeselectShape"in t&&n(18,J=t.beforeDeselectShape),"beforeSelectShape"in t&&n(19,tt=t.beforeSelectShape),"beforeUpdateShape"in t&&n(20,nt=t.beforeUpdateShape),"markupEditorWillStartInteraction"in t&&n(21,it=t.markupEditorWillStartInteraction)},t.$$.update=function(){8192&t.$$.dirty[1]&&n(42,r=l?l.scale:1),1536&t.$$.dirty[1]&&n(26,i=!1!==_&&L),12582976&t.$$.dirty[0]|129024&t.$$.dirty[1]&&n(25,o=S?function(t){return bw(t,h,d,l.origin,l.translation,f.rotation.z,l.scale,s,c)}:function(t){var e=Vi(t);return e.x-=u.x,e.y-=u.y,e.x/=r,e.y/=r,e}),12582976&t.$$.dirty[0]|129024&t.$$.dirty[1]&&n(24,a=S?function(t){return yw(t,h,d,l.origin,l.translation,f.rotation.z,l.scale,s,c)}:function(t){var e=Vi(t);return e.x*=r,e.y*=r,e.x+=u.x,e.y+=u.y,e})},[v,m,g,y,$,w,S,E,I,R,z,F,B,V,W,Z,G,Y,J,tt,nt,it,c,s,a,o,i,p,at,ut,ct,st,lt,ft,dt,ht,pt,vt,mt,"sticker",_,L,r,u,l,f,d,h,function(e){Tl.call(this,t,e)}]}var Ew={util:["sticker",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Mw,_w,Ps,{name:39,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerStickToImage:6,stickerEnableSelectImagePreset:40,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:41,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[39]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"isVisible",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({isVisible:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"stickers",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({stickers:t}),Hl()}},{key:"stickerStickToImage",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({stickerStickToImage:t}),Hl()}},{key:"stickerEnableSelectImagePreset",get:function(){return this.$$.ctx[40]},set:function(t){this.$$set({stickerEnableSelectImagePreset:t}),Hl()}},{key:"stickerEnableDropImagePreset",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({stickerEnableDropImagePreset:t}),Hl()}},{key:"stickerEnableButtonFlipVertical",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({stickerEnableButtonFlipVertical:t}),Hl()}},{key:"stickerWillRenderShapePresetToolbar",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),Hl()}},{key:"stickerEnableSelectImage",get:function(){return this.$$.ctx[41]},set:function(t){this.$$set({stickerEnableSelectImage:t}),Hl()}},{key:"stickersEnableButtonFlipVertical",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({stickersEnableButtonFlipVertical:t}),Hl()}},{key:"stickersWillRenderShapePresetToolbar",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),Hl()}},{key:"willRenderShapeControls",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({willRenderShapeControls:t}),Hl()}},{key:"willRenderShapeTextControls",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({willRenderShapeTextControls:t}),Hl()}},{key:"markupEditorToolSelectRadius",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({markupEditorToolSelectRadius:t}),Hl()}},{key:"willRenderShapePresetToolbar",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({willRenderShapePresetToolbar:t}),Hl()}},{key:"beforeAddShape",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({beforeAddShape:t}),Hl()}},{key:"beforeRemoveShape",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({beforeRemoveShape:t}),Hl()}},{key:"beforeDeselectShape",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({beforeDeselectShape:t}),Hl()}},{key:"beforeSelectShape",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({beforeSelectShape:t}),Hl()}},{key:"beforeUpdateShape",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({beforeUpdateShape:t}),Hl()}},{key:"markupEditorWillStartInteraction",get:function(){return this.$$.ctx[21]},set:function(t){this.$$set({markupEditorWillStartInteraction:t}),Hl()}}]),e}(df)]};function Tw(t){var e,n,r,i,o,a=(t[14](t[33].value)||"")+"",u=(ni(t[33].label)?t[33].label(t[1]):t[33].label)+"";return{c:function(){e=el("div"),n=new pl(!1),r=il(),i=el("span"),o=rl(u),n.a=r,sl(e,"slot","option")},m:function(t,u){Qs(t,e,u),n.m(a,e),Ys(e,r),Ys(e,i),Ys(i,o)},p:function(t,e){4&e[1]&&a!==(a=(t[14](t[33].value)||"")+"")&&n.p(a),2&e[0]|4&e[1]&&u!==(u=(ni(t[33].label)?t[33].label(t[1]):t[33].label)+"")&&fl(o,u)},d:function(t){t&&tl(e)}}}function Iw(t){var e,n;return e=new dm({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[Tw,function(t){return{33:t.option}},function(t){return[0,t.option?4:0]}]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};2&n[0]&&(r.locale=t[1]),4&n[0]&&(r.options=t[2]),64&n[0]&&(r.selectedIndex=t[6]),2&n[0]|12&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Pw(t){var e,n,r,i,o;return n=new Tx({props:{locale:t[1],class:"PinturaControlPanels",shape:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),i=new Qp({props:{elasticity:t[10],$$slots:{default:[Iw]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),cf(n.$$.fragment),r=il(),cf(i.$$.fragment),sl(e,"slot","footer"),sl(e,"style",t[5])},m:function(t,a){Qs(t,e,a),sf(n,e,null),Ys(e,r),sf(i,e,null),o=!0},p:function(t,r){var a={};2&r[0]&&(a.locale=t[1]),16&r[0]&&(a.shape=t[4]),8&r[0]&&(a.controls=t[3]),128&r[0]&&(a.scrollElasticity=t[7]),n.$set(a);var u={};70&r[0]|8&r[1]&&(u.$$scope={dirty:r,ctx:t}),i.$set(u),(!o||32&r[0])&&sl(e,"style",t[5])},i:function(t){o||(Yl(n.$$.fragment,t),Yl(i.$$.fragment,t),o=!0)},o:function(t){Kl(n.$$.fragment,t),Kl(i.$$.fragment,t),o=!1},d:function(t){t&&tl(e),lf(n),lf(i)}}}function Rw(t){var e,n;return(e=new kb({props:{$$slots:{footer:[Pw]},$$scope:{ctx:t}}})).$on("measure",t[23]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};254&n[0]|8&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Aw(t,e,n){var r,i,o,a,u,c,s,l,f=Ss,d=function(){return f(),f=Rs(h,(function(t){return n(20,u=t)})),h};t.$$.on_destroy.push((function(){return f()}));var h=e.isActive;d();var p=e.stores,v=e.locale,m=void 0===v?{}:v,g=e.frameStyles,y=void 0===g?{}:g,b=e.frameOptions,$=void 0===b?[]:b,x=e.markupEditorShapeStyleControls,w=void 0===x?void 0:x,k=El("elasticityMultiplier");Ls(t,k,(function(t){return n(22,l=t)}));var S=p,C=S.history,_=S.animation,M=S.scrollElasticity,E=S.imageFrame,T=S.allowPan,I=S.allowZoom,P=S.allowZoomControls;Ls(t,_,(function(t){return n(21,c=t)})),Ls(t,E,(function(t){return n(4,s=t)}));var R,A={};var L=_h(c?20:0);return Ls(t,L,(function(t){return n(19,a=t)})),t.$$set=function(t){"isActive"in t&&d(n(0,h=t.isActive)),"stores"in t&&n(17,p=t.stores),"locale"in t&&n(1,m=t.locale),"frameStyles"in t&&n(18,y=t.frameStyles),"frameOptions"in t&&n(2,$=t.frameOptions),"markupEditorShapeStyleControls"in t&&n(3,w=t.markupEditorShapeStyleControls)},t.$$.update=function(){1048576&t.$$.dirty[0]&&T.set(u),1048576&t.$$.dirty[0]&&I.set(u),1048576&t.$$.dirty[0]&&P.set(u),4194304&t.$$.dirty[0]&&n(7,r=l*M),20&t.$$.dirty[0]&&n(6,i=s?$.findIndex((function(t){return t[0]===s.id})):0),3145728&t.$$.dirty[0]&&c&&L.set(u?0:20),524288&t.$$.dirty[0]&&n(5,o=a?"transform: translateY("+a+"px)":void 0)},[h,m,$,w,s,o,i,r,k,_,M,E,function(t){var e=t.value,n=y[e];if(!n||!n.shape)return E.set(void 0),void C.write();var r=n.shape,i=Object.assign({id:e},Qu(r),Object.keys(A).reduce((function(t,e){return r[e]?(t[e]=A[e],t):t}),{}));E.set(i),C.write()},function(t){su(t,"frameColor")&&(A.frameColor=t.frameColor),s&&(Yc(s,t),E.set(s),clearTimeout(R),R=setTimeout((function(){C.write()}),200))},function(t){var e,n=y[t];if(n&&n.thumb)return e=n.thumb,/div/i.test(e)||jx(e)?e:/rect|path|circle|line|<g>/i.test(e)?'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">'+e+"</svg>":'<img src="'+e+'" alt=""/>'},L,"frame",p,y,a,u,c,l,function(e){Tl.call(this,t,e)}]}var Lw={util:["frame",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Aw,Rw,Ps,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[16]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"frameStyles",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({frameStyles:t}),Hl()}},{key:"frameOptions",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({frameOptions:t}),Hl()}},{key:"markupEditorShapeStyleControls",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({markupEditorShapeStyleControls:t}),Hl()}}]),e}(df),function(t){return!t.duration}]};function Ow(t){var e,n,r,i,o,a,u,c;return{c:function(){e=el("div"),n=el("input"),i=il(),o=el("label"),a=rl(t[1]),sl(n,"id",t[0]),sl(n,"type","number"),sl(n,"min","1"),sl(n,"inputmode","numeric"),sl(n,"pattern","[0-9]*"),sl(n,"data-state",t[3]),sl(n,"autocomplete","off"),sl(n,"placeholder",t[4]),n.value=r=void 0===t[5]?"":t[7](t[5]+""),sl(o,"for",t[0]),sl(o,"title",t[2]),sl(o,"aria-label",t[2]),sl(e,"class","PinturaInputDimension")},m:function(r,s){Qs(r,e,s),Ys(e,n),Ys(e,i),Ys(e,o),Ys(o,a),u||(c=al(n,"input",t[8]),u=!0)},p:function(t,e){var i=e[0];1&i&&sl(n,"id",t[0]),8&i&&sl(n,"data-state",t[3]),16&i&&sl(n,"placeholder",t[4]),160&i&&r!==(r=void 0===t[5]?"":t[7](t[5]+""))&&n.value!==r&&(n.value=r),2&i&&fl(a,t[1]),1&i&&sl(o,"for",t[0]),4&i&&sl(o,"title",t[2]),4&i&&sl(o,"aria-label",t[2])},i:Ss,o:Ss,d:function(t){t&&tl(e),u=!1,c()}}}function zw(t,e,n){var r=e.id,i=e.label,o=e.title,a=e.state,u=e.placeholder,c=e.value,s=e.onchange,l=e.format,f=void 0===l?function(t){return t.replace(/\D/g,"")}:l;return t.$$set=function(t){"id"in t&&n(0,r=t.id),"label"in t&&n(1,i=t.label),"title"in t&&n(2,o=t.title),"state"in t&&n(3,a=t.state),"placeholder"in t&&n(4,u=t.placeholder),"value"in t&&n(5,c=t.value),"onchange"in t&&n(6,s=t.onchange),"format"in t&&n(7,f=t.format)},[r,i,o,a,u,c,s,f,function(t){return s(f(t.currentTarget.value))}]}var Dw=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,zw,Ow,Ps,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7}),n}return gr(e,t),e}(df);function Fw(t){var e;return{c:function(){e=nl("g")},m:function(n,r){Qs(n,e,r),e.innerHTML=t[2]},p:function(t,n){4&n&&(e.innerHTML=t[2])},d:function(t){t&&tl(e)}}}function jw(t){var e,n,r,i,o,a,u,c;return o=new xp({props:{$$slots:{default:[Fw]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),n=el("input"),r=il(),i=el("label"),cf(o.$$.fragment),sl(n,"id",t[0]),sl(n,"class","implicit"),sl(n,"type","checkbox"),n.checked=t[1],sl(i,"for",t[0]),sl(i,"title",t[3])},m:function(s,l){Qs(s,e,l),Ys(e,n),Ys(e,r),Ys(e,i),sf(o,i,null),a=!0,u||(c=al(n,"change",t[5]),u=!0)},p:function(t,e){var r=e[0];(!a||1&r)&&sl(n,"id",t[0]),(!a||2&r)&&(n.checked=t[1]);var u={};68&r&&(u.$$scope={dirty:r,ctx:t}),o.$set(u),(!a||1&r)&&sl(i,"for",t[0]),(!a||8&r)&&sl(i,"title",t[3])},i:function(t){a||(Yl(o.$$.fragment,t),a=!0)},o:function(t){Kl(o.$$.fragment,t),a=!1},d:function(t){t&&tl(e),lf(o),u=!1,c()}}}function Bw(t,e,n){var r=e.id,i=e.locked,o=e.icon,a=e.title,u=e.onchange;return t.$$set=function(t){"id"in t&&n(0,r=t.id),"locked"in t&&n(1,i=t.locked),"icon"in t&&n(2,o=t.icon),"title"in t&&n(3,a=t.title),"onchange"in t&&n(4,u=t.onchange)},[r,i,o,a,u,function(t){return u(t.currentTarget.checked)}]}var Nw=function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Bw,jw,Ps,{id:0,locked:1,icon:2,title:3,onchange:4}),n}return gr(e,t),e}(df);function Vw(t){var e;return{c:function(){e=rl("Save")},m:function(t,n){Qs(t,e,n)},d:function(t){t&&tl(e)}}}function Hw(t){var e,n,r,i,o,a,u,c,s,l,f,d,h,p=t[1].resizeLabelFormCaption+"";return c=new Gm({props:{items:t[4]}}),l=new jp({props:{type:"submit",class:"implicit",$$slots:{default:[Vw]},$$scope:{ctx:t}}}),{c:function(){e=el("form"),n=el("div"),r=el("fieldset"),i=el("legend"),o=rl(p),a=il(),u=el("div"),cf(c.$$.fragment),s=il(),cf(l.$$.fragment),sl(i,"class","implicit"),sl(u,"class","PinturaFieldsetInner"),sl(n,"class","PinturaFormInner"),sl(e,"slot","footer"),sl(e,"style",t[3])},m:function(p,v){Qs(p,e,v),Ys(e,n),Ys(n,r),Ys(r,i),Ys(i,o),Ys(r,a),Ys(r,u),sf(c,u,null),t[64](u),Ys(n,s),sf(l,n,null),f=!0,d||(h=[al(u,"focusin",t[15]),al(u,"focusout",t[16]),al(e,"submit",ul(t[17]))],d=!0)},p:function(t,n){(!f||2&n[0])&&p!==(p=t[1].resizeLabelFormCaption+"")&&fl(o,p);var r={};16&n[0]&&(r.items=t[4]),c.$set(r);var i={};4&n[3]&&(i.$$scope={dirty:n,ctx:t}),l.$set(i),(!f||8&n[0])&&sl(e,"style",t[3])},i:function(t){f||(Yl(c.$$.fragment,t),Yl(l.$$.fragment,t),f=!0)},o:function(t){Kl(c.$$.fragment,t),Kl(l.$$.fragment,t),f=!1},d:function(n){n&&tl(e),lf(c),t[64](null),lf(l),d=!1,Ts(h)}}}function Ww(t){var e,n;return(e=new kb({props:{$$slots:{footer:[Hw]},$$scope:{ctx:t}}})).$on("measure",t[65]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};30&n[0]|4&n[3]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Uw(t,e,n){var r,i,o,a,u,c,s,l,f,d,h,p,v,m,g,y,b,$,x,w,k,S,C,_,M,E,T,I,P,R,A=Ss,L=function(){return A(),A=Rs(z,(function(t){return n(48,h=t)})),z};t.$$.on_destroy.push((function(){return A()}));var O=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=9999),!ei(t)||(t=t.replace(/\D/g,"")).length){var r=Math.round(t);if(!Number.isNaN(r))return zf(r,e,n)}},z=e.isActive;L();var D=e.stores,F=e.locale,j=void 0===F?{}:F,B=e.resizeMinSize,N=void 0===B?vo(1,1):B,V=e.resizeMaxSize,H=void 0===V?vo(9999,9999):V,W=e.resizeSizePresetOptions,U=void 0===W?void 0:W,Z=e.resizeWidthPresetOptions,q=void 0===Z?void 0:Z,G=e.resizeHeightPresetOptions,X=void 0===G?void 0:G,Y=e.resizeWillRenderFooter,K=void 0===Y?xi:Y,J=_h(0,{stiffness:.15,damping:.3});Ls(t,J,(function(t){return n(53,y=t)}));var Q=D,tt=Q.animation,et=Q.imageSize,nt=Q.imageCropRect,rt=Q.imageCropRectAspectRatio,it=Q.imageCropAspectRatio,ot=Q.imageOutputSize,at=Q.imageSelectionZoom,ut=Q.imageSelectionPan,ct=Q.history,st=Q.env,lt=Q.allowPan,ft=Q.allowZoom,dt=Q.allowZoomControls;Ls(t,tt,(function(t){return n(49,p=t)})),Ls(t,et,(function(t){return n(72,I=t)})),Ls(t,nt,(function(t){return n(51,m=t)})),Ls(t,rt,(function(t){return n(52,g=t)})),Ls(t,it,(function(t){return n(71,_=t)})),Ls(t,ot,(function(t){return n(60,C=t)})),Ls(t,at,(function(t){return n(73,P=t)})),Ls(t,ut,(function(t){return n(74,R=t)})),Ls(t,st,(function(t){return n(50,v=t)}));var ht,pt,vt,mt,gt,yt,bt=ui(),$t=!1,xt=ji(),wt=function(t,e,n,r,i){return null!=t&&n!==e?t>=r[e]&&t<=i[e]?"valid":"invalid":"undetermined"},kt=function(t,e,n){return Math.round(null!=t?t/e:n.height)},St=function(){$t&&pt&&vt&&("width"===mt?n(38,vt=Math.round(pt/g)):"height"===mt?n(37,pt=Math.round(vt*g)):("width"===gt?n(38,vt=Math.round(pt/g)):"height"===gt&&n(37,pt=Math.round(vt*g)),Ct()))},Ct=function(t){var e=O(pt),r=O(vt),i=e,o=r,a=i&&o,u=t||g;if(i||o){i&&!o?o=Math.round(i/u):o&&!i&&(i=Math.round(o*u)),u=t||a?$i(i,o):g;var c=vo(i,o);$o(H,c)||(c=Xo(H,u)),$o(c,N)||(c=Go(N,u)),n(37,pt=null!=e?Math.round(c.width):void 0),n(38,vt=null!=r?Math.round(c.height):void 0)}},_t=function(){Ct();var t=C||{},e=t.width,n=t.height;e===pt&&n===vt||(pt||vt?(pt&&vt&&Vs(it,_=pt/vt,_),Vs(ot,C=vo(pt,vt),C)):(Vs(it,_=I.width/I.height,_),Vs(it,_=void 0,_),Vs(ot,C=void 0,C)),ct.write())},Mt=ot.subscribe((function(t){if(!t)return n(37,pt=void 0),void n(38,vt=void 0);n(37,pt=t.width),n(38,vt=t.height),Ct()})),Et=it.subscribe((function(t){(pt||vt)&&t&&(pt&&vt&&$i(pt,vt)!==t?(n(38,vt=pt/t),Ct(t)):Ct())})),Tt=function t(e){return ei(e[0])?(e[1]=e[1].map(t),e):uu(e)?[e,""+e]:e},It=function t(e){if(ei(e[0]))return e[1]=e[1].map(t),e;var n=e[0],r=e[1];if(uu(n)&&uu(r)){var i=r;r=n+" &times; "+i,n=[n,i]}return[n,r]},Pt=vf();Ls(t,Pt,(function(t){return n(59,S=t)}));var Rt=vf();Ls(t,Rt,(function(t){return n(63,T=t)}));var At=vf();Ls(t,At,(function(t){return n(57,w=t)}));var Lt=vf();Ls(t,Lt,(function(t){return n(62,E=t)}));var Ot=vf();Ls(t,Ot,(function(t){return n(55,$=t)}));var zt=vf();Ls(t,zt,(function(t){return n(61,M=t)}));var Dt=mf([ot,Rt],(function(t,e){var n=t[0],r=t[1];if(!r)return e(-1);var i=r.findIndex((function(t){var e=t[0];if(!e&&!n)return!0;if(!e)return!1;var r=e[0],i=e[1];return n.width===r&&n.height===i}));e(i<0?0:i)}));Ls(t,Dt,(function(t){return n(58,k=t)}));var Ft=mf([ot,Lt],(function(t,e){var n=t[0],r=t[1];if(!r)return e(-1);var i=r.findIndex((function(t){var e=t[0];return!e&&!n||!!e&&n.width===e}));e(i<0?0:i)}));Ls(t,Ft,(function(t){return n(56,x=t)}));var jt=mf([ot,zt],(function(t,e){var n=t[0],r=t[1];if(!r)return e(-1);var i=r.findIndex((function(t){var e=t[0];return!e&&!n||!!e&&n.height===e}));e(i<0?0:i)}));Ls(t,jt,(function(t){return n(54,b=t)}));var Bt=void 0,Nt=void 0,Vt=El("redrawTrigger"),Ht=_h(p?20:0);return Ls(t,Ht,(function(t){return n(47,d=t)})),Cl((function(){Mt(),Et()})),t.$$set=function(t){"isActive"in t&&L(n(0,z=t.isActive)),"stores"in t&&n(29,D=t.stores),"locale"in t&&n(1,j=t.locale),"resizeMinSize"in t&&n(30,N=t.resizeMinSize),"resizeMaxSize"in t&&n(31,H=t.resizeMaxSize),"resizeSizePresetOptions"in t&&n(32,U=t.resizeSizePresetOptions),"resizeWidthPresetOptions"in t&&n(33,q=t.resizeWidthPresetOptions),"resizeHeightPresetOptions"in t&&n(34,X=t.resizeHeightPresetOptions),"resizeWillRenderFooter"in t&&n(35,K=t.resizeWillRenderFooter)},t.$$.update=function(){var e;131072&t.$$.dirty[1]&&lt.set(!h),131072&t.$$.dirty[1]&&ft.set(!h),131072&t.$$.dirty[1]&&dt.set(!h),268435458&t.$$.dirty[1]&&U&&(Vs(Pt,S=U.map(It),S),Vs(Rt,T=zv(S),T)),268435456&t.$$.dirty[1]&&n(46,a=!!S),134217728&t.$$.dirty[1]|2&t.$$.dirty[2]&&n(45,r=k>-1&&T[k][1]),67108868&t.$$.dirty[1]&&q&&(Vs(At,w=q.map(Tt),w),Vs(Lt,E=zv(w),E)),67141632&t.$$.dirty[1]&&n(43,u=!a&&w),33554432&t.$$.dirty[1]|1&t.$$.dirty[2]&&n(44,i=x>-1&&E[x][1]),16777224&t.$$.dirty[1]&&X&&(Vs(Ot,$=X.map(Tt),$),Vs(zt,M=zv($),M)),16809984&t.$$.dirty[1]&&n(42,c=!a&&$),1082130432&t.$$.dirty[1]&&n(41,o=b>-1&&M[b][1]),38912&t.$$.dirty[1]&&n(40,s=!a&&!u&&!c),1073741826&t.$$.dirty[0]|536412145&t.$$.dirty[1]&&n(4,l=Vt&&vg((function(){return K([a&&["Dropdown","size-presets",{label:r,options:S,onchange:function(t){return(e=t.value)&&!Bt&&(Bt=Object.assign({},m),Nt=_),e?(Vs(it,_=$i(e[0],e[1]),_),Vs(ot,C=ho(e),C)):(Vs(nt,m=Bt,m),Vs(it,_=Nt,_),Vs(ot,C=void 0,C),Bt=void 0,Nt=void 0),void ct.write();var e},selectedIndex:k}],u&&["Dropdown","width-presets",{label:i,options:w,onchange:function(t){n(37,pt=t.value),_t()},selectedIndex:x}],u&&c&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],c&&["Dropdown","height-presets",{label:o,options:$,onchange:function(t){n(38,vt=t.value),_t()},selectedIndex:b}],s&&[Dw,"width-input",{id:"width-"+bt,title:j.resizeTitleInputWidth,label:j.resizeLabelInputWidth,placeholder:(t=O(vt),e=g,l=m,Math.round(null!=t?t*e:l.width)),value:pt,state:wt(O(pt),"width",mt,N,H),onchange:function(t){n(37,pt=t),St()}}],s&&[Nw,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+bt,title:j.resizeTitleButtonMaintainAspectRatio,icon:ei(j.resizeIconButtonMaintainAspectRatio)?j.resizeIconButtonMaintainAspectRatio:j.resizeIconButtonMaintainAspectRatio($t,y),locked:$t,onchange:function(t){n(36,$t=t),St()}}],s&&[Dw,"height-input",{id:"height-"+bt,title:j.resizeTitleInputHeight,label:j.resizeLabelInputHeight,placeholder:kt(O(pt),g,m),value:vt,state:wt(O(vt),"height",mt,N,H),onchange:function(t){n(38,vt=t),St()}}]].filter(Boolean),Object.assign({},v),(function(){return Vt.set({})}));var t,e,l})).filter(Boolean)),32&t.$$.dirty[1]&&J.set($t?1:0),256&t.$$.dirty[1]&&mt&&(gt=mt),131072&t.$$.dirty[1]&&h&&(xt=R,yt=P),537001984&t.$$.dirty[1]&&(h?(e=C,Vs(ut,R=ji(),R),Vs(at,P=e&&m?e.width/m.width||e.height/m.height:1,P)):(Vs(ut,R=xt,R),Vs(at,P=yt,P))),393216&t.$$.dirty[1]&&p&&Ht.set(h?0:20),65536&t.$$.dirty[1]&&n(3,f=d?"transform: translateY("+d+"px)":void 0)},[z,j,ht,f,l,J,tt,et,nt,rt,it,ot,at,ut,st,function(t){var e=t.target.id;/width/.test(e)?n(39,mt="width"):/height/.test(e)?n(39,mt="height"):/aspectRatio/i.test(e)?n(39,mt="lock"):n(39,mt=void 0)},function(t){ht.contains(t.relatedTarget)||_t(),n(39,mt=void 0)},_t,Pt,Rt,At,Lt,Ot,zt,Dt,Ft,jt,Ht,"resize",D,N,H,U,q,X,K,$t,pt,vt,mt,s,o,c,u,i,r,a,d,h,p,v,m,g,y,b,$,x,w,k,S,C,M,E,T,function(t){Pl[t?"unshift":"push"]((function(){n(2,ht=t)}))},function(e){Tl.call(this,t,e)}]}var Zw={util:["resize",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Uw,Ww,Ps,{name:28,isActive:0,stores:29,locale:1,resizeMinSize:30,resizeMaxSize:31,resizeSizePresetOptions:32,resizeWidthPresetOptions:33,resizeHeightPresetOptions:34,resizeWillRenderFooter:35},null,[-1,-1,-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[28]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[29]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"resizeMinSize",get:function(){return this.$$.ctx[30]},set:function(t){this.$$set({resizeMinSize:t}),Hl()}},{key:"resizeMaxSize",get:function(){return this.$$.ctx[31]},set:function(t){this.$$set({resizeMaxSize:t}),Hl()}},{key:"resizeSizePresetOptions",get:function(){return this.$$.ctx[32]},set:function(t){this.$$set({resizeSizePresetOptions:t}),Hl()}},{key:"resizeWidthPresetOptions",get:function(){return this.$$.ctx[33]},set:function(t){this.$$set({resizeWidthPresetOptions:t}),Hl()}},{key:"resizeHeightPresetOptions",get:function(){return this.$$.ctx[34]},set:function(t){this.$$set({resizeHeightPresetOptions:t}),Hl()}},{key:"resizeWillRenderFooter",get:function(){return this.$$.ctx[35]},set:function(t){this.$$set({resizeWillRenderFooter:t}),Hl()}}]),e}(df),function(t){return!t.duration}]};function qw(t){var e,n;return(e=new gw({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[9],mapImagePointToScreenPoint:t[8],utilKey:"redact",imageRotation:t[10],imageFlipX:t[7],imageFlipY:t[6],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[24]}}})).$on("measure",t[25]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r=n[0],i={};8&r&&(i.stores=t[3]),16&r&&(i.locale=t[4]),1&r&&(i.isActive=t[0]),2&r&&(i.isActiveFraction=t[1]),4&r&&(i.isVisible=t[2]),512&r&&(i.mapScreenPointToImagePoint=t[9]),256&r&&(i.mapImagePointToScreenPoint=t[8]),1024&r&&(i.imageRotation=t[10]),128&r&&(i.imageFlipX=t[7]),64&r&&(i.imageFlipY=t[6]),32&r&&(i.willStartInteraction=t[5]),e.$set(i)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Gw(t,e,n){var r,i,o,a,u,c,s,l,f,d=e.isActive,h=e.isActiveFraction,p=e.isVisible,v=e.stores,m=e.locale,g=void 0===m?{}:m,y=e.markupEditorWillStartInteraction,b=void 0===y?void 0:y,$=v,x=$.imageRedaction,w=$.rootRect,k=$.imageSize,S=$.imageRotation,C=$.imageFlipX,_=$.imageFlipY,M=$.imageTransforms,E=$.imageTransformsInterpolated;Ls(t,w,(function(t){return n(23,l=t)})),Ls(t,k,(function(t){return n(22,s=t)})),Ls(t,S,(function(t){return n(10,f=t)})),Ls(t,C,(function(t){return n(7,a=t)})),Ls(t,_,(function(t){return n(6,o=t)})),Ls(t,M,(function(t){return n(21,c=t)})),Ls(t,E,(function(t){return n(20,u=t)}));return t.$$set=function(t){"isActive"in t&&n(0,d=t.isActive),"isActiveFraction"in t&&n(1,h=t.isActiveFraction),"isVisible"in t&&n(2,p=t.isVisible),"stores"in t&&n(3,v=t.stores),"locale"in t&&n(4,g=t.locale),"markupEditorWillStartInteraction"in t&&n(5,b=t.markupEditorWillStartInteraction)},t.$$.update=function(){15728832&t.$$.dirty&&n(9,r=function(t){return bw(t,l,s,u.origin,u.translation,c.rotation.z,u.scale,a,o)}),15728832&t.$$.dirty&&n(8,i=function(t){return yw(t,l,s,u.origin,u.translation,c.rotation.z,u.scale,a,o)})},[d,h,p,v,g,b,o,a,i,r,f,x,w,k,S,C,_,M,E,"redact",u,c,s,l,function(t){var e,n,r=ly(t[0]);return n=fy(e="to-front",r),Wp(n,(function(t){return sy(t)===e})),t},function(e){Tl.call(this,t,e)}]}var Xw={util:["redact",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,Gw,qw,Ps,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5}),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[19]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"isActiveFraction",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({isActiveFraction:t}),Hl()}},{key:"isVisible",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({isVisible:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"markupEditorWillStartInteraction",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({markupEditorWillStartInteraction:t}),Hl()}}]),e}(df),function(t){return!t.duration}]};function Yw(t){var e,n,r=(ni(t[31].label)?t[31].label(t[1]):t[31].label)+"";return{c:function(){e=el("span"),n=rl(r)},m:function(t,r){Qs(t,e,r),Ys(e,n)},p:function(t,e){2&e[0]|1&e[1]&&r!==(r=(ni(t[31].label)?t[31].label(t[1]):t[31].label)+"")&&fl(n,r)},d:function(t){t&&tl(e)}}}function Kw(t){var e,n,r,i=(t[11](t[31].value)||"")+"",o=t[31].label&&Yw(t);return{c:function(){e=el("div"),n=new pl(!1),r=il(),o&&o.c(),n.a=r,sl(e,"slot","option")},m:function(t,a){Qs(t,e,a),n.m(i,e),Ys(e,r),o&&o.m(e,null)},p:function(t,r){1&r[1]&&i!==(i=(t[11](t[31].value)||"")+"")&&n.p(i),t[31].label?o?o.p(t,r):((o=Yw(t)).c(),o.m(e,null)):o&&(o.d(1),o=null)},d:function(t){t&&tl(e),o&&o.d()}}}function Jw(t){var e,n;return e=new dm({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[Kw,function(t){return{31:t.option}},function(t){return[0,t.option?1:0]}]},$$scope:{ctx:t}}}),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};2&n[0]&&(r.locale=t[1]),4&n[0]&&(r.options=t[2]),16&n[0]&&(r.selectedIndex=t[4]),2&n[0]|3&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function Qw(t){var e,n,r;return n=new Qp({props:{elasticity:t[5],$$slots:{default:[Jw]},$$scope:{ctx:t}}}),{c:function(){e=el("div"),cf(n.$$.fragment),sl(e,"slot","footer"),sl(e,"style",t[3])},m:function(t,i){Qs(t,e,i),sf(n,e,null),r=!0},p:function(t,i){var o={};32&i[0]&&(o.elasticity=t[5]),22&i[0]|2&i[1]&&(o.$$scope={dirty:i,ctx:t}),n.$set(o),(!r||8&i[0])&&sl(e,"style",t[3])},i:function(t){r||(Yl(n.$$.fragment,t),r=!0)},o:function(t){Kl(n.$$.fragment,t),r=!1},d:function(t){t&&tl(e),lf(n)}}}function tk(t){var e,n;return(e=new kb({props:{$$slots:{footer:[Qw]},$$scope:{ctx:t}}})).$on("measure",t[22]),{c:function(){cf(e.$$.fragment)},m:function(t,r){sf(e,t,r),n=!0},p:function(t,n){var r={};62&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Yl(e.$$.fragment,t),n=!0)},o:function(t){Kl(e.$$.fragment,t),n=!1},d:function(t){lf(e,t)}}}function ek(t,e,n){var r,i,o,a,u,c,s,l,f,d,h=Ss,p=function(){return h(),h=Rs(v,(function(t){return n(17,c=t)})),v};t.$$.on_destroy.push((function(){return h()}));var v=e.isActive;p();var m=e.stores,g=e.locale,y=void 0===g?{}:g,b=e.fillOptions,$=void 0===b?[]:b,x=function t(e){return e.map((function(e){return function(t){return lu(t)&&ei(t[0])&&lu(t[1])}(e)?[e[0],t(e[1]),e[2]]:function(t){return[Array.isArray(t)&&3===t.length?[].concat(t,[1]):t,void 0,{disabled:!1}]}(e)}))},w=El("elasticityMultiplier");Ls(t,w,(function(t){return n(21,d=t)}));var k=m,S=k.history,C=k.animation,_=k.scrollElasticity,M=k.imageBackgroundColor,E=k.imageBackgroundImage,T=k.allowPan,I=k.allowZoom,P=k.allowZoomControls;Ls(t,C,(function(t){return n(18,s=t)})),Ls(t,M,(function(t){return n(20,f=t)})),Ls(t,E,(function(t){return n(19,l=t)}));var R=_h(s?20:0);return Ls(t,R,(function(t){return n(16,u=t)})),t.$$set=function(t){"isActive"in t&&p(n(0,v=t.isActive)),"stores"in t&&n(14,m=t.stores),"locale"in t&&n(1,y=t.locale),"fillOptions"in t&&n(15,$=t.fillOptions)},t.$$.update=function(){32768&t.$$.dirty[0]&&n(2,r=x($)),131072&t.$$.dirty[0]&&T.set(c),131072&t.$$.dirty[0]&&I.set(c),131072&t.$$.dirty[0]&&P.set(c),2097152&t.$$.dirty[0]&&n(5,i=d*_),1572868&t.$$.dirty[0]&&n(4,o=r.findIndex((function(t){var e=t[0];return l?e===l:Array.isArray(e)?Bf(e,f):void 0}))||0),393216&t.$$.dirty[0]&&s&&R.set(c?0:20),65536&t.$$.dirty[0]&&n(3,a=u?"transform: translateY("+u+"px)":void 0)},[v,y,r,a,o,i,w,C,M,E,function(t){var e=t.value;ei(e)&&(Vs(M,f=void 0,f),Vs(E,l=e,l)),lu(e)&&(Vs(M,f=e,f),Vs(E,l=void 0,l)),S.write()},function(t){if(ei(t))return'<div class="PinturaFillTile"><img src="'+t+'" alt="" width="48" height="64"/></div>';if(lu(t)){var e=t.map((function(t,e){return e<3?Math.round(255*t):t})),n=e[0],r=e[1],i=e[2],o=e[3];return'<div class="PinturaFillTile" data-transparent="'+(o<1)+'"><div style="background-color:rgba('+n+","+r+","+i+","+o+')"></div></div>'}return"<div></div>"},R,"fill",m,$,u,c,s,l,f,d,function(e){Tl.call(this,t,e)}]}var nk={util:["fill",function(t){function e(e){var n;return ff(pr(n=t.call(this)||this),e,ek,tk,Ps,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1]),n}return gr(e,t),hr(e,[{key:"name",get:function(){return this.$$.ctx[13]}},{key:"isActive",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({isActive:t}),Hl()}},{key:"stores",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({stores:t}),Hl()}},{key:"locale",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({locale:t}),Hl()}},{key:"fillOptions",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({fillOptions:t}),Hl()}}]),e}(df),function(t){return!t.duration}]},rk='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',ik='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>',ok={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:function(t){return t.join(", ")+" not supported on this browser"},labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:rk,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:rk,statusLabelLoadImage:function(t){return t&&t.task?t.error?"IMAGE_TOO_SMALL"===t.error.code?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":"blob-to-bitmap"===t.task?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image"},statusLabelProcessImage:function(t){if(t&&t.task)return"store"===t.task?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}},ak={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+ik,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+ik,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+ik,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'},uk=function(t,e){var n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach((function(r){n[r].get?Object.defineProperty(e,r,{get:function(){return t[r]},set:function(e){return t[r]=e}}):e[r]=t[r]}))},ck=function(t){var e={},n=_u(),r=n.sub,i=n.pub;!Dr()||document.doctype;var o=Jf();uk(o,e);var a=function(t,e){var n={},r=new Kg({target:t,props:{stores:e,pluginComponents:Array.from(ry)}}),i=!1,o=function t(){i||(Dr()&&window.removeEventListener("pagehide",t),r&&(i=!0,r.$destroy()))};Yg||(Yg=new Set(yp(Kg).filter((function(t){return!Qg.includes(t)})))),Yg.forEach((function(t){Object.defineProperty(n,t,{get:function(){return r[t]},set:ty.includes(t)?function(e){r[t]=Object.assign({},r[t],e)}:function(e){return r[t]=e}})})),Object.defineProperty(n,"previewImageData",{get:function(){return r.imagePreviewCurrent}}),ey.forEach((function(t){var e=ny[t],i=e[0];Object.defineProperty(n,t,{get:function(){return r.pluginInterface[i][t]},set:function(n){var i=e.reduce((function(e,i){var o;return e[i]=Object.assign({},r.pluginOptions[i],((o={})[t]=n,o)),e}),{});r.pluginOptions=Object.assign({},r.pluginOptions,i)}})})),Object.defineProperty(n,"element",{get:function(){return r.root},set:function(){}});var a=r.history;return Mf(n,{on:function(t,e){if(i)return function(){};if(/undo|redo|revert|writehistory/.test(t))return a.on(t,e);var n=[r.sub(t,e),r.$on(t,(function(t){return e(t instanceof CustomEvent&&!t.detail?void 0:t)}))].filter(Boolean);return function(){return n.forEach((function(t){return t()}))}},updateImagePreview:function(t){r.imagePreviewSrc=t},close:function(){return!i&&r.pub("close")},destroy:o}),Object.defineProperty(n,"history",{get:function(){return{undo:function(){return a.undo()},redo:function(){return a.redo()},revert:function(){return a.revert()},get:function(){return a.get()},getCollapsed:function(){return a.get().splice(0,a.index+1)},set:function(t){return a.set(t)},write:function(t){return a.write(t)},get length(){return a.length()},get index(){return a.index},set index(t){a.index=t}}}}),Dr()&&window.addEventListener("pagehide",o),n}(t,o.stores);uk(a,e);var u=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((function(t){return a.on(t,(function(e){var n=o[t](e&&e.detail);n instanceof Promise&&n.catch(Pr)}))})),c=function(t,e){var n=r(t,e),i=o.on(t,e),u=a.on(t,e);return function(){n(),i(),u()}};e.handleEvent=Pr;var s=oy.map((function(t){return c(t,(function(n){return e.handleEvent(t,n)}))}));return Mf(e,{on:c,updateImage:function(t){return new Promise((function(n,r){var i=e.history.get(),a=e.history.index,u=e.imageState;o.loadImage(t).then((function(t){e.history.set(i),e.history.index=a,e.imageState=u,n(t)})).catch(r)}))},close:function(){i("close")},destroy:function(){[].concat(u,s).forEach((function(t){return t()})),a.destroy(),o.destroy(),i("destroy")}}),setTimeout((function(){return i("init",e)}),0),e},sk=(Dr()&&HTMLElement,"pintura-editor"),lk=function(t,e){void 0===e&&(e={});var n=ei(t)?document.querySelector(t):t;if(la(n)){e.class=e.class?sk+" "+e.class:sk;var r=ck(n);return Object.assign(r,e)}};tf.document,tf.window;var fk=function(t,e,n,r){var i,o=Bi(e.x-t.x,e.y-t.y),a=Zi(o),u=5*n;i=r?.5*u:Math.ceil(.5*(u-1));var c=Qi(Vi(a),i);return{anchor:Vi(t),offset:c,normal:a,solid:r,size:u,sizeHalf:i}},dk=function(t,e){var n=t.anchor,r=t.solid,i=t.normal,o=t.offset,a=t.size,u=t.sizeHalf,c=t.strokeWidth,s=t.strokeColor,l=n.x,f=n.y,d=Qi(Vi(i),a),h=Bi(l+d.x,f+d.y);if(Qi(d,.55),r){Yi(e,o);var p=Qi(Vi(i),.5*u);return[{points:[Bi(l-p.x,f-p.y),Bi(h.x-d.y,h.y+d.x),Bi(h.x+d.y,h.y-d.x)],pathClose:!0,backgroundColor:s}]}var v=Qi(function(t){var e=t.x;return t.x=-t.y,t.y=e,t}(Vi(i)),.5),m=Bi(l-v.x,f-v.y),g=Bi(l+v.x,f+v.y);return[{points:[Bi(h.x+d.y,h.y-d.x),m,Bi(l,f),g,Bi(h.x-d.y,h.y+d.x)],pathClose:!1,strokeWidth:c,strokeColor:s}]},hk=function(t,e){var n=t.anchor,r=t.solid,i=t.offset,o=t.normal,a=t.sizeHalf,u=t.strokeWidth,c=t.strokeColor;return Yi(e,i),r&&Yi(e,Hi(Vi(o))),[{x:n.x,y:n.y,rx:a,ry:a,backgroundColor:r?c:void 0,strokeWidth:r?void 0:u,strokeColor:r?void 0:c}]},pk=function(t){var e=t.anchor,n=t.offset,r=t.strokeWidth,i=t.strokeColor;return[{points:[Bi(e.x-n.y,e.y+n.x),Bi(e.x+n.y,e.y-n.x)],strokeWidth:r,strokeColor:i}]},vk=function(t,e){var n,r=t.anchor,i=t.solid,o=t.offset,a=t.normal,u=t.sizeHalf,c=t.strokeWidth,s=t.strokeColor;return Yi(e,o),[{x:r.x-u,y:r.y-u,width:2*u,height:2*u,rotation:(n=a,Math.atan2(n.y,n.x)),backgroundColor:i?s:void 0,strokeWidth:i?void 0:c,strokeColor:i?void 0:s}]},mk=function(t,e){var n=parseFloat(t)*e;return ei(t)?n+"%":n},gk=function(t,e){return ei(t)?Nc(t,e):t},yk=function(t){return[Object.assign({},t,{frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?mk(t.frameSize,2):"2.5%",frameRadius:t.frameRound?mk(t.frameSize,2):0})]},bk=function(t,e){var n=t.width,r=t.height,i=t.frameImage,o=t.frameSize,a=void 0===o?"15%":o,u=t.frameOutset,c=void 0===u?0:u,s=t.frameSlices,l=void 0===s?{x1:.15,y1:.15,x2:.85,y2:.85}:s,f=e.isPreview;if(!i)return[];var d=Math.sqrt(n*r),h=gk(a,d),p=f?h:Math.round(h),v=p,m=gk(c,d),g=2*m,y=l.x1,b=l.x2,$=l.y1,x=l.y2,w={x0:0,y0:0,x1:p,y1:v,x2:n-p,y2:r-v,x3:n,y3:r,cw:p,ch:v,ew:n-p-p,eh:r-v-v},k=f?1:0,S=2*k,C=m>0,_={expandsCanvas:C,width:w.cw,height:w.ch,backgroundImage:i};return[{expandsCanvas:C,x:w.x1-k-m,y:w.y0-m,width:w.ew+S+g,height:w.ch,backgroundCorners:[{x:y,y:0},{x:b,y:0},{x:b,y:$},{x:y,y:$}],backgroundImage:i},{expandsCanvas:C,x:w.x1-k-m,y:w.y2+m,width:w.ew+S+g,height:w.ch,backgroundCorners:[{x:y,y:x},{x:b,y:x},{x:b,y:1},{x:y,y:1}],backgroundImage:i},{expandsCanvas:C,x:w.x0-m,y:w.y1-k-m,width:w.cw,height:w.eh+S+g,backgroundCorners:[{x:0,y:$},{x:y,y:$},{x:y,y:x},{x:0,y:x}],backgroundImage:i},{expandsCanvas:C,x:w.x2+m,y:w.y1-k-m,width:w.cw,height:w.eh+S+g,backgroundCorners:[{x:b,y:$},{x:1,y:$},{x:1,y:x},{x:b,y:x}],backgroundImage:i},Object.assign({},_,{x:w.x0-m,y:w.y0-m,backgroundCorners:[{x:0,y:0},{x:y,y:0},{x:y,y:$},{x:0,y:$}]}),Object.assign({},_,{x:w.x2+m,y:w.y0-m,backgroundCorners:[{x:b,y:0},{x:1,y:0},{x:1,y:$},{x:b,y:$}]}),Object.assign({},_,{x:w.x2+m,y:w.y2+m,backgroundCorners:[{x:b,y:x},{x:1,y:x},{x:1,y:1},{x:b,y:1}]}),Object.assign({},_,{x:w.x0-m,y:w.y2+m,backgroundCorners:[{x:0,y:x},{x:y,y:x},{x:y,y:1},{x:0,y:1}]})]},$k=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=t.frameInset,u=void 0===a?"3.5%":a,c=t.frameSize,s=void 0===c?".25%":c,l=t.frameColor,f=void 0===l?[1,1,1]:l,d=t.frameOffset,h=void 0===d?"5%":d,p=t.frameAmount,v=void 0===p?1:p,m=t.frameRadius,g=void 0===m?0:m,y=t.expandsCanvas,b=void 0!==y&&y,$=e.isPreview,x=Math.sqrt(i*o),w=gk(s,x),k=gk(u,x),S=gk(h,x),C=0;$||(w=Math.max(1,Math.round(w)),C=w%2==0?0:.5);var _=gk(mk(g,v),x);return new Array(v).fill(void 0).map((function(t,e){var a=S*e,u=n+k+a,c=r+k+a,s=n+i-k-a,l=r+o-k-a;return $||(u=Math.round(u),c=Math.round(c),s=Math.round(s),l=Math.round(l)),{x:u+C,y:c+C,width:s-u,height:l-c,cornerRadius:_>0?_-a:0,strokeWidth:w,strokeColor:f,expandsCanvas:b}}))},xk=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=t.frameSize,u=void 0===a?".25%":a,c=t.frameOffset,s=void 0===c?0:c,l=t.frameInset,f=void 0===l?"2.5%":l,d=t.frameColor,h=void 0===d?[1,1,1]:d,p=e.isPreview,v=Math.sqrt(i*o),m=gk(u,v),g=gk(f,v),y=gk(s,v),b=0;p||(m=Math.max(1,Math.round(m)),g=Math.round(g),y=Math.round(y),b=m%2==0?0:.5);var $=y-g,x=n+g+b,w=r+g+b,k=n+i-g-b,S=r+o-g-b;return[{points:[Bi(x+$,w),Bi(k-$,w)]},{points:[Bi(k,w+$),Bi(k,S-$)]},{points:[Bi(k-$,S),Bi(x+$,S)]},{points:[Bi(x,S-$),Bi(x,w+$)]}].map((function(t){return t.strokeWidth=m,t.strokeColor=h,t}))},wk=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=t.frameSize,u=void 0===a?".25%":a,c=t.frameInset,s=void 0===c?"2.5%":c,l=t.frameLength,f=void 0===l?"2.5%":l,d=t.frameColor,h=void 0===d?[1,1,1]:d,p=e.isPreview,v=Math.sqrt(i*o),m=gk(u,v),g=gk(s,v),y=gk(f,v),b=0;p||(m=Math.max(1,Math.round(m)),g=Math.round(g),y=Math.round(y),b=m%2==0?0:.5);var $=n+g+b,x=r+g+b,w=n+i-g-b,k=r+o-g-b;return[{points:[Bi($,x+y),Bi($,x),Bi($+y,x)]},{points:[Bi(w-y,x),Bi(w,x),Bi(w,x+y)]},{points:[Bi(w,k-y),Bi(w,k),Bi(w-y,k)]},{points:[Bi($+y,k),Bi($,k),Bi($,k-y)]}].map((function(t){return t.strokeWidth=m,t.strokeColor=h,t}))},kk=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=t.frameColor,u=void 0===a?[1,1,1]:a,c=e.isPreview,s=Math.sqrt(i*o),l=.1*s,f=.2*s,d=0,h=.5*l;return c?d=1:f=Math.ceil(f),u.length=3,[{id:"border",x:n-h+d,y:r-h+d,width:i+l-2*d,height:o+f-2*d,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:l,frameColor:u,expandsCanvas:!0},{id:"chin",x:n-h,y:o-d,width:i+l,height:f,backgroundColor:u,expandsCanvas:!0}].filter(Boolean)},Sk=function(){return function(t){return void 0===t&&(t={}),function(e){if(su(e,"lineStart")||su(e,"lineEnd")){var n=[],r=e.lineStart,i=e.lineEnd,o=e.strokeWidth,a=e.strokeColor,u=Bi(e.x1,e.y1),c=Bi(e.x2,e.y2),s=[u,c];if(r){var l=r.split("-"),f=l[0],d=l[1],h=t[f];if(h){var p=fk(u,c,o,!!d);n.push.apply(n,h(Object.assign({},p,{strokeColor:a,strokeWidth:o}),u))}}if(i){var v=i.split("-"),m=v[0],g=v[1],y=t[m];if(y){var b=fk(c,u,o,!!g);n.push.apply(n,y(Object.assign({},b,{strokeColor:a,strokeWidth:o}),c))}}return[{points:s,strokeWidth:o,strokeColor:a}].concat(n)}}}({arrow:dk,circle:hk,square:vk,bar:pk})},Ck=function(){return function(t){return void 0===t&&(t={}),function(e,n){if(su(e,"frameStyle")){var r=e.frameStyle,i=t[r];if(i)return e.frameStyle,i(fr(e,lr),n)}}}({solid:yk,hook:wk,line:$k,edge:xk,polaroid:kk,nine:bk})},_k=function(t){return function e(n,r){void 0===r&&(r={isPreview:!0});var i=t.map((function(t){var i=t(n,r);if(i)return i.map((function(t){return e(t,r)}))})).filter(Boolean).flat();return i.length?i.flat():n}},Mk=Ed,Ek=Id,Tk=function(t){void 0===t&&(t={});var e=t,n=e.blurAmount,r=e.dataSizeScalar,i=e.scrambleAmount,o=e.backgroundColor;return function(t,e){return $h(t,Object.assign({blurAmount:n,scrambleAmount:i,backgroundColor:o},e,{dataSizeScalar:r||e.dataSizeScalar}))}},Ik={markupEditorToolbar:Zy(),markupEditorToolStyles:Wy(),markupEditorShapeStyleControls:sb()},Pk=x$,Rk=E$,Ak=O$,Lk=ww,Ok=Cw,zk=Ew,Dk=Lw,Fk=Xw,jk=Zw,Bk=nk,Nk=py,Vk=hy,Hk=vy,Wk=ok,Uk=ak,Zk={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:function(t,e){var n=e?[e<1?1:.3,1===e?.85:.5,e>1?1:.3]:[.2,.3,.4];return'<g fill="currentColor">\n            <rect opacity="'+n[0]+'" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="'+n[1]+'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="'+n[2]+'" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>'},cropIconCropBoundary:function(t,e){var n=e?[.3,1,0,0]:[0,0,.3,1];return'<g fill="currentColor">\n            <rect opacity="'+n[0]+'" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="'+n[1]+'" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="'+n[2]+'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="'+n[3]+'" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>'},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},qk={fillLabel:"Fill",fillIcon:'\n    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <g transform="rotate(60, 12, 12)">\n            <rect x="4" y="4" width="14" height="16" rx="3"/>\n        </g>\n        <path d="M21 13 L21 21"></path>\n        <path d="M4.5 12.5 L19 12.5"></path>\n    </g>\n    '},Gk={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},Xk={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},Yk={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:function(t,e){return'<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 '+3*(e-1)+')" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'}},Kk={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},Jk={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},Qk={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},tS={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},eS={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},nS=lk,rS=function(t){return void 0===t&&(t=[]),_k([].concat([Ck(),Sk()],t))},iS=function(t){void 0===t&&(t={});var e,n=void 0;Array.isArray(t.imageReader)||(n=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=Ek():(e=ni(t.imageWriter)?t.imageWriter:Ek(t.imageWriter),delete t.imageWriter);var r=void 0;return ni(t.imageScrambler)||(r=t.imageScrambler,delete t.imageScrambler),{imageReader:Mk(n),imageWriter:e,imageOrienter:{read:Or,apply:Kr},imageScrambler:Tk(r)}},oS=function(t){void 0===t&&(t={}),iy.apply(void 0,[Pk,Rk,Ak,Lk,Ok,zk,Dk,Fk,jk,Bk].filter(Boolean));var e=["trim","crop","filter","finetune","annotate","decorate",t.stickers&&"sticker",t.fillOptions&&"fill","frame","redact","resize"].filter(Boolean),n=iS(t),r=Object.assign({},Wk,Uk,Zk,qk,Gk,Xk,tS,eS,Yk,Kk,Jk,Qk,t.locale);delete t.locale;var i="function"==typeof t.shapePreprocessor?t.shapePreprocessor:rS(t.shapePreprocessor);return delete t.shapePreprocessor,gf([Object.assign({},n,{shapePreprocessor:i,utils:e},Nk,Vk,Hk,Ik,{stickerStickToImage:!0,locale:r}),t])},aS=function(t){return/^on[A-Z]/.test(t)},uS=function(t){return t.substr(2).toLowerCase()},cS=function(t,e){void 0===e&&(e=void 0),(t.unsubs||[]).filter((function(t){var n=t[0];return!e||e.includes(n)})).forEach((function(t){return(0,t[1])()}))},sS=function(t,e){cS(t,function(t){return Object.keys(t).filter(aS).map(uS)}(e)),t.unsubs=Object.keys(e).filter(aS).map((function(n){var r=uS(n);return[r,t.editor.on(r,e[n])]}))};function lS(t,e){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lS(t,e)}var fS=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).elementRef=i().createRef(),n.editor=void 0,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,lS(e,n);var o=r.prototype;return o.componentDidMount=function(){if(this.elementRef.current){var t=Object.assign({},this.props);this.editor=nS(this.elementRef.current,t),sS(this,t)}},o.componentDidUpdate=function(){var t=Object.assign({},this.props);Object.assign(this.editor,t),sS(this,t)},o.componentWillUnmount=function(){this.editor&&(cS(this),this.editor.destroy(),this.editor=void 0)},o.render=function(){return i().createElement("div",{className:("PinturaRootWrapper "+(this.props.className?this.props.className:"")).trim(),ref:this.elementRef})},r}(i().Component),dS=fS,hS="fOHmgAkkFIeJPX0tN0gs",pS=function(t){var e=t.onClose,n=t.onProcess,r=t.imagePath,o=oS();return i().createElement("div",{"data-testid":"crop-editing-area",className:hS},i().createElement(dS,Object.assign({},o,{layoutDirectionPreference:"vertical",enableButtonClose:!0,enableViewTool:!0,src:r,cropSelectPresetOptions:[["Crop",[[void 0,"Custom"],[1,"Square"],[4/3,"Landscape"],[3/4,"Portrait"]]],["Size",[[[180,180],"Profile Picture"],[[1200,600],"Header Image"],[[800,400],"Timeline Photo"]]]],onClose:e,onProcess:n})))},vS=function(){return i().createElement("div",{"data-testid":"crop-editor-presets"},"Presets")},mS="RXpgsCLTs05STxMkdOId",gS=function(){return i().createElement("div",{className:mS,"data-testid":"crop-editor-topbar"},"TopBar")},yS=function(){return i().createElement("div",{"data-testid":"crop-bottom-bar"},"BottomBar")},bS="wklM5zI7aeryo_B3JCJT",$S=function(t){var e=t.imagePath,n=or().setShowImageEditor;return i().createElement("div",{"data-testid":"crop-editor",className:bS},i().createElement(gS,null),i().createElement(vS,null),i().createElement(pS,{onClose:function(){n(!1)},onProcess:function(){n(!1)},imagePath:e}),i().createElement(yS,null))},xS=n(99183),wS=function(t){return Promise.all([R().post("/modifications/feedback",{feedback:t}),R().post("/components/asset-mod/api/feedback",{feedback:t})])},kS="Inb7TKRt9k7YLXov8ZU1",SS=function(t){var e=t.handleClose;return i().createElement("button",{className:kS,type:"button",onClick:e,"data-testid":"close-button"},i().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 98 98"},i().createElement("g",null,i().createElement("polygon",{points:"78.2 23.3 75 20.1 48.7 46.4 22.5 20.1 19.2 23.3 45.5 49.6 18.3 76.8 21.5 80.1 48.7 52.8 76 80.1 79.2 76.8 52 49.6 78.2 23.3",stroke:"#353838",strokeWidth:"1.25949"}))))},CS="rmWCjx74JfgAJpWENmEQ",_S=function(t){var e=t.comments,n=t.handleComment,r=t.text;return i().createElement("div",{className:CS,"data-testid":"comments"},i().createElement("label",{htmlFor:"comments"},r),i().createElement("textarea",{"data-testid":"comments-textarea",id:"comments",name:"comments",value:e,onChange:n}))},MS={confirmationContainer:"_G6R5MwJZJV0O8vHrYrE",right:"_161hZLIPzFhJq0lcffo","bottom-left":"UWzTtMtFEJjayzFTzdrh"},ES=function(t){var e=t.text,n=t.setShowConfirmation,o=t.placement,a=void 0===o?"right":o;return(0,r.useEffect)((function(){var t=setTimeout((function(){n(!1)}),3e3);return function(){return clearTimeout(t)}}),[]),i().createElement("div",{className:Gt()(MS.confirmationContainer,MS[a]),"data-testid":"confirmation"},i().createElement(XS,null),i().createElement("p",null,e),i().createElement(SS,{handleClose:function(){n(!1)}}))},TS=n(31421),IS=function(){var t=(0,TS.NW)(),e=(0,Q.T)();return i().createElement(cn.Z,null,e("view_privacy_policy_and_terms_of_use",{links:[{href:t.cleanPath("/legal/privacy-policy"),target:"_blank"},{href:t.cleanPath("/legal/terms-of-use"),target:"_blank"}]}))},PS={contactContainer:"iZwufFmyi6vRissLLw4l"},RS=function(t){var e=t.handleCheckbox,n=t.canBeEmailedText;return i().createElement("div",{className:PS.contactContainer,"data-testid":"contact"},i().createElement("input",{type:"checkbox",id:"contact","data-testid":"contact-checkbox",name:"contact",onClick:e}),i().createElement("label",{htmlFor:"contact",className:PS.contactLabel},n),i().createElement("p",null,i().createElement(IS,null)))},AS="f_NJcwHjAxV_tvJN32r7",LS="gDVju8ZkqaXupSWWbzxS",OS=function(t){var e=t.comments,n=t.handleComment,r=t.handleReasonSelection,o=t.text,a=o.elementsNotRemoved,u=o.elementsWereErased,c=o.featureNotEasyToUse,s=o.itTookTooLong,l=o.other,f=o.selectReasonForRating;return i().createElement("fieldset",{className:AS},i().createElement("legend",null,f),i().createElement("input",{type:"checkbox",name:"rating-detail",id:"elementNotRemoved",value:"Elements were not properly removed",onChange:r}),i().createElement("label",{htmlFor:"elementNotRemoved"},a),i().createElement("input",{type:"checkbox",name:"rating-detail",id:"elementErased",value:"Essential elements were erased",onChange:r}),i().createElement("label",{htmlFor:"elementErased"},u),i().createElement("input",{id:"featureNotEasyToUse",name:"rating-detail",type:"checkbox",value:"Feature isn't easy to use",onChange:r}),i().createElement("label",{htmlFor:"featureNotEasyToUse"},c),i().createElement("input",{type:"checkbox",name:"rating-detail",id:"itTookTooLong",value:"It took longer than expected",onChange:r}),i().createElement("label",{htmlFor:"itTookTooLong"},s),i().createElement("label",{className:LS,htmlFor:"other"},l),i().createElement("textarea",{id:"other",name:"rating-detail",placeholder:l,value:e,onChange:n}))},zS="uYHdc7ZNx9gPMRDCfTMv",DS="l84fFHNpstWDxbim7KIn",FS=function(t){var e=t.activeIcon,n=t.handleRating,r=t.Icon,o=t.id,a=t.text,u=t.value,c=e===o;return i().createElement("li",{key:a,className:DS},i().createElement("input",{type:"radio",id:o,"data-testid":"list-item",name:"rating",value:u,onClick:n}),i().createElement("label",{htmlFor:o},i().createElement(r,{active:c}),i().createElement("span",null,a)))},jS=function(t){var e=t.activeIcon,n=t.handleRating,r=t.iconText,o=r.veryPoor,a=r.poor,u=r.fair,c=r.good,s=r.great;return i().createElement("div",{className:zS,"data-testid":"rating-list"},i().createElement("ul",null,i().createElement(FS,{activeIcon:e,handleRating:n,Icon:WS,id:"very-poor",text:o,value:"1"}),i().createElement(FS,{activeIcon:e,handleRating:n,Icon:US,id:"poor",text:a,value:"2"}),i().createElement(FS,{activeIcon:e,handleRating:n,Icon:ZS,id:"fair",text:u,value:"3"}),i().createElement(FS,{activeIcon:e,handleRating:n,Icon:qS,id:"good",text:c,value:"4"}),i().createElement(FS,{activeIcon:e,handleRating:n,Icon:GS,id:"great",text:s,value:"5"})))},BS="U3b53vGfbsDm5NuUUPbg",NS="nRJd13MqByY9qqAw0J92",VS="Sj0FtIO6UyKZuXq443Gu",HS="kPBPKy29Y_j4TZCRvDwH",WS=function(t){var e=t.active;return i().createElement("svg",{className:e?BS:VS,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 19.125C2.25 9.80519 9.80519 2.25 19.125 2.25C28.4448 2.25 36 9.80519 36 19.125C36 28.4448 28.4448 36 19.125 36C9.80519 36 2.25 28.4448 2.25 19.125ZM19.125 0C8.56255 0 0 8.56255 0 19.125C0 29.6874 8.56255 38.25 19.125 38.25C29.6874 38.25 38.25 29.6874 38.25 19.125C38.25 8.56255 29.6874 0 19.125 0ZM14.25 15.375C14.25 16.4105 13.4105 17.25 12.375 17.25C11.3395 17.25 10.5 16.4105 10.5 15.375C10.5 14.4587 11.1573 13.6959 12.0262 13.5324L9.99072 12.3572C9.51243 12.0811 9.34855 11.4695 9.6247 10.9912C9.90084 10.5129 10.5124 10.349 10.9907 10.6252L13.8724 12.2889C14.3506 12.565 14.5145 13.1766 14.2384 13.6549C14.1203 13.8594 13.9409 14.0064 13.7368 14.0862C14.0549 14.4222 14.25 14.8758 14.25 15.375ZM27.75 15.375C27.75 16.4105 26.9105 17.25 25.875 17.25C24.8395 17.25 24 16.4105 24 15.375C24 15.0175 24.1001 14.6833 24.2738 14.399C24.01 14.3402 23.7708 14.1753 23.6251 13.9229C23.349 13.4446 23.5128 12.833 23.9911 12.5568L26.8728 10.8931C27.3511 10.617 27.9626 10.7809 28.2388 11.2592C28.5149 11.7375 28.3511 12.349 27.8728 12.6252L26.2811 13.5441C27.1214 13.7297 27.75 14.4789 27.75 15.375ZM14.0625 23.8619C15.6021 22.9754 17.3476 22.5088 19.1242 22.5088C20.9008 22.5088 22.6463 22.9754 24.1859 23.8619C25.7255 24.7485 27.0053 26.0238 27.8972 27.5603C28.2091 28.0977 28.0263 28.7861 27.489 29.0981C26.9516 29.41 26.2632 29.2272 25.9512 28.6898C25.2572 27.4941 24.2613 26.5017 23.0632 25.8118C21.8651 25.1219 20.5068 24.7588 19.1242 24.7588C17.7417 24.7588 16.3834 25.1219 15.1853 25.8118C13.9871 26.5017 12.9912 27.4941 12.2972 28.6898C11.9853 29.2272 11.2968 29.41 10.7595 29.0981C10.2221 28.7861 10.0393 28.0977 10.3512 27.5603C11.2431 26.0238 12.5229 24.7485 14.0625 23.8619Z",fill:"#ADB9BA"}))},US=function(t){var e=t.active;return i().createElement("svg",{className:e?BS:VS,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 19.125C2.25 9.80519 9.80519 2.25 19.125 2.25C28.4448 2.25 36 9.80519 36 19.125C36 28.4448 28.4448 36 19.125 36C9.80519 36 2.25 28.4448 2.25 19.125ZM19.125 0C8.56255 0 0 8.56255 0 19.125C0 29.6874 8.56255 38.25 19.125 38.25C29.6874 38.25 38.25 29.6874 38.25 19.125C38.25 8.56255 29.6874 0 19.125 0ZM19.1244 22.5088C17.3478 22.5088 15.6024 22.9754 14.0628 23.862C12.5231 24.7485 11.2433 26.0238 10.3515 27.5604C10.0396 28.0977 10.2223 28.7862 10.7597 29.0981C11.2971 29.41 11.9855 29.2272 12.2974 28.6899C12.9915 27.4942 13.9874 26.5017 15.1855 25.8118C16.3836 25.1219 17.7419 24.7588 19.1244 24.7588C20.507 24.7588 21.8653 25.1219 23.0634 25.8118C24.2615 26.5017 25.2574 27.4942 25.9515 28.6899C26.2634 29.2272 26.9518 29.41 27.4892 29.0981C28.0266 28.7862 28.2093 28.0977 27.8974 27.5604C27.0056 26.0238 25.7258 24.7485 24.1861 23.862C22.6465 22.9754 20.9011 22.5088 19.1244 22.5088ZM14.25 15.375C14.25 16.4105 13.4105 17.25 12.375 17.25C11.3395 17.25 10.5 16.4105 10.5 15.375C10.5 14.3395 11.3395 13.5 12.375 13.5C13.4105 13.5 14.25 14.3395 14.25 15.375ZM27.75 15.375C27.75 16.4105 26.9105 17.25 25.875 17.25C24.8395 17.25 24 16.4105 24 15.375C24 14.3395 24.8395 13.5 25.875 13.5C26.9105 13.5 27.75 14.3395 27.75 15.375Z",fill:"#ADB9BA"}))},ZS=function(t){var e=t.active;return i().createElement("svg",{className:e?NS:HS,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.125 2.25C9.80519 2.25 2.25 9.80519 2.25 19.125C2.25 28.4448 9.80519 36 19.125 36C28.4448 36 36 28.4448 36 19.125C36 9.80519 28.4448 2.25 19.125 2.25ZM0 19.125C0 8.56255 8.56255 0 19.125 0C29.6874 0 38.25 8.56255 38.25 19.125C38.25 29.6874 29.6874 38.25 19.125 38.25C8.56255 38.25 0 29.6874 0 19.125ZM10.5 25.125C10.5 24.5037 11.0037 24 11.625 24H26.625C27.2463 24 27.75 24.5037 27.75 25.125C27.75 25.7463 27.2463 26.25 26.625 26.25H11.625C11.0037 26.25 10.5 25.7463 10.5 25.125ZM14.25 15.375C14.25 16.4105 13.4105 17.25 12.375 17.25C11.3395 17.25 10.5 16.4105 10.5 15.375C10.5 14.3395 11.3395 13.5 12.375 13.5C13.4105 13.5 14.25 14.3395 14.25 15.375ZM27.75 15.375C27.75 16.4105 26.9105 17.25 25.875 17.25C24.8395 17.25 24 16.4105 24 15.375C24 14.3395 24.8395 13.5 25.875 13.5C26.9105 13.5 27.75 14.3395 27.75 15.375Z",fill:"#ADB9BA"}))},qS=function(t){var e=t.active;return i().createElement("svg",{className:e?NS:HS,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.125 2.25C9.80519 2.25 2.25 9.80519 2.25 19.125C2.25 28.4448 9.80519 36 19.125 36C28.4448 36 36 28.4448 36 19.125C36 9.80519 28.4448 2.25 19.125 2.25ZM0 19.125C0 8.56255 8.56255 0 19.125 0C29.6874 0 38.25 8.56255 38.25 19.125C38.25 29.6874 29.6874 38.25 19.125 38.25C8.56255 38.25 0 29.6874 0 19.125ZM12.375 17.25C13.4105 17.25 14.25 16.4105 14.25 15.375C14.25 14.3395 13.4105 13.5 12.375 13.5C11.3395 13.5 10.5 14.3395 10.5 15.375C10.5 16.4105 11.3395 17.25 12.375 17.25ZM25.875 17.25C26.9105 17.25 27.75 16.4105 27.75 15.375C27.75 14.3395 26.9105 13.5 25.875 13.5C24.8395 13.5 24 14.3395 24 15.375C24 16.4105 24.8395 17.25 25.875 17.25ZM12.2977 23.0602C11.9858 22.5229 11.2973 22.3401 10.76 22.652C10.2226 22.9639 10.0398 23.6524 10.3517 24.1898C11.2436 25.7263 12.5234 27.0016 14.063 27.8882C15.6026 28.7747 17.3481 29.2413 19.1247 29.2413C20.9013 29.2413 22.6468 28.7747 24.1864 27.8882C25.726 27.0016 27.0058 25.7263 27.8977 24.1898C28.2096 23.6524 28.0268 22.9639 27.4895 22.652C26.9521 22.3401 26.2636 22.5229 25.9517 23.0602C25.2577 24.256 24.2618 25.2484 23.0637 25.9383C21.8655 26.6282 20.5072 26.9913 19.1247 26.9913C17.7422 26.9913 16.3839 26.6282 15.1858 25.9383C13.9876 25.2484 12.9917 24.256 12.2977 23.0602Z",fill:"#ADB9BA"}))},GS=function(t){var e=t.active;return i().createElement("svg",{className:e?NS:HS,width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.125 20C3.125 10.6802 10.6802 3.125 20 3.125C29.3198 3.125 36.875 10.6802 36.875 20C36.875 29.3198 29.3198 36.875 20 36.875C10.6802 36.875 3.125 29.3198 3.125 20ZM20 0.875C9.43755 0.875 0.875 9.43755 0.875 20C0.875 30.5624 9.43755 39.125 20 39.125C30.5624 39.125 39.125 30.5624 39.125 20C39.125 9.43755 30.5624 0.875 20 0.875ZM12 23.875C11.619 23.875 11.2639 24.0679 11.0564 24.3874C10.8489 24.707 10.8173 25.1099 10.9724 25.4579C11.8527 27.4334 13.1319 29.1098 14.7093 30.2928C16.2908 31.4789 18.1159 32.125 20 32.125C21.8841 32.125 23.7092 31.4789 25.2907 30.2928C26.8681 29.1098 28.1473 27.4334 29.0276 25.4579C29.1827 25.1099 29.1511 24.707 28.9436 24.3874C28.7361 24.0679 28.381 23.875 28 23.875H12ZM16.0593 28.4928C15.2444 27.8817 14.5066 27.0819 13.8844 26.125H26.1156C25.4934 27.0819 24.7556 27.8817 23.9407 28.4928C22.7143 29.4126 21.356 29.875 20 29.875C18.644 29.875 17.2857 29.4126 16.0593 28.4928ZM14 16.125C12.9645 16.125 12.125 16.9645 12.125 18C12.125 18.6213 11.6213 19.125 11 19.125C10.3787 19.125 9.875 18.6213 9.875 18C9.875 15.7218 11.7218 13.875 14 13.875C16.2782 13.875 18.125 15.7218 18.125 18C18.125 18.6213 17.6213 19.125 17 19.125C16.3787 19.125 15.875 18.6213 15.875 18C15.875 16.9645 15.0355 16.125 14 16.125ZM24.125 18C24.125 16.9645 24.9645 16.125 26 16.125C27.0355 16.125 27.875 16.9645 27.875 18C27.875 18.6213 28.3787 19.125 29 19.125C29.6213 19.125 30.125 18.6213 30.125 18C30.125 15.7218 28.2782 13.875 26 13.875C23.7218 13.875 21.875 15.7218 21.875 18C21.875 18.6213 22.3787 19.125 23 19.125C23.6213 19.125 24.125 18.6213 24.125 18Z",fill:"#ADB9BA"}))},XS=function(){return i().createElement("svg",{"data-testid":"confirmation-icon",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("g",{clipPath:"url(#clip0_839_18929)"},i().createElement("path",{d:"M20.4983 32.9422L11.7803 24.2201L13.5376 22.4641L20.4983 29.4288L34.0099 15.9199L35.7672 17.6759L20.4983 32.9422Z",fill:"#02A388"}),i().createElement("path",{d:"M46.9999 23.9999C46.9999 36.7024 36.7024 46.9999 23.9999 46.9999C11.2974 46.9999 0.999902 36.7024 0.999902 23.9999C0.999902 11.2974 11.2974 0.999902 23.9999 0.999902C36.7024 0.999902 46.9999 11.2974 46.9999 23.9999Z",stroke:"#02A388",strokeWidth:"1.2"})),i().createElement("defs",null,i().createElement("clipPath",{id:"clip0_839_18929"},i().createElement("rect",{width:"48",height:"48",fill:"white"}))))},YS={container:"ddezKH91fQgGYdc1vWcx",right:"miyqu64Ij5NYZ_W45cKA","bottom-left":"CygO7WDuW4UlOGY2NHII",textContainer:"rZFWCb1IMCtDqR15I2QS",heading:"KlV3PFZ9jPur9At_wvcu",body:"Gt53r0DR01UQdiUkbOxe",submitButton:"Sk8YxUpT3m5YWEzYd0Ca",modalEnter:"M7SheMOA6juy8krtrjTg",confirmationEnter:"eEDeAGQuhuwpeGGyP7IA",modalEnterActive:"Xv4Fkvex1TMi2xw9WxpJ",confirmationEnterActive:"_kmz5ggzWCStOeZ2Eg5O",modalExit:"PsXJHrq7pb99DIGtiyEP",confirmationExit:"M0kgvxeZo6yrL6LFfxgs",modalExitActive:"FHgamu1Gd2H3gGu5dsDP",confirmationExitActive:"b2ISOV2cwCiY8psZe9kg"};function KS(){KS=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function JS(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}var QS=["very-poor","poor","fair"],tC=function(t){var e=t.headerText,n=t.visualId,o=t.placement,a=void 0===o?"right":o,u=t.subHeaderText,c=t.assetId,s=(0,Q.T)(),l=G(),f=l.activeModifications,d=l.setActiveModifications,h=X().backgroundRemoved,p=Z().removedObjects,v=K(),m=v.showFeedbackModal,g=v.toggleFeedbackModal,y=v.toggleFeedbackBanner,b=(0,r.useState)(null),$=b[0],x=b[1],w=(0,r.useState)(!1),k=w[0],S=w[1],C=(0,r.useState)(""),_=C[0],M=C[1],E=(0,r.useState)(!1),T=E[0],I=E[1],P=(0,r.useState)(null),R=P[0],A=P[1],L=(0,r.useState)(null),O=L[0],z=L[1],D=(null==O?void 0:O.size)>0,F={veryPoor:s("very_poor"),poor:s("poor"),fair:s("fair"),good:s("good"),great:s("great")},j={elementsNotRemoved:s("elements_were_not_removed"),elementsWereErased:s("elements_were_erased"),featureNotEasyToUse:s("feature_is_not_easy_to_use"),itTookTooLong:s("it_took_longer_than_expected"),other:s(D?"additional_comments":"other_please_specify"),selectReasonForRating:s("select_the_reason_for_your_rating")},B=function(t){var e=QS.includes(t.target.id),n=!e&&O;e&&!O&&z(new Set),n&&z(null),x(t.target.id),A(t.target.value),function(t){var e={1:"ADP_modal_remove_background_feedback_very_poor_1",2:"ADP_modal_remove_background_feedback_poor_2",3:"ADP_modal_remove_background_feedback_fair_3",4:"ADP_modal_remove_background_feedback_good_4",5:"ADP_modal_remove_background_feedback_great_5"}[t]||"ADP_modal_remove_background_feedback_error";(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:e,ui_element_location:"adp_modal"}})}(t.target.value)},V=function(t){M(t.target.value)},H=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){JS(o,r,i,a,u,"next",t)}function u(t){JS(o,r,i,a,u,"throw",t)}a(void 0)}))}}(KS().mark((function t(e){var r;return KS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r={visualId:n,assetId:c,assetUrl:window.location.href,canContact:k,comments:_,rating:R,reasons:Array.from(null!=O?O:[]),modificationTypes:f},t.prev=2,t.next=5,wS(r);case 5:t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:y(),g(),I(!T),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Modal_Remove_Background_Feedback_Submit",ui_element_location:"adp_modal"}});case 16:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){m&&(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Shown",adp_selection:"ADP_remove_background_feedback",ui_element_location:"adp_modal"}})}),[m]),(0,r.useEffect)((function(){var t=[];h&&t.push("BackgroundRemoved"),p.size>0&&t.push("ObjectsRemoved"),d(t)}),[h,p]),i().createElement(i().Fragment,null,i().createElement(xS.CSSTransition,{in:T,unmountOnExit:!0,timeout:300,classNames:{enter:YS.confirmationEnter,enterActive:YS.confirmationEnterActive,exit:YS.confirmationExit,exitActive:YS.confirmationExitActive}},i().createElement(ES,{text:s("thanks_for_providing_feedback"),setShowConfirmation:I,placement:a})),i().createElement(xS.CSSTransition,{in:m,unmountOnExit:!0,timeout:300,classNames:{enter:YS.modalEnter,enterActive:YS.modalEnterActive,exit:YS.modalExit,exitActive:YS.modalExitActive}},i().createElement("div",{role:"dialog",className:Gt()(YS.container,YS[a]),"data-testid":"feedback-modal"},i().createElement("div",{className:YS.textContainer},i().createElement("p",{"data-testid":"header-text",className:YS.heading},e),i().createElement("p",{"data-testid":"sub-header-text",className:YS.body},u||"")),i().createElement(SS,{handleClose:function(){g(),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Dismiss",adp_selection:"ADP_remove_background_feedback",ui_element_location:"adp_modal"}})}}),$?i().createElement("form",{onSubmit:H,"data-testid":"feedback-form"},i().createElement(jS,{activeIcon:$,handleRating:B,iconText:F}),O?i().createElement(OS,{comments:_,handleComment:V,handleReasonSelection:function(t){var e=t.currentTarget;e.checked?O.add(e.value):O.delete(e.value),z(new Set(O))},text:j}):i().createElement(_S,{comments:_,handleComment:V,text:s("additional_comments")}),i().createElement(RS,{handleCheckbox:function(){S(!k)},canBeEmailedText:s("i_can_be_emailed_for_more_details")}),i().createElement("input",{type:"submit","data-testid":"submit-button",className:YS.submitButton,value:s("submit")})):i().createElement(jS,{activeIcon:$,handleRating:B,iconText:F}))))},eC=function(t){var e=t.className;return i().createElement("svg",{className:e,viewBox:"0 0 101 43",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"iStock-logo"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.55196 26.191H0.741194V8.29849H5.55196V26.191ZM10.1701 19.2921C11.6524 20.9137 13.9095 22.1326 16.2784 22.1326C18.4999 22.1326 20.0553 20.7661 20.0553 18.8855C20.0553 15.567 15.2437 15.1608 11.7631 13.1331C9.72738 11.9512 8.09587 10.181 8.09587 7.26465C8.09587 2.6549 12.3569 0 16.6499 0C19.2775 0 21.7214 0.627589 24.1663 2.43484L21.5751 6.1225C20.5356 5.16359 18.7964 4.42808 17.0926 4.42808C15.2071 4.42808 13.0953 5.23694 13.0953 7.22871C13.0953 11.3983 25.0547 10.1051 25.0547 18.8131C25.0547 23.385 20.9428 26.5573 16.2784 26.5573C12.7988 26.5573 9.57816 25.1217 6.91193 22.684L10.1701 19.2921ZM40.0047 26.191C39.3761 26.4106 37.9295 26.5573 37.0055 26.5573C34.1169 26.5573 32.0089 25.5984 30.7846 23.9757C29.8597 22.7588 29.4515 21.1746 29.4515 18.627V12.3564H24.4541V8.29849H29.4515V3.31853H34.2651V8.29849H40.1895V12.3564H34.2651V19.1785C34.2651 20.2894 34.449 20.9502 34.8581 21.4316C35.3364 21.9858 36.1142 22.3158 37.299 22.3158C38.0036 22.3158 38.9315 22.2083 39.2645 22.1326L40.0047 26.191ZM50.6781 7.92975C56.1184 7.92975 60.2294 12.0989 60.2294 17.2634C60.2294 22.427 56.1184 26.5573 50.6781 26.5573C45.237 26.5573 41.125 22.427 41.125 17.2634C41.125 12.0989 45.237 7.92975 50.6781 7.92975ZM50.6781 22.1326C53.4916 22.1326 55.4148 19.9558 55.4148 17.2634C55.4148 14.5697 53.4916 12.3564 50.6781 12.3564C47.8628 12.3564 45.9396 14.5697 45.9396 17.2634C45.9396 19.9558 47.8628 22.1326 50.6781 22.1326ZM79.2355 22.5382C77.1227 25.3423 74.4556 26.5573 71.0886 26.5573C65.5358 26.5573 61.4614 22.427 61.4614 17.2634C61.4614 12.0624 65.6455 7.92975 71.1261 7.92975C74.2361 7.92975 77.012 9.37013 78.6781 11.5076L75.2718 14.4953C74.3112 13.2419 72.8683 12.3564 71.1261 12.3564C68.3492 12.3564 66.2759 14.5347 66.2759 17.2634C66.2759 20.0669 68.3136 22.1326 71.2388 22.1326C73.1994 22.1326 74.7539 20.9502 75.5317 19.7716L79.2355 22.5382ZM90.0601 16.3404L99.9471 26.191H93.4664L85.875 18.4415V26.191H81.0642V0.368736H85.875V14.0921L92.0574 8.29849H98.8364L90.0601 16.3404ZM0 3.13539C0 1.40297 1.41014 0 3.14751 0C4.88587 0 6.29404 1.40297 6.29404 3.13539C6.29404 4.86487 4.88587 6.27068 3.14751 6.27068C1.41014 6.27068 0 4.86487 0 3.13539Z",fill:"white"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.911077 39.1897H1.8804V32.492H0.897461V31.4613H3.00452V34.4467C3.66629 33.7443 4.43225 33.4107 5.3774 33.4107C7.3855 33.4107 8.82142 34.9385 8.82142 36.8933C8.82142 38.8682 7.3556 40.3867 5.33931 40.3867C4.43225 40.3867 3.72579 40.0678 3.02495 39.3572V40.2407H0.911077V39.1897ZM5.3177 34.4941C4.0729 34.4941 3.00452 35.5194 3.00452 36.9298C3.00452 38.2522 4.0729 39.2991 5.30142 39.2991C6.55422 39.2991 7.61993 38.3009 7.61993 36.8689C7.61993 35.483 6.55422 34.4941 5.3177 34.4941ZM10.2789 41.3403H11.3216L11.8436 40.0409L9.68496 34.6184H8.80504V33.57H11.7785V34.6184H10.8606L12.4226 38.5791L13.9954 34.6184H13.0815V33.57H16.0428V34.6184H15.175L12.4971 41.3403H13.4246V42.386H10.2789V41.3403ZM23.0176 35.8422H28.3706V40.2407H27.4188V38.8548C26.4507 39.9057 25.3456 40.4136 24.0141 40.4136C21.3728 40.4136 19.499 38.3576 19.499 35.7909C19.499 33.4188 21.4108 31.2844 24.1293 31.2844C25.145 31.2844 25.9544 31.5667 26.8114 32.2003V31.4613H27.7754V33.816H26.6853C25.9274 32.9406 25.1015 32.5163 24.0602 32.5163C22.1769 32.5163 20.7871 34.0388 20.7871 35.83C20.7871 37.755 22.2258 39.2006 24.044 39.2006C25.4121 39.2006 26.6392 38.3009 27.0472 36.9012H23.0176V35.8422ZM36.1752 38.128C35.6057 39.5842 34.3772 40.3974 32.9048 40.3974C30.9454 40.3974 29.4093 38.8548 29.4093 36.9134C29.4093 34.9304 31.0323 33.3917 32.8682 33.3917C34.8248 33.3917 36.3867 34.9128 36.3867 36.9636C36.3867 37.0634 36.3867 37.1878 36.3637 37.3471H30.635C30.8208 38.5346 31.7685 39.3126 32.8898 39.3126C33.736 39.3126 34.4518 38.9048 34.8613 38.128H36.1752ZM35.1488 36.3989C34.8478 35.1627 34.0044 34.4589 32.9048 34.4589C31.7901 34.4589 30.8547 35.2127 30.635 36.3989H35.1488ZM37.7738 34.6021H36.7419V33.57H37.7738V31.4613H38.8991V33.57H39.8903V34.6021H38.8991V39.1897H39.8903V40.2407H37.7738V34.6021ZM41.5255 34.6021H40.4992V33.57H41.5255V31.4613H42.655V33.57H43.6408V34.6021H42.655V39.1897H43.6408V40.2407H41.5255V34.6021ZM45.783 41.3403H46.8257L47.3491 40.0409L45.1878 34.6184H44.3106V33.57H47.284V34.6184H46.3647L47.9254 38.5791L49.5063 34.6184H48.5857V33.57H51.5538V34.6184H50.682L48 41.3403H48.9356V42.386H45.783V41.3403ZM54.9449 39.1777H55.9239V32.5163H54.9449V31.4613H58.1557V32.5163H57.1482V39.1777H58.1557V40.2407H54.9449V39.1777ZM59.0952 39.1897H60.0485V34.6021H59.1048V33.57H61.163V34.5184C61.5752 33.7998 62.1554 33.4606 62.9867 33.4606C63.9657 33.4606 64.6802 33.9268 65.0882 34.7886C65.6089 33.8781 66.2462 33.4485 67.1492 33.4485C68.7995 33.4485 69.5546 34.644 69.5546 36.2961V39.1897H70.5213V40.2407H67.4693V39.1897H68.4252V36.234C68.4252 35.11 67.9045 34.5076 66.9785 34.5076C65.9113 34.5076 65.3405 35.2965 65.3405 36.8689V39.1897H66.3113V40.2407H63.2823V39.1897H64.2477V36.9769C64.2477 35.4114 64.0741 34.5076 62.7616 34.5076C61.746 34.5076 61.163 35.2965 61.163 36.8689V39.1897H62.1324V40.2407H59.0952V39.1897ZM76.6649 39.3572C75.9599 40.0678 75.2494 40.3867 74.3572 40.3867C72.3261 40.3867 70.8752 38.8682 70.8752 36.8933C70.8752 34.9385 72.2746 33.4188 74.3111 33.4188C75.2643 33.4188 76.0278 33.7295 76.6934 34.4467V33.57H78.7584V34.6021H77.808V39.1777H78.7694V40.2407H76.6649V39.3572ZM74.3734 34.4941C73.1342 34.4941 72.0657 35.483 72.0657 36.8689C72.0657 38.3009 73.1342 39.2991 74.3802 39.2991C75.606 39.2991 76.6745 38.2604 76.6745 36.9298C76.6745 35.5194 75.606 34.4941 74.3734 34.4941ZM81.0214 40.6325C81.2587 41.3403 81.8892 41.7186 82.8329 41.7186C84.0261 41.7186 85.0282 40.8649 85.0769 39.6342L85.0877 39.2991C84.4193 40.0409 83.6858 40.3731 82.7611 40.3731C80.7775 40.3731 79.3157 38.879 79.3157 36.8933C79.3157 34.9776 80.7286 33.4107 82.7231 33.4107C83.6858 33.4107 84.4572 33.7551 85.1027 34.5076V33.57H87.1718V34.6184H86.2187V39.1437C86.2187 41.4349 84.8899 42.6966 82.8329 42.6966C81.2072 42.6966 80.1456 42.005 79.713 40.6325H81.0214ZM85.1027 36.9406C85.1027 35.5343 84.0478 34.4941 82.8072 34.4941C81.572 34.4941 80.505 35.4937 80.505 36.8797C80.505 38.3251 81.5815 39.3126 82.8072 39.3126C84.0356 39.3126 85.1027 38.2604 85.1027 36.9406ZM94.3595 38.128C93.7885 39.5842 92.5642 40.3974 91.0864 40.3974C89.1284 40.3974 87.5867 38.8548 87.5867 36.9134C87.5867 34.9304 89.2151 33.3917 91.051 33.3917C93.0089 33.3917 94.5723 34.9128 94.5723 36.9636C94.5723 37.0634 94.5723 37.1878 94.5478 37.3471H88.8151C89.0063 38.5346 89.9486 39.3126 91.0741 39.3126C91.9201 39.3126 92.6361 38.9048 93.0428 38.128H94.3595ZM93.3304 36.3989C93.0348 35.1627 92.1901 34.4589 91.0864 34.4589C89.9717 34.4589 89.0402 35.2127 88.8151 36.3989H93.3304ZM95.2611 38.1388H96.3797C96.3797 38.7818 96.9355 39.4275 97.7668 39.4275C98.4705 39.4275 98.8853 39.0519 98.8853 38.4076C98.8853 37.6957 98.3484 37.4336 97.1716 37.1971C95.6734 36.8933 95.3505 36.1151 95.3505 35.3073C95.3505 34.1969 96.1397 33.3823 97.4061 33.3823C97.9553 33.3823 98.3851 33.57 98.7458 33.9618V33.5566H99.6746V35.3343H98.6427C98.4867 34.6806 98.1139 34.386 97.4807 34.386C96.8624 34.386 96.5139 34.6913 96.5139 35.2127C96.5139 35.9516 97.1201 36.0908 98.1627 36.3569C99.4643 36.7068 100.069 37.2498 100.069 38.3361C100.069 39.5842 99.1986 40.4136 97.8143 40.4136C97.181 40.4136 96.7011 40.2152 96.278 39.7543V40.2489H95.2611V38.1388Z",fill:"white"}))},nC="HRpvBqVKJR1BAsbVzfL5",rC="IhqssBKnfArY4Bv7crI8",iC="twu17MeCD33mU0TzLtdS",oC=function(t){var e=t.children;return i().createElement("div",{className:nC},i().createElement("div",{className:rC},i().createElement(eC,{className:iC})),e)},aC="cUJjRXH2vE8oAwPCFhcA",uC=function(t){var e=t.text;return i().createElement("div",{role:"dialog",className:aC},i().createElement("span",null,e))},cC="pBj6fJTIwKuMTO9iF2QV",sC="TO05xUi8o_6RweNcrgF_",lC="gRxydHWlGNEJYZNTTslF",fC="OYNqWcBciaXa_5R6t4_5",dC=function(){var t=Y(),e=t.clearNotification,n=t.showNotification,o=t.setShowNotification,a=tt();return(0,r.useEffect)((function(){var t;return n&&(t=setTimeout((function(){o(!1)}),3e3)),function(){clearTimeout(t)}}),[n]),e?null:i().createElement(xS.CSSTransition,{in:n,mountOnEnter:!0,unmountOnExit:!0,timeout:300,classNames:{enter:cC,enterActive:sC,exit:lC,exitActive:fC}},i().createElement(uC,{text:a}))},hC=function(){return i().createElement("svg",{"data-testid":"open-in-new-window-icon",width:"14",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("g",{clipPath:"url(#a)",fill:"#02A388"},i().createElement("path",{d:"M10.873 12.183a.363.363 0 0 1-.37.364H1.845a.363.363 0 0 1-.369-.364v-8.57c0-.203.163-.363.369-.363h5.134V1.796H1.844C.826 1.796 0 2.61 0 3.613v8.57c0 1.003.826 1.818 1.844 1.818h8.66c1.018 0 1.844-.815 1.844-1.818V7.08h-1.476v5.103Z"}),i().createElement("path",{d:"M7.856 0v1.454h3.629L6.32 6.542 7.37 7.567l5.156-5.088v3.583H14V0H7.856Z"})),i().createElement("defs",null,i().createElement("clipPath",{id:"a"},i().createElement("path",{fill:"#fff",d:"M0 0h14v14H0z"}))))},pC="kl1DHIKZwMaQSXUGgE32",vC="TyitRyatJaTWY2t4nEvk",mC="XXNyzMgSJQX8o4UPN3dI",gC="FvZjSpg9GGLJrSL5aoEg",yC="lwRTaRHwjk1bANzAF9EK",bC="lvrceWGU1XqaevDYpfaw",$C=function(t){var e=t.asset,n=(0,TS.NW)(),o=(0,Q.T)(),a=K().toggleFeedbackModal,u=Z(),c=u.modifyObjects,s=u.selectedObjects,l=u.removedObjects,f=X().backgroundRemoved,d=G().closeModal,h=(0,r.useContext)(ht),p=h.setShowEditor,v=h.setEditorSrc,m=s.size>0,g=(0,W._P)("AIModificationsLandingPage");return i().createElement("div",{className:pC},i().createElement("div",null,i().createElement("button",{className:bC,type:"button",onClick:a},o("give_feedback")),g.isActive()&&i().createElement("button",{className:bC,type:"button",onClick:function(){var t=window.open(n.aiModificationsFAQAnchor(),"_blank","noopener,noreferrer");t&&(t.opener=null),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_modal_FAQ_link",ui_element_location:"image_adp_modal"}})}},o("faqs"),i().createElement(hC,null))),i().createElement("div",{className:mC},m&&i().createElement(Fn.zx,{size:Fn.tS.LARGE,onClick:function(){c(),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_modal_apply_changes",ui_element_location:"image_adp_modal"}})},className:vC},o("apply_changes")),i().createElement(Fn.u,{content:i().createElement(i().Fragment,null,i().createElement(Qt,null),o("unapplied_changes")),className:Gt()(gC,m&&yC),"data-testid":"unapplied-changes-tooltip"},i().createElement(Fn.zx,{variant:Fn.hZ.SECONDARY,size:Fn.tS.LARGE,onClick:function(){var t=document.getElementById("modified-image");t.src!==e.largeMainImageURL?(v(Be(t)),p(!0),d(f,l)):(p(!1),d(!1,new Set)),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_modal_Proceed_to_Download_Button",ui_element_location:"image_adp_modal"}})}},o("proceed_to_download")))),i().createElement(dC,null))},xC="OhK75fSawLcUUIhwbtWv";function wC(){wC=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new C(i||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==e&&n.call(g,o)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function i(r,o,a,u){var c=l(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return i("throw",t,a,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b($.prototype),c($.prototype,a,(function(){return this})),t.AsyncIterator=$,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new $(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,u,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function kC(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}var SC=function(t){var e=t.visualId,n=t.assetId,o=t.openModalSessionId,a=(0,Q.T)(),u=G().closeModal,c=J(),s=(0,r.useState)(!1),l=s[0],f=s[1],d=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kC(o,r,i,a,u,"next",t)}function u(t){kC(o,r,i,a,u,"throw",t)}a(void 0)}))}}(wC().mark((function t(){return wC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,D({visualId:e,assetId:n,openModalSessionId:o});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:u(),(0,N.j)({name:"adpInteraction",payload:{adp_interaction:"ADP_Modal_Click",adp_selection:"ADP_Ai_modal_Discard_Changes",ui_element_location:"image_adp_modal"}});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),h=c?a("discard_changes"):"",p=l?a("closing_with_dots"):h;return i().createElement("button",{className:xC,onClick:d,type:"button"},p,i().createElement(Zt,null))},CC="kO1Uyv0kx0dLqTY8ad8L",_C="NvD5dvWBsOEKA237MiV7",MC="td5GPOQFDtw2iNQG3vuJ",EC="ciUhcgsXzBrxLArZpwnu",TC=function(t){var e=t.asset,n=t.visualId,r=t.availableModifications,o=G(),a=o.showModal,u=o.modalIsClosing,c=o.initialModificationType,s=o.initialRemovedObjects,l=o.initialBackgroundRemoved,f=o.showOpenAnimation,d=o.openModalSessionId,h=(0,Q.T)(),p=!n;return a&&i().createElement(M,null,i().createElement(I,null,i().createElement(b,{initialModificationType:c},i().createElement(v,{objects:null==r?void 0:r.objects,initialRemovedObjects:s.current},i().createElement(S,{initialBackgroundRemoved:l.current},i().createElement("div",{className:Gt()(CC,u&&MC,f.current&&_C),"data-testid":"modifications-modal"},i().createElement("div",{className:EC},i().createElement(tC,{headerText:h("object_removal_feedback_header"),placement:"bottom-left",visualId:n,assetId:e.assetId}),i().createElement(oC,null,i().createElement(SC,{visualId:n,assetId:e.assetId,openModalSessionId:d.current})),p?i().createElement(LC,null):i().createElement(nr,{asset:e,visualId:n,availableModifications:r}),i().createElement(Qn,null)),i().createElement($C,{asset:e})))))))},IC="PrKmPTKMm8V9Mbf20NrA",PC=function(t){var e=t.children,n=t.className;return i().createElement(un.u,{className:Gt()(IC,n),placement:"top"},e)},RC=n.p+"static/loading_ring-f90e4bf496d078088dce.png",AC="kAZ52UtVfhPTXqVd5MNz",LC=function(){return i().createElement("img",{className:AC,src:RC,alt:"loading spinner"})},OC=(0,n(17129).Qg)((function(t){var e=t.event_name;return{event:"banner_interaction",event_name:e,banner_interaction:e,banner_name:t.banner_name,banner_type:t.banner_type,ui_element_location:t.ui_element_location,link_text:t.link_text,item_id:t.item_id,coupon:t.coupon}})),zC="onNmjVQKkNjNW7F5kR2z",DC=function(t){var e=t.text,n=t.buttonText,o=t.toggleModal;(0,r.useEffect)((function(){!function(){if(window&&window.innerWidth>640){var t=OC({event_name:"view_banner",banner_name:"remove_background_feedback",banner_type:"notification",ui_element_location:"image_adp_tools_panel_top",link_text:"give_us_your_feedback"});(0,N.j)({name:"bannerShown",payload:{banner_name:"ADP_remove_background_feedback_banner",ui_element_location:"image_adp_tools_panel_top"}},t)}}()}),[]);return i().createElement("div",{className:zC,"data-testid":"feedback-banner"},i().createElement("p",null,e),i().createElement("button",{type:"button","data-testid":"feedback-button",onClick:function(){var t;t=OC({event_name:"banner_cta_click",banner_name:"remove_background_feedback",banner_type:"notification",ui_element_location:"image_adp_tools_panel_top",link_text:"give_us_your_feedback"}),(0,N.j)({name:"bannerCtaClick",payload:{banner_name:"ADP_remove_background_feedback_banner",ui_element_location:"image_adp_tools_panel_top"}},t),o()}},n))},FC=n(58590),jC=function(){return(0,r.useContext)(FC.Z).tV2},BC="SNvmHazSwHEfkfLlKrt1",NC="pOIq60P0mIM6HBUe5H8T",VC="uB2t6b1DymGJSkkFMISH",HC="wvHtmDcVuxfAL2yDjTrQ",WC=function(t){var e=t.open,n=t.onClose,r=t.visualId,o=t.assetId,a=jC(),u=nt().setShowEditor,c=G().resetInitialModifications;return i().createElement(Fn.u_,{open:e,onClose:n,rootProps:{className:BC}},i().createElement(Fn.xB,{heading:a("want_to_reset_image"),handleClose:n,headingProps:{className:NC}}),i().createElement(Fn.ZT,{component:Fn.dh.P,variant:Fn.O3.BODY1,className:VC},a("lose_changes_return_to_original")),i().createElement(Fn.mz,{className:HC,primaryButtonProps:{children:a("yes_reset"),onClick:function(){O({assetId:o,visualId:r}),c(),u(!1),n()}},secondaryButtonProps:{children:a("cancel"),onClick:n}}))},UC="QWEqQfdvCWz6CmS01gsX",ZC=function(t){var e=t.visualId,n=t.assetId,o=jC(),a=(0,r.useState)(!1),u=a[0],c=a[1];return i().createElement("div",{className:UC},i().createElement(ee,{fill:"#FFFFFF"}),o("altered_image_reset",{links:[{onClick:function(){return c(!0)}}]}),i().createElement(WC,{open:u,onClose:function(){return c(!1)},visualId:e,assetId:n}))}},8679:function(t,e,n){"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function c(t){return r.isMemo(t)?a:u[t.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=a;var s=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(p){var i=h(n);i&&i!==p&&t(e,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var u=c(e),v=c(n),m=0;m<a.length;++m){var g=a[m];if(!(o[g]||r&&r[g]||v&&v[g]||u&&u[g])){var y=d(n,g);try{s(e,g,y)}catch(t){}}}}return e}},43393:function(t){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return a(t)?t:q(t)}function r(t){return u(t)?t:G(t)}function i(t){return c(t)?t:X(t)}function o(t){return a(t)&&!s(t)?t:Y(t)}function a(t){return!(!t||!t[f])}function u(t){return!(!t||!t[d])}function c(t){return!(!t||!t[h])}function s(t){return u(t)||c(t)}function l(t){return!(!t||!t[p])}e(r,n),e(i,n),e(o,n),n.isIterable=a,n.isKeyed=u,n.isIndexed=c,n.isAssociative=s,n.isOrdered=l,n.Keyed=r,n.Indexed=i,n.Set=o;var f="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",h="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",v="delete",m=5,g=1<<m,y=g-1,b={},$={value:!1},x={value:!1};function w(t){return t.value=!1,t}function k(t){t&&(t.value=!0)}function S(){}function C(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function _(t){return void 0===t.size&&(t.size=t.__iterate(E)),t.size}function M(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?_(t)+e:e}function E(){return!0}function T(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function I(t,e){return R(t,e,0)}function P(t,e){return R(t,e,e)}function R(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var A=0,L=1,O=2,z="function"==typeof Symbol&&Symbol.iterator,D="@@iterator",F=z||D;function j(t){this.next=t}function B(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function N(){return{value:void 0,done:!0}}function V(t){return!!U(t)}function H(t){return t&&"function"==typeof t.next}function W(t){var e=U(t);return e&&e.call(t)}function U(t){var e=t&&(z&&t[z]||t[D]);if("function"==typeof e)return e}function Z(t){return t&&"number"==typeof t.length}function q(t){return null==t?at():a(t)?t.toSeq():st(t)}function G(t){return null==t?at().toKeyedSeq():a(t)?u(t)?t.toSeq():t.fromEntrySeq():ut(t)}function X(t){return null==t?at():a(t)?u(t)?t.entrySeq():t.toIndexedSeq():ct(t)}function Y(t){return(null==t?at():a(t)?u(t)?t.entrySeq():t:ct(t)).toSetSeq()}j.prototype.toString=function(){return"[Iterator]"},j.KEYS=A,j.VALUES=L,j.ENTRIES=O,j.prototype.inspect=j.prototype.toSource=function(){return this.toString()},j.prototype[F]=function(){return this},e(q,n),q.of=function(){return q(arguments)},q.prototype.toSeq=function(){return this},q.prototype.toString=function(){return this.__toString("Seq {","}")},q.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},q.prototype.__iterate=function(t,e){return ft(this,t,e,!0)},q.prototype.__iterator=function(t,e){return dt(this,t,e,!0)},e(G,q),G.prototype.toKeyedSeq=function(){return this},e(X,q),X.of=function(){return X(arguments)},X.prototype.toIndexedSeq=function(){return this},X.prototype.toString=function(){return this.__toString("Seq [","]")},X.prototype.__iterate=function(t,e){return ft(this,t,e,!1)},X.prototype.__iterator=function(t,e){return dt(this,t,e,!1)},e(Y,q),Y.of=function(){return Y(arguments)},Y.prototype.toSetSeq=function(){return this},q.isSeq=ot,q.Keyed=G,q.Set=Y,q.Indexed=X;var K,J,Q,tt="@@__IMMUTABLE_SEQ__@@";function et(t){this._array=t,this.size=t.length}function nt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function rt(t){this._iterable=t,this.size=t.length||t.size}function it(t){this._iterator=t,this._iteratorCache=[]}function ot(t){return!(!t||!t[tt])}function at(){return K||(K=new et([]))}function ut(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():H(t)?new it(t).fromEntrySeq():V(t)?new rt(t).fromEntrySeq():"object"==typeof t?new nt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function ct(t){var e=lt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function st(t){var e=lt(t)||"object"==typeof t&&new nt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function lt(t){return Z(t)?new et(t):H(t)?new it(t):V(t)?new rt(t):void 0}function ft(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var u=i[n?o-a:a];if(!1===e(u[1],r?u[0]:a,t))return a+1}return a}return t.__iterateUncached(e,n)}function dt(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,a=0;return new j((function(){var t=i[n?o-a:a];return a++>o?N():B(e,r?t[0]:a-1,t[1])}))}return t.__iteratorUncached(e,n)}function ht(t,e){return e?pt(e,t,"",{"":t}):vt(t)}function pt(t,e,n,r){return Array.isArray(e)?t.call(r,n,X(e).map((function(n,r){return pt(t,n,r,e)}))):mt(e)?t.call(r,n,G(e).map((function(n,r){return pt(t,n,r,e)}))):e}function vt(t){return Array.isArray(t)?X(t).map(vt).toList():mt(t)?G(t).map(vt).toMap():t}function mt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function gt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function yt(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||u(t)!==u(e)||c(t)!==c(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!s(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var i=r.next().value;return i&&gt(i[1],t)&&(n||gt(i[0],e))}))&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var f=!0,d=e.__iterate((function(e,r){if(n?!t.has(e):i?!gt(e,t.get(r,b)):!gt(t.get(r,b),e))return f=!1,!1}));return f&&t.size===d}function bt(t,e){if(!(this instanceof bt))return new bt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(J)return J;J=this}}function $t(t,e){if(!t)throw new Error(e)}function xt(t,e,n){if(!(this instanceof xt))return new xt(t,e,n);if($t(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Q)return Q;Q=this}}function wt(){throw TypeError("Abstract")}function kt(){}function St(){}function Ct(){}q.prototype[tt]=!0,e(et,X),et.prototype.get=function(t,e){return this.has(t)?this._array[M(this,t)]:e},et.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},et.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new j((function(){return i>r?N():B(t,i,n[e?r-i++:i++])}))},e(nt,G),nt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},nt.prototype.has=function(t){return this._object.hasOwnProperty(t)},nt.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[e?i-o:o];if(!1===t(n[a],a,this))return o+1}return o},nt.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new j((function(){var a=r[e?i-o:o];return o++>i?N():B(t,a,n[a])}))},nt.prototype[p]=!0,e(rt,X),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=W(this._iterable),r=0;if(H(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=W(this._iterable);if(!H(n))return new j(N);var r=0;return new j((function(){var e=n.next();return e.done?e:B(t,r++,e.value)}))},e(it,X),it.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(n=r.next()).done;){var a=n.value;if(i[o]=a,!1===t(a,o++,this))break}return o},it.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new j((function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return B(t,i,r[i++])}))},e(bt,X),bt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},bt.prototype.get=function(t,e){return this.has(t)?this._value:e},bt.prototype.includes=function(t){return gt(this._value,t)},bt.prototype.slice=function(t,e){var n=this.size;return T(t,e,n)?this:new bt(this._value,P(e,n)-I(t,n))},bt.prototype.reverse=function(){return this},bt.prototype.indexOf=function(t){return gt(this._value,t)?0:-1},bt.prototype.lastIndexOf=function(t){return gt(this._value,t)?this.size:-1},bt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},bt.prototype.__iterator=function(t,e){var n=this,r=0;return new j((function(){return r<n.size?B(t,r++,n._value):N()}))},bt.prototype.equals=function(t){return t instanceof bt?gt(this._value,t._value):yt(t)},e(xt,X),xt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},xt.prototype.get=function(t,e){return this.has(t)?this._start+M(this,t)*this._step:e},xt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},xt.prototype.slice=function(t,e){return T(t,e,this.size)?this:(t=I(t,this.size),(e=P(e,this.size))<=t?new xt(0,0):new xt(this.get(t,this._end),this.get(e,this._end),this._step))},xt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},xt.prototype.lastIndexOf=function(t){return this.indexOf(t)},xt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},xt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new j((function(){var a=i;return i+=e?-r:r,o>n?N():B(t,o++,a)}))},xt.prototype.equals=function(t){return t instanceof xt?this._start===t._start&&this._end===t._end&&this._step===t._step:yt(this,t)},e(wt,n),e(kt,wt),e(St,wt),e(Ct,wt),wt.Keyed=kt,wt.Indexed=St,wt.Set=Ct;var _t="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function Mt(t){return t>>>1&1073741824|3221225471&t}function Et(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return Mt(n)}if("string"===e)return t.length>jt?Tt(t):It(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return Pt(t);if("function"==typeof t.toString)return It(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function Tt(t){var e=Vt[t];return void 0===e&&(e=It(t),Nt===Bt&&(Nt=0,Vt={}),Nt++,Vt[t]=e),e}function It(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return Mt(e)}function Pt(t){var e;if(zt&&void 0!==(e=Ot.get(t)))return e;if(void 0!==(e=t[Ft]))return e;if(!At){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ft]))return e;if(void 0!==(e=Lt(t)))return e}if(e=++Dt,1073741824&Dt&&(Dt=0),zt)Ot.set(t,e);else{if(void 0!==Rt&&!1===Rt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(At)Object.defineProperty(t,Ft,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ft]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Ft]=e}}return e}var Rt=Object.isExtensible,At=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Lt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Ot,zt="function"==typeof WeakMap;zt&&(Ot=new WeakMap);var Dt=0,Ft="__immutablehash__";"function"==typeof Symbol&&(Ft=Symbol(Ft));var jt=16,Bt=255,Nt=0,Vt={};function Ht(t){$t(t!==1/0,"Cannot perform this action with an infinite size.")}function Wt(t){return null==t?ie():Ut(t)&&!l(t)?t:ie().withMutations((function(e){var n=r(t);Ht(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ut(t){return!(!t||!t[qt])}e(Wt,kt),Wt.of=function(){var e=t.call(arguments,0);return ie().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},Wt.prototype.toString=function(){return this.__toString("Map {","}")},Wt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Wt.prototype.set=function(t,e){return oe(this,t,e)},Wt.prototype.setIn=function(t,e){return this.updateIn(t,b,(function(){return e}))},Wt.prototype.remove=function(t){return oe(this,t,b)},Wt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return b}))},Wt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Wt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=me(this,wn(t),e,n);return r===b?void 0:r},Wt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ie()},Wt.prototype.merge=function(){return de(this,void 0,arguments)},Wt.prototype.mergeWith=function(e){return de(this,e,t.call(arguments,1))},Wt.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,ie(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},Wt.prototype.mergeDeep=function(){return de(this,he,arguments)},Wt.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return de(this,pe(e),n)},Wt.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,ie(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},Wt.prototype.sort=function(t){return Ve(fn(this,t))},Wt.prototype.sortBy=function(t,e){return Ve(fn(this,e,t))},Wt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Wt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},Wt.prototype.asImmutable=function(){return this.__ensureOwner()},Wt.prototype.wasAltered=function(){return this.__altered},Wt.prototype.__iterator=function(t,e){return new te(this,t,e)},Wt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},Wt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?re(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Wt.isMap=Ut;var Zt,qt="@@__IMMUTABLE_MAP__@@",Gt=Wt.prototype;function Xt(t,e){this.ownerID=t,this.entries=e}function Yt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Kt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Jt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Qt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function te(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&ne(t._root)}function ee(t,e){return B(t,e[0],e[1])}function ne(t,e){return{node:t,index:0,__prev:e}}function re(t,e,n,r){var i=Object.create(Gt);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ie(){return Zt||(Zt=re(0))}function oe(t,e,n){var r,i;if(t._root){var o=w($),a=w(x);if(r=ae(t._root,t.__ownerID,0,void 0,e,n,o,a),!a.value)return t;i=t.size+(o.value?n===b?-1:1:0)}else{if(n===b)return t;i=1,r=new Xt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?re(i,r):ie()}function ae(t,e,n,r,i,o,a,u){return t?t.update(e,n,r,i,o,a,u):o===b?t:(k(u),k(a),new Qt(e,r,[i,o]))}function ue(t){return t.constructor===Qt||t.constructor===Jt}function ce(t,e,n,r,i){if(t.keyHash===r)return new Jt(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&y,u=(0===n?r:r>>>n)&y;return new Yt(e,1<<a|1<<u,a===u?[ce(t,e,n+m,r,i)]:(o=new Qt(e,r,i),a<u?[t,o]:[o,t]))}function se(t,e,n,r){t||(t=new S);for(var i=new Qt(t,Et(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function le(t,e,n,r){for(var i=0,o=0,a=new Array(n),u=0,c=1,s=e.length;u<s;u++,c<<=1){var l=e[u];void 0!==l&&u!==r&&(i|=c,a[o++]=l)}return new Yt(t,i,a)}function fe(t,e,n,r,i){for(var o=0,a=new Array(g),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[o++]:void 0;return a[r]=i,new Kt(t,o+1,a)}function de(t,e,n){for(var i=[],o=0;o<n.length;o++){var u=n[o],c=r(u);a(u)||(c=c.map((function(t){return ht(t)}))),i.push(c)}return ve(t,e,i)}function he(t,e,n){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):gt(t,e)?t:e}function pe(t){return function(e,n,r){if(e&&e.mergeDeepWith&&a(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return gt(e,i)?e:i}}function ve(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,b,(function(t){return t===b?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)})):t.constructor(n[0])}function me(t,e,n,r){var i=t===b,o=e.next();if(o.done){var a=i?n:t,u=r(a);return u===a?t:u}$t(i||t&&t.set,"invalid keyPath");var c=o.value,s=i?b:t.get(c,b),l=me(s,e,n,r);return l===s?t:l===b?t.remove(c):(i?ie():t).set(c,l)}function ge(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ye(t,e,n,r){var i=r?t:C(t);return i[e]=n,i}function be(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,u=0;u<i;u++)u===e?(o[u]=n,a=-1):o[u]=t[u+a];return o}function $e(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}Gt[qt]=!0,Gt[v]=Gt.remove,Gt.removeIn=Gt.deleteIn,Xt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(gt(n,i[o][0]))return i[o][1];return r},Xt.prototype.update=function(t,e,n,r,i,o,a){for(var u=i===b,c=this.entries,s=0,l=c.length;s<l&&!gt(r,c[s][0]);s++);var f=s<l;if(f?c[s][1]===i:u)return this;if(k(a),(u||!f)&&k(o),!u||1!==c.length){if(!f&&!u&&c.length>=xe)return se(t,c,r,i);var d=t&&t===this.ownerID,h=d?c:C(c);return f?u?s===l-1?h.pop():h[s]=h.pop():h[s]=[r,i]:h.push([r,i]),d?(this.entries=h,this):new Xt(t,h)}},Yt.prototype.get=function(t,e,n,r){void 0===e&&(e=Et(n));var i=1<<((0===t?e:e>>>t)&y),o=this.bitmap;return 0==(o&i)?r:this.nodes[ge(o&i-1)].get(t+m,e,n,r)},Yt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=Et(r));var u=(0===e?n:n>>>e)&y,c=1<<u,s=this.bitmap,l=0!=(s&c);if(!l&&i===b)return this;var f=ge(s&c-1),d=this.nodes,h=l?d[f]:void 0,p=ae(h,t,e+m,n,r,i,o,a);if(p===h)return this;if(!l&&p&&d.length>=we)return fe(t,d,s,u,p);if(l&&!p&&2===d.length&&ue(d[1^f]))return d[1^f];if(l&&p&&1===d.length&&ue(p))return p;var v=t&&t===this.ownerID,g=l?p?s:s^c:s|c,$=l?p?ye(d,f,p,v):$e(d,f,v):be(d,f,p,v);return v?(this.bitmap=g,this.nodes=$,this):new Yt(t,g,$)},Kt.prototype.get=function(t,e,n,r){void 0===e&&(e=Et(n));var i=(0===t?e:e>>>t)&y,o=this.nodes[i];return o?o.get(t+m,e,n,r):r},Kt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=Et(r));var u=(0===e?n:n>>>e)&y,c=i===b,s=this.nodes,l=s[u];if(c&&!l)return this;var f=ae(l,t,e+m,n,r,i,o,a);if(f===l)return this;var d=this.count;if(l){if(!f&&--d<ke)return le(t,s,d,u)}else d++;var h=t&&t===this.ownerID,p=ye(s,u,f,h);return h?(this.count=d,this.nodes=p,this):new Kt(t,d,p)},Jt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(gt(n,i[o][0]))return i[o][1];return r},Jt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=Et(r));var u=i===b;if(n!==this.keyHash)return u?this:(k(a),k(o),ce(this,t,e,n,[r,i]));for(var c=this.entries,s=0,l=c.length;s<l&&!gt(r,c[s][0]);s++);var f=s<l;if(f?c[s][1]===i:u)return this;if(k(a),(u||!f)&&k(o),u&&2===l)return new Qt(t,this.keyHash,c[1^s]);var d=t&&t===this.ownerID,h=d?c:C(c);return f?u?s===l-1?h.pop():h[s]=h.pop():h[s]=[r,i]:h.push([r,i]),d?(this.entries=h,this):new Jt(t,this.keyHash,h)},Qt.prototype.get=function(t,e,n,r){return gt(n,this.entry[0])?this.entry[1]:r},Qt.prototype.update=function(t,e,n,r,i,o,a){var u=i===b,c=gt(r,this.entry[0]);return(c?i===this.entry[1]:u)?this:(k(a),u?void k(o):c?t&&t===this.ownerID?(this.entry[1]=i,this):new Qt(t,this.keyHash,[r,i]):(k(o),ce(this,t,e,Et(r),[r,i])))},Xt.prototype.iterate=Jt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Yt.prototype.iterate=Kt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},Qt.prototype.iterate=function(t,e){return t(this.entry)},e(te,j),te.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return ee(t,r.entry)}else if(r.entries){if(i<=(n=r.entries.length-1))return ee(t,r.entries[this._reverse?n-i:i])}else if(i<=(n=r.nodes.length-1)){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return ee(t,o.entry);e=this._stack=ne(o,e)}continue}e=this._stack=this._stack.__prev}return N()};var xe=g/4,we=g/2,ke=g/4;function Se(t){var e=Le();if(null==t)return e;if(Ce(t))return t;var n=i(t),r=n.size;return 0===r?e:(Ht(r),r>0&&r<g?Ae(0,r,m,null,new Ee(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function Ce(t){return!(!t||!t[_e])}e(Se,St),Se.of=function(){return this(arguments)},Se.prototype.toString=function(){return this.__toString("List [","]")},Se.prototype.get=function(t,e){if((t=M(this,t))>=0&&t<this.size){var n=Fe(this,t+=this._origin);return n&&n.array[t&y]}return e},Se.prototype.set=function(t,e){return Oe(this,t,e)},Se.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Se.prototype.insert=function(t,e){return this.splice(t,0,e)},Se.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Le()},Se.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){je(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},Se.prototype.pop=function(){return je(this,0,-1)},Se.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){je(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},Se.prototype.shift=function(){return je(this,1)},Se.prototype.merge=function(){return Be(this,void 0,arguments)},Se.prototype.mergeWith=function(e){return Be(this,e,t.call(arguments,1))},Se.prototype.mergeDeep=function(){return Be(this,he,arguments)},Se.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Be(this,pe(e),n)},Se.prototype.setSize=function(t){return je(this,0,t)},Se.prototype.slice=function(t,e){var n=this.size;return T(t,e,n)?this:je(this,I(t,n),P(e,n))},Se.prototype.__iterator=function(t,e){var n=0,r=Re(this,e);return new j((function(){var e=r();return e===Pe?N():B(t,n++,e)}))},Se.prototype.__iterate=function(t,e){for(var n,r=0,i=Re(this,e);(n=i())!==Pe&&!1!==t(n,r++,this););return r},Se.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ae(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Se.isList=Ce;var _e="@@__IMMUTABLE_LIST__@@",Me=Se.prototype;function Ee(t,e){this.array=t,this.ownerID=e}Me[_e]=!0,Me[v]=Me.remove,Me.setIn=Gt.setIn,Me.deleteIn=Me.removeIn=Gt.removeIn,Me.update=Gt.update,Me.updateIn=Gt.updateIn,Me.mergeIn=Gt.mergeIn,Me.mergeDeepIn=Gt.mergeDeepIn,Me.withMutations=Gt.withMutations,Me.asMutable=Gt.asMutable,Me.asImmutable=Gt.asImmutable,Me.wasAltered=Gt.wasAltered,Ee.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&y;if(r>=this.array.length)return new Ee([],t);var i,o=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-m,n))===a&&o)return this}if(o&&!i)return this;var u=De(this,t);if(!o)for(var c=0;c<r;c++)u.array[c]=void 0;return i&&(u.array[r]=i),u},Ee.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&y;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-m,n))===o&&i===this.array.length-1)return this}var a=De(this,t);return a.array.splice(i+1),r&&(a.array[i]=r),a};var Te,Ie,Pe={};function Re(t,e){var n=t._origin,r=t._capacity,i=Ne(r),o=t._tail;return a(t._root,t._level,0);function a(t,e,n){return 0===e?u(t,n):c(t,e,n)}function u(t,a){var u=a===i?o&&o.array:t&&t.array,c=a>n?0:n-a,s=r-a;return s>g&&(s=g),function(){if(c===s)return Pe;var t=e?--s:c++;return u&&u[t]}}function c(t,i,o){var u,c=t&&t.array,s=o>n?0:n-o>>i,l=1+(r-o>>i);return l>g&&(l=g),function(){for(;;){if(u){var t=u();if(t!==Pe)return t;u=null}if(s===l)return Pe;var n=e?--l:s++;u=a(c&&c[n],i-m,o+(n<<i))}}}}function Ae(t,e,n,r,i,o,a){var u=Object.create(Me);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=i,u.__ownerID=o,u.__hash=a,u.__altered=!1,u}function Le(){return Te||(Te=Ae(0,0,m))}function Oe(t,e,n){if((e=M(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?je(t,e).set(0,n):je(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,i=t._root,o=w(x);return e>=Ne(t._capacity)?r=ze(r,t.__ownerID,0,e,n,o):i=ze(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ae(t._origin,t._capacity,t._level,i,r):t}function ze(t,e,n,r,i,o){var a,u=r>>>n&y,c=t&&u<t.array.length;if(!c&&void 0===i)return t;if(n>0){var s=t&&t.array[u],l=ze(s,e,n-m,r,i,o);return l===s?t:((a=De(t,e)).array[u]=l,a)}return c&&t.array[u]===i?t:(k(o),a=De(t,e),void 0===i&&u===a.array.length-1?a.array.pop():a.array[u]=i,a)}function De(t,e){return e&&t&&e===t.ownerID?t:new Ee(t?t.array.slice():[],e)}function Fe(t,e){if(e>=Ne(t._capacity))return t._tail;if(e<1<<t._level+m){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&y],r-=m;return n}}function je(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new S,i=t._origin,o=t._capacity,a=i+e,u=void 0===n?o:n<0?o+n:i+n;if(a===i&&u===o)return t;if(a>=u)return t.clear();for(var c=t._level,s=t._root,l=0;a+l<0;)s=new Ee(s&&s.array.length?[void 0,s]:[],r),l+=1<<(c+=m);l&&(a+=l,i+=l,u+=l,o+=l);for(var f=Ne(o),d=Ne(u);d>=1<<c+m;)s=new Ee(s&&s.array.length?[s]:[],r),c+=m;var h=t._tail,p=d<f?Fe(t,u-1):d>f?new Ee([],r):h;if(h&&d>f&&a<o&&h.array.length){for(var v=s=De(s,r),g=c;g>m;g-=m){var b=f>>>g&y;v=v.array[b]=De(v.array[b],r)}v.array[f>>>m&y]=h}if(u<o&&(p=p&&p.removeAfter(r,0,u)),a>=d)a-=d,u-=d,c=m,s=null,p=p&&p.removeBefore(r,0,a);else if(a>i||d<f){for(l=0;s;){var $=a>>>c&y;if($!==d>>>c&y)break;$&&(l+=(1<<c)*$),c-=m,s=s.array[$]}s&&a>i&&(s=s.removeBefore(r,c,a-l)),s&&d<f&&(s=s.removeAfter(r,c,d-l)),l&&(a-=l,u-=l)}return t.__ownerID?(t.size=u-a,t._origin=a,t._capacity=u,t._level=c,t._root=s,t._tail=p,t.__hash=void 0,t.__altered=!0,t):Ae(a,u,c,s,p)}function Be(t,e,n){for(var r=[],o=0,u=0;u<n.length;u++){var c=n[u],s=i(c);s.size>o&&(o=s.size),a(c)||(s=s.map((function(t){return ht(t)}))),r.push(s)}return o>t.size&&(t=t.setSize(o)),ve(t,e,r)}function Ne(t){return t<g?0:t-1>>>m<<m}function Ve(t){return null==t?Ue():He(t)?t:Ue().withMutations((function(e){var n=r(t);Ht(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function He(t){return Ut(t)&&l(t)}function We(t,e,n,r){var i=Object.create(Ve.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ue(){return Ie||(Ie=We(ie(),Le()))}function Ze(t,e,n){var r,i,o=t._map,a=t._list,u=o.get(e),c=void 0!==u;if(n===b){if(!c)return t;a.size>=g&&a.size>=2*o.size?(r=(i=a.filter((function(t,e){return void 0!==t&&u!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=u===a.size-1?a.pop():a.set(u,void 0))}else if(c){if(n===a.get(u)[1])return t;r=o,i=a.set(u,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):We(r,i)}function qe(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ge(t){this._iter=t,this.size=t.size}function Xe(t){this._iter=t,this.size=t.size}function Ye(t){this._iter=t,this.size=t.size}function Ke(t){var e=bn(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=$n,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(e===O){var r=t.__iterator(e,n);return new j((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===L?A:L,n)},e}function Je(t,e,n){var r=bn(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,b);return o===b?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate((function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(O,i);return new j((function(){var i=o.next();if(i.done)return i;var a=i.value,u=a[0];return B(r,u,e.call(n,a[1],u,t),i)}))},r}function Qe(t,e){var n=bn(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Ke(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=$n,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function tn(t,e,n,r){var i=bn(t);return r&&(i.has=function(r){var i=t.get(r,b);return i!==b&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,b);return o!==b&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,u=0;return t.__iterate((function(t,o,c){if(e.call(n,t,o,c))return u++,i(t,r?o:u-1,a)}),o),u},i.__iteratorUncached=function(i,o){var a=t.__iterator(O,o),u=0;return new j((function(){for(;;){var o=a.next();if(o.done)return o;var c=o.value,s=c[0],l=c[1];if(e.call(n,l,s,t))return B(i,r?s:u++,l,o)}}))},i}function en(t,e,n){var r=Wt().asMutable();return t.__iterate((function(i,o){r.update(e.call(n,i,o,t),0,(function(t){return t+1}))})),r.asImmutable()}function nn(t,e,n){var r=u(t),i=(l(t)?Ve():Wt()).asMutable();t.__iterate((function(o,a){i.update(e.call(n,o,a,t),(function(t){return(t=t||[]).push(r?[a,o]:o),t}))}));var o=yn(t);return i.map((function(e){return vn(t,o(e))}))}function rn(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),T(e,n,i))return t;var o=I(e,i),a=P(n,i);if(o!=o||a!=a)return rn(t.toSeq().cacheResult(),e,n,r);var u,c=a-o;c==c&&(u=c<0?0:c);var s=bn(t);return s.size=0===u?u:t.size&&u||void 0,!r&&ot(t)&&u>=0&&(s.get=function(e,n){return(e=M(this,e))>=0&&e<u?t.get(e+o,n):n}),s.__iterateUncached=function(e,n){var i=this;if(0===u)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,c=!0,s=0;return t.__iterate((function(t,n){if(!c||!(c=a++<o))return s++,!1!==e(t,r?n:s-1,i)&&s!==u})),s},s.__iteratorUncached=function(e,n){if(0!==u&&n)return this.cacheResult().__iterator(e,n);var i=0!==u&&t.__iterator(e,n),a=0,c=0;return new j((function(){for(;a++<o;)i.next();if(++c>u)return N();var t=i.next();return r||e===L?t:B(e,c-1,e===A?void 0:t.value[1],t)}))},s}function on(t,e,n){var r=bn(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate((function(t,i,u){return e.call(n,t,i,u)&&++a&&r(t,i,o)})),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(O,i),u=!0;return new j((function(){if(!u)return N();var t=a.next();if(t.done)return t;var i=t.value,c=i[0],s=i[1];return e.call(n,s,c,o)?r===O?t:B(r,c,s,t):(u=!1,N())}))},r}function an(t,e,n,r){var i=bn(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,c=0;return t.__iterate((function(t,o,s){if(!u||!(u=e.call(n,t,o,s)))return c++,i(t,r?o:c-1,a)})),c},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(O,o),c=!0,s=0;return new j((function(){var t,o,l;do{if((t=u.next()).done)return r||i===L?t:B(i,s++,i===A?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],c&&(c=e.call(n,l,o,a))}while(c);return i===O?t:B(i,o,l,t)}))},i}function un(t,e){var n=u(t),i=[t].concat(e).map((function(t){return a(t)?n&&(t=r(t)):t=n?ut(t):ct(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var o=i[0];if(o===t||n&&u(o)||c(t)&&c(o))return o}var s=new et(i);return n?s=s.toKeyedSeq():c(t)||(s=s.toSetSeq()),(s=s.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),s}function cn(t,e,n){var r=bn(t);return r.__iterateUncached=function(r,i){var o=0,u=!1;function c(t,s){var l=this;t.__iterate((function(t,i){return(!e||s<e)&&a(t)?c(t,s+1):!1===r(t,n?i:o++,l)&&(u=!0),!u}),i)}return c(t,0),o},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),u=[],c=0;return new j((function(){for(;o;){var t=o.next();if(!1===t.done){var s=t.value;if(r===O&&(s=s[1]),e&&!(u.length<e)||!a(s))return n?t:B(r,c++,s,t);u.push(o),o=s.__iterator(r,i)}else o=u.pop()}return N()}))},r}function sn(t,e,n){var r=yn(t);return t.toSeq().map((function(i,o){return r(e.call(n,i,o,t))})).flatten(!0)}function ln(t,e){var n=bn(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate((function(t,r){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(L,r),a=0;return new j((function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?B(n,a++,e):B(n,a++,i.value,i)}))},n}function fn(t,e,n){e||(e=xn);var r=u(t),i=0,o=t.toSeq().map((function(e,r){return[r,e,i++,n?n(e,r,t):e]})).toArray();return o.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?G(o):c(t)?X(o):Y(o)}function dn(t,e,n){if(e||(e=xn),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return hn(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return hn(e,t,n)?n:t}))}function hn(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function pn(t,e,r){var i=bn(t);return i.size=new et(r).map((function(t){return t.size})).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(L,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=n(t),W(i?t.reverse():t)})),a=0,u=!1;return new j((function(){var n;return u||(n=o.map((function(t){return t.next()})),u=n.some((function(t){return t.done}))),u?N():B(t,a++,e.apply(null,n.map((function(t){return t.value}))))}))},i}function vn(t,e){return ot(t)?e:t.constructor(e)}function mn(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function gn(t){return Ht(t.size),_(t)}function yn(t){return u(t)?r:c(t)?i:o}function bn(t){return Object.create((u(t)?G:c(t)?X:Y).prototype)}function $n(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):q.prototype.cacheResult.call(this)}function xn(t,e){return t>e?1:t<e?-1:0}function wn(t){var e=W(t);if(!e){if(!Z(t))throw new TypeError("Expected iterable or array-like: "+t);e=W(n(t))}return e}function kn(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(t);Mn(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=Wt(o)},i=r.prototype=Object.create(Sn);return i.constructor=r,r}e(Ve,Wt),Ve.of=function(){return this(arguments)},Ve.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ve.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Ve.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ue()},Ve.prototype.set=function(t,e){return Ze(this,t,e)},Ve.prototype.remove=function(t){return Ze(this,t,b)},Ve.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ve.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},Ve.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Ve.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?We(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Ve.isOrderedMap=He,Ve.prototype[p]=!0,Ve.prototype[v]=Ve.prototype.remove,e(qe,G),qe.prototype.get=function(t,e){return this._iter.get(t,e)},qe.prototype.has=function(t){return this._iter.has(t)},qe.prototype.valueSeq=function(){return this._iter.valueSeq()},qe.prototype.reverse=function(){var t=this,e=Qe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},qe.prototype.map=function(t,e){var n=this,r=Je(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},qe.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?gn(this):0,function(i){return t(i,e?--n:n++,r)}),e)},qe.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(L,e),r=e?gn(this):0;return new j((function(){var i=n.next();return i.done?i:B(t,e?--r:r++,i.value,i)}))},qe.prototype[p]=!0,e(Ge,X),Ge.prototype.includes=function(t){return this._iter.includes(t)},Ge.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},Ge.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e),r=0;return new j((function(){var e=n.next();return e.done?e:B(t,r++,e.value,e)}))},e(Xe,Y),Xe.prototype.has=function(t){return this._iter.includes(t)},Xe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Xe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new j((function(){var e=n.next();return e.done?e:B(t,e.value,e.value,e)}))},e(Ye,G),Ye.prototype.entrySeq=function(){return this._iter.toSeq()},Ye.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){mn(e);var r=a(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Ye.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new j((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){mn(r);var i=a(r);return B(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}}))},Ge.prototype.cacheResult=qe.prototype.cacheResult=Xe.prototype.cacheResult=Ye.prototype.cacheResult=$n,e(kn,kt),kn.prototype.toString=function(){return this.__toString(_n(this)+" {","}")},kn.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},kn.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},kn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Cn(this,ie()))},kn.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+_n(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Cn(this,n)},kn.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Cn(this,e)},kn.prototype.wasAltered=function(){return this._map.wasAltered()},kn.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},kn.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},kn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Cn(this,e,t):(this.__ownerID=t,this._map=e,this)};var Sn=kn.prototype;function Cn(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function _n(t){return t._name||t.constructor.name||"Record"}function Mn(t,e){try{e.forEach(En.bind(void 0,t))}catch(t){}}function En(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){$t(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Tn(t){return null==t?zn():In(t)&&!l(t)?t:zn().withMutations((function(e){var n=o(t);Ht(n.size),n.forEach((function(t){return e.add(t)}))}))}function In(t){return!(!t||!t[Rn])}Sn[v]=Sn.remove,Sn.deleteIn=Sn.removeIn=Gt.removeIn,Sn.merge=Gt.merge,Sn.mergeWith=Gt.mergeWith,Sn.mergeIn=Gt.mergeIn,Sn.mergeDeep=Gt.mergeDeep,Sn.mergeDeepWith=Gt.mergeDeepWith,Sn.mergeDeepIn=Gt.mergeDeepIn,Sn.setIn=Gt.setIn,Sn.update=Gt.update,Sn.updateIn=Gt.updateIn,Sn.withMutations=Gt.withMutations,Sn.asMutable=Gt.asMutable,Sn.asImmutable=Gt.asImmutable,e(Tn,Ct),Tn.of=function(){return this(arguments)},Tn.fromKeys=function(t){return this(r(t).keySeq())},Tn.prototype.toString=function(){return this.__toString("Set {","}")},Tn.prototype.has=function(t){return this._map.has(t)},Tn.prototype.add=function(t){return Ln(this,this._map.set(t,!0))},Tn.prototype.remove=function(t){return Ln(this,this._map.remove(t))},Tn.prototype.clear=function(){return Ln(this,this._map.clear())},Tn.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},Tn.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},Tn.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},Tn.prototype.merge=function(){return this.union.apply(this,arguments)},Tn.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},Tn.prototype.sort=function(t){return Dn(fn(this,t))},Tn.prototype.sortBy=function(t,e){return Dn(fn(this,e,t))},Tn.prototype.wasAltered=function(){return this._map.wasAltered()},Tn.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},Tn.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},Tn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Tn.isSet=In;var Pn,Rn="@@__IMMUTABLE_SET__@@",An=Tn.prototype;function Ln(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function On(t,e){var n=Object.create(An);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function zn(){return Pn||(Pn=On(ie()))}function Dn(t){return null==t?Vn():Fn(t)?t:Vn().withMutations((function(e){var n=o(t);Ht(n.size),n.forEach((function(t){return e.add(t)}))}))}function Fn(t){return In(t)&&l(t)}An[Rn]=!0,An[v]=An.remove,An.mergeDeep=An.merge,An.mergeDeepWith=An.mergeWith,An.withMutations=Gt.withMutations,An.asMutable=Gt.asMutable,An.asImmutable=Gt.asImmutable,An.__empty=zn,An.__make=On,e(Dn,Tn),Dn.of=function(){return this(arguments)},Dn.fromKeys=function(t){return this(r(t).keySeq())},Dn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Dn.isOrderedSet=Fn;var jn,Bn=Dn.prototype;function Nn(t,e){var n=Object.create(Bn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Vn(){return jn||(jn=Nn(Ue()))}function Hn(t){return null==t?Xn():Wn(t)?t:Xn().unshiftAll(t)}function Wn(t){return!(!t||!t[Zn])}Bn[p]=!0,Bn.__empty=Vn,Bn.__make=Nn,e(Hn,St),Hn.of=function(){return this(arguments)},Hn.prototype.toString=function(){return this.__toString("Stack [","]")},Hn.prototype.get=function(t,e){var n=this._head;for(t=M(this,t);n&&t--;)n=n.next;return n?n.value:e},Hn.prototype.peek=function(){return this._head&&this._head.value},Hn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Gn(t,e)},Hn.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;Ht(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Gn(e,n)},Hn.prototype.pop=function(){return this.slice(1)},Hn.prototype.unshift=function(){return this.push.apply(this,arguments)},Hn.prototype.unshiftAll=function(t){return this.pushAll(t)},Hn.prototype.shift=function(){return this.pop.apply(this,arguments)},Hn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xn()},Hn.prototype.slice=function(t,e){if(T(t,e,this.size))return this;var n=I(t,this.size);if(P(e,this.size)!==this.size)return St.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Gn(r,i)},Hn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Gn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Hn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},Hn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new j((function(){if(r){var e=r.value;return r=r.next,B(t,n++,e)}return N()}))},Hn.isStack=Wn;var Un,Zn="@@__IMMUTABLE_STACK__@@",qn=Hn.prototype;function Gn(t,e,n,r){var i=Object.create(qn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Xn(){return Un||(Un=Gn(0))}function Yn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}qn[Zn]=!0,qn.withMutations=Gt.withMutations,qn.asMutable=Gt.asMutable,qn.asImmutable=Gt.asImmutable,qn.wasAltered=Gt.wasAltered,n.Iterator=j,Yn(n,{toArray:function(){Ht(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new Ge(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new qe(this,!0)},toMap:function(){return Wt(this.toKeyedSeq())},toObject:function(){Ht(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return Ve(this.toKeyedSeq())},toOrderedSet:function(){return Dn(u(this)?this.valueSeq():this)},toSet:function(){return Tn(u(this)?this.valueSeq():this)},toSetSeq:function(){return new Xe(this)},toSeq:function(){return c(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Hn(u(this)?this.valueSeq():this)},toList:function(){return Se(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return vn(this,un(this,t.call(arguments,0)))},includes:function(t){return this.some((function(e){return gt(e,t)}))},entries:function(){return this.__iterator(O)},every:function(t,e){Ht(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1})),n},filter:function(t,e){return vn(this,tn(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Ht(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Ht(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(A)},map:function(t,e){return vn(this,Je(this,t,e))},reduce:function(t,e,n){var r,i;return Ht(this.size),arguments.length<2?i=!0:r=e,this.__iterate((function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return vn(this,Qe(this,!0))},slice:function(t,e){return vn(this,rn(this,t,e,!0))},some:function(t,e){return!this.every(er(t),e)},sort:function(t){return vn(this,fn(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return _(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return en(this,t,e)},equals:function(t){return yt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(tr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(er(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(E)},flatMap:function(t,e){return vn(this,sn(this,t,e))},flatten:function(t){return vn(this,cn(this,t,!0))},fromEntrySeq:function(){return new Ye(this)},get:function(t,e){return this.find((function(e,n){return gt(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,i=wn(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,b):b)===b)return e}return r},groupBy:function(t,e){return nn(this,t,e)},has:function(t){return this.get(t,b)!==b},hasIn:function(t){return this.getIn(t,b)!==b},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return gt(e,t)}))},keySeq:function(){return this.toSeq().map(Qn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return dn(this,t)},maxBy:function(t,e){return dn(this,e,t)},min:function(t){return dn(this,t?nr(t):or)},minBy:function(t,e){return dn(this,e?nr(e):or,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return vn(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return vn(this,an(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(er(t),e)},sortBy:function(t,e){return vn(this,fn(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return vn(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return vn(this,on(this,t,e))},takeUntil:function(t,e){return this.takeWhile(er(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ar(this))}});var Kn=n.prototype;Kn[f]=!0,Kn[F]=Kn.values,Kn.__toJS=Kn.toArray,Kn.__toStringMapper=rr,Kn.inspect=Kn.toSource=function(){return this.toString()},Kn.chain=Kn.flatMap,Kn.contains=Kn.includes,Yn(r,{flip:function(){return vn(this,Ke(this))},mapEntries:function(t,e){var n=this,r=0;return vn(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return vn(this,this.toSeq().flip().map((function(r,i){return t.call(e,r,i,n)})).flip())}});var Jn=r.prototype;function Qn(t,e){return e}function tr(t,e){return[e,t]}function er(t){return function(){return!t.apply(this,arguments)}}function nr(t){return function(){return-t.apply(this,arguments)}}function rr(t){return"string"==typeof t?JSON.stringify(t):String(t)}function ir(){return C(arguments)}function or(t,e){return t<e?1:t>e?-1:0}function ar(t){if(t.size===1/0)return 0;var e=l(t),n=u(t),r=e?1:0;return ur(t.__iterate(n?e?function(t,e){r=31*r+cr(Et(t),Et(e))|0}:function(t,e){r=r+cr(Et(t),Et(e))|0}:e?function(t){r=31*r+Et(t)|0}:function(t){r=r+Et(t)|0}),r)}function ur(t,e){return e=_t(e,3432918353),e=_t(e<<15|e>>>-15,461845907),e=_t(e<<13|e>>>-13,5),e=_t((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Mt((e=_t(e^e>>>13,3266489909))^e>>>16)}function cr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Jn[d]=!0,Jn[F]=Kn.entries,Jn.__toJS=Kn.toObject,Jn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+rr(t)},Yn(i,{toKeyedSeq:function(){return new qe(this,!1)},filter:function(t,e){return vn(this,tn(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return vn(this,Qe(this,!1))},slice:function(t,e){return vn(this,rn(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=I(t,t<0?this.count():this.size);var r=this.slice(0,t);return vn(this,1===n?r:r.concat(C(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return vn(this,cn(this,t,!1))},get:function(t,e){return(t=M(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=M(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return vn(this,ln(this,t))},interleave:function(){var t=[this].concat(C(arguments)),e=pn(this.toSeq(),X.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),vn(this,n)},keySeq:function(){return xt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return vn(this,an(this,t,e,!1))},zip:function(){return vn(this,pn(this,ir,[this].concat(C(arguments))))},zipWith:function(t){var e=C(arguments);return e[0]=this,vn(this,pn(this,t,e))}}),i.prototype[h]=!0,i.prototype[p]=!0,Yn(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Kn.includes,o.prototype.contains=o.prototype.includes,Yn(G,r.prototype),Yn(X,i.prototype),Yn(Y,o.prototype),Yn(kt,r.prototype),Yn(St,i.prototype),Yn(Ct,o.prototype),{Iterable:n,Seq:q,Collection:wt,Map:Wt,OrderedMap:Ve,List:Se,Stack:Hn,Set:Tn,OrderedSet:Dn,Record:kn,Range:xt,Repeat:bt,is:gt,fromJS:ht}}()},95998:function(t,e,n){"use strict";n.d(e,{zt:function(){return $},I0:function(){return S},v9:function(){return v}});var r=n(61688),i=n(52798),o=n(97170);let a=function(t){t()};const u=()=>a;var c=n(84481),s=n.n(c);const l=s().createContext(null);function f(){return(0,c.useContext)(l)}let d=()=>{throw new Error("uSES not initialized!")};const h=(t,e)=>t===e;function p(t=l){const e=t===l?f:()=>(0,c.useContext)(t);return function(t,n=h){const{store:r,subscription:i,getServerState:o}=e(),a=d(i.addNestedSub,r.getState,o||r.getState,t,n);return(0,c.useDebugValue)(a),a}}const v=p();n(8679),n(59864);const m={notify(){},get:()=>[]};function g(t,e){let n,r=m;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=e?e.addNestedSub(i):t.subscribe(i),r=function(){const t=u();let e=null,n=null;return{clear(){e=null,n=null},notify(){t((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}const a={addNestedSub:function(t){return o(),r.subscribe(t)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=m)},getListeners:()=>r};return a}const y=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?c.useLayoutEffect:c.useEffect;let b=null;var $=function({store:t,context:e,children:n,serverState:r}){const i=(0,c.useMemo)((()=>{const e=g(t);return{store:t,subscription:e,getServerState:r?()=>r:void 0}}),[t,r]),o=(0,c.useMemo)((()=>t.getState()),[t]);y((()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,o]);const a=e||l;return s().createElement(a.Provider,{value:i},n)};function x(t=l){const e=t===l?f:()=>(0,c.useContext)(t);return function(){const{store:t}=e();return t}}const w=x();function k(t=l){const e=t===l?w:x(t);return function(){return e().dispatch}}const S=k();var C,_;C=i.useSyncExternalStoreWithSelector,d=C,(t=>{b=t})(r.useSyncExternalStore),_=o.unstable_batchedUpdates,a=_},27428:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(43393),o=(r=i)&&r.__esModule?r:{default:r},a=n(79607);e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.Map,n=Object.keys(t);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),i=arguments[1];return r.withMutations((function(e){n.forEach((function(n){var r=(0,t[n])(e.get(n),i);(0,a.validateNextState)(r,n,i),e.set(n,r)}))}))}},t.exports=e.default},72739:function(t,e,n){"use strict";e.U=void 0;var r,i=n(27428),o=(r=i)&&r.__esModule?r:{default:r};e.U=o.default},94528:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&"@@redux/INIT"===t.type?"initialState argument passed to createStore":"previous state received by the reducer"},t.exports=e.default},93651:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(43393)),i=o(n(94528));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){var o=Object.keys(e);if(!o.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var a=(0,i.default)(n);if(r.default.isImmutable?!r.default.isImmutable(t):!r.default.Iterable.isIterable(t))return"The "+a+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+o.join('", "')+'".';var u=t.toSeq().keySeq().toArray().filter((function(t){return!e.hasOwnProperty(t)}));return u.length>0?"Unexpected "+(1===u.length?"property":"properties")+' "'+u.join('", "')+'" found in '+a+'. Expected to find one of the known reducer property names instead: "'+o.join('", "')+'". Unexpected properties will be ignored.':null},t.exports=e.default},79607:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateNextState=e.getUnexpectedInvocationParameterMessage=e.getStateName=void 0;var r=a(n(94528)),i=a(n(93651)),o=a(n(85527));function a(t){return t&&t.__esModule?t:{default:t}}e.getStateName=r.default,e.getUnexpectedInvocationParameterMessage=i.default,e.validateNextState=o.default},85527:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw new Error('Reducer "'+e+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.')},t.exports=e.default},53894:function(t,e){"use strict";function n(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}var r=n();r.withExtraArgument=n,e.Z=r},14791:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}n.d(e,{md:function(){return v},qC:function(){return p},MT:function(){return h}});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},f={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function d(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(c(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(c(1));return n(h)(t,e)}if("function"!=typeof t)throw new Error(c(2));var i=t,o=e,a=[],u=a,l=!1;function p(){u===a&&(u=a.slice())}function v(){if(l)throw new Error(c(3));return o}function m(t){if("function"!=typeof t)throw new Error(c(4));if(l)throw new Error(c(5));var e=!0;return p(),u.push(t),function(){if(e){if(l)throw new Error(c(6));e=!1,p();var n=u.indexOf(t);u.splice(n,1),a=null}}}function g(t){if(!d(t))throw new Error(c(7));if(void 0===t.type)throw new Error(c(8));if(l)throw new Error(c(9));try{l=!0,o=i(o,t)}finally{l=!1}for(var e=a=u,n=0;n<e.length;n++){(0,e[n])()}return t}return g({type:f.INIT}),(r={dispatch:g,subscribe:m,getState:v,replaceReducer:function(t){if("function"!=typeof t)throw new Error(c(10));i=t,g({type:f.REPLACE})}})[s]=function(){var t,e=m;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(c(11));function n(){t.next&&t.next(v())}return n(),{unsubscribe:e(n)}}})[s]=function(){return this},t},r}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(c(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return r=p.apply(void 0,o)(n.dispatch),u(u({},n),{},{dispatch:r})}}}},50139:function(t,e,n){"use strict";var r=n(84481),i=n(61688);var o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},a=i.useSyncExternalStore,u=r.useRef,c=r.useEffect,s=r.useMemo,l=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var f=u(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=s((function(){function t(t){if(!c){if(c=!0,a=t,t=r(t),void 0!==i&&d.hasValue){var e=d.value;if(i(e,t))return u=e}return u=t}if(e=u,o(a,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(a=t,u=n)}var a,u,c=!1,s=void 0===n?null:n;return[function(){return t(e())},null===s?void 0:function(){return t(s())}]}),[e,n,r,i]);var h=a(t,f[0],f[1]);return c((function(){d.hasValue=!0,d.value=h}),[h]),l(h),h}},52798:function(t,e,n){"use strict";t.exports=n(50139)}}]);
//# sourceMappingURL=8258-649e1b3b91f2471a62c2.js.map